import { finalizeEvent, generateSecretKey } from "nostr-tools";
import { readFile } from "node:fs/promises";
import { ErrorRelay } from "./ErrorRelay.js";
import { MockRelay } from "./MockRelay.js";
async function jsonlEvents(path) {
  const data = await readFile(path, { encoding: "utf8" });
  return data.split("\n").map((line) => JSON.parse(line));
}
function genEvent(t = {}, sk = generateSecretKey()) {
  const { id, kind, pubkey, tags, content, created_at, sig } = finalizeEvent({
    kind: 255,
    created_at: 0,
    content: "",
    tags: [],
    ...t
  }, sk);
  return { id, kind, pubkey, tags, content, created_at, sig };
}
export {
  ErrorRelay,
  MockRelay,
  genEvent,
  jsonlEvents
};
