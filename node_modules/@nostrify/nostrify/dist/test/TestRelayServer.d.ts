import type { NostrClientMsg, NostrEvent, NostrRelayMsg } from '@nostrify/types';
import { WebSocket } from 'ws';
interface TestRelayServerOpts {
    handleMessage?(socket: WebSocket, msg: NostrClientMsg): Promise<void> | void;
}
export declare class TestRelayServer {
    private port;
    private inited;
    private httpServer;
    private wsServer;
    private opts;
    private connections;
    private controllers;
    private store;
    constructor(opts?: TestRelayServerOpts);
    init(): Promise<void>;
    private setupWebSocketServer;
    send(socket: WebSocket, msg: NostrRelayMsg): void;
    private handleMessage;
    get url(): string;
    close(): Promise<void>;
    open(): Promise<void>;
    event(event: NostrEvent): Promise<void>;
    [Symbol.asyncDispose](): Promise<void>;
    static create(opts?: TestRelayServerOpts): Promise<TestRelayServer>;
}
export {};
//# sourceMappingURL=TestRelayServer.d.ts.map