

> @nostrify/nostrify@0.46.8 test /home/sid/repos/nostrify/packages/nostrify
> node --test "**/*.test.ts"

✔ BunkerURI (2.901722ms)
✔ BunkerURI.fromJSON (0.681727ms)
✔ NBrowserSigner - without extension (2.955361ms)
✔ NBrowserSigner - with extension polyfill (142.479686ms)
✔ NBrowserSigner.nip44 - with extension polyfill (63.176698ms)
✔ NBrowserSigner.nip04 - with extension polyfill (94.046199ms)
✔ NBrowserSigner.getRelays - with extension polyfill (1.225726ms)
✔ NBrowserSigner - missing nip44 support (0.470316ms)
✔ NBrowserSigner - missing nip04 support (0.596869ms)
✔ NBrowserSigner - feature detection (0.692134ms)
✔ NCache (4.463457ms)
✔ NConnectSigner.signEvent with nip04 encryption (264.497854ms)
✔ NConnectSigner.signEvent with nip44 encryption (151.108865ms)
✔ NIP05.lookup (82.449297ms)
✔ NIP05.lookup with invalid values but valid profile pointer (5.343535ms)
✔ NIP05.lookup with invalid document (5.910931ms)
✔ NIP50.parseInput (6.388441ms)
✔ NIP50.parseInput with negated token (0.443007ms)
✔ NIP98.template (3.769298ms)
✔ NIP98.template with payload (18.668676ms)
✔ NIP98.verify (102.562862ms)
✔ NIP98.verify fails with missing header (4.419038ms)
✔ NIP98.verify fails with missing token (2.752191ms)
✔ NIP98.verify fails with invalid token (4.587427ms)
✔ NIP98.verify fails with invalid event (16.989187ms)
✔ NIP98.verify fails with wrong event kind (40.621459ms)
✔ NIP98.verify fails with wrong request URL (41.071101ms)
✔ NIP98.verify fails with wrong request method (62.625645ms)
✔ NIP98.verify fails with expired event (20.760162ms)
✔ NIP98.verify fails with invalid payload (51.97091ms)
✔ NKinds (3.308412ms)
✔ NPool.query (368.093259ms)
✔ NPool.req (266.969001ms)
✔ NPool.event (232.161184ms)
✔ NRelay1.query (280.362725ms)
✔ NRelay1.query mismatched filter (245.542477ms)
✔ NRelay1.req (247.658198ms)
✔ NRelay1.event (216.357493ms)
﹣ NRelay1 backoff (0.334682ms) # SKIP
▶ NRelay1 idleTimeout
  ✔ websocket opens (40.531572ms)
  ✔ websocket closes after idleTimeout (150.405626ms)
  ✔ websocket wakes up during activity (14.544161ms)
✔ NRelay1 idleTimeout (209.795356ms)
✔ NRelay1.count rejects when the server sends CLOSED (6.440892ms)
✔ NRelay1 closes when it receives a binary message (5.03225ms)
✔ n.id (3.950608ms)
✔ n.bech32 (1.817636ms)
✔ n.filter (10.95275ms)
✔ n.event (2.561941ms)
✔ n.metadata (11.862022ms)
✔ NSecSigner (178.164717ms)
✔ NSecSigner.nip44 (31.935079ms)
✔ NSet (19.978352ms)
✔ NSet.add (replaceable) (0.615308ms)
✔ NSet.add (parameterized) (0.985888ms)
✔ NSet.add (deletion) (0.380918ms)
✔ Construct a RelayError from the reason message (1.717692ms)
✔ Throw a new RelayError if the OK message is false (0.750801ms)
✔ LNURL.fromString (7.817616ms)
✔ LNURL.fromLightningAddress (0.932529ms)
✔ LNURL.toString (1.933713ms)
✔ LNURL.getDetails (111.66131ms)
✔ LNURL.getInvoice (13.562812ms)
✔ ErrorRelay (112.209428ms)
✔ MockRelay (3.019126ms)
﹣ BlossomUploader.upload (1.127947ms) # SKIP
﹣ NostrBuildUploader.upload (2.842008ms) # SKIP
✔ CircularSet (2.247513ms)
✔ push, iterate, & close (103.751782ms)
✔ close & reopen (0.982257ms)
✔ aborts with signal (51.656203ms)
✔ already aborted signal in constructor (1.251916ms)
✔ push after abort (0.906129ms)
✔ multiple messages in queue (0.531637ms)
✔ N64 (8.171994ms)
✔ N64.encodeEvent (0.513338ms)
✔ N64.decodeEvent (1.449988ms)
ℹ tests 77
ℹ suites 0
ℹ pass 74
ℹ fail 0
ℹ cancelled 0
ℹ skipped 3
ℹ todo 0
ℹ duration_ms 2192.909865
