import { NBrowserSigner, NConnectSigner, NSecSigner } from "@nostrify/nostrify";
import { nip19 } from "nostr-tools";
class NUser {
  constructor(method, pubkey, signer) {
    this.method = method;
    this.pubkey = pubkey;
    this.signer = signer;
  }
  static fromNsecLogin(login) {
    const sk = nip19.decode(login.data.nsec);
    return new NUser(
      login.type,
      login.pubkey,
      new NSecSigner(sk.data)
    );
  }
  static fromBunkerLogin(login, pool) {
    const clientSk = nip19.decode(login.data.clientNsec);
    const clientSigner = new NSecSigner(clientSk.data);
    return new NUser(
      login.type,
      login.pubkey,
      new NConnectSigner({
        relay: pool.group(login.data.relays),
        pubkey: login.pubkey,
        signer: clientSigner,
        timeout: 6e4
      })
    );
  }
  static fromExtensionLogin(login) {
    return new NUser(
      login.type,
      login.pubkey,
      new NBrowserSigner()
    );
  }
}
export {
  NUser
};
