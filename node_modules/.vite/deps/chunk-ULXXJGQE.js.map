{
  "version": 3,
  "sources": ["../../@nostrify/react/dist/login/NLogin.js", "../../@nostrify/react/dist/login/NostrLoginProvider.js", "../../@nostrify/react/dist/login/NostrLoginContext.js", "../../@nostrify/react/dist/login/useNostrLoginReducer.js", "../../@nostrify/react/dist/login/nostrLoginReducer.js", "../../@nostrify/react/dist/login/NUser.js", "../../@nostrify/react/dist/login/useNostrLogin.js"],
  "sourcesContent": ["import { BunkerURI, NConnectSigner, NSecSigner } from \"@nostrify/nostrify\";\nimport { generateSecretKey, getPublicKey, nip19 } from \"nostr-tools\";\nclass NLogin {\n  id;\n  type;\n  pubkey;\n  createdAt;\n  data;\n  constructor(type, pubkey, data) {\n    this.id = `${type}:${pubkey}`;\n    this.type = type;\n    this.pubkey = pubkey;\n    this.createdAt = (/* @__PURE__ */ new Date()).toISOString();\n    this.data = data;\n  }\n  /** Create a login object from an nsec. */\n  static fromNsec(nsec) {\n    const decoded = nip19.decode(nsec);\n    if (decoded.type !== \"nsec\") {\n      throw new Error(\"Invalid nsec\");\n    }\n    const sk = decoded.data;\n    const pubkey = getPublicKey(sk);\n    return new NLogin(\"nsec\", pubkey, {\n      nsec: nip19.nsecEncode(sk)\n    });\n  }\n  /** Create a login object from a bunker URI. */\n  static async fromBunker(uri, pool) {\n    const { pubkey: bunkerPubkey, secret, relays } = new BunkerURI(uri);\n    if (!relays.length) {\n      throw new Error(\"No relay provided\");\n    }\n    const sk = generateSecretKey();\n    const nsec = nip19.nsecEncode(sk);\n    const clientSigner = new NSecSigner(sk);\n    const signer = new NConnectSigner({\n      relay: pool.group(relays),\n      pubkey: bunkerPubkey,\n      signer: clientSigner,\n      timeout: 6e4\n    });\n    await signer.connect(secret);\n    const pubkey = await signer.getPublicKey();\n    return new NLogin(\"bunker\", pubkey, {\n      bunkerPubkey,\n      clientNsec: nsec,\n      relays\n    });\n  }\n  /** Create a login object from a browser extension. */\n  static async fromExtension() {\n    const windowSigner = globalThis.nostr;\n    if (!windowSigner) {\n      throw new Error(\"Nostr extension is not available\");\n    }\n    const pubkey = await windowSigner.getPublicKey();\n    return new NLogin(\"extension\", pubkey, null);\n  }\n  /** Convert to a JSON-serializable object. */\n  toJSON() {\n    return {\n      id: this.id,\n      type: this.type,\n      pubkey: this.pubkey,\n      createdAt: this.createdAt,\n      data: this.data\n    };\n  }\n}\nexport {\n  NLogin\n};\n", "import { jsx } from \"react/jsx-runtime\";\nimport { NostrLoginContext } from \"./NostrLoginContext.js\";\nimport { useNostrLoginReducer } from \"./useNostrLoginReducer.js\";\nconst NostrLoginProvider = ({ children, storageKey }) => {\n  const [logins, dispatch] = useNostrLoginReducer(storageKey);\n  const value = {\n    logins,\n    addLogin: (login) => dispatch({ type: \"login.add\", login }),\n    removeLogin: (id) => dispatch({ type: \"login.remove\", id }),\n    setLogin: (id) => dispatch({ type: \"login.set\", id }),\n    clearLogins: () => dispatch({ type: \"login.clear\" })\n  };\n  return jsx(NostrLoginContext.Provider, { value, children });\n};\nexport {\n  NostrLoginProvider\n};\n", "import { createContext } from \"react\";\nconst NostrLoginContext = createContext(void 0);\nexport {\n  NostrLoginContext\n};\n", "import { useEffect, useReducer } from \"react\";\nimport { nostrLoginReducer } from \"./nostrLoginReducer.js\";\nfunction useNostrLoginReducer(storageKey) {\n  const [state, dispatch] = useReducer(nostrLoginReducer, [], () => {\n    const stored = localStorage.getItem(storageKey);\n    return stored ? JSON.parse(stored) : [];\n  });\n  useEffect(() => {\n    localStorage.setItem(storageKey, JSON.stringify(state));\n  }, [state]);\n  return [state, dispatch];\n}\nexport {\n  useNostrLoginReducer\n};\n", "function nostrLoginReducer(state, action) {\n  switch (action.type) {\n    case \"login.add\": {\n      const filtered = state.filter((login) => login.id !== action.login.id);\n      return action.set ? [action.login, ...filtered] : [...filtered, action.login];\n    }\n    case \"login.remove\": {\n      return state.filter((login) => login.id !== action.id);\n    }\n    case \"login.set\": {\n      const login = state.find((login2) => login2.id === action.id);\n      if (!login) {\n        return state;\n      }\n      const filtered = state.filter((login2) => login2.id !== action.id);\n      return [login, ...filtered];\n    }\n    case \"login.clear\": {\n      return [];\n    }\n    default: {\n      return state;\n    }\n  }\n}\nexport {\n  nostrLoginReducer\n};\n", "import { NBrowserSigner, NConnectSigner, NSecSigner } from \"@nostrify/nostrify\";\nimport { nip19 } from \"nostr-tools\";\nclass NUser {\n  constructor(method, pubkey, signer) {\n    this.method = method;\n    this.pubkey = pubkey;\n    this.signer = signer;\n  }\n  static fromNsecLogin(login) {\n    const sk = nip19.decode(login.data.nsec);\n    return new NUser(\n      login.type,\n      login.pubkey,\n      new NSecSigner(sk.data)\n    );\n  }\n  static fromBunkerLogin(login, pool) {\n    const clientSk = nip19.decode(login.data.clientNsec);\n    const clientSigner = new NSecSigner(clientSk.data);\n    return new NUser(\n      login.type,\n      login.pubkey,\n      new NConnectSigner({\n        relay: pool.group(login.data.relays),\n        pubkey: login.pubkey,\n        signer: clientSigner,\n        timeout: 6e4\n      })\n    );\n  }\n  static fromExtensionLogin(login) {\n    return new NUser(\n      login.type,\n      login.pubkey,\n      new NBrowserSigner()\n    );\n  }\n}\nexport {\n  NUser\n};\n", "import { useContext } from \"react\";\nimport { NostrLoginContext } from \"./NostrLoginContext.js\";\nfunction useNostrLogin() {\n  const context = useContext(NostrLoginContext);\n  if (!context) {\n    throw new Error(\"useNostrLogin must be used within a NostrLoginProvider\");\n  }\n  return context;\n}\nexport {\n  useNostrLogin\n};\n"],
  "mappings": "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",
  "names": ["import_react", "import_react"]
}
