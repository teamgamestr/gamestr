var OI=Object.defineProperty;var Sb=t=>{throw TypeError(t)};var DI=(t,e,n)=>e in t?OI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Re=(t,e,n)=>DI(t,typeof e!="symbol"?e+"":e,n),ag=(t,e,n)=>e.has(t)||Sb("Cannot "+n);var Y=(t,e,n)=>(ag(t,e,"read from private field"),n?n.call(t):e.get(t)),qe=(t,e,n)=>e.has(t)?Sb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ie=(t,e,n,r)=>(ag(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),st=(t,e,n)=>(ag(t,e,"access private method"),n);var tf=(t,e,n,r)=>({set _(s){Ie(t,e,s,n)},get _(){return Y(t,e,r)}});function LI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Eh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lg={exports:{}},Rc={},cg={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function $I(){if(Nb)return ft;Nb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,v={};function b(z,W,ae){this.props=z,this.context=W,this.refs=v,this.updater=ae||w}b.prototype.isReactComponent={},b.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function N(){}N.prototype=b.prototype;function _(z,W,ae){this.props=z,this.context=W,this.refs=v,this.updater=ae||w}var T=_.prototype=new N;T.constructor=_,S(T,b.prototype),T.isPureReactComponent=!0;var M=Array.isArray,D=Object.prototype.hasOwnProperty,B={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function F(z,W,ae){var de,fe={},we=null,ce=null;if(W!=null)for(de in W.ref!==void 0&&(ce=W.ref),W.key!==void 0&&(we=""+W.key),W)D.call(W,de)&&!O.hasOwnProperty(de)&&(fe[de]=W[de]);var ge=arguments.length-2;if(ge===1)fe.children=ae;else if(1<ge){for(var be=Array(ge),De=0;De<ge;De++)be[De]=arguments[De+2];fe.children=be}if(z&&z.defaultProps)for(de in ge=z.defaultProps,ge)fe[de]===void 0&&(fe[de]=ge[de]);return{$$typeof:t,type:z,key:we,ref:ce,props:fe,_owner:B.current}}function R(z,W){return{$$typeof:t,type:z.type,key:W,ref:z.ref,props:z.props,_owner:z._owner}}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function A(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ae){return W[ae]})}var U=/\/+/g;function K(z,W){return typeof z=="object"&&z!==null&&z.key!=null?A(""+z.key):W.toString(36)}function H(z,W,ae,de,fe){var we=typeof z;(we==="undefined"||we==="boolean")&&(z=null);var ce=!1;if(z===null)ce=!0;else switch(we){case"string":case"number":ce=!0;break;case"object":switch(z.$$typeof){case t:case e:ce=!0}}if(ce)return ce=z,fe=fe(ce),z=de===""?"."+K(ce,0):de,M(fe)?(ae="",z!=null&&(ae=z.replace(U,"$&/")+"/"),H(fe,W,ae,"",function(De){return De})):fe!=null&&(L(fe)&&(fe=R(fe,ae+(!fe.key||ce&&ce.key===fe.key?"":(""+fe.key).replace(U,"$&/")+"/")+z)),W.push(fe)),1;if(ce=0,de=de===""?".":de+":",M(z))for(var ge=0;ge<z.length;ge++){we=z[ge];var be=de+K(we,ge);ce+=H(we,W,ae,be,fe)}else if(be=x(z),typeof be=="function")for(z=be.call(z),ge=0;!(we=z.next()).done;)we=we.value,be=de+K(we,ge++),ce+=H(we,W,ae,be,fe);else if(we==="object")throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ce}function V(z,W,ae){if(z==null)return z;var de=[],fe=0;return H(z,de,"","",function(we){return W.call(ae,we,fe++)}),de}function Q(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=ae)},function(ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=ae)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var te={current:null},Z={transition:null},G={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Z,ReactCurrentOwner:B};function ne(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:V,forEach:function(z,W,ae){V(z,function(){W.apply(this,arguments)},ae)},count:function(z){var W=0;return V(z,function(){W++}),W},toArray:function(z){return V(z,function(W){return W})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ft.Component=b,ft.Fragment=n,ft.Profiler=s,ft.PureComponent=_,ft.StrictMode=r,ft.Suspense=f,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ft.act=ne,ft.cloneElement=function(z,W,ae){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var de=S({},z.props),fe=z.key,we=z.ref,ce=z._owner;if(W!=null){if(W.ref!==void 0&&(we=W.ref,ce=B.current),W.key!==void 0&&(fe=""+W.key),z.type&&z.type.defaultProps)var ge=z.type.defaultProps;for(be in W)D.call(W,be)&&!O.hasOwnProperty(be)&&(de[be]=W[be]===void 0&&ge!==void 0?ge[be]:W[be])}var be=arguments.length-2;if(be===1)de.children=ae;else if(1<be){ge=Array(be);for(var De=0;De<be;De++)ge[De]=arguments[De+2];de.children=ge}return{$$typeof:t,type:z.type,key:fe,ref:we,props:de,_owner:ce}},ft.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:i,_context:z},z.Consumer=z},ft.createElement=F,ft.createFactory=function(z){var W=F.bind(null,z);return W.type=z,W},ft.createRef=function(){return{current:null}},ft.forwardRef=function(z){return{$$typeof:u,render:z}},ft.isValidElement=L,ft.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:Q}},ft.memo=function(z,W){return{$$typeof:h,type:z,compare:W===void 0?null:W}},ft.startTransition=function(z){var W=Z.transition;Z.transition={};try{z()}finally{Z.transition=W}},ft.unstable_act=ne,ft.useCallback=function(z,W){return te.current.useCallback(z,W)},ft.useContext=function(z){return te.current.useContext(z)},ft.useDebugValue=function(){},ft.useDeferredValue=function(z){return te.current.useDeferredValue(z)},ft.useEffect=function(z,W){return te.current.useEffect(z,W)},ft.useId=function(){return te.current.useId()},ft.useImperativeHandle=function(z,W,ae){return te.current.useImperativeHandle(z,W,ae)},ft.useInsertionEffect=function(z,W){return te.current.useInsertionEffect(z,W)},ft.useLayoutEffect=function(z,W){return te.current.useLayoutEffect(z,W)},ft.useMemo=function(z,W){return te.current.useMemo(z,W)},ft.useReducer=function(z,W,ae){return te.current.useReducer(z,W,ae)},ft.useRef=function(z){return te.current.useRef(z)},ft.useState=function(z){return te.current.useState(z)},ft.useSyncExternalStore=function(z,W,ae){return te.current.useSyncExternalStore(z,W,ae)},ft.useTransition=function(){return te.current.useTransition()},ft.version="18.3.1",ft}var kb;function Sh(){return kb||(kb=1,cg.exports=$I()),cg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function BI(){if(Cb)return Rc;Cb=1;var t=Sh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,f,h){var m,p={},x=null,w=null;h!==void 0&&(x=""+h),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(w=f.ref);for(m in f)r.call(f,m)&&!i.hasOwnProperty(m)&&(p[m]=f[m]);if(u&&u.defaultProps)for(m in f=u.defaultProps,f)p[m]===void 0&&(p[m]=f[m]);return{$$typeof:e,type:u,key:x,ref:w,props:p,_owner:s.current}}return Rc.Fragment=n,Rc.jsx=l,Rc.jsxs=l,Rc}var jb;function FI(){return jb||(jb=1,lg.exports=BI()),lg.exports}var c=FI(),nf={},ug={exports:{}},Yn={},dg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function UI(){return _b||(_b=1,function(t){function e(Z,G){var ne=Z.length;Z.push(G);e:for(;0<ne;){var z=ne-1>>>1,W=Z[z];if(0<s(W,G))Z[z]=G,Z[ne]=W,ne=z;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var G=Z[0],ne=Z.pop();if(ne!==G){Z[0]=ne;e:for(var z=0,W=Z.length,ae=W>>>1;z<ae;){var de=2*(z+1)-1,fe=Z[de],we=de+1,ce=Z[we];if(0>s(fe,ne))we<W&&0>s(ce,fe)?(Z[z]=ce,Z[we]=ne,z=we):(Z[z]=fe,Z[de]=ne,z=de);else if(we<W&&0>s(ce,ne))Z[z]=ce,Z[we]=ne,z=we;else break e}}return G}function s(Z,G){var ne=Z.sortIndex-G.sortIndex;return ne!==0?ne:Z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,p=null,x=3,w=!1,S=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Z){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=Z)r(h),G.sortIndex=G.expirationTime,e(f,G);else break;G=n(h)}}function M(Z){if(v=!1,T(Z),!S)if(n(f)!==null)S=!0,Q(D);else{var G=n(h);G!==null&&te(M,G.startTime-Z)}}function D(Z,G){S=!1,v&&(v=!1,N(F),F=-1),w=!0;var ne=x;try{for(T(G),p=n(f);p!==null&&(!(p.expirationTime>G)||Z&&!A());){var z=p.callback;if(typeof z=="function"){p.callback=null,x=p.priorityLevel;var W=z(p.expirationTime<=G);G=t.unstable_now(),typeof W=="function"?p.callback=W:p===n(f)&&r(f),T(G)}else r(f);p=n(f)}if(p!==null)var ae=!0;else{var de=n(h);de!==null&&te(M,de.startTime-G),ae=!1}return ae}finally{p=null,x=ne,w=!1}}var B=!1,O=null,F=-1,R=5,L=-1;function A(){return!(t.unstable_now()-L<R)}function U(){if(O!==null){var Z=t.unstable_now();L=Z;var G=!0;try{G=O(!0,Z)}finally{G?K():(B=!1,O=null)}}else B=!1}var K;if(typeof _=="function")K=function(){_(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=U,K=function(){V.postMessage(null)}}else K=function(){b(U,0)};function Q(Z){O=Z,B||(B=!0,K())}function te(Z,G){F=b(function(){Z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,Q(D))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Z){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var ne=x;x=G;try{return Z()}finally{x=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,G){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ne=x;x=Z;try{return G()}finally{x=ne}},t.unstable_scheduleCallback=function(Z,G,ne){var z=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,Z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,Z={id:m++,callback:G,priorityLevel:Z,startTime:ne,expirationTime:W,sortIndex:-1},ne>z?(Z.sortIndex=ne,e(h,Z),n(f)===null&&Z===n(h)&&(v?(N(F),F=-1):v=!0,te(M,ne-z))):(Z.sortIndex=W,e(f,Z),S||w||(S=!0,Q(D))),Z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(Z){var G=x;return function(){var ne=x;x=G;try{return Z.apply(this,arguments)}finally{x=ne}}}}(fg)),fg}var Tb;function zI(){return Tb||(Tb=1,dg.exports=UI()),dg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function WI(){if(Pb)return Yn;Pb=1;var t=Sh(),e=zI();function n(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,a){l(o,a),l(o+"Capture",a)}function l(o,a){for(s[o]=a,o=0;o<a.length;o++)r.add(a[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function x(o){return f.call(p,o)?!0:f.call(m,o)?!1:h.test(o)?p[o]=!0:(m[o]=!0,!1)}function w(o,a,d,g){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,a,d,g){if(a===null||typeof a>"u"||w(o,a,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v(o,a,d,g,E,C,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=E,this.mustUseProperty=d,this.propertyName=o,this.type=a,this.sanitizeURL=C,this.removeEmptyString=I}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){b[o]=new v(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];b[a]=new v(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){b[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){b[o]=new v(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){b[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){b[o]=new v(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){b[o]=new v(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){b[o]=new v(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){b[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function _(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(N,_);b[a]=new v(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(N,_);b[a]=new v(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(N,_);b[a]=new v(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){b[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)}),b.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){b[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function T(o,a,d,g){var E=b.hasOwnProperty(a)?b[a]:null;(E!==null?E.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,d,E,g)&&(d=null),g||E===null?x(a)&&(d===null?o.removeAttribute(a):o.setAttribute(a,""+d)):E.mustUseProperty?o[E.propertyName]=d===null?E.type===3?!1:"":d:(a=E.attributeName,g=E.attributeNamespace,d===null?o.removeAttribute(a):(E=E.type,d=E===3||E===4&&d===!0?"":""+d,g?o.setAttributeNS(g,a,d):o.setAttribute(a,d))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),B=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),A=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),Z=Symbol.iterator;function G(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var ne=Object.assign,z;function W(o){if(z===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+o}var ae=!1;function de(o,a){if(!o||ae)return"";ae=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ie){var g=ie}Reflect.construct(o,[],a)}else{try{a.call()}catch(ie){g=ie}o.call(a.prototype)}else{try{throw Error()}catch(ie){g=ie}o()}}catch(ie){if(ie&&g&&typeof ie.stack=="string"){for(var E=ie.stack.split(`
`),C=g.stack.split(`
`),I=E.length-1,q=C.length-1;1<=I&&0<=q&&E[I]!==C[q];)q--;for(;1<=I&&0<=q;I--,q--)if(E[I]!==C[q]){if(I!==1||q!==1)do if(I--,q--,0>q||E[I]!==C[q]){var J=`
`+E[I].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=I&&0<=q);break}}}finally{ae=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?W(o):""}function fe(o){switch(o.tag){case 5:return W(o.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return o=de(o.type,!1),o;case 11:return o=de(o.type.render,!1),o;case 1:return o=de(o.type,!0),o;default:return""}}function we(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case O:return"Fragment";case B:return"Portal";case R:return"Profiler";case F:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case A:return(o.displayName||"Context")+".Consumer";case L:return(o._context.displayName||"Context")+".Provider";case U:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case V:return a=o.displayName||null,a!==null?a:we(o.type)||"Memo";case Q:a=o._payload,o=o._init;try{return we(o(a))}catch{}}return null}function ce(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ge(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function be(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function De(o){var a=be(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),g=""+o[a];if(!o.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,C=d.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return E.call(this)},set:function(I){g=""+I,C.call(this,I)}}),Object.defineProperty(o,a,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(I){g=""+I},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function Ze(o){o._valueTracker||(o._valueTracker=De(o))}function Qe(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return o&&(g=be(o)?o.checked?"true":"false":o.value),o=g,o!==d?(a.setValue(o),!0):!1}function Te(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function yt(o,a){var d=a.checked;return ne({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function tn(o,a){var d=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;d=ge(a.value!=null?a.value:d),o._wrapperState={initialChecked:g,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function nn(o,a){a=a.checked,a!=null&&T(o,"checked",a,!1)}function xn(o,a){nn(o,a);var d=ge(a.value),g=a.type;if(d!=null)g==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?le(o,a.type,d):a.hasOwnProperty("defaultValue")&&le(o,a.type,ge(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function Gr(o,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,d||a===o.value||(o.value=a),o.defaultValue=a}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function le(o,a,d){(a!=="number"||Te(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var he=Array.isArray;function je(o,a,d,g){if(o=o.options,a){a={};for(var E=0;E<d.length;E++)a["$"+d[E]]=!0;for(d=0;d<o.length;d++)E=a.hasOwnProperty("$"+o[d].value),o[d].selected!==E&&(o[d].selected=E),E&&g&&(o[d].defaultSelected=!0)}else{for(d=""+ge(d),a=null,E=0;E<o.length;E++){if(o[E].value===d){o[E].selected=!0,g&&(o[E].defaultSelected=!0);return}a!==null||o[E].disabled||(a=o[E])}a!==null&&(a.selected=!0)}}function pe(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Pe(o,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(he(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}o._wrapperState={initialValue:ge(d)}}function ke(o,a){var d=ge(a.value),g=ge(a.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),a.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),g!=null&&(o.defaultValue=""+g)}function Be(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function Ye(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?Ye(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var k,j=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,g,E){MSApp.execUnsafeLocalFunction(function(){return o(a,d,g,E)})}:o}(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(k=k||document.createElement("div"),k.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=k.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function $(o,a){if(a){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=a;return}}o.textContent=a}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},se=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(o){se.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),X[a]=X[o]})});function ue(o,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||X.hasOwnProperty(o)&&X[o]?(""+a).trim():a+"px"}function Xe(o,a){o=o.style;for(var d in a)if(a.hasOwnProperty(d)){var g=d.indexOf("--")===0,E=ue(d,a[d],g);d==="float"&&(d="cssFloat"),g?o.setProperty(d,E):o[d]=E}}var pt=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function at(o,a){if(a){if(pt[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function kt(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ce=null;function dt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var mt=null,rt=null,vt=null;function On(o){if(o=gc(o)){if(typeof mt!="function")throw Error(n(280));var a=o.stateNode;a&&(a=gd(a),mt(o.stateNode,o.type,a))}}function fn(o){rt?vt?vt.push(o):vt=[o]:rt=o}function Nn(){if(rt){var o=rt,a=vt;if(vt=rt=null,On(o),a)for(o=0;o<a.length;o++)On(a[o])}}function Wn(o,a){return o(a)}function Yr(){}var dr=!1;function sr(o,a,d){if(dr)return o(a,d);dr=!0;try{return Wn(o,a,d)}finally{dr=!1,(rt!==null||vt!==null)&&(Yr(),Nn())}}function Qr(o,a){var d=o.stateNode;if(d===null)return null;var g=gd(d);if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var va=!1;if(u)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){va=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{va=!1}function U4(o,a,d,g,E,C,I,q,J){var ie=Array.prototype.slice.call(arguments,3);try{a.apply(d,ie)}catch(ye){this.onError(ye)}}var Zl=!1,Gu=null,Yu=!1,Cp=null,z4={onError:function(o){Zl=!0,Gu=o}};function W4(o,a,d,g,E,C,I,q,J){Zl=!1,Gu=null,U4.apply(z4,arguments)}function H4(o,a,d,g,E,C,I,q,J){if(W4.apply(this,arguments),Zl){if(Zl){var ie=Gu;Zl=!1,Gu=null}else throw Error(n(198));Yu||(Yu=!0,Cp=ie)}}function xi(o){var a=o,d=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(d=a.return),o=a.return;while(o)}return a.tag===3?d:null}function qx(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function Kx(o){if(xi(o)!==o)throw Error(n(188))}function V4(o){var a=o.alternate;if(!a){if(a=xi(o),a===null)throw Error(n(188));return a!==o?null:o}for(var d=o,g=a;;){var E=d.return;if(E===null)break;var C=E.alternate;if(C===null){if(g=E.return,g!==null){d=g;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===d)return Kx(E),o;if(C===g)return Kx(E),a;C=C.sibling}throw Error(n(188))}if(d.return!==g.return)d=E,g=C;else{for(var I=!1,q=E.child;q;){if(q===d){I=!0,d=E,g=C;break}if(q===g){I=!0,g=E,d=C;break}q=q.sibling}if(!I){for(q=C.child;q;){if(q===d){I=!0,d=C,g=E;break}if(q===g){I=!0,g=C,d=E;break}q=q.sibling}if(!I)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?o:a}function Gx(o){return o=V4(o),o!==null?Yx(o):null}function Yx(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=Yx(o);if(a!==null)return a;o=o.sibling}return null}var Qx=e.unstable_scheduleCallback,Zx=e.unstable_cancelCallback,q4=e.unstable_shouldYield,K4=e.unstable_requestPaint,Yt=e.unstable_now,G4=e.unstable_getCurrentPriorityLevel,jp=e.unstable_ImmediatePriority,Xx=e.unstable_UserBlockingPriority,Qu=e.unstable_NormalPriority,Y4=e.unstable_LowPriority,Jx=e.unstable_IdlePriority,Zu=null,Zr=null;function Q4(o){if(Zr&&typeof Zr.onCommitFiberRoot=="function")try{Zr.onCommitFiberRoot(Zu,o,void 0,(o.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:J4,Z4=Math.log,X4=Math.LN2;function J4(o){return o>>>=0,o===0?32:31-(Z4(o)/X4|0)|0}var Xu=64,Ju=4194304;function Xl(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ed(o,a){var d=o.pendingLanes;if(d===0)return 0;var g=0,E=o.suspendedLanes,C=o.pingedLanes,I=d&268435455;if(I!==0){var q=I&~E;q!==0?g=Xl(q):(C&=I,C!==0&&(g=Xl(C)))}else I=d&~E,I!==0?g=Xl(I):C!==0&&(g=Xl(C));if(g===0)return 0;if(a!==0&&a!==g&&(a&E)===0&&(E=g&-g,C=a&-a,E>=C||E===16&&(C&4194240)!==0))return a;if((g&4)!==0&&(g|=d&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=g;0<a;)d=31-Tr(a),E=1<<d,g|=o[d],a&=~E;return g}function eA(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tA(o,a){for(var d=o.suspendedLanes,g=o.pingedLanes,E=o.expirationTimes,C=o.pendingLanes;0<C;){var I=31-Tr(C),q=1<<I,J=E[I];J===-1?((q&d)===0||(q&g)!==0)&&(E[I]=eA(q,a)):J<=a&&(o.expiredLanes|=q),C&=~q}}function _p(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ew(){var o=Xu;return Xu<<=1,(Xu&4194240)===0&&(Xu=64),o}function Tp(o){for(var a=[],d=0;31>d;d++)a.push(o);return a}function Jl(o,a,d){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Tr(a),o[a]=d}function nA(o,a){var d=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<d;){var E=31-Tr(d),C=1<<E;a[E]=0,g[E]=-1,o[E]=-1,d&=~C}}function Pp(o,a){var d=o.entangledLanes|=a;for(o=o.entanglements;d;){var g=31-Tr(d),E=1<<g;E&a|o[g]&a&&(o[g]|=a),d&=~E}}var _t=0;function tw(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var nw,Rp,rw,sw,ow,Ap=!1,td=[],ro=null,so=null,oo=null,ec=new Map,tc=new Map,io=[],rA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iw(o,a){switch(o){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":ec.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(a.pointerId)}}function nc(o,a,d,g,E,C){return o===null||o.nativeEvent!==C?(o={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:C,targetContainers:[E]},a!==null&&(a=gc(a),a!==null&&Rp(a)),o):(o.eventSystemFlags|=g,a=o.targetContainers,E!==null&&a.indexOf(E)===-1&&a.push(E),o)}function sA(o,a,d,g,E){switch(a){case"focusin":return ro=nc(ro,o,a,d,g,E),!0;case"dragenter":return so=nc(so,o,a,d,g,E),!0;case"mouseover":return oo=nc(oo,o,a,d,g,E),!0;case"pointerover":var C=E.pointerId;return ec.set(C,nc(ec.get(C)||null,o,a,d,g,E)),!0;case"gotpointercapture":return C=E.pointerId,tc.set(C,nc(tc.get(C)||null,o,a,d,g,E)),!0}return!1}function aw(o){var a=wi(o.target);if(a!==null){var d=xi(a);if(d!==null){if(a=d.tag,a===13){if(a=qx(d),a!==null){o.blockedOn=a,ow(o.priority,function(){rw(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function nd(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var d=Mp(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var g=new d.constructor(d.type,d);Ce=g,d.target.dispatchEvent(g),Ce=null}else return a=gc(d),a!==null&&Rp(a),o.blockedOn=d,!1;a.shift()}return!0}function lw(o,a,d){nd(o)&&d.delete(a)}function oA(){Ap=!1,ro!==null&&nd(ro)&&(ro=null),so!==null&&nd(so)&&(so=null),oo!==null&&nd(oo)&&(oo=null),ec.forEach(lw),tc.forEach(lw)}function rc(o,a){o.blockedOn===a&&(o.blockedOn=null,Ap||(Ap=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oA)))}function sc(o){function a(E){return rc(E,o)}if(0<td.length){rc(td[0],o);for(var d=1;d<td.length;d++){var g=td[d];g.blockedOn===o&&(g.blockedOn=null)}}for(ro!==null&&rc(ro,o),so!==null&&rc(so,o),oo!==null&&rc(oo,o),ec.forEach(a),tc.forEach(a),d=0;d<io.length;d++)g=io[d],g.blockedOn===o&&(g.blockedOn=null);for(;0<io.length&&(d=io[0],d.blockedOn===null);)aw(d),d.blockedOn===null&&io.shift()}var xa=M.ReactCurrentBatchConfig,rd=!0;function iA(o,a,d,g){var E=_t,C=xa.transition;xa.transition=null;try{_t=1,Ip(o,a,d,g)}finally{_t=E,xa.transition=C}}function aA(o,a,d,g){var E=_t,C=xa.transition;xa.transition=null;try{_t=4,Ip(o,a,d,g)}finally{_t=E,xa.transition=C}}function Ip(o,a,d,g){if(rd){var E=Mp(o,a,d,g);if(E===null)Zp(o,a,g,sd,d),iw(o,g);else if(sA(E,o,a,d,g))g.stopPropagation();else if(iw(o,g),a&4&&-1<rA.indexOf(o)){for(;E!==null;){var C=gc(E);if(C!==null&&nw(C),C=Mp(o,a,d,g),C===null&&Zp(o,a,g,sd,d),C===E)break;E=C}E!==null&&g.stopPropagation()}else Zp(o,a,g,null,d)}}var sd=null;function Mp(o,a,d,g){if(sd=null,o=dt(g),o=wi(o),o!==null)if(a=xi(o),a===null)o=null;else if(d=a.tag,d===13){if(o=qx(a),o!==null)return o;o=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return sd=o,null}function cw(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G4()){case jp:return 1;case Xx:return 4;case Qu:case Y4:return 16;case Jx:return 536870912;default:return 16}default:return 16}}var ao=null,Op=null,od=null;function uw(){if(od)return od;var o,a=Op,d=a.length,g,E="value"in ao?ao.value:ao.textContent,C=E.length;for(o=0;o<d&&a[o]===E[o];o++);var I=d-o;for(g=1;g<=I&&a[d-g]===E[C-g];g++);return od=E.slice(o,1<g?1-g:void 0)}function id(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function ad(){return!0}function dw(){return!1}function or(o){function a(d,g,E,C,I){this._reactName=d,this._targetInst=E,this.type=g,this.nativeEvent=C,this.target=I,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(d=o[q],this[q]=d?d(C):C[q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?ad:dw,this.isPropagationStopped=dw,this}return ne(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),a}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dp=or(wa),oc=ne({},wa,{view:0,detail:0}),lA=or(oc),Lp,$p,ic,ld=ne({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ic&&(ic&&o.type==="mousemove"?(Lp=o.screenX-ic.screenX,$p=o.screenY-ic.screenY):$p=Lp=0,ic=o),Lp)},movementY:function(o){return"movementY"in o?o.movementY:$p}}),fw=or(ld),cA=ne({},ld,{dataTransfer:0}),uA=or(cA),dA=ne({},oc,{relatedTarget:0}),Bp=or(dA),fA=ne({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),hA=or(fA),pA=ne({},wa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),mA=or(pA),gA=ne({},wa,{data:0}),hw=or(gA),yA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wA(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=xA[o])?!!a[o]:!1}function Fp(){return wA}var bA=ne({},oc,{key:function(o){if(o.key){var a=yA[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=id(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?vA[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fp,charCode:function(o){return o.type==="keypress"?id(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?id(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),EA=or(bA),SA=ne({},ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pw=or(SA),NA=ne({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fp}),kA=or(NA),CA=ne({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),jA=or(CA),_A=ne({},ld,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=or(_A),PA=[9,13,27,32],Up=u&&"CompositionEvent"in window,ac=null;u&&"documentMode"in document&&(ac=document.documentMode);var RA=u&&"TextEvent"in window&&!ac,mw=u&&(!Up||ac&&8<ac&&11>=ac),gw=" ",yw=!1;function vw(o,a){switch(o){case"keyup":return PA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ba=!1;function AA(o,a){switch(o){case"compositionend":return xw(a);case"keypress":return a.which!==32?null:(yw=!0,gw);case"textInput":return o=a.data,o===gw&&yw?null:o;default:return null}}function IA(o,a){if(ba)return o==="compositionend"||!Up&&vw(o,a)?(o=uw(),od=Op=ao=null,ba=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return mw&&a.locale!=="ko"?null:a.data;default:return null}}var MA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!MA[o.type]:a==="textarea"}function bw(o,a,d,g){fn(g),a=hd(a,"onChange"),0<a.length&&(d=new Dp("onChange","change",null,d,g),o.push({event:d,listeners:a}))}var lc=null,cc=null;function OA(o){Bw(o,0)}function cd(o){var a=Ca(o);if(Qe(a))return o}function DA(o,a){if(o==="change")return a}var Ew=!1;if(u){var zp;if(u){var Wp="oninput"in document;if(!Wp){var Sw=document.createElement("div");Sw.setAttribute("oninput","return;"),Wp=typeof Sw.oninput=="function"}zp=Wp}else zp=!1;Ew=zp&&(!document.documentMode||9<document.documentMode)}function Nw(){lc&&(lc.detachEvent("onpropertychange",kw),cc=lc=null)}function kw(o){if(o.propertyName==="value"&&cd(cc)){var a=[];bw(a,cc,o,dt(o)),sr(OA,a)}}function LA(o,a,d){o==="focusin"?(Nw(),lc=a,cc=d,lc.attachEvent("onpropertychange",kw)):o==="focusout"&&Nw()}function $A(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return cd(cc)}function BA(o,a){if(o==="click")return cd(a)}function FA(o,a){if(o==="input"||o==="change")return cd(a)}function UA(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Pr=typeof Object.is=="function"?Object.is:UA;function uc(o,a){if(Pr(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var d=Object.keys(o),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var E=d[g];if(!f.call(a,E)||!Pr(o[E],a[E]))return!1}return!0}function Cw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function jw(o,a){var d=Cw(o);o=0;for(var g;d;){if(d.nodeType===3){if(g=o+d.textContent.length,o<=a&&g>=a)return{node:d,offset:a-o};o=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Cw(d)}}function _w(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?_w(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function Tw(){for(var o=window,a=Te();a instanceof o.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)o=a.contentWindow;else break;a=Te(o.document)}return a}function Hp(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function zA(o){var a=Tw(),d=o.focusedElem,g=o.selectionRange;if(a!==d&&d&&d.ownerDocument&&_w(d.ownerDocument.documentElement,d)){if(g!==null&&Hp(d)){if(a=g.start,o=g.end,o===void 0&&(o=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(o,d.value.length);else if(o=(a=d.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var E=d.textContent.length,C=Math.min(g.start,E);g=g.end===void 0?C:Math.min(g.end,E),!o.extend&&C>g&&(E=g,g=C,C=E),E=jw(d,C);var I=jw(d,g);E&&I&&(o.rangeCount!==1||o.anchorNode!==E.node||o.anchorOffset!==E.offset||o.focusNode!==I.node||o.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(E.node,E.offset),o.removeAllRanges(),C>g?(o.addRange(a),o.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),o.addRange(a)))}}for(a=[],o=d;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)o=a[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var WA=u&&"documentMode"in document&&11>=document.documentMode,Ea=null,Vp=null,dc=null,qp=!1;function Pw(o,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;qp||Ea==null||Ea!==Te(g)||(g=Ea,"selectionStart"in g&&Hp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),dc&&uc(dc,g)||(dc=g,g=hd(Vp,"onSelect"),0<g.length&&(a=new Dp("onSelect","select",null,a,d),o.push({event:a,listeners:g}),a.target=Ea)))}function ud(o,a){var d={};return d[o.toLowerCase()]=a.toLowerCase(),d["Webkit"+o]="webkit"+a,d["Moz"+o]="moz"+a,d}var Sa={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},Kp={},Rw={};u&&(Rw=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function dd(o){if(Kp[o])return Kp[o];if(!Sa[o])return o;var a=Sa[o],d;for(d in a)if(a.hasOwnProperty(d)&&d in Rw)return Kp[o]=a[d];return o}var Aw=dd("animationend"),Iw=dd("animationiteration"),Mw=dd("animationstart"),Ow=dd("transitionend"),Dw=new Map,Lw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lo(o,a){Dw.set(o,a),i(a,[o])}for(var Gp=0;Gp<Lw.length;Gp++){var Yp=Lw[Gp],HA=Yp.toLowerCase(),VA=Yp[0].toUpperCase()+Yp.slice(1);lo(HA,"on"+VA)}lo(Aw,"onAnimationEnd"),lo(Iw,"onAnimationIteration"),lo(Mw,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(Ow,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qA=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function $w(o,a,d){var g=o.type||"unknown-event";o.currentTarget=d,H4(g,a,void 0,o),o.currentTarget=null}function Bw(o,a){a=(a&4)!==0;for(var d=0;d<o.length;d++){var g=o[d],E=g.event;g=g.listeners;e:{var C=void 0;if(a)for(var I=g.length-1;0<=I;I--){var q=g[I],J=q.instance,ie=q.currentTarget;if(q=q.listener,J!==C&&E.isPropagationStopped())break e;$w(E,q,ie),C=J}else for(I=0;I<g.length;I++){if(q=g[I],J=q.instance,ie=q.currentTarget,q=q.listener,J!==C&&E.isPropagationStopped())break e;$w(E,q,ie),C=J}}}if(Yu)throw o=Cp,Yu=!1,Cp=null,o}function Mt(o,a){var d=a[rm];d===void 0&&(d=a[rm]=new Set);var g=o+"__bubble";d.has(g)||(Fw(a,o,2,!1),d.add(g))}function Qp(o,a,d){var g=0;a&&(g|=4),Fw(d,o,g,a)}var fd="_reactListening"+Math.random().toString(36).slice(2);function hc(o){if(!o[fd]){o[fd]=!0,r.forEach(function(d){d!=="selectionchange"&&(qA.has(d)||Qp(d,!1,o),Qp(d,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[fd]||(a[fd]=!0,Qp("selectionchange",!1,a))}}function Fw(o,a,d,g){switch(cw(a)){case 1:var E=iA;break;case 4:E=aA;break;default:E=Ip}d=E.bind(null,a,d,o),E=void 0,!va||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(E=!0),g?E!==void 0?o.addEventListener(a,d,{capture:!0,passive:E}):o.addEventListener(a,d,!0):E!==void 0?o.addEventListener(a,d,{passive:E}):o.addEventListener(a,d,!1)}function Zp(o,a,d,g,E){var C=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var q=g.stateNode.containerInfo;if(q===E||q.nodeType===8&&q.parentNode===E)break;if(I===4)for(I=g.return;I!==null;){var J=I.tag;if((J===3||J===4)&&(J=I.stateNode.containerInfo,J===E||J.nodeType===8&&J.parentNode===E))return;I=I.return}for(;q!==null;){if(I=wi(q),I===null)return;if(J=I.tag,J===5||J===6){g=C=I;continue e}q=q.parentNode}}g=g.return}sr(function(){var ie=C,ye=dt(d),ve=[];e:{var me=Dw.get(o);if(me!==void 0){var Oe=Dp,Fe=o;switch(o){case"keypress":if(id(d)===0)break e;case"keydown":case"keyup":Oe=EA;break;case"focusin":Fe="focus",Oe=Bp;break;case"focusout":Fe="blur",Oe=Bp;break;case"beforeblur":case"afterblur":Oe=Bp;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=fw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=uA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=kA;break;case Aw:case Iw:case Mw:Oe=hA;break;case Ow:Oe=jA;break;case"scroll":Oe=lA;break;case"wheel":Oe=TA;break;case"copy":case"cut":case"paste":Oe=mA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=pw}var ze=(a&4)!==0,Qt=!ze&&o==="scroll",re=ze?me!==null?me+"Capture":null:me;ze=[];for(var ee=ie,oe;ee!==null;){oe=ee;var Ne=oe.stateNode;if(oe.tag===5&&Ne!==null&&(oe=Ne,re!==null&&(Ne=Qr(ee,re),Ne!=null&&ze.push(pc(ee,Ne,oe)))),Qt)break;ee=ee.return}0<ze.length&&(me=new Oe(me,Fe,null,d,ye),ve.push({event:me,listeners:ze}))}}if((a&7)===0){e:{if(me=o==="mouseover"||o==="pointerover",Oe=o==="mouseout"||o==="pointerout",me&&d!==Ce&&(Fe=d.relatedTarget||d.fromElement)&&(wi(Fe)||Fe[Es]))break e;if((Oe||me)&&(me=ye.window===ye?ye:(me=ye.ownerDocument)?me.defaultView||me.parentWindow:window,Oe?(Fe=d.relatedTarget||d.toElement,Oe=ie,Fe=Fe?wi(Fe):null,Fe!==null&&(Qt=xi(Fe),Fe!==Qt||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(Oe=null,Fe=ie),Oe!==Fe)){if(ze=fw,Ne="onMouseLeave",re="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(ze=pw,Ne="onPointerLeave",re="onPointerEnter",ee="pointer"),Qt=Oe==null?me:Ca(Oe),oe=Fe==null?me:Ca(Fe),me=new ze(Ne,ee+"leave",Oe,d,ye),me.target=Qt,me.relatedTarget=oe,Ne=null,wi(ye)===ie&&(ze=new ze(re,ee+"enter",Fe,d,ye),ze.target=oe,ze.relatedTarget=Qt,Ne=ze),Qt=Ne,Oe&&Fe)t:{for(ze=Oe,re=Fe,ee=0,oe=ze;oe;oe=Na(oe))ee++;for(oe=0,Ne=re;Ne;Ne=Na(Ne))oe++;for(;0<ee-oe;)ze=Na(ze),ee--;for(;0<oe-ee;)re=Na(re),oe--;for(;ee--;){if(ze===re||re!==null&&ze===re.alternate)break t;ze=Na(ze),re=Na(re)}ze=null}else ze=null;Oe!==null&&Uw(ve,me,Oe,ze,!1),Fe!==null&&Qt!==null&&Uw(ve,Qt,Fe,ze,!0)}}e:{if(me=ie?Ca(ie):window,Oe=me.nodeName&&me.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&me.type==="file")var He=DA;else if(ww(me))if(Ew)He=FA;else{He=$A;var Ke=LA}else(Oe=me.nodeName)&&Oe.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(He=BA);if(He&&(He=He(o,ie))){bw(ve,He,d,ye);break e}Ke&&Ke(o,me,ie),o==="focusout"&&(Ke=me._wrapperState)&&Ke.controlled&&me.type==="number"&&le(me,"number",me.value)}switch(Ke=ie?Ca(ie):window,o){case"focusin":(ww(Ke)||Ke.contentEditable==="true")&&(Ea=Ke,Vp=ie,dc=null);break;case"focusout":dc=Vp=Ea=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,Pw(ve,d,ye);break;case"selectionchange":if(WA)break;case"keydown":case"keyup":Pw(ve,d,ye)}var Ge;if(Up)e:{switch(o){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else ba?vw(o,d)&&(et="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(et="onCompositionStart");et&&(mw&&d.locale!=="ko"&&(ba||et!=="onCompositionStart"?et==="onCompositionEnd"&&ba&&(Ge=uw()):(ao=ye,Op="value"in ao?ao.value:ao.textContent,ba=!0)),Ke=hd(ie,et),0<Ke.length&&(et=new hw(et,o,null,d,ye),ve.push({event:et,listeners:Ke}),Ge?et.data=Ge:(Ge=xw(d),Ge!==null&&(et.data=Ge)))),(Ge=RA?AA(o,d):IA(o,d))&&(ie=hd(ie,"onBeforeInput"),0<ie.length&&(ye=new hw("onBeforeInput","beforeinput",null,d,ye),ve.push({event:ye,listeners:ie}),ye.data=Ge))}Bw(ve,a)})}function pc(o,a,d){return{instance:o,listener:a,currentTarget:d}}function hd(o,a){for(var d=a+"Capture",g=[];o!==null;){var E=o,C=E.stateNode;E.tag===5&&C!==null&&(E=C,C=Qr(o,d),C!=null&&g.unshift(pc(o,C,E)),C=Qr(o,a),C!=null&&g.push(pc(o,C,E))),o=o.return}return g}function Na(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Uw(o,a,d,g,E){for(var C=a._reactName,I=[];d!==null&&d!==g;){var q=d,J=q.alternate,ie=q.stateNode;if(J!==null&&J===g)break;q.tag===5&&ie!==null&&(q=ie,E?(J=Qr(d,C),J!=null&&I.unshift(pc(d,J,q))):E||(J=Qr(d,C),J!=null&&I.push(pc(d,J,q)))),d=d.return}I.length!==0&&o.push({event:a,listeners:I})}var KA=/\r\n?/g,GA=/\u0000|\uFFFD/g;function zw(o){return(typeof o=="string"?o:""+o).replace(KA,`
`).replace(GA,"")}function pd(o,a,d){if(a=zw(a),zw(o)!==a&&d)throw Error(n(425))}function md(){}var Xp=null,Jp=null;function em(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,YA=typeof clearTimeout=="function"?clearTimeout:void 0,Ww=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof Ww<"u"?function(o){return Ww.resolve(null).then(o).catch(ZA)}:tm;function ZA(o){setTimeout(function(){throw o})}function nm(o,a){var d=a,g=0;do{var E=d.nextSibling;if(o.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"){if(g===0){o.removeChild(E),sc(a);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=E}while(d);sc(a)}function co(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function Hw(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return o;a--}else d==="/$"&&a++}o=o.previousSibling}return null}var ka=Math.random().toString(36).slice(2),Xr="__reactFiber$"+ka,mc="__reactProps$"+ka,Es="__reactContainer$"+ka,rm="__reactEvents$"+ka,XA="__reactListeners$"+ka,JA="__reactHandles$"+ka;function wi(o){var a=o[Xr];if(a)return a;for(var d=o.parentNode;d;){if(a=d[Es]||d[Xr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(o=Hw(o);o!==null;){if(d=o[Xr])return d;o=Hw(o)}return a}o=d,d=o.parentNode}return null}function gc(o){return o=o[Xr]||o[Es],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ca(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function gd(o){return o[mc]||null}var sm=[],ja=-1;function uo(o){return{current:o}}function Ot(o){0>ja||(o.current=sm[ja],sm[ja]=null,ja--)}function It(o,a){ja++,sm[ja]=o.current,o.current=a}var fo={},kn=uo(fo),Hn=uo(!1),bi=fo;function _a(o,a){var d=o.type.contextTypes;if(!d)return fo;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var E={},C;for(C in d)E[C]=a[C];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=E),E}function Vn(o){return o=o.childContextTypes,o!=null}function yd(){Ot(Hn),Ot(kn)}function Vw(o,a,d){if(kn.current!==fo)throw Error(n(168));It(kn,a),It(Hn,d)}function qw(o,a,d){var g=o.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var E in g)if(!(E in a))throw Error(n(108,ce(o)||"Unknown",E));return ne({},d,g)}function vd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||fo,bi=kn.current,It(kn,o),It(Hn,Hn.current),!0}function Kw(o,a,d){var g=o.stateNode;if(!g)throw Error(n(169));d?(o=qw(o,a,bi),g.__reactInternalMemoizedMergedChildContext=o,Ot(Hn),Ot(kn),It(kn,o)):Ot(Hn),It(Hn,d)}var Ss=null,xd=!1,om=!1;function Gw(o){Ss===null?Ss=[o]:Ss.push(o)}function eI(o){xd=!0,Gw(o)}function ho(){if(!om&&Ss!==null){om=!0;var o=0,a=_t;try{var d=Ss;for(_t=1;o<d.length;o++){var g=d[o];do g=g(!0);while(g!==null)}Ss=null,xd=!1}catch(E){throw Ss!==null&&(Ss=Ss.slice(o+1)),Qx(jp,ho),E}finally{_t=a,om=!1}}return null}var Ta=[],Pa=0,wd=null,bd=0,fr=[],hr=0,Ei=null,Ns=1,ks="";function Si(o,a){Ta[Pa++]=bd,Ta[Pa++]=wd,wd=o,bd=a}function Yw(o,a,d){fr[hr++]=Ns,fr[hr++]=ks,fr[hr++]=Ei,Ei=o;var g=Ns;o=ks;var E=32-Tr(g)-1;g&=~(1<<E),d+=1;var C=32-Tr(a)+E;if(30<C){var I=E-E%5;C=(g&(1<<I)-1).toString(32),g>>=I,E-=I,Ns=1<<32-Tr(a)+E|d<<E|g,ks=C+o}else Ns=1<<C|d<<E|g,ks=o}function im(o){o.return!==null&&(Si(o,1),Yw(o,1,0))}function am(o){for(;o===wd;)wd=Ta[--Pa],Ta[Pa]=null,bd=Ta[--Pa],Ta[Pa]=null;for(;o===Ei;)Ei=fr[--hr],fr[hr]=null,ks=fr[--hr],fr[hr]=null,Ns=fr[--hr],fr[hr]=null}var ir=null,ar=null,Lt=!1,Rr=null;function Qw(o,a){var d=yr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=o,a=o.deletions,a===null?(o.deletions=[d],o.flags|=16):a.push(d)}function Zw(o,a){switch(o.tag){case 5:var d=o.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,ir=o,ar=co(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,ir=o,ar=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Ei!==null?{id:Ns,overflow:ks}:null,o.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=yr(18,null,null,0),d.stateNode=a,d.return=o,o.child=d,ir=o,ar=null,!0):!1;default:return!1}}function lm(o){return(o.mode&1)!==0&&(o.flags&128)===0}function cm(o){if(Lt){var a=ar;if(a){var d=a;if(!Zw(o,a)){if(lm(o))throw Error(n(418));a=co(d.nextSibling);var g=ir;a&&Zw(o,a)?Qw(g,d):(o.flags=o.flags&-4097|2,Lt=!1,ir=o)}}else{if(lm(o))throw Error(n(418));o.flags=o.flags&-4097|2,Lt=!1,ir=o}}}function Xw(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ir=o}function Ed(o){if(o!==ir)return!1;if(!Lt)return Xw(o),Lt=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!em(o.type,o.memoizedProps)),a&&(a=ar)){if(lm(o))throw Jw(),Error(n(418));for(;a;)Qw(o,a),a=co(a.nextSibling)}if(Xw(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(a===0){ar=co(o.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}o=o.nextSibling}ar=null}}else ar=ir?co(o.stateNode.nextSibling):null;return!0}function Jw(){for(var o=ar;o;)o=co(o.nextSibling)}function Ra(){ar=ir=null,Lt=!1}function um(o){Rr===null?Rr=[o]:Rr.push(o)}var tI=M.ReactCurrentBatchConfig;function yc(o,a,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,o));var E=g,C=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===C?a.ref:(a=function(I){var q=E.refs;I===null?delete q[C]:q[C]=I},a._stringRef=C,a)}if(typeof o!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,o))}return o}function Sd(o,a){throw o=Object.prototype.toString.call(a),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function e1(o){var a=o._init;return a(o._payload)}function t1(o){function a(re,ee){if(o){var oe=re.deletions;oe===null?(re.deletions=[ee],re.flags|=16):oe.push(ee)}}function d(re,ee){if(!o)return null;for(;ee!==null;)a(re,ee),ee=ee.sibling;return null}function g(re,ee){for(re=new Map;ee!==null;)ee.key!==null?re.set(ee.key,ee):re.set(ee.index,ee),ee=ee.sibling;return re}function E(re,ee){return re=bo(re,ee),re.index=0,re.sibling=null,re}function C(re,ee,oe){return re.index=oe,o?(oe=re.alternate,oe!==null?(oe=oe.index,oe<ee?(re.flags|=2,ee):oe):(re.flags|=2,ee)):(re.flags|=1048576,ee)}function I(re){return o&&re.alternate===null&&(re.flags|=2),re}function q(re,ee,oe,Ne){return ee===null||ee.tag!==6?(ee=tg(oe,re.mode,Ne),ee.return=re,ee):(ee=E(ee,oe),ee.return=re,ee)}function J(re,ee,oe,Ne){var He=oe.type;return He===O?ye(re,ee,oe.props.children,Ne,oe.key):ee!==null&&(ee.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Q&&e1(He)===ee.type)?(Ne=E(ee,oe.props),Ne.ref=yc(re,ee,oe),Ne.return=re,Ne):(Ne=Kd(oe.type,oe.key,oe.props,null,re.mode,Ne),Ne.ref=yc(re,ee,oe),Ne.return=re,Ne)}function ie(re,ee,oe,Ne){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=ng(oe,re.mode,Ne),ee.return=re,ee):(ee=E(ee,oe.children||[]),ee.return=re,ee)}function ye(re,ee,oe,Ne,He){return ee===null||ee.tag!==7?(ee=Ri(oe,re.mode,Ne,He),ee.return=re,ee):(ee=E(ee,oe),ee.return=re,ee)}function ve(re,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=tg(""+ee,re.mode,oe),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case D:return oe=Kd(ee.type,ee.key,ee.props,null,re.mode,oe),oe.ref=yc(re,null,ee),oe.return=re,oe;case B:return ee=ng(ee,re.mode,oe),ee.return=re,ee;case Q:var Ne=ee._init;return ve(re,Ne(ee._payload),oe)}if(he(ee)||G(ee))return ee=Ri(ee,re.mode,oe,null),ee.return=re,ee;Sd(re,ee)}return null}function me(re,ee,oe,Ne){var He=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return He!==null?null:q(re,ee,""+oe,Ne);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case D:return oe.key===He?J(re,ee,oe,Ne):null;case B:return oe.key===He?ie(re,ee,oe,Ne):null;case Q:return He=oe._init,me(re,ee,He(oe._payload),Ne)}if(he(oe)||G(oe))return He!==null?null:ye(re,ee,oe,Ne,null);Sd(re,oe)}return null}function Oe(re,ee,oe,Ne,He){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return re=re.get(oe)||null,q(ee,re,""+Ne,He);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case D:return re=re.get(Ne.key===null?oe:Ne.key)||null,J(ee,re,Ne,He);case B:return re=re.get(Ne.key===null?oe:Ne.key)||null,ie(ee,re,Ne,He);case Q:var Ke=Ne._init;return Oe(re,ee,oe,Ke(Ne._payload),He)}if(he(Ne)||G(Ne))return re=re.get(oe)||null,ye(ee,re,Ne,He,null);Sd(ee,Ne)}return null}function Fe(re,ee,oe,Ne){for(var He=null,Ke=null,Ge=ee,et=ee=0,mn=null;Ge!==null&&et<oe.length;et++){Ge.index>et?(mn=Ge,Ge=null):mn=Ge.sibling;var Et=me(re,Ge,oe[et],Ne);if(Et===null){Ge===null&&(Ge=mn);break}o&&Ge&&Et.alternate===null&&a(re,Ge),ee=C(Et,ee,et),Ke===null?He=Et:Ke.sibling=Et,Ke=Et,Ge=mn}if(et===oe.length)return d(re,Ge),Lt&&Si(re,et),He;if(Ge===null){for(;et<oe.length;et++)Ge=ve(re,oe[et],Ne),Ge!==null&&(ee=C(Ge,ee,et),Ke===null?He=Ge:Ke.sibling=Ge,Ke=Ge);return Lt&&Si(re,et),He}for(Ge=g(re,Ge);et<oe.length;et++)mn=Oe(Ge,re,et,oe[et],Ne),mn!==null&&(o&&mn.alternate!==null&&Ge.delete(mn.key===null?et:mn.key),ee=C(mn,ee,et),Ke===null?He=mn:Ke.sibling=mn,Ke=mn);return o&&Ge.forEach(function(Eo){return a(re,Eo)}),Lt&&Si(re,et),He}function ze(re,ee,oe,Ne){var He=G(oe);if(typeof He!="function")throw Error(n(150));if(oe=He.call(oe),oe==null)throw Error(n(151));for(var Ke=He=null,Ge=ee,et=ee=0,mn=null,Et=oe.next();Ge!==null&&!Et.done;et++,Et=oe.next()){Ge.index>et?(mn=Ge,Ge=null):mn=Ge.sibling;var Eo=me(re,Ge,Et.value,Ne);if(Eo===null){Ge===null&&(Ge=mn);break}o&&Ge&&Eo.alternate===null&&a(re,Ge),ee=C(Eo,ee,et),Ke===null?He=Eo:Ke.sibling=Eo,Ke=Eo,Ge=mn}if(Et.done)return d(re,Ge),Lt&&Si(re,et),He;if(Ge===null){for(;!Et.done;et++,Et=oe.next())Et=ve(re,Et.value,Ne),Et!==null&&(ee=C(Et,ee,et),Ke===null?He=Et:Ke.sibling=Et,Ke=Et);return Lt&&Si(re,et),He}for(Ge=g(re,Ge);!Et.done;et++,Et=oe.next())Et=Oe(Ge,re,et,Et.value,Ne),Et!==null&&(o&&Et.alternate!==null&&Ge.delete(Et.key===null?et:Et.key),ee=C(Et,ee,et),Ke===null?He=Et:Ke.sibling=Et,Ke=Et);return o&&Ge.forEach(function(MI){return a(re,MI)}),Lt&&Si(re,et),He}function Qt(re,ee,oe,Ne){if(typeof oe=="object"&&oe!==null&&oe.type===O&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case D:e:{for(var He=oe.key,Ke=ee;Ke!==null;){if(Ke.key===He){if(He=oe.type,He===O){if(Ke.tag===7){d(re,Ke.sibling),ee=E(Ke,oe.props.children),ee.return=re,re=ee;break e}}else if(Ke.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Q&&e1(He)===Ke.type){d(re,Ke.sibling),ee=E(Ke,oe.props),ee.ref=yc(re,Ke,oe),ee.return=re,re=ee;break e}d(re,Ke);break}else a(re,Ke);Ke=Ke.sibling}oe.type===O?(ee=Ri(oe.props.children,re.mode,Ne,oe.key),ee.return=re,re=ee):(Ne=Kd(oe.type,oe.key,oe.props,null,re.mode,Ne),Ne.ref=yc(re,ee,oe),Ne.return=re,re=Ne)}return I(re);case B:e:{for(Ke=oe.key;ee!==null;){if(ee.key===Ke)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){d(re,ee.sibling),ee=E(ee,oe.children||[]),ee.return=re,re=ee;break e}else{d(re,ee);break}else a(re,ee);ee=ee.sibling}ee=ng(oe,re.mode,Ne),ee.return=re,re=ee}return I(re);case Q:return Ke=oe._init,Qt(re,ee,Ke(oe._payload),Ne)}if(he(oe))return Fe(re,ee,oe,Ne);if(G(oe))return ze(re,ee,oe,Ne);Sd(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(d(re,ee.sibling),ee=E(ee,oe),ee.return=re,re=ee):(d(re,ee),ee=tg(oe,re.mode,Ne),ee.return=re,re=ee),I(re)):d(re,ee)}return Qt}var Aa=t1(!0),n1=t1(!1),Nd=uo(null),kd=null,Ia=null,dm=null;function fm(){dm=Ia=kd=null}function hm(o){var a=Nd.current;Ot(Nd),o._currentValue=a}function pm(o,a,d){for(;o!==null;){var g=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),o===d)break;o=o.return}}function Ma(o,a){kd=o,dm=Ia=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(qn=!0),o.firstContext=null)}function pr(o){var a=o._currentValue;if(dm!==o)if(o={context:o,memoizedValue:a,next:null},Ia===null){if(kd===null)throw Error(n(308));Ia=o,kd.dependencies={lanes:0,firstContext:o}}else Ia=Ia.next=o;return a}var Ni=null;function mm(o){Ni===null?Ni=[o]:Ni.push(o)}function r1(o,a,d,g){var E=a.interleaved;return E===null?(d.next=d,mm(a)):(d.next=E.next,E.next=d),a.interleaved=d,Cs(o,g)}function Cs(o,a){o.lanes|=a;var d=o.alternate;for(d!==null&&(d.lanes|=a),d=o,o=o.return;o!==null;)o.childLanes|=a,d=o.alternate,d!==null&&(d.childLanes|=a),d=o,o=o.return;return d.tag===3?d.stateNode:null}var po=!1;function gm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s1(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function js(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function mo(o,a,d){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(bt&2)!==0){var E=g.pending;return E===null?a.next=a:(a.next=E.next,E.next=a),g.pending=a,Cs(o,d)}return E=g.interleaved,E===null?(a.next=a,mm(g)):(a.next=E.next,E.next=a),g.interleaved=a,Cs(o,d)}function Cd(o,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var g=a.lanes;g&=o.pendingLanes,d|=g,a.lanes=d,Pp(o,d)}}function o1(o,a){var d=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var E=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var I={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};C===null?E=C=I:C=C.next=I,d=d.next}while(d!==null);C===null?E=C=a:C=C.next=a}else E=C=a;d={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:g.shared,effects:g.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=a:o.next=a,d.lastBaseUpdate=a}function jd(o,a,d,g){var E=o.updateQueue;po=!1;var C=E.firstBaseUpdate,I=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var J=q,ie=J.next;J.next=null,I===null?C=ie:I.next=ie,I=J;var ye=o.alternate;ye!==null&&(ye=ye.updateQueue,q=ye.lastBaseUpdate,q!==I&&(q===null?ye.firstBaseUpdate=ie:q.next=ie,ye.lastBaseUpdate=J))}if(C!==null){var ve=E.baseState;I=0,ye=ie=J=null,q=C;do{var me=q.lane,Oe=q.eventTime;if((g&me)===me){ye!==null&&(ye=ye.next={eventTime:Oe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Fe=o,ze=q;switch(me=a,Oe=d,ze.tag){case 1:if(Fe=ze.payload,typeof Fe=="function"){ve=Fe.call(Oe,ve,me);break e}ve=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=ze.payload,me=typeof Fe=="function"?Fe.call(Oe,ve,me):Fe,me==null)break e;ve=ne({},ve,me);break e;case 2:po=!0}}q.callback!==null&&q.lane!==0&&(o.flags|=64,me=E.effects,me===null?E.effects=[q]:me.push(q))}else Oe={eventTime:Oe,lane:me,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ye===null?(ie=ye=Oe,J=ve):ye=ye.next=Oe,I|=me;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;me=q,q=me.next,me.next=null,E.lastBaseUpdate=me,E.shared.pending=null}}while(!0);if(ye===null&&(J=ve),E.baseState=J,E.firstBaseUpdate=ie,E.lastBaseUpdate=ye,a=E.shared.interleaved,a!==null){E=a;do I|=E.lane,E=E.next;while(E!==a)}else C===null&&(E.shared.lanes=0);ji|=I,o.lanes=I,o.memoizedState=ve}}function i1(o,a,d){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var g=o[a],E=g.callback;if(E!==null){if(g.callback=null,g=d,typeof E!="function")throw Error(n(191,E));E.call(g)}}}var vc={},Jr=uo(vc),xc=uo(vc),wc=uo(vc);function ki(o){if(o===vc)throw Error(n(174));return o}function ym(o,a){switch(It(wc,a),It(xc,o),It(Jr,vc),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:P(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=P(a,o)}Ot(Jr),It(Jr,a)}function Oa(){Ot(Jr),Ot(xc),Ot(wc)}function a1(o){ki(wc.current);var a=ki(Jr.current),d=P(a,o.type);a!==d&&(It(xc,o),It(Jr,d))}function vm(o){xc.current===o&&(Ot(Jr),Ot(xc))}var zt=uo(0);function _d(o){for(var a=o;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var xm=[];function wm(){for(var o=0;o<xm.length;o++)xm[o]._workInProgressVersionPrimary=null;xm.length=0}var Td=M.ReactCurrentDispatcher,bm=M.ReactCurrentBatchConfig,Ci=0,Wt=null,rn=null,hn=null,Pd=!1,bc=!1,Ec=0,nI=0;function Cn(){throw Error(n(321))}function Em(o,a){if(a===null)return!1;for(var d=0;d<a.length&&d<o.length;d++)if(!Pr(o[d],a[d]))return!1;return!0}function Sm(o,a,d,g,E,C){if(Ci=C,Wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Td.current=o===null||o.memoizedState===null?iI:aI,o=d(g,E),bc){C=0;do{if(bc=!1,Ec=0,25<=C)throw Error(n(301));C+=1,hn=rn=null,a.updateQueue=null,Td.current=lI,o=d(g,E)}while(bc)}if(Td.current=Id,a=rn!==null&&rn.next!==null,Ci=0,hn=rn=Wt=null,Pd=!1,a)throw Error(n(300));return o}function Nm(){var o=Ec!==0;return Ec=0,o}function es(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Wt.memoizedState=hn=o:hn=hn.next=o,hn}function mr(){if(rn===null){var o=Wt.alternate;o=o!==null?o.memoizedState:null}else o=rn.next;var a=hn===null?Wt.memoizedState:hn.next;if(a!==null)hn=a,rn=o;else{if(o===null)throw Error(n(310));rn=o,o={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},hn===null?Wt.memoizedState=hn=o:hn=hn.next=o}return hn}function Sc(o,a){return typeof a=="function"?a(o):a}function km(o){var a=mr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=o;var g=rn,E=g.baseQueue,C=d.pending;if(C!==null){if(E!==null){var I=E.next;E.next=C.next,C.next=I}g.baseQueue=E=C,d.pending=null}if(E!==null){C=E.next,g=g.baseState;var q=I=null,J=null,ie=C;do{var ye=ie.lane;if((Ci&ye)===ye)J!==null&&(J=J.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),g=ie.hasEagerState?ie.eagerState:o(g,ie.action);else{var ve={lane:ye,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};J===null?(q=J=ve,I=g):J=J.next=ve,Wt.lanes|=ye,ji|=ye}ie=ie.next}while(ie!==null&&ie!==C);J===null?I=g:J.next=q,Pr(g,a.memoizedState)||(qn=!0),a.memoizedState=g,a.baseState=I,a.baseQueue=J,d.lastRenderedState=g}if(o=d.interleaved,o!==null){E=o;do C=E.lane,Wt.lanes|=C,ji|=C,E=E.next;while(E!==o)}else E===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Cm(o){var a=mr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=o;var g=d.dispatch,E=d.pending,C=a.memoizedState;if(E!==null){d.pending=null;var I=E=E.next;do C=o(C,I.action),I=I.next;while(I!==E);Pr(C,a.memoizedState)||(qn=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),d.lastRenderedState=C}return[C,g]}function l1(){}function c1(o,a){var d=Wt,g=mr(),E=a(),C=!Pr(g.memoizedState,E);if(C&&(g.memoizedState=E,qn=!0),g=g.queue,jm(f1.bind(null,d,g,o),[o]),g.getSnapshot!==a||C||hn!==null&&hn.memoizedState.tag&1){if(d.flags|=2048,Nc(9,d1.bind(null,d,g,E,a),void 0,null),pn===null)throw Error(n(349));(Ci&30)!==0||u1(d,a,E)}return E}function u1(o,a,d){o.flags|=16384,o={getSnapshot:a,value:d},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.stores=[o]):(d=a.stores,d===null?a.stores=[o]:d.push(o))}function d1(o,a,d,g){a.value=d,a.getSnapshot=g,h1(a)&&p1(o)}function f1(o,a,d){return d(function(){h1(a)&&p1(o)})}function h1(o){var a=o.getSnapshot;o=o.value;try{var d=a();return!Pr(o,d)}catch{return!0}}function p1(o){var a=Cs(o,1);a!==null&&Or(a,o,1,-1)}function m1(o){var a=es();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sc,lastRenderedState:o},a.queue=o,o=o.dispatch=oI.bind(null,Wt,o),[a.memoizedState,o]}function Nc(o,a,d,g){return o={tag:o,create:a,destroy:d,deps:g,next:null},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.lastEffect=o.next=o):(d=a.lastEffect,d===null?a.lastEffect=o.next=o:(g=d.next,d.next=o,o.next=g,a.lastEffect=o)),o}function g1(){return mr().memoizedState}function Rd(o,a,d,g){var E=es();Wt.flags|=o,E.memoizedState=Nc(1|a,d,void 0,g===void 0?null:g)}function Ad(o,a,d,g){var E=mr();g=g===void 0?null:g;var C=void 0;if(rn!==null){var I=rn.memoizedState;if(C=I.destroy,g!==null&&Em(g,I.deps)){E.memoizedState=Nc(a,d,C,g);return}}Wt.flags|=o,E.memoizedState=Nc(1|a,d,C,g)}function y1(o,a){return Rd(8390656,8,o,a)}function jm(o,a){return Ad(2048,8,o,a)}function v1(o,a){return Ad(4,2,o,a)}function x1(o,a){return Ad(4,4,o,a)}function w1(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function b1(o,a,d){return d=d!=null?d.concat([o]):null,Ad(4,4,w1.bind(null,a,o),d)}function _m(){}function E1(o,a){var d=mr();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Em(a,g[1])?g[0]:(d.memoizedState=[o,a],o)}function S1(o,a){var d=mr();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Em(a,g[1])?g[0]:(o=o(),d.memoizedState=[o,a],o)}function N1(o,a,d){return(Ci&21)===0?(o.baseState&&(o.baseState=!1,qn=!0),o.memoizedState=d):(Pr(d,a)||(d=ew(),Wt.lanes|=d,ji|=d,o.baseState=!0),a)}function rI(o,a){var d=_t;_t=d!==0&&4>d?d:4,o(!0);var g=bm.transition;bm.transition={};try{o(!1),a()}finally{_t=d,bm.transition=g}}function k1(){return mr().memoizedState}function sI(o,a,d){var g=xo(o);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},C1(o))j1(a,d);else if(d=r1(o,a,d,g),d!==null){var E=Ln();Or(d,o,g,E),_1(d,a,g)}}function oI(o,a,d){var g=xo(o),E={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(C1(o))j1(a,E);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var I=a.lastRenderedState,q=C(I,d);if(E.hasEagerState=!0,E.eagerState=q,Pr(q,I)){var J=a.interleaved;J===null?(E.next=E,mm(a)):(E.next=J.next,J.next=E),a.interleaved=E;return}}catch{}finally{}d=r1(o,a,E,g),d!==null&&(E=Ln(),Or(d,o,g,E),_1(d,a,g))}}function C1(o){var a=o.alternate;return o===Wt||a!==null&&a===Wt}function j1(o,a){bc=Pd=!0;var d=o.pending;d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a}function _1(o,a,d){if((d&4194240)!==0){var g=a.lanes;g&=o.pendingLanes,d|=g,a.lanes=d,Pp(o,d)}}var Id={readContext:pr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},iI={readContext:pr,useCallback:function(o,a){return es().memoizedState=[o,a===void 0?null:a],o},useContext:pr,useEffect:y1,useImperativeHandle:function(o,a,d){return d=d!=null?d.concat([o]):null,Rd(4194308,4,w1.bind(null,a,o),d)},useLayoutEffect:function(o,a){return Rd(4194308,4,o,a)},useInsertionEffect:function(o,a){return Rd(4,2,o,a)},useMemo:function(o,a){var d=es();return a=a===void 0?null:a,o=o(),d.memoizedState=[o,a],o},useReducer:function(o,a,d){var g=es();return a=d!==void 0?d(a):a,g.memoizedState=g.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},g.queue=o,o=o.dispatch=sI.bind(null,Wt,o),[g.memoizedState,o]},useRef:function(o){var a=es();return o={current:o},a.memoizedState=o},useState:m1,useDebugValue:_m,useDeferredValue:function(o){return es().memoizedState=o},useTransition:function(){var o=m1(!1),a=o[0];return o=rI.bind(null,o[1]),es().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,d){var g=Wt,E=es();if(Lt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),pn===null)throw Error(n(349));(Ci&30)!==0||u1(g,a,d)}E.memoizedState=d;var C={value:d,getSnapshot:a};return E.queue=C,y1(f1.bind(null,g,C,o),[o]),g.flags|=2048,Nc(9,d1.bind(null,g,C,d,a),void 0,null),d},useId:function(){var o=es(),a=pn.identifierPrefix;if(Lt){var d=ks,g=Ns;d=(g&~(1<<32-Tr(g)-1)).toString(32)+d,a=":"+a+"R"+d,d=Ec++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=nI++,a=":"+a+"r"+d.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},aI={readContext:pr,useCallback:E1,useContext:pr,useEffect:jm,useImperativeHandle:b1,useInsertionEffect:v1,useLayoutEffect:x1,useMemo:S1,useReducer:km,useRef:g1,useState:function(){return km(Sc)},useDebugValue:_m,useDeferredValue:function(o){var a=mr();return N1(a,rn.memoizedState,o)},useTransition:function(){var o=km(Sc)[0],a=mr().memoizedState;return[o,a]},useMutableSource:l1,useSyncExternalStore:c1,useId:k1,unstable_isNewReconciler:!1},lI={readContext:pr,useCallback:E1,useContext:pr,useEffect:jm,useImperativeHandle:b1,useInsertionEffect:v1,useLayoutEffect:x1,useMemo:S1,useReducer:Cm,useRef:g1,useState:function(){return Cm(Sc)},useDebugValue:_m,useDeferredValue:function(o){var a=mr();return rn===null?a.memoizedState=o:N1(a,rn.memoizedState,o)},useTransition:function(){var o=Cm(Sc)[0],a=mr().memoizedState;return[o,a]},useMutableSource:l1,useSyncExternalStore:c1,useId:k1,unstable_isNewReconciler:!1};function Ar(o,a){if(o&&o.defaultProps){a=ne({},a),o=o.defaultProps;for(var d in o)a[d]===void 0&&(a[d]=o[d]);return a}return a}function Tm(o,a,d,g){a=o.memoizedState,d=d(g,a),d=d==null?a:ne({},a,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Md={isMounted:function(o){return(o=o._reactInternals)?xi(o)===o:!1},enqueueSetState:function(o,a,d){o=o._reactInternals;var g=Ln(),E=xo(o),C=js(g,E);C.payload=a,d!=null&&(C.callback=d),a=mo(o,C,E),a!==null&&(Or(a,o,E,g),Cd(a,o,E))},enqueueReplaceState:function(o,a,d){o=o._reactInternals;var g=Ln(),E=xo(o),C=js(g,E);C.tag=1,C.payload=a,d!=null&&(C.callback=d),a=mo(o,C,E),a!==null&&(Or(a,o,E,g),Cd(a,o,E))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var d=Ln(),g=xo(o),E=js(d,g);E.tag=2,a!=null&&(E.callback=a),a=mo(o,E,g),a!==null&&(Or(a,o,g,d),Cd(a,o,g))}};function T1(o,a,d,g,E,C,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,C,I):a.prototype&&a.prototype.isPureReactComponent?!uc(d,g)||!uc(E,C):!0}function P1(o,a,d){var g=!1,E=fo,C=a.contextType;return typeof C=="object"&&C!==null?C=pr(C):(E=Vn(a)?bi:kn.current,g=a.contextTypes,C=(g=g!=null)?_a(o,E):fo),a=new a(d,C),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Md,o.stateNode=a,a._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=E,o.__reactInternalMemoizedMaskedChildContext=C),a}function R1(o,a,d,g){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==o&&Md.enqueueReplaceState(a,a.state,null)}function Pm(o,a,d,g){var E=o.stateNode;E.props=d,E.state=o.memoizedState,E.refs={},gm(o);var C=a.contextType;typeof C=="object"&&C!==null?E.context=pr(C):(C=Vn(a)?bi:kn.current,E.context=_a(o,C)),E.state=o.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(Tm(o,a,C,d),E.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(a=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),a!==E.state&&Md.enqueueReplaceState(E,E.state,null),jd(o,d,E,g),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308)}function Da(o,a){try{var d="",g=a;do d+=fe(g),g=g.return;while(g);var E=d}catch(C){E=`
Error generating stack: `+C.message+`
`+C.stack}return{value:o,source:a,stack:E,digest:null}}function Rm(o,a,d){return{value:o,source:null,stack:d??null,digest:a??null}}function Am(o,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var cI=typeof WeakMap=="function"?WeakMap:Map;function A1(o,a,d){d=js(-1,d),d.tag=3,d.payload={element:null};var g=a.value;return d.callback=function(){Ud||(Ud=!0,Km=g),Am(o,a)},d}function I1(o,a,d){d=js(-1,d),d.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var E=a.value;d.payload=function(){return g(E)},d.callback=function(){Am(o,a)}}var C=o.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(d.callback=function(){Am(o,a),typeof g!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),d}function M1(o,a,d){var g=o.pingCache;if(g===null){g=o.pingCache=new cI;var E=new Set;g.set(a,E)}else E=g.get(a),E===void 0&&(E=new Set,g.set(a,E));E.has(d)||(E.add(d),o=SI.bind(null,o,a,d),a.then(o,o))}function O1(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function D1(o,a,d,g,E){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=js(-1,1),a.tag=2,mo(d,a,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=E,o)}var uI=M.ReactCurrentOwner,qn=!1;function Dn(o,a,d,g){a.child=o===null?n1(a,null,d,g):Aa(a,o.child,d,g)}function L1(o,a,d,g,E){d=d.render;var C=a.ref;return Ma(a,E),g=Sm(o,a,d,g,C,E),d=Nm(),o!==null&&!qn?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~E,_s(o,a,E)):(Lt&&d&&im(a),a.flags|=1,Dn(o,a,g,E),a.child)}function $1(o,a,d,g,E){if(o===null){var C=d.type;return typeof C=="function"&&!eg(C)&&C.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=C,B1(o,a,C,g,E)):(o=Kd(d.type,null,g,a,a.mode,E),o.ref=a.ref,o.return=a,a.child=o)}if(C=o.child,(o.lanes&E)===0){var I=C.memoizedProps;if(d=d.compare,d=d!==null?d:uc,d(I,g)&&o.ref===a.ref)return _s(o,a,E)}return a.flags|=1,o=bo(C,g),o.ref=a.ref,o.return=a,a.child=o}function B1(o,a,d,g,E){if(o!==null){var C=o.memoizedProps;if(uc(C,g)&&o.ref===a.ref)if(qn=!1,a.pendingProps=g=C,(o.lanes&E)!==0)(o.flags&131072)!==0&&(qn=!0);else return a.lanes=o.lanes,_s(o,a,E)}return Im(o,a,d,g,E)}function F1(o,a,d){var g=a.pendingProps,E=g.children,C=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},It($a,lr),lr|=d;else{if((d&1073741824)===0)return o=C!==null?C.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,It($a,lr),lr|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=C!==null?C.baseLanes:d,It($a,lr),lr|=g}else C!==null?(g=C.baseLanes|d,a.memoizedState=null):g=d,It($a,lr),lr|=g;return Dn(o,a,E,d),a.child}function U1(o,a){var d=a.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Im(o,a,d,g,E){var C=Vn(d)?bi:kn.current;return C=_a(a,C),Ma(a,E),d=Sm(o,a,d,g,C,E),g=Nm(),o!==null&&!qn?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~E,_s(o,a,E)):(Lt&&g&&im(a),a.flags|=1,Dn(o,a,d,E),a.child)}function z1(o,a,d,g,E){if(Vn(d)){var C=!0;vd(a)}else C=!1;if(Ma(a,E),a.stateNode===null)Dd(o,a),P1(a,d,g),Pm(a,d,g,E),g=!0;else if(o===null){var I=a.stateNode,q=a.memoizedProps;I.props=q;var J=I.context,ie=d.contextType;typeof ie=="object"&&ie!==null?ie=pr(ie):(ie=Vn(d)?bi:kn.current,ie=_a(a,ie));var ye=d.getDerivedStateFromProps,ve=typeof ye=="function"||typeof I.getSnapshotBeforeUpdate=="function";ve||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q!==g||J!==ie)&&R1(a,I,g,ie),po=!1;var me=a.memoizedState;I.state=me,jd(a,g,I,E),J=a.memoizedState,q!==g||me!==J||Hn.current||po?(typeof ye=="function"&&(Tm(a,d,ye,g),J=a.memoizedState),(q=po||T1(a,d,q,g,me,J,ie))?(ve||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=J),I.props=g,I.state=J,I.context=ie,g=q):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{I=a.stateNode,s1(o,a),q=a.memoizedProps,ie=a.type===a.elementType?q:Ar(a.type,q),I.props=ie,ve=a.pendingProps,me=I.context,J=d.contextType,typeof J=="object"&&J!==null?J=pr(J):(J=Vn(d)?bi:kn.current,J=_a(a,J));var Oe=d.getDerivedStateFromProps;(ye=typeof Oe=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(q!==ve||me!==J)&&R1(a,I,g,J),po=!1,me=a.memoizedState,I.state=me,jd(a,g,I,E);var Fe=a.memoizedState;q!==ve||me!==Fe||Hn.current||po?(typeof Oe=="function"&&(Tm(a,d,Oe,g),Fe=a.memoizedState),(ie=po||T1(a,d,ie,g,me,Fe,J)||!1)?(ye||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(g,Fe,J),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(g,Fe,J)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=Fe),I.props=g,I.state=Fe,I.context=J,g=ie):(typeof I.componentDidUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(a.flags|=1024),g=!1)}return Mm(o,a,d,g,C,E)}function Mm(o,a,d,g,E,C){U1(o,a);var I=(a.flags&128)!==0;if(!g&&!I)return E&&Kw(a,d,!1),_s(o,a,C);g=a.stateNode,uI.current=a;var q=I&&typeof d.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,o!==null&&I?(a.child=Aa(a,o.child,null,C),a.child=Aa(a,null,q,C)):Dn(o,a,q,C),a.memoizedState=g.state,E&&Kw(a,d,!0),a.child}function W1(o){var a=o.stateNode;a.pendingContext?Vw(o,a.pendingContext,a.pendingContext!==a.context):a.context&&Vw(o,a.context,!1),ym(o,a.containerInfo)}function H1(o,a,d,g,E){return Ra(),um(E),a.flags|=256,Dn(o,a,d,g),a.child}var Om={dehydrated:null,treeContext:null,retryLane:0};function Dm(o){return{baseLanes:o,cachePool:null,transitions:null}}function V1(o,a,d){var g=a.pendingProps,E=zt.current,C=!1,I=(a.flags&128)!==0,q;if((q=I)||(q=o!==null&&o.memoizedState===null?!1:(E&2)!==0),q?(C=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(E|=1),It(zt,E&1),o===null)return cm(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=g.children,o=g.fallback,C?(g=a.mode,C=a.child,I={mode:"hidden",children:I},(g&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=I):C=Gd(I,g,0,null),o=Ri(o,g,d,null),C.return=a,o.return=a,C.sibling=o,a.child=C,a.child.memoizedState=Dm(d),a.memoizedState=Om,o):Lm(a,I));if(E=o.memoizedState,E!==null&&(q=E.dehydrated,q!==null))return dI(o,a,I,g,q,E,d);if(C){C=g.fallback,I=a.mode,E=o.child,q=E.sibling;var J={mode:"hidden",children:g.children};return(I&1)===0&&a.child!==E?(g=a.child,g.childLanes=0,g.pendingProps=J,a.deletions=null):(g=bo(E,J),g.subtreeFlags=E.subtreeFlags&14680064),q!==null?C=bo(q,C):(C=Ri(C,I,d,null),C.flags|=2),C.return=a,g.return=a,g.sibling=C,a.child=g,g=C,C=a.child,I=o.child.memoizedState,I=I===null?Dm(d):{baseLanes:I.baseLanes|d,cachePool:null,transitions:I.transitions},C.memoizedState=I,C.childLanes=o.childLanes&~d,a.memoizedState=Om,g}return C=o.child,o=C.sibling,g=bo(C,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=d),g.return=a,g.sibling=null,o!==null&&(d=a.deletions,d===null?(a.deletions=[o],a.flags|=16):d.push(o)),a.child=g,a.memoizedState=null,g}function Lm(o,a){return a=Gd({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Od(o,a,d,g){return g!==null&&um(g),Aa(a,o.child,null,d),o=Lm(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function dI(o,a,d,g,E,C,I){if(d)return a.flags&256?(a.flags&=-257,g=Rm(Error(n(422))),Od(o,a,I,g)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(C=g.fallback,E=a.mode,g=Gd({mode:"visible",children:g.children},E,0,null),C=Ri(C,E,I,null),C.flags|=2,g.return=a,C.return=a,g.sibling=C,a.child=g,(a.mode&1)!==0&&Aa(a,o.child,null,I),a.child.memoizedState=Dm(I),a.memoizedState=Om,C);if((a.mode&1)===0)return Od(o,a,I,null);if(E.data==="$!"){if(g=E.nextSibling&&E.nextSibling.dataset,g)var q=g.dgst;return g=q,C=Error(n(419)),g=Rm(C,g,void 0),Od(o,a,I,g)}if(q=(I&o.childLanes)!==0,qn||q){if(g=pn,g!==null){switch(I&-I){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(g.suspendedLanes|I))!==0?0:E,E!==0&&E!==C.retryLane&&(C.retryLane=E,Cs(o,E),Or(g,o,E,-1))}return Jm(),g=Rm(Error(n(421))),Od(o,a,I,g)}return E.data==="$?"?(a.flags|=128,a.child=o.child,a=NI.bind(null,o),E._reactRetry=a,null):(o=C.treeContext,ar=co(E.nextSibling),ir=a,Lt=!0,Rr=null,o!==null&&(fr[hr++]=Ns,fr[hr++]=ks,fr[hr++]=Ei,Ns=o.id,ks=o.overflow,Ei=a),a=Lm(a,g.children),a.flags|=4096,a)}function q1(o,a,d){o.lanes|=a;var g=o.alternate;g!==null&&(g.lanes|=a),pm(o.return,a,d)}function $m(o,a,d,g,E){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:E}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=d,C.tailMode=E)}function K1(o,a,d){var g=a.pendingProps,E=g.revealOrder,C=g.tail;if(Dn(o,a,g.children,d),g=zt.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&q1(o,d,a);else if(o.tag===19)q1(o,d,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(It(zt,g),(a.mode&1)===0)a.memoizedState=null;else switch(E){case"forwards":for(d=a.child,E=null;d!==null;)o=d.alternate,o!==null&&_d(o)===null&&(E=d),d=d.sibling;d=E,d===null?(E=a.child,a.child=null):(E=d.sibling,d.sibling=null),$m(a,!1,E,d,C);break;case"backwards":for(d=null,E=a.child,a.child=null;E!==null;){if(o=E.alternate,o!==null&&_d(o)===null){a.child=E;break}o=E.sibling,E.sibling=d,d=E,E=o}$m(a,!0,d,null,C);break;case"together":$m(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Dd(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function _s(o,a,d){if(o!==null&&(a.dependencies=o.dependencies),ji|=a.lanes,(d&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(n(153));if(a.child!==null){for(o=a.child,d=bo(o,o.pendingProps),a.child=d,d.return=a;o.sibling!==null;)o=o.sibling,d=d.sibling=bo(o,o.pendingProps),d.return=a;d.sibling=null}return a.child}function fI(o,a,d){switch(a.tag){case 3:W1(a),Ra();break;case 5:a1(a);break;case 1:Vn(a.type)&&vd(a);break;case 4:ym(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,E=a.memoizedProps.value;It(Nd,g._currentValue),g._currentValue=E;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(It(zt,zt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?V1(o,a,d):(It(zt,zt.current&1),o=_s(o,a,d),o!==null?o.sibling:null);It(zt,zt.current&1);break;case 19:if(g=(d&a.childLanes)!==0,(o.flags&128)!==0){if(g)return K1(o,a,d);a.flags|=128}if(E=a.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),It(zt,zt.current),g)break;return null;case 22:case 23:return a.lanes=0,F1(o,a,d)}return _s(o,a,d)}var G1,Bm,Y1,Q1;G1=function(o,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Bm=function(){},Y1=function(o,a,d,g){var E=o.memoizedProps;if(E!==g){o=a.stateNode,ki(Jr.current);var C=null;switch(d){case"input":E=yt(o,E),g=yt(o,g),C=[];break;case"select":E=ne({},E,{value:void 0}),g=ne({},g,{value:void 0}),C=[];break;case"textarea":E=pe(o,E),g=pe(o,g),C=[];break;default:typeof E.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=md)}at(d,g);var I;d=null;for(ie in E)if(!g.hasOwnProperty(ie)&&E.hasOwnProperty(ie)&&E[ie]!=null)if(ie==="style"){var q=E[ie];for(I in q)q.hasOwnProperty(I)&&(d||(d={}),d[I]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?C||(C=[]):(C=C||[]).push(ie,null));for(ie in g){var J=g[ie];if(q=E!=null?E[ie]:void 0,g.hasOwnProperty(ie)&&J!==q&&(J!=null||q!=null))if(ie==="style")if(q){for(I in q)!q.hasOwnProperty(I)||J&&J.hasOwnProperty(I)||(d||(d={}),d[I]="");for(I in J)J.hasOwnProperty(I)&&q[I]!==J[I]&&(d||(d={}),d[I]=J[I])}else d||(C||(C=[]),C.push(ie,d)),d=J;else ie==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,q=q?q.__html:void 0,J!=null&&q!==J&&(C=C||[]).push(ie,J)):ie==="children"?typeof J!="string"&&typeof J!="number"||(C=C||[]).push(ie,""+J):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(J!=null&&ie==="onScroll"&&Mt("scroll",o),C||q===J||(C=[])):(C=C||[]).push(ie,J))}d&&(C=C||[]).push("style",d);var ie=C;(a.updateQueue=ie)&&(a.flags|=4)}},Q1=function(o,a,d,g){d!==g&&(a.flags|=4)};function kc(o,a){if(!Lt)switch(o.tailMode){case"hidden":a=o.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function jn(o){var a=o.alternate!==null&&o.alternate.child===o.child,d=0,g=0;if(a)for(var E=o.child;E!==null;)d|=E.lanes|E.childLanes,g|=E.subtreeFlags&14680064,g|=E.flags&14680064,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)d|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=g,o.childLanes=d,a}function hI(o,a,d){var g=a.pendingProps;switch(am(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(a),null;case 1:return Vn(a.type)&&yd(),jn(a),null;case 3:return g=a.stateNode,Oa(),Ot(Hn),Ot(kn),wm(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Ed(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Rr!==null&&(Qm(Rr),Rr=null))),Bm(o,a),jn(a),null;case 5:vm(a);var E=ki(wc.current);if(d=a.type,o!==null&&a.stateNode!=null)Y1(o,a,d,g,E),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(n(166));return jn(a),null}if(o=ki(Jr.current),Ed(a)){g=a.stateNode,d=a.type;var C=a.memoizedProps;switch(g[Xr]=a,g[mc]=C,o=(a.mode&1)!==0,d){case"dialog":Mt("cancel",g),Mt("close",g);break;case"iframe":case"object":case"embed":Mt("load",g);break;case"video":case"audio":for(E=0;E<fc.length;E++)Mt(fc[E],g);break;case"source":Mt("error",g);break;case"img":case"image":case"link":Mt("error",g),Mt("load",g);break;case"details":Mt("toggle",g);break;case"input":tn(g,C),Mt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},Mt("invalid",g);break;case"textarea":Pe(g,C),Mt("invalid",g)}at(d,C),E=null;for(var I in C)if(C.hasOwnProperty(I)){var q=C[I];I==="children"?typeof q=="string"?g.textContent!==q&&(C.suppressHydrationWarning!==!0&&pd(g.textContent,q,o),E=["children",q]):typeof q=="number"&&g.textContent!==""+q&&(C.suppressHydrationWarning!==!0&&pd(g.textContent,q,o),E=["children",""+q]):s.hasOwnProperty(I)&&q!=null&&I==="onScroll"&&Mt("scroll",g)}switch(d){case"input":Ze(g),Gr(g,C,!0);break;case"textarea":Ze(g),Be(g);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(g.onclick=md)}g=E,a.updateQueue=g,g!==null&&(a.flags|=4)}else{I=E.nodeType===9?E:E.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ye(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=I.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=I.createElement(d,{is:g.is}):(o=I.createElement(d),d==="select"&&(I=o,g.multiple?I.multiple=!0:g.size&&(I.size=g.size))):o=I.createElementNS(o,d),o[Xr]=a,o[mc]=g,G1(o,a,!1,!1),a.stateNode=o;e:{switch(I=kt(d,g),d){case"dialog":Mt("cancel",o),Mt("close",o),E=g;break;case"iframe":case"object":case"embed":Mt("load",o),E=g;break;case"video":case"audio":for(E=0;E<fc.length;E++)Mt(fc[E],o);E=g;break;case"source":Mt("error",o),E=g;break;case"img":case"image":case"link":Mt("error",o),Mt("load",o),E=g;break;case"details":Mt("toggle",o),E=g;break;case"input":tn(o,g),E=yt(o,g),Mt("invalid",o);break;case"option":E=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},E=ne({},g,{value:void 0}),Mt("invalid",o);break;case"textarea":Pe(o,g),E=pe(o,g),Mt("invalid",o);break;default:E=g}at(d,E),q=E;for(C in q)if(q.hasOwnProperty(C)){var J=q[C];C==="style"?Xe(o,J):C==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&j(o,J)):C==="children"?typeof J=="string"?(d!=="textarea"||J!=="")&&$(o,J):typeof J=="number"&&$(o,""+J):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?J!=null&&C==="onScroll"&&Mt("scroll",o):J!=null&&T(o,C,J,I))}switch(d){case"input":Ze(o),Gr(o,g,!1);break;case"textarea":Ze(o),Be(o);break;case"option":g.value!=null&&o.setAttribute("value",""+ge(g.value));break;case"select":o.multiple=!!g.multiple,C=g.value,C!=null?je(o,!!g.multiple,C,!1):g.defaultValue!=null&&je(o,!!g.multiple,g.defaultValue,!0);break;default:typeof E.onClick=="function"&&(o.onclick=md)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return jn(a),null;case 6:if(o&&a.stateNode!=null)Q1(o,a,o.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(n(166));if(d=ki(wc.current),ki(Jr.current),Ed(a)){if(g=a.stateNode,d=a.memoizedProps,g[Xr]=a,(C=g.nodeValue!==d)&&(o=ir,o!==null))switch(o.tag){case 3:pd(g.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&pd(g.nodeValue,d,(o.mode&1)!==0)}C&&(a.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Xr]=a,a.stateNode=g}return jn(a),null;case 13:if(Ot(zt),g=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Lt&&ar!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Jw(),Ra(),a.flags|=98560,C=!1;else if(C=Ed(a),g!==null&&g.dehydrated!==null){if(o===null){if(!C)throw Error(n(318));if(C=a.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Xr]=a}else Ra(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jn(a),C=!1}else Rr!==null&&(Qm(Rr),Rr=null),C=!0;if(!C)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(zt.current&1)!==0?sn===0&&(sn=3):Jm())),a.updateQueue!==null&&(a.flags|=4),jn(a),null);case 4:return Oa(),Bm(o,a),o===null&&hc(a.stateNode.containerInfo),jn(a),null;case 10:return hm(a.type._context),jn(a),null;case 17:return Vn(a.type)&&yd(),jn(a),null;case 19:if(Ot(zt),C=a.memoizedState,C===null)return jn(a),null;if(g=(a.flags&128)!==0,I=C.rendering,I===null)if(g)kc(C,!1);else{if(sn!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(I=_d(o),I!==null){for(a.flags|=128,kc(C,!1),g=I.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=d,d=a.child;d!==null;)C=d,o=g,C.flags&=14680066,I=C.alternate,I===null?(C.childLanes=0,C.lanes=o,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=I.childLanes,C.lanes=I.lanes,C.child=I.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=I.memoizedProps,C.memoizedState=I.memoizedState,C.updateQueue=I.updateQueue,C.type=I.type,o=I.dependencies,C.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return It(zt,zt.current&1|2),a.child}o=o.sibling}C.tail!==null&&Yt()>Ba&&(a.flags|=128,g=!0,kc(C,!1),a.lanes=4194304)}else{if(!g)if(o=_d(I),o!==null){if(a.flags|=128,g=!0,d=o.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),kc(C,!0),C.tail===null&&C.tailMode==="hidden"&&!I.alternate&&!Lt)return jn(a),null}else 2*Yt()-C.renderingStartTime>Ba&&d!==1073741824&&(a.flags|=128,g=!0,kc(C,!1),a.lanes=4194304);C.isBackwards?(I.sibling=a.child,a.child=I):(d=C.last,d!==null?d.sibling=I:a.child=I,C.last=I)}return C.tail!==null?(a=C.tail,C.rendering=a,C.tail=a.sibling,C.renderingStartTime=Yt(),a.sibling=null,d=zt.current,It(zt,g?d&1|2:d&1),a):(jn(a),null);case 22:case 23:return Xm(),g=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(lr&1073741824)!==0&&(jn(a),a.subtreeFlags&6&&(a.flags|=8192)):jn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function pI(o,a){switch(am(a),a.tag){case 1:return Vn(a.type)&&yd(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Oa(),Ot(Hn),Ot(kn),wm(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return vm(a),null;case 13:if(Ot(zt),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ra()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return Ot(zt),null;case 4:return Oa(),null;case 10:return hm(a.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var Ld=!1,_n=!1,mI=typeof WeakSet=="function"?WeakSet:Set,$e=null;function La(o,a){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Vt(o,a,g)}else d.current=null}function Fm(o,a,d){try{d()}catch(g){Vt(o,a,g)}}var Z1=!1;function gI(o,a){if(Xp=rd,o=Tw(),Hp(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var E=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var I=0,q=-1,J=-1,ie=0,ye=0,ve=o,me=null;t:for(;;){for(var Oe;ve!==d||E!==0&&ve.nodeType!==3||(q=I+E),ve!==C||g!==0&&ve.nodeType!==3||(J=I+g),ve.nodeType===3&&(I+=ve.nodeValue.length),(Oe=ve.firstChild)!==null;)me=ve,ve=Oe;for(;;){if(ve===o)break t;if(me===d&&++ie===E&&(q=I),me===C&&++ye===g&&(J=I),(Oe=ve.nextSibling)!==null)break;ve=me,me=ve.parentNode}ve=Oe}d=q===-1||J===-1?null:{start:q,end:J}}else d=null}d=d||{start:0,end:0}}else d=null;for(Jp={focusedElem:o,selectionRange:d},rd=!1,$e=a;$e!==null;)if(a=$e,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,$e=o;else for(;$e!==null;){a=$e;try{var Fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var ze=Fe.memoizedProps,Qt=Fe.memoizedState,re=a.stateNode,ee=re.getSnapshotBeforeUpdate(a.elementType===a.type?ze:Ar(a.type,ze),Qt);re.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var oe=a.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ne){Vt(a,a.return,Ne)}if(o=a.sibling,o!==null){o.return=a.return,$e=o;break}$e=a.return}return Fe=Z1,Z1=!1,Fe}function Cc(o,a,d){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var E=g=g.next;do{if((E.tag&o)===o){var C=E.destroy;E.destroy=void 0,C!==void 0&&Fm(a,d,C)}E=E.next}while(E!==g)}}function $d(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&o)===o){var g=d.create;d.destroy=g()}d=d.next}while(d!==a)}}function Um(o){var a=o.ref;if(a!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof a=="function"?a(o):a.current=o}}function X1(o){var a=o.alternate;a!==null&&(o.alternate=null,X1(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[Xr],delete a[mc],delete a[rm],delete a[XA],delete a[JA])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function J1(o){return o.tag===5||o.tag===3||o.tag===4}function eb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||J1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function zm(o,a,d){var g=o.tag;if(g===5||g===6)o=o.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(o,a):d.insertBefore(o,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(o,d)):(a=d,a.appendChild(o)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=md));else if(g!==4&&(o=o.child,o!==null))for(zm(o,a,d),o=o.sibling;o!==null;)zm(o,a,d),o=o.sibling}function Wm(o,a,d){var g=o.tag;if(g===5||g===6)o=o.stateNode,a?d.insertBefore(o,a):d.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Wm(o,a,d),o=o.sibling;o!==null;)Wm(o,a,d),o=o.sibling}var wn=null,Ir=!1;function go(o,a,d){for(d=d.child;d!==null;)tb(o,a,d),d=d.sibling}function tb(o,a,d){if(Zr&&typeof Zr.onCommitFiberUnmount=="function")try{Zr.onCommitFiberUnmount(Zu,d)}catch{}switch(d.tag){case 5:_n||La(d,a);case 6:var g=wn,E=Ir;wn=null,go(o,a,d),wn=g,Ir=E,wn!==null&&(Ir?(o=wn,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):wn.removeChild(d.stateNode));break;case 18:wn!==null&&(Ir?(o=wn,d=d.stateNode,o.nodeType===8?nm(o.parentNode,d):o.nodeType===1&&nm(o,d),sc(o)):nm(wn,d.stateNode));break;case 4:g=wn,E=Ir,wn=d.stateNode.containerInfo,Ir=!0,go(o,a,d),wn=g,Ir=E;break;case 0:case 11:case 14:case 15:if(!_n&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){E=g=g.next;do{var C=E,I=C.destroy;C=C.tag,I!==void 0&&((C&2)!==0||(C&4)!==0)&&Fm(d,a,I),E=E.next}while(E!==g)}go(o,a,d);break;case 1:if(!_n&&(La(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(q){Vt(d,a,q)}go(o,a,d);break;case 21:go(o,a,d);break;case 22:d.mode&1?(_n=(g=_n)||d.memoizedState!==null,go(o,a,d),_n=g):go(o,a,d);break;default:go(o,a,d)}}function nb(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new mI),a.forEach(function(g){var E=kI.bind(null,o,g);d.has(g)||(d.add(g),g.then(E,E))})}}function Mr(o,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var E=d[g];try{var C=o,I=a,q=I;e:for(;q!==null;){switch(q.tag){case 5:wn=q.stateNode,Ir=!1;break e;case 3:wn=q.stateNode.containerInfo,Ir=!0;break e;case 4:wn=q.stateNode.containerInfo,Ir=!0;break e}q=q.return}if(wn===null)throw Error(n(160));tb(C,I,E),wn=null,Ir=!1;var J=E.alternate;J!==null&&(J.return=null),E.return=null}catch(ie){Vt(E,a,ie)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)rb(a,o),a=a.sibling}function rb(o,a){var d=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Mr(a,o),ts(o),g&4){try{Cc(3,o,o.return),$d(3,o)}catch(ze){Vt(o,o.return,ze)}try{Cc(5,o,o.return)}catch(ze){Vt(o,o.return,ze)}}break;case 1:Mr(a,o),ts(o),g&512&&d!==null&&La(d,d.return);break;case 5:if(Mr(a,o),ts(o),g&512&&d!==null&&La(d,d.return),o.flags&32){var E=o.stateNode;try{$(E,"")}catch(ze){Vt(o,o.return,ze)}}if(g&4&&(E=o.stateNode,E!=null)){var C=o.memoizedProps,I=d!==null?d.memoizedProps:C,q=o.type,J=o.updateQueue;if(o.updateQueue=null,J!==null)try{q==="input"&&C.type==="radio"&&C.name!=null&&nn(E,C),kt(q,I);var ie=kt(q,C);for(I=0;I<J.length;I+=2){var ye=J[I],ve=J[I+1];ye==="style"?Xe(E,ve):ye==="dangerouslySetInnerHTML"?j(E,ve):ye==="children"?$(E,ve):T(E,ye,ve,ie)}switch(q){case"input":xn(E,C);break;case"textarea":ke(E,C);break;case"select":var me=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!C.multiple;var Oe=C.value;Oe!=null?je(E,!!C.multiple,Oe,!1):me!==!!C.multiple&&(C.defaultValue!=null?je(E,!!C.multiple,C.defaultValue,!0):je(E,!!C.multiple,C.multiple?[]:"",!1))}E[mc]=C}catch(ze){Vt(o,o.return,ze)}}break;case 6:if(Mr(a,o),ts(o),g&4){if(o.stateNode===null)throw Error(n(162));E=o.stateNode,C=o.memoizedProps;try{E.nodeValue=C}catch(ze){Vt(o,o.return,ze)}}break;case 3:if(Mr(a,o),ts(o),g&4&&d!==null&&d.memoizedState.isDehydrated)try{sc(a.containerInfo)}catch(ze){Vt(o,o.return,ze)}break;case 4:Mr(a,o),ts(o);break;case 13:Mr(a,o),ts(o),E=o.child,E.flags&8192&&(C=E.memoizedState!==null,E.stateNode.isHidden=C,!C||E.alternate!==null&&E.alternate.memoizedState!==null||(qm=Yt())),g&4&&nb(o);break;case 22:if(ye=d!==null&&d.memoizedState!==null,o.mode&1?(_n=(ie=_n)||ye,Mr(a,o),_n=ie):Mr(a,o),ts(o),g&8192){if(ie=o.memoizedState!==null,(o.stateNode.isHidden=ie)&&!ye&&(o.mode&1)!==0)for($e=o,ye=o.child;ye!==null;){for(ve=$e=ye;$e!==null;){switch(me=$e,Oe=me.child,me.tag){case 0:case 11:case 14:case 15:Cc(4,me,me.return);break;case 1:La(me,me.return);var Fe=me.stateNode;if(typeof Fe.componentWillUnmount=="function"){g=me,d=me.return;try{a=g,Fe.props=a.memoizedProps,Fe.state=a.memoizedState,Fe.componentWillUnmount()}catch(ze){Vt(g,d,ze)}}break;case 5:La(me,me.return);break;case 22:if(me.memoizedState!==null){ib(ve);continue}}Oe!==null?(Oe.return=me,$e=Oe):ib(ve)}ye=ye.sibling}e:for(ye=null,ve=o;;){if(ve.tag===5){if(ye===null){ye=ve;try{E=ve.stateNode,ie?(C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(q=ve.stateNode,J=ve.memoizedProps.style,I=J!=null&&J.hasOwnProperty("display")?J.display:null,q.style.display=ue("display",I))}catch(ze){Vt(o,o.return,ze)}}}else if(ve.tag===6){if(ye===null)try{ve.stateNode.nodeValue=ie?"":ve.memoizedProps}catch(ze){Vt(o,o.return,ze)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===o)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===o)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===o)break e;ye===ve&&(ye=null),ve=ve.return}ye===ve&&(ye=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:Mr(a,o),ts(o),g&4&&nb(o);break;case 21:break;default:Mr(a,o),ts(o)}}function ts(o){var a=o.flags;if(a&2){try{e:{for(var d=o.return;d!==null;){if(J1(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var E=g.stateNode;g.flags&32&&($(E,""),g.flags&=-33);var C=eb(o);Wm(o,C,E);break;case 3:case 4:var I=g.stateNode.containerInfo,q=eb(o);zm(o,q,I);break;default:throw Error(n(161))}}catch(J){Vt(o,o.return,J)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function yI(o,a,d){$e=o,sb(o)}function sb(o,a,d){for(var g=(o.mode&1)!==0;$e!==null;){var E=$e,C=E.child;if(E.tag===22&&g){var I=E.memoizedState!==null||Ld;if(!I){var q=E.alternate,J=q!==null&&q.memoizedState!==null||_n;q=Ld;var ie=_n;if(Ld=I,(_n=J)&&!ie)for($e=E;$e!==null;)I=$e,J=I.child,I.tag===22&&I.memoizedState!==null?ab(E):J!==null?(J.return=I,$e=J):ab(E);for(;C!==null;)$e=C,sb(C),C=C.sibling;$e=E,Ld=q,_n=ie}ob(o)}else(E.subtreeFlags&8772)!==0&&C!==null?(C.return=E,$e=C):ob(o)}}function ob(o){for(;$e!==null;){var a=$e;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:_n||$d(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!_n)if(d===null)g.componentDidMount();else{var E=a.elementType===a.type?d.memoizedProps:Ar(a.type,d.memoizedProps);g.componentDidUpdate(E,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var C=a.updateQueue;C!==null&&i1(a,C,g);break;case 3:var I=a.updateQueue;if(I!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}i1(a,I,d)}break;case 5:var q=a.stateNode;if(d===null&&a.flags&4){d=q;var J=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&d.focus();break;case"img":J.src&&(d.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ie=a.alternate;if(ie!==null){var ye=ie.memoizedState;if(ye!==null){var ve=ye.dehydrated;ve!==null&&sc(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}_n||a.flags&512&&Um(a)}catch(me){Vt(a,a.return,me)}}if(a===o){$e=null;break}if(d=a.sibling,d!==null){d.return=a.return,$e=d;break}$e=a.return}}function ib(o){for(;$e!==null;){var a=$e;if(a===o){$e=null;break}var d=a.sibling;if(d!==null){d.return=a.return,$e=d;break}$e=a.return}}function ab(o){for(;$e!==null;){var a=$e;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{$d(4,a)}catch(J){Vt(a,d,J)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var E=a.return;try{g.componentDidMount()}catch(J){Vt(a,E,J)}}var C=a.return;try{Um(a)}catch(J){Vt(a,C,J)}break;case 5:var I=a.return;try{Um(a)}catch(J){Vt(a,I,J)}}}catch(J){Vt(a,a.return,J)}if(a===o){$e=null;break}var q=a.sibling;if(q!==null){q.return=a.return,$e=q;break}$e=a.return}}var vI=Math.ceil,Bd=M.ReactCurrentDispatcher,Hm=M.ReactCurrentOwner,gr=M.ReactCurrentBatchConfig,bt=0,pn=null,Xt=null,bn=0,lr=0,$a=uo(0),sn=0,jc=null,ji=0,Fd=0,Vm=0,_c=null,Kn=null,qm=0,Ba=1/0,Ts=null,Ud=!1,Km=null,yo=null,zd=!1,vo=null,Wd=0,Tc=0,Gm=null,Hd=-1,Vd=0;function Ln(){return(bt&6)!==0?Yt():Hd!==-1?Hd:Hd=Yt()}function xo(o){return(o.mode&1)===0?1:(bt&2)!==0&&bn!==0?bn&-bn:tI.transition!==null?(Vd===0&&(Vd=ew()),Vd):(o=_t,o!==0||(o=window.event,o=o===void 0?16:cw(o.type)),o)}function Or(o,a,d,g){if(50<Tc)throw Tc=0,Gm=null,Error(n(185));Jl(o,d,g),((bt&2)===0||o!==pn)&&(o===pn&&((bt&2)===0&&(Fd|=d),sn===4&&wo(o,bn)),Gn(o,g),d===1&&bt===0&&(a.mode&1)===0&&(Ba=Yt()+500,xd&&ho()))}function Gn(o,a){var d=o.callbackNode;tA(o,a);var g=ed(o,o===pn?bn:0);if(g===0)d!==null&&Zx(d),o.callbackNode=null,o.callbackPriority=0;else if(a=g&-g,o.callbackPriority!==a){if(d!=null&&Zx(d),a===1)o.tag===0?eI(cb.bind(null,o)):Gw(cb.bind(null,o)),QA(function(){(bt&6)===0&&ho()}),d=null;else{switch(tw(g)){case 1:d=jp;break;case 4:d=Xx;break;case 16:d=Qu;break;case 536870912:d=Jx;break;default:d=Qu}d=yb(d,lb.bind(null,o))}o.callbackPriority=a,o.callbackNode=d}}function lb(o,a){if(Hd=-1,Vd=0,(bt&6)!==0)throw Error(n(327));var d=o.callbackNode;if(Fa()&&o.callbackNode!==d)return null;var g=ed(o,o===pn?bn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||a)a=qd(o,g);else{a=g;var E=bt;bt|=2;var C=db();(pn!==o||bn!==a)&&(Ts=null,Ba=Yt()+500,Ti(o,a));do try{bI();break}catch(q){ub(o,q)}while(!0);fm(),Bd.current=C,bt=E,Xt!==null?a=0:(pn=null,bn=0,a=sn)}if(a!==0){if(a===2&&(E=_p(o),E!==0&&(g=E,a=Ym(o,E))),a===1)throw d=jc,Ti(o,0),wo(o,g),Gn(o,Yt()),d;if(a===6)wo(o,g);else{if(E=o.current.alternate,(g&30)===0&&!xI(E)&&(a=qd(o,g),a===2&&(C=_p(o),C!==0&&(g=C,a=Ym(o,C))),a===1))throw d=jc,Ti(o,0),wo(o,g),Gn(o,Yt()),d;switch(o.finishedWork=E,o.finishedLanes=g,a){case 0:case 1:throw Error(n(345));case 2:Pi(o,Kn,Ts);break;case 3:if(wo(o,g),(g&130023424)===g&&(a=qm+500-Yt(),10<a)){if(ed(o,0)!==0)break;if(E=o.suspendedLanes,(E&g)!==g){Ln(),o.pingedLanes|=o.suspendedLanes&E;break}o.timeoutHandle=tm(Pi.bind(null,o,Kn,Ts),a);break}Pi(o,Kn,Ts);break;case 4:if(wo(o,g),(g&4194240)===g)break;for(a=o.eventTimes,E=-1;0<g;){var I=31-Tr(g);C=1<<I,I=a[I],I>E&&(E=I),g&=~C}if(g=E,g=Yt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*vI(g/1960))-g,10<g){o.timeoutHandle=tm(Pi.bind(null,o,Kn,Ts),g);break}Pi(o,Kn,Ts);break;case 5:Pi(o,Kn,Ts);break;default:throw Error(n(329))}}}return Gn(o,Yt()),o.callbackNode===d?lb.bind(null,o):null}function Ym(o,a){var d=_c;return o.current.memoizedState.isDehydrated&&(Ti(o,a).flags|=256),o=qd(o,a),o!==2&&(a=Kn,Kn=d,a!==null&&Qm(a)),o}function Qm(o){Kn===null?Kn=o:Kn.push.apply(Kn,o)}function xI(o){for(var a=o;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var E=d[g],C=E.getSnapshot;E=E.value;try{if(!Pr(C(),E))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function wo(o,a){for(a&=~Vm,a&=~Fd,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var d=31-Tr(a),g=1<<d;o[d]=-1,a&=~g}}function cb(o){if((bt&6)!==0)throw Error(n(327));Fa();var a=ed(o,0);if((a&1)===0)return Gn(o,Yt()),null;var d=qd(o,a);if(o.tag!==0&&d===2){var g=_p(o);g!==0&&(a=g,d=Ym(o,g))}if(d===1)throw d=jc,Ti(o,0),wo(o,a),Gn(o,Yt()),d;if(d===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,Pi(o,Kn,Ts),Gn(o,Yt()),null}function Zm(o,a){var d=bt;bt|=1;try{return o(a)}finally{bt=d,bt===0&&(Ba=Yt()+500,xd&&ho())}}function _i(o){vo!==null&&vo.tag===0&&(bt&6)===0&&Fa();var a=bt;bt|=1;var d=gr.transition,g=_t;try{if(gr.transition=null,_t=1,o)return o()}finally{_t=g,gr.transition=d,bt=a,(bt&6)===0&&ho()}}function Xm(){lr=$a.current,Ot($a)}function Ti(o,a){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,YA(d)),Xt!==null)for(d=Xt.return;d!==null;){var g=d;switch(am(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&yd();break;case 3:Oa(),Ot(Hn),Ot(kn),wm();break;case 5:vm(g);break;case 4:Oa();break;case 13:Ot(zt);break;case 19:Ot(zt);break;case 10:hm(g.type._context);break;case 22:case 23:Xm()}d=d.return}if(pn=o,Xt=o=bo(o.current,null),bn=lr=a,sn=0,jc=null,Vm=Fd=ji=0,Kn=_c=null,Ni!==null){for(a=0;a<Ni.length;a++)if(d=Ni[a],g=d.interleaved,g!==null){d.interleaved=null;var E=g.next,C=d.pending;if(C!==null){var I=C.next;C.next=E,g.next=I}d.pending=g}Ni=null}return o}function ub(o,a){do{var d=Xt;try{if(fm(),Td.current=Id,Pd){for(var g=Wt.memoizedState;g!==null;){var E=g.queue;E!==null&&(E.pending=null),g=g.next}Pd=!1}if(Ci=0,hn=rn=Wt=null,bc=!1,Ec=0,Hm.current=null,d===null||d.return===null){sn=1,jc=a,Xt=null;break}e:{var C=o,I=d.return,q=d,J=a;if(a=bn,q.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ie=J,ye=q,ve=ye.tag;if((ye.mode&1)===0&&(ve===0||ve===11||ve===15)){var me=ye.alternate;me?(ye.updateQueue=me.updateQueue,ye.memoizedState=me.memoizedState,ye.lanes=me.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Oe=O1(I);if(Oe!==null){Oe.flags&=-257,D1(Oe,I,q,C,a),Oe.mode&1&&M1(C,ie,a),a=Oe,J=ie;var Fe=a.updateQueue;if(Fe===null){var ze=new Set;ze.add(J),a.updateQueue=ze}else Fe.add(J);break e}else{if((a&1)===0){M1(C,ie,a),Jm();break e}J=Error(n(426))}}else if(Lt&&q.mode&1){var Qt=O1(I);if(Qt!==null){(Qt.flags&65536)===0&&(Qt.flags|=256),D1(Qt,I,q,C,a),um(Da(J,q));break e}}C=J=Da(J,q),sn!==4&&(sn=2),_c===null?_c=[C]:_c.push(C),C=I;do{switch(C.tag){case 3:C.flags|=65536,a&=-a,C.lanes|=a;var re=A1(C,J,a);o1(C,re);break e;case 1:q=J;var ee=C.type,oe=C.stateNode;if((C.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(yo===null||!yo.has(oe)))){C.flags|=65536,a&=-a,C.lanes|=a;var Ne=I1(C,q,a);o1(C,Ne);break e}}C=C.return}while(C!==null)}hb(d)}catch(He){a=He,Xt===d&&d!==null&&(Xt=d=d.return);continue}break}while(!0)}function db(){var o=Bd.current;return Bd.current=Id,o===null?Id:o}function Jm(){(sn===0||sn===3||sn===2)&&(sn=4),pn===null||(ji&268435455)===0&&(Fd&268435455)===0||wo(pn,bn)}function qd(o,a){var d=bt;bt|=2;var g=db();(pn!==o||bn!==a)&&(Ts=null,Ti(o,a));do try{wI();break}catch(E){ub(o,E)}while(!0);if(fm(),bt=d,Bd.current=g,Xt!==null)throw Error(n(261));return pn=null,bn=0,sn}function wI(){for(;Xt!==null;)fb(Xt)}function bI(){for(;Xt!==null&&!q4();)fb(Xt)}function fb(o){var a=gb(o.alternate,o,lr);o.memoizedProps=o.pendingProps,a===null?hb(o):Xt=a,Hm.current=null}function hb(o){var a=o;do{var d=a.alternate;if(o=a.return,(a.flags&32768)===0){if(d=hI(d,a,lr),d!==null){Xt=d;return}}else{if(d=pI(d,a),d!==null){d.flags&=32767,Xt=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{sn=6,Xt=null;return}}if(a=a.sibling,a!==null){Xt=a;return}Xt=a=o}while(a!==null);sn===0&&(sn=5)}function Pi(o,a,d){var g=_t,E=gr.transition;try{gr.transition=null,_t=1,EI(o,a,d,g)}finally{gr.transition=E,_t=g}return null}function EI(o,a,d,g){do Fa();while(vo!==null);if((bt&6)!==0)throw Error(n(327));d=o.finishedWork;var E=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var C=d.lanes|d.childLanes;if(nA(o,C),o===pn&&(Xt=pn=null,bn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||zd||(zd=!0,yb(Qu,function(){return Fa(),null})),C=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||C){C=gr.transition,gr.transition=null;var I=_t;_t=1;var q=bt;bt|=4,Hm.current=null,gI(o,d),rb(d,o),zA(Jp),rd=!!Xp,Jp=Xp=null,o.current=d,yI(d),K4(),bt=q,_t=I,gr.transition=C}else o.current=d;if(zd&&(zd=!1,vo=o,Wd=E),C=o.pendingLanes,C===0&&(yo=null),Q4(d.stateNode),Gn(o,Yt()),a!==null)for(g=o.onRecoverableError,d=0;d<a.length;d++)E=a[d],g(E.value,{componentStack:E.stack,digest:E.digest});if(Ud)throw Ud=!1,o=Km,Km=null,o;return(Wd&1)!==0&&o.tag!==0&&Fa(),C=o.pendingLanes,(C&1)!==0?o===Gm?Tc++:(Tc=0,Gm=o):Tc=0,ho(),null}function Fa(){if(vo!==null){var o=tw(Wd),a=gr.transition,d=_t;try{if(gr.transition=null,_t=16>o?16:o,vo===null)var g=!1;else{if(o=vo,vo=null,Wd=0,(bt&6)!==0)throw Error(n(331));var E=bt;for(bt|=4,$e=o.current;$e!==null;){var C=$e,I=C.child;if(($e.flags&16)!==0){var q=C.deletions;if(q!==null){for(var J=0;J<q.length;J++){var ie=q[J];for($e=ie;$e!==null;){var ye=$e;switch(ye.tag){case 0:case 11:case 15:Cc(8,ye,C)}var ve=ye.child;if(ve!==null)ve.return=ye,$e=ve;else for(;$e!==null;){ye=$e;var me=ye.sibling,Oe=ye.return;if(X1(ye),ye===ie){$e=null;break}if(me!==null){me.return=Oe,$e=me;break}$e=Oe}}}var Fe=C.alternate;if(Fe!==null){var ze=Fe.child;if(ze!==null){Fe.child=null;do{var Qt=ze.sibling;ze.sibling=null,ze=Qt}while(ze!==null)}}$e=C}}if((C.subtreeFlags&2064)!==0&&I!==null)I.return=C,$e=I;else e:for(;$e!==null;){if(C=$e,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Cc(9,C,C.return)}var re=C.sibling;if(re!==null){re.return=C.return,$e=re;break e}$e=C.return}}var ee=o.current;for($e=ee;$e!==null;){I=$e;var oe=I.child;if((I.subtreeFlags&2064)!==0&&oe!==null)oe.return=I,$e=oe;else e:for(I=ee;$e!==null;){if(q=$e,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:$d(9,q)}}catch(He){Vt(q,q.return,He)}if(q===I){$e=null;break e}var Ne=q.sibling;if(Ne!==null){Ne.return=q.return,$e=Ne;break e}$e=q.return}}if(bt=E,ho(),Zr&&typeof Zr.onPostCommitFiberRoot=="function")try{Zr.onPostCommitFiberRoot(Zu,o)}catch{}g=!0}return g}finally{_t=d,gr.transition=a}}return!1}function pb(o,a,d){a=Da(d,a),a=A1(o,a,1),o=mo(o,a,1),a=Ln(),o!==null&&(Jl(o,1,a),Gn(o,a))}function Vt(o,a,d){if(o.tag===3)pb(o,o,d);else for(;a!==null;){if(a.tag===3){pb(a,o,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(yo===null||!yo.has(g))){o=Da(d,o),o=I1(a,o,1),a=mo(a,o,1),o=Ln(),a!==null&&(Jl(a,1,o),Gn(a,o));break}}a=a.return}}function SI(o,a,d){var g=o.pingCache;g!==null&&g.delete(a),a=Ln(),o.pingedLanes|=o.suspendedLanes&d,pn===o&&(bn&d)===d&&(sn===4||sn===3&&(bn&130023424)===bn&&500>Yt()-qm?Ti(o,0):Vm|=d),Gn(o,a)}function mb(o,a){a===0&&((o.mode&1)===0?a=1:(a=Ju,Ju<<=1,(Ju&130023424)===0&&(Ju=4194304)));var d=Ln();o=Cs(o,a),o!==null&&(Jl(o,a,d),Gn(o,d))}function NI(o){var a=o.memoizedState,d=0;a!==null&&(d=a.retryLane),mb(o,d)}function kI(o,a){var d=0;switch(o.tag){case 13:var g=o.stateNode,E=o.memoizedState;E!==null&&(d=E.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(a),mb(o,d)}var gb;gb=function(o,a,d){if(o!==null)if(o.memoizedProps!==a.pendingProps||Hn.current)qn=!0;else{if((o.lanes&d)===0&&(a.flags&128)===0)return qn=!1,fI(o,a,d);qn=(o.flags&131072)!==0}else qn=!1,Lt&&(a.flags&1048576)!==0&&Yw(a,bd,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;Dd(o,a),o=a.pendingProps;var E=_a(a,kn.current);Ma(a,d),E=Sm(null,a,g,o,E,d);var C=Nm();return a.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Vn(g)?(C=!0,vd(a)):C=!1,a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,gm(a),E.updater=Md,a.stateNode=E,E._reactInternals=a,Pm(a,g,o,d),a=Mm(null,a,g,!0,C,d)):(a.tag=0,Lt&&C&&im(a),Dn(null,a,E,d),a=a.child),a;case 16:g=a.elementType;e:{switch(Dd(o,a),o=a.pendingProps,E=g._init,g=E(g._payload),a.type=g,E=a.tag=jI(g),o=Ar(g,o),E){case 0:a=Im(null,a,g,o,d);break e;case 1:a=z1(null,a,g,o,d);break e;case 11:a=L1(null,a,g,o,d);break e;case 14:a=$1(null,a,g,Ar(g.type,o),d);break e}throw Error(n(306,g,""))}return a;case 0:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:Ar(g,E),Im(o,a,g,E,d);case 1:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:Ar(g,E),z1(o,a,g,E,d);case 3:e:{if(W1(a),o===null)throw Error(n(387));g=a.pendingProps,C=a.memoizedState,E=C.element,s1(o,a),jd(a,g,null,d);var I=a.memoizedState;if(g=I.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){E=Da(Error(n(423)),a),a=H1(o,a,g,d,E);break e}else if(g!==E){E=Da(Error(n(424)),a),a=H1(o,a,g,d,E);break e}else for(ar=co(a.stateNode.containerInfo.firstChild),ir=a,Lt=!0,Rr=null,d=n1(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ra(),g===E){a=_s(o,a,d);break e}Dn(o,a,g,d)}a=a.child}return a;case 5:return a1(a),o===null&&cm(a),g=a.type,E=a.pendingProps,C=o!==null?o.memoizedProps:null,I=E.children,em(g,E)?I=null:C!==null&&em(g,C)&&(a.flags|=32),U1(o,a),Dn(o,a,I,d),a.child;case 6:return o===null&&cm(a),null;case 13:return V1(o,a,d);case 4:return ym(a,a.stateNode.containerInfo),g=a.pendingProps,o===null?a.child=Aa(a,null,g,d):Dn(o,a,g,d),a.child;case 11:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:Ar(g,E),L1(o,a,g,E,d);case 7:return Dn(o,a,a.pendingProps,d),a.child;case 8:return Dn(o,a,a.pendingProps.children,d),a.child;case 12:return Dn(o,a,a.pendingProps.children,d),a.child;case 10:e:{if(g=a.type._context,E=a.pendingProps,C=a.memoizedProps,I=E.value,It(Nd,g._currentValue),g._currentValue=I,C!==null)if(Pr(C.value,I)){if(C.children===E.children&&!Hn.current){a=_s(o,a,d);break e}}else for(C=a.child,C!==null&&(C.return=a);C!==null;){var q=C.dependencies;if(q!==null){I=C.child;for(var J=q.firstContext;J!==null;){if(J.context===g){if(C.tag===1){J=js(-1,d&-d),J.tag=2;var ie=C.updateQueue;if(ie!==null){ie=ie.shared;var ye=ie.pending;ye===null?J.next=J:(J.next=ye.next,ye.next=J),ie.pending=J}}C.lanes|=d,J=C.alternate,J!==null&&(J.lanes|=d),pm(C.return,d,a),q.lanes|=d;break}J=J.next}}else if(C.tag===10)I=C.type===a.type?null:C.child;else if(C.tag===18){if(I=C.return,I===null)throw Error(n(341));I.lanes|=d,q=I.alternate,q!==null&&(q.lanes|=d),pm(I,d,a),I=C.sibling}else I=C.child;if(I!==null)I.return=C;else for(I=C;I!==null;){if(I===a){I=null;break}if(C=I.sibling,C!==null){C.return=I.return,I=C;break}I=I.return}C=I}Dn(o,a,E.children,d),a=a.child}return a;case 9:return E=a.type,g=a.pendingProps.children,Ma(a,d),E=pr(E),g=g(E),a.flags|=1,Dn(o,a,g,d),a.child;case 14:return g=a.type,E=Ar(g,a.pendingProps),E=Ar(g.type,E),$1(o,a,g,E,d);case 15:return B1(o,a,a.type,a.pendingProps,d);case 17:return g=a.type,E=a.pendingProps,E=a.elementType===g?E:Ar(g,E),Dd(o,a),a.tag=1,Vn(g)?(o=!0,vd(a)):o=!1,Ma(a,d),P1(a,g,E),Pm(a,g,E,d),Mm(null,a,g,!0,o,d);case 19:return K1(o,a,d);case 22:return F1(o,a,d)}throw Error(n(156,a.tag))};function yb(o,a){return Qx(o,a)}function CI(o,a,d,g){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(o,a,d,g){return new CI(o,a,d,g)}function eg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function jI(o){if(typeof o=="function")return eg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===V)return 14}return 2}function bo(o,a){var d=o.alternate;return d===null?(d=yr(o.tag,a,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=a,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,a=o.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function Kd(o,a,d,g,E,C){var I=2;if(g=o,typeof o=="function")eg(o)&&(I=1);else if(typeof o=="string")I=5;else e:switch(o){case O:return Ri(d.children,E,C,a);case F:I=8,E|=8;break;case R:return o=yr(12,d,a,E|2),o.elementType=R,o.lanes=C,o;case K:return o=yr(13,d,a,E),o.elementType=K,o.lanes=C,o;case H:return o=yr(19,d,a,E),o.elementType=H,o.lanes=C,o;case te:return Gd(d,E,C,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:I=10;break e;case A:I=9;break e;case U:I=11;break e;case V:I=14;break e;case Q:I=16,g=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return a=yr(I,d,a,E),a.elementType=o,a.type=g,a.lanes=C,a}function Ri(o,a,d,g){return o=yr(7,o,g,a),o.lanes=d,o}function Gd(o,a,d,g){return o=yr(22,o,g,a),o.elementType=te,o.lanes=d,o.stateNode={isHidden:!1},o}function tg(o,a,d){return o=yr(6,o,null,a),o.lanes=d,o}function ng(o,a,d){return a=yr(4,o.children!==null?o.children:[],o.key,a),a.lanes=d,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function _I(o,a,d,g,E){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=g,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function rg(o,a,d,g,E,C,I,q,J){return o=new _I(o,a,d,q,J),a===1?(a=1,C===!0&&(a|=8)):a=0,C=yr(3,null,null,a),o.current=C,C.stateNode=o,C.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(C),o}function TI(o,a,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:g==null?null:""+g,children:o,containerInfo:a,implementation:d}}function vb(o){if(!o)return fo;o=o._reactInternals;e:{if(xi(o)!==o||o.tag!==1)throw Error(n(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Vn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(o.tag===1){var d=o.type;if(Vn(d))return qw(o,d,a)}return a}function xb(o,a,d,g,E,C,I,q,J){return o=rg(d,g,!0,o,E,C,I,q,J),o.context=vb(null),d=o.current,g=Ln(),E=xo(d),C=js(g,E),C.callback=a??null,mo(d,C,E),o.current.lanes=E,Jl(o,E,g),Gn(o,g),o}function Yd(o,a,d,g){var E=a.current,C=Ln(),I=xo(E);return d=vb(d),a.context===null?a.context=d:a.pendingContext=d,a=js(C,I),a.payload={element:o},g=g===void 0?null:g,g!==null&&(a.callback=g),o=mo(E,a,I),o!==null&&(Or(o,E,I,C),Cd(o,E,I)),I}function Qd(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function wb(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<a?d:a}}function sg(o,a){wb(o,a),(o=o.alternate)&&wb(o,a)}function PI(){return null}var bb=typeof reportError=="function"?reportError:function(o){console.error(o)};function og(o){this._internalRoot=o}Zd.prototype.render=og.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(n(409));Yd(o,a,null,null)},Zd.prototype.unmount=og.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;_i(function(){Yd(null,o,null,null)}),a[Es]=null}};function Zd(o){this._internalRoot=o}Zd.prototype.unstable_scheduleHydration=function(o){if(o){var a=sw();o={blockedOn:null,target:o,priority:a};for(var d=0;d<io.length&&a!==0&&a<io[d].priority;d++);io.splice(d,0,o),d===0&&aw(o)}};function ig(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Xd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Eb(){}function RI(o,a,d,g,E){if(E){if(typeof g=="function"){var C=g;g=function(){var ie=Qd(I);C.call(ie)}}var I=xb(a,g,o,0,null,!1,!1,"",Eb);return o._reactRootContainer=I,o[Es]=I.current,hc(o.nodeType===8?o.parentNode:o),_i(),I}for(;E=o.lastChild;)o.removeChild(E);if(typeof g=="function"){var q=g;g=function(){var ie=Qd(J);q.call(ie)}}var J=rg(o,0,!1,null,null,!1,!1,"",Eb);return o._reactRootContainer=J,o[Es]=J.current,hc(o.nodeType===8?o.parentNode:o),_i(function(){Yd(a,J,d,g)}),J}function Jd(o,a,d,g,E){var C=d._reactRootContainer;if(C){var I=C;if(typeof E=="function"){var q=E;E=function(){var J=Qd(I);q.call(J)}}Yd(a,I,o,E)}else I=RI(d,a,o,E,g);return Qd(I)}nw=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var d=Xl(a.pendingLanes);d!==0&&(Pp(a,d|1),Gn(a,Yt()),(bt&6)===0&&(Ba=Yt()+500,ho()))}break;case 13:_i(function(){var g=Cs(o,1);if(g!==null){var E=Ln();Or(g,o,1,E)}}),sg(o,1)}},Rp=function(o){if(o.tag===13){var a=Cs(o,134217728);if(a!==null){var d=Ln();Or(a,o,134217728,d)}sg(o,134217728)}},rw=function(o){if(o.tag===13){var a=xo(o),d=Cs(o,a);if(d!==null){var g=Ln();Or(d,o,a,g)}sg(o,a)}},sw=function(){return _t},ow=function(o,a){var d=_t;try{return _t=o,a()}finally{_t=d}},mt=function(o,a,d){switch(a){case"input":if(xn(o,d),a=d.name,d.type==="radio"&&a!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==o&&g.form===o.form){var E=gd(g);if(!E)throw Error(n(90));Qe(g),xn(g,E)}}}break;case"textarea":ke(o,d);break;case"select":a=d.value,a!=null&&je(o,!!d.multiple,a,!1)}},Wn=Zm,Yr=_i;var AI={usingClientEntryPoint:!1,Events:[gc,Ca,gd,fn,Nn,Zm]},Pc={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},II={bundleType:Pc.bundleType,version:Pc.version,rendererPackageName:Pc.rendererPackageName,rendererConfig:Pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Gx(o),o===null?null:o.stateNode},findFiberByHostInstance:Pc.findFiberByHostInstance||PI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{Zu=ef.inject(II),Zr=ef}catch{}}return Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AI,Yn.createPortal=function(o,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ig(a))throw Error(n(200));return TI(o,a,null,d)},Yn.createRoot=function(o,a){if(!ig(o))throw Error(n(299));var d=!1,g="",E=bb;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=rg(o,1,!1,null,null,d,!1,g,E),o[Es]=a.current,hc(o.nodeType===8?o.parentNode:o),new og(a)},Yn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=Gx(a),o=o===null?null:o.stateNode,o},Yn.flushSync=function(o){return _i(o)},Yn.hydrate=function(o,a,d){if(!Xd(a))throw Error(n(200));return Jd(null,o,a,!0,d)},Yn.hydrateRoot=function(o,a,d){if(!ig(o))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,E=!1,C="",I=bb;if(d!=null&&(d.unstable_strictMode===!0&&(E=!0),d.identifierPrefix!==void 0&&(C=d.identifierPrefix),d.onRecoverableError!==void 0&&(I=d.onRecoverableError)),a=xb(a,null,o,1,d??null,E,!1,C,I),o[Es]=a.current,hc(o),g)for(o=0;o<g.length;o++)d=g[o],E=d._getVersion,E=E(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,E]:a.mutableSourceEagerHydrationData.push(d,E);return new Zd(a)},Yn.render=function(o,a,d){if(!Xd(a))throw Error(n(200));return Jd(null,o,a,!1,d)},Yn.unmountComponentAtNode=function(o){if(!Xd(o))throw Error(n(40));return o._reactRootContainer?(_i(function(){Jd(null,null,o,!1,function(){o._reactRootContainer=null,o[Es]=null})}),!0):!1},Yn.unstable_batchedUpdates=Zm,Yn.unstable_renderSubtreeIntoContainer=function(o,a,d,g){if(!Xd(d))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Jd(o,a,d,!1,g)},Yn.version="18.3.1-next-f1338f8080-20240426",Yn}var Rb;function VS(){if(Rb)return ug.exports;Rb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ug.exports=WI(),ug.exports}var Ab;function HI(){if(Ab)return nf;Ab=1;var t=VS();return nf.createRoot=t.createRoot,nf.hydrateRoot=t.hydrateRoot,nf}var VI=HI(),hg={},Ac={},Ib;function qI(){if(Ib)return Ac;Ib=1,Ac.byteLength=u,Ac.toByteArray=h,Ac.fromByteArray=x;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function l(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=w.indexOf("=");v===-1&&(v=S);var b=v===S?0:4-v%4;return[v,b]}function u(w){var S=l(w),v=S[0],b=S[1];return(v+b)*3/4-b}function f(w,S,v){return(S+v)*3/4-v}function h(w){var S,v=l(w),b=v[0],N=v[1],_=new n(f(w,b,N)),T=0,M=N>0?b-4:b,D;for(D=0;D<M;D+=4)S=e[w.charCodeAt(D)]<<18|e[w.charCodeAt(D+1)]<<12|e[w.charCodeAt(D+2)]<<6|e[w.charCodeAt(D+3)],_[T++]=S>>16&255,_[T++]=S>>8&255,_[T++]=S&255;return N===2&&(S=e[w.charCodeAt(D)]<<2|e[w.charCodeAt(D+1)]>>4,_[T++]=S&255),N===1&&(S=e[w.charCodeAt(D)]<<10|e[w.charCodeAt(D+1)]<<4|e[w.charCodeAt(D+2)]>>2,_[T++]=S>>8&255,_[T++]=S&255),_}function m(w){return t[w>>18&63]+t[w>>12&63]+t[w>>6&63]+t[w&63]}function p(w,S,v){for(var b,N=[],_=S;_<v;_+=3)b=(w[_]<<16&16711680)+(w[_+1]<<8&65280)+(w[_+2]&255),N.push(m(b));return N.join("")}function x(w){for(var S,v=w.length,b=v%3,N=[],_=16383,T=0,M=v-b;T<M;T+=_)N.push(p(w,T,T+_>M?M:T+_));return b===1?(S=w[v-1],N.push(t[S>>2]+t[S<<4&63]+"==")):b===2&&(S=(w[v-2]<<8)+w[v-1],N.push(t[S>>10]+t[S>>4&63]+t[S<<2&63]+"=")),N.join("")}return Ac}var rf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Mb;function KI(){return Mb||(Mb=1,rf.read=function(t,e,n,r,s){var i,l,u=s*8-r-1,f=(1<<u)-1,h=f>>1,m=-7,p=n?s-1:0,x=n?-1:1,w=t[e+p];for(p+=x,i=w&(1<<-m)-1,w>>=-m,m+=u;m>0;i=i*256+t[e+p],p+=x,m-=8);for(l=i&(1<<-m)-1,i>>=-m,m+=r;m>0;l=l*256+t[e+p],p+=x,m-=8);if(i===0)i=1-h;else{if(i===f)return l?NaN:(w?-1:1)*(1/0);l=l+Math.pow(2,r),i=i-h}return(w?-1:1)*l*Math.pow(2,i-r)},rf.write=function(t,e,n,r,s,i){var l,u,f,h=i*8-s-1,m=(1<<h)-1,p=m>>1,x=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:i-1,S=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=m):(l=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+p>=1?e+=x/f:e+=x*Math.pow(2,1-p),e*f>=2&&(l++,f/=2),l+p>=m?(u=0,l=m):l+p>=1?(u=(e*f-1)*Math.pow(2,s),l=l+p):(u=e*Math.pow(2,p-1)*Math.pow(2,s),l=0));s>=8;t[n+w]=u&255,w+=S,u/=256,s-=8);for(l=l<<s|u,h+=s;h>0;t[n+w]=l&255,w+=S,l/=256,h-=8);t[n+w-S]|=v*128}),rf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ob;function GI(){return Ob||(Ob=1,function(t){const e=qI(),n=KI(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const P=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(P,k),P.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(P){if(P>s)throw new RangeError('The value "'+P+'" is invalid for option "size"');const k=new Uint8Array(P);return Object.setPrototypeOf(k,u.prototype),k}function u(P,k,j){if(typeof P=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(P)}return f(P,k,j)}u.poolSize=8192;function f(P,k,j){if(typeof P=="string")return x(P,k);if(ArrayBuffer.isView(P))return S(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(pe(P,ArrayBuffer)||P&&pe(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(P,SharedArrayBuffer)||P&&pe(P.buffer,SharedArrayBuffer)))return v(P,k,j);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=P.valueOf&&P.valueOf();if($!=null&&$!==P)return u.from($,k,j);const X=b(P);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return u.from(P[Symbol.toPrimitive]("string"),k,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}u.from=function(P,k,j){return f(P,k,j)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function h(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function m(P,k,j){return h(P),P<=0?l(P):k!==void 0?typeof j=="string"?l(P).fill(k,j):l(P).fill(k):l(P)}u.alloc=function(P,k,j){return m(P,k,j)};function p(P){return h(P),l(P<0?0:N(P)|0)}u.allocUnsafe=function(P){return p(P)},u.allocUnsafeSlow=function(P){return p(P)};function x(P,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const j=T(P,k)|0;let $=l(j);const X=$.write(P,k);return X!==j&&($=$.slice(0,X)),$}function w(P){const k=P.length<0?0:N(P.length)|0,j=l(k);for(let $=0;$<k;$+=1)j[$]=P[$]&255;return j}function S(P){if(pe(P,Uint8Array)){const k=new Uint8Array(P);return v(k.buffer,k.byteOffset,k.byteLength)}return w(P)}function v(P,k,j){if(k<0||P.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<k+(j||0))throw new RangeError('"length" is outside of buffer bounds');let $;return k===void 0&&j===void 0?$=new Uint8Array(P):j===void 0?$=new Uint8Array(P,k):$=new Uint8Array(P,k,j),Object.setPrototypeOf($,u.prototype),$}function b(P){if(u.isBuffer(P)){const k=N(P.length)|0,j=l(k);return j.length===0||P.copy(j,0,0,k),j}if(P.length!==void 0)return typeof P.length!="number"||Pe(P.length)?l(0):w(P);if(P.type==="Buffer"&&Array.isArray(P.data))return w(P.data)}function N(P){if(P>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return P|0}function _(P){return+P!=P&&(P=0),u.alloc(+P)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,j){if(pe(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),pe(j,Uint8Array)&&(j=u.from(j,j.offset,j.byteLength)),!u.isBuffer(k)||!u.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===j)return 0;let $=k.length,X=j.length;for(let se=0,ue=Math.min($,X);se<ue;++se)if(k[se]!==j[se]){$=k[se],X=j[se];break}return $<X?-1:X<$?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,j){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let $;if(j===void 0)for(j=0,$=0;$<k.length;++$)j+=k[$].length;const X=u.allocUnsafe(j);let se=0;for($=0;$<k.length;++$){let ue=k[$];if(pe(ue,Uint8Array))se+ue.length>X.length?(u.isBuffer(ue)||(ue=u.from(ue)),ue.copy(X,se)):Uint8Array.prototype.set.call(X,ue,se);else if(u.isBuffer(ue))ue.copy(X,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ue.length}return X};function T(P,k){if(u.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||pe(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);const j=P.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&j===0)return 0;let X=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return xn(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return he(P).length;default:if(X)return $?-1:xn(P).length;k=(""+k).toLowerCase(),X=!0}}u.byteLength=T;function M(P,k,j){let $=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,k>>>=0,j<=k))return"";for(P||(P="utf8");;)switch(P){case"hex":return G(this,k,j);case"utf8":case"utf-8":return H(this,k,j);case"ascii":return te(this,k,j);case"latin1":case"binary":return Z(this,k,j);case"base64":return K(this,k,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,k,j);default:if($)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),$=!0}}u.prototype._isBuffer=!0;function D(P,k,j){const $=P[k];P[k]=P[j],P[j]=$}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let j=0;j<k;j+=2)D(this,j,j+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let j=0;j<k;j+=4)D(this,j,j+3),D(this,j+1,j+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let j=0;j<k;j+=8)D(this,j,j+7),D(this,j+1,j+6),D(this,j+2,j+5),D(this,j+3,j+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?H(this,0,k):M.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const j=t.INSPECT_MAX_BYTES;return k=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(k+=" ... "),"<Buffer "+k+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(k,j,$,X,se){if(pe(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(j===void 0&&(j=0),$===void 0&&($=k?k.length:0),X===void 0&&(X=0),se===void 0&&(se=this.length),j<0||$>k.length||X<0||se>this.length)throw new RangeError("out of range index");if(X>=se&&j>=$)return 0;if(X>=se)return-1;if(j>=$)return 1;if(j>>>=0,$>>>=0,X>>>=0,se>>>=0,this===k)return 0;let ue=se-X,Xe=$-j;const pt=Math.min(ue,Xe),at=this.slice(X,se),kt=k.slice(j,$);for(let Ce=0;Ce<pt;++Ce)if(at[Ce]!==kt[Ce]){ue=at[Ce],Xe=kt[Ce];break}return ue<Xe?-1:Xe<ue?1:0};function B(P,k,j,$,X){if(P.length===0)return-1;if(typeof j=="string"?($=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,Pe(j)&&(j=X?0:P.length-1),j<0&&(j=P.length+j),j>=P.length){if(X)return-1;j=P.length-1}else if(j<0)if(X)j=0;else return-1;if(typeof k=="string"&&(k=u.from(k,$)),u.isBuffer(k))return k.length===0?-1:O(P,k,j,$,X);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(P,k,j):Uint8Array.prototype.lastIndexOf.call(P,k,j):O(P,[k],j,$,X);throw new TypeError("val must be string, number or Buffer")}function O(P,k,j,$,X){let se=1,ue=P.length,Xe=k.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(P.length<2||k.length<2)return-1;se=2,ue/=2,Xe/=2,j/=2}function pt(kt,Ce){return se===1?kt[Ce]:kt.readUInt16BE(Ce*se)}let at;if(X){let kt=-1;for(at=j;at<ue;at++)if(pt(P,at)===pt(k,kt===-1?0:at-kt)){if(kt===-1&&(kt=at),at-kt+1===Xe)return kt*se}else kt!==-1&&(at-=at-kt),kt=-1}else for(j+Xe>ue&&(j=ue-Xe),at=j;at>=0;at--){let kt=!0;for(let Ce=0;Ce<Xe;Ce++)if(pt(P,at+Ce)!==pt(k,Ce)){kt=!1;break}if(kt)return at}return-1}u.prototype.includes=function(k,j,$){return this.indexOf(k,j,$)!==-1},u.prototype.indexOf=function(k,j,$){return B(this,k,j,$,!0)},u.prototype.lastIndexOf=function(k,j,$){return B(this,k,j,$,!1)};function F(P,k,j,$){j=Number(j)||0;const X=P.length-j;$?($=Number($),$>X&&($=X)):$=X;const se=k.length;$>se/2&&($=se/2);let ue;for(ue=0;ue<$;++ue){const Xe=parseInt(k.substr(ue*2,2),16);if(Pe(Xe))return ue;P[j+ue]=Xe}return ue}function R(P,k,j,$){return je(xn(k,P.length-j),P,j,$)}function L(P,k,j,$){return je(Gr(k),P,j,$)}function A(P,k,j,$){return je(he(k),P,j,$)}function U(P,k,j,$){return je(le(k,P.length-j),P,j,$)}u.prototype.write=function(k,j,$,X){if(j===void 0)X="utf8",$=this.length,j=0;else if($===void 0&&typeof j=="string")X=j,$=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite($)?($=$>>>0,X===void 0&&(X="utf8")):(X=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-j;if(($===void 0||$>se)&&($=se),k.length>0&&($<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let ue=!1;for(;;)switch(X){case"hex":return F(this,k,j,$);case"utf8":case"utf-8":return R(this,k,j,$);case"ascii":case"latin1":case"binary":return L(this,k,j,$);case"base64":return A(this,k,j,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,k,j,$);default:if(ue)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ue=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(P,k,j){return k===0&&j===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(k,j))}function H(P,k,j){j=Math.min(P.length,j);const $=[];let X=k;for(;X<j;){const se=P[X];let ue=null,Xe=se>239?4:se>223?3:se>191?2:1;if(X+Xe<=j){let pt,at,kt,Ce;switch(Xe){case 1:se<128&&(ue=se);break;case 2:pt=P[X+1],(pt&192)===128&&(Ce=(se&31)<<6|pt&63,Ce>127&&(ue=Ce));break;case 3:pt=P[X+1],at=P[X+2],(pt&192)===128&&(at&192)===128&&(Ce=(se&15)<<12|(pt&63)<<6|at&63,Ce>2047&&(Ce<55296||Ce>57343)&&(ue=Ce));break;case 4:pt=P[X+1],at=P[X+2],kt=P[X+3],(pt&192)===128&&(at&192)===128&&(kt&192)===128&&(Ce=(se&15)<<18|(pt&63)<<12|(at&63)<<6|kt&63,Ce>65535&&Ce<1114112&&(ue=Ce))}}ue===null?(ue=65533,Xe=1):ue>65535&&(ue-=65536,$.push(ue>>>10&1023|55296),ue=56320|ue&1023),$.push(ue),X+=Xe}return Q($)}const V=4096;function Q(P){const k=P.length;if(k<=V)return String.fromCharCode.apply(String,P);let j="",$=0;for(;$<k;)j+=String.fromCharCode.apply(String,P.slice($,$+=V));return j}function te(P,k,j){let $="";j=Math.min(P.length,j);for(let X=k;X<j;++X)$+=String.fromCharCode(P[X]&127);return $}function Z(P,k,j){let $="";j=Math.min(P.length,j);for(let X=k;X<j;++X)$+=String.fromCharCode(P[X]);return $}function G(P,k,j){const $=P.length;(!k||k<0)&&(k=0),(!j||j<0||j>$)&&(j=$);let X="";for(let se=k;se<j;++se)X+=ke[P[se]];return X}function ne(P,k,j){const $=P.slice(k,j);let X="";for(let se=0;se<$.length-1;se+=2)X+=String.fromCharCode($[se]+$[se+1]*256);return X}u.prototype.slice=function(k,j){const $=this.length;k=~~k,j=j===void 0?$:~~j,k<0?(k+=$,k<0&&(k=0)):k>$&&(k=$),j<0?(j+=$,j<0&&(j=0)):j>$&&(j=$),j<k&&(j=k);const X=this.subarray(k,j);return Object.setPrototypeOf(X,u.prototype),X};function z(P,k,j){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+k>j)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,j,$){k=k>>>0,j=j>>>0,$||z(k,j,this.length);let X=this[k],se=1,ue=0;for(;++ue<j&&(se*=256);)X+=this[k+ue]*se;return X},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,j,$){k=k>>>0,j=j>>>0,$||z(k,j,this.length);let X=this[k+--j],se=1;for(;j>0&&(se*=256);)X+=this[k+--j]*se;return X},u.prototype.readUint8=u.prototype.readUInt8=function(k,j){return k=k>>>0,j||z(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,j){return k=k>>>0,j||z(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,j){return k=k>>>0,j||z(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,j){return k=k>>>0,j||z(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,j){return k=k>>>0,j||z(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=Be(function(k){k=k>>>0,Te(k,"offset");const j=this[k],$=this[k+7];(j===void 0||$===void 0)&&yt(k,this.length-8);const X=j+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,se=this[++k]+this[++k]*2**8+this[++k]*2**16+$*2**24;return BigInt(X)+(BigInt(se)<<BigInt(32))}),u.prototype.readBigUInt64BE=Be(function(k){k=k>>>0,Te(k,"offset");const j=this[k],$=this[k+7];(j===void 0||$===void 0)&&yt(k,this.length-8);const X=j*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],se=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+$;return(BigInt(X)<<BigInt(32))+BigInt(se)}),u.prototype.readIntLE=function(k,j,$){k=k>>>0,j=j>>>0,$||z(k,j,this.length);let X=this[k],se=1,ue=0;for(;++ue<j&&(se*=256);)X+=this[k+ue]*se;return se*=128,X>=se&&(X-=Math.pow(2,8*j)),X},u.prototype.readIntBE=function(k,j,$){k=k>>>0,j=j>>>0,$||z(k,j,this.length);let X=j,se=1,ue=this[k+--X];for(;X>0&&(se*=256);)ue+=this[k+--X]*se;return se*=128,ue>=se&&(ue-=Math.pow(2,8*j)),ue},u.prototype.readInt8=function(k,j){return k=k>>>0,j||z(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,j){k=k>>>0,j||z(k,2,this.length);const $=this[k]|this[k+1]<<8;return $&32768?$|4294901760:$},u.prototype.readInt16BE=function(k,j){k=k>>>0,j||z(k,2,this.length);const $=this[k+1]|this[k]<<8;return $&32768?$|4294901760:$},u.prototype.readInt32LE=function(k,j){return k=k>>>0,j||z(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,j){return k=k>>>0,j||z(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=Be(function(k){k=k>>>0,Te(k,"offset");const j=this[k],$=this[k+7];(j===void 0||$===void 0)&&yt(k,this.length-8);const X=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+($<<24);return(BigInt(X)<<BigInt(32))+BigInt(j+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=Be(function(k){k=k>>>0,Te(k,"offset");const j=this[k],$=this[k+7];(j===void 0||$===void 0)&&yt(k,this.length-8);const X=(j<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(X)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+$)}),u.prototype.readFloatLE=function(k,j){return k=k>>>0,j||z(k,4,this.length),n.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,j){return k=k>>>0,j||z(k,4,this.length),n.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,j){return k=k>>>0,j||z(k,8,this.length),n.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,j){return k=k>>>0,j||z(k,8,this.length),n.read(this,k,!1,52,8)};function W(P,k,j,$,X,se){if(!u.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>X||k<se)throw new RangeError('"value" argument is out of bounds');if(j+$>P.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,j,$,X){if(k=+k,j=j>>>0,$=$>>>0,!X){const Xe=Math.pow(2,8*$)-1;W(this,k,j,$,Xe,0)}let se=1,ue=0;for(this[j]=k&255;++ue<$&&(se*=256);)this[j+ue]=k/se&255;return j+$},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,j,$,X){if(k=+k,j=j>>>0,$=$>>>0,!X){const Xe=Math.pow(2,8*$)-1;W(this,k,j,$,Xe,0)}let se=$-1,ue=1;for(this[j+se]=k&255;--se>=0&&(ue*=256);)this[j+se]=k/ue&255;return j+$},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,1,255,0),this[j]=k&255,j+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,2,65535,0),this[j]=k&255,this[j+1]=k>>>8,j+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,2,65535,0),this[j]=k>>>8,this[j+1]=k&255,j+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,4,4294967295,0),this[j+3]=k>>>24,this[j+2]=k>>>16,this[j+1]=k>>>8,this[j]=k&255,j+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,4,4294967295,0),this[j]=k>>>24,this[j+1]=k>>>16,this[j+2]=k>>>8,this[j+3]=k&255,j+4};function ae(P,k,j,$,X){Qe(k,$,X,P,j,7);let se=Number(k&BigInt(4294967295));P[j++]=se,se=se>>8,P[j++]=se,se=se>>8,P[j++]=se,se=se>>8,P[j++]=se;let ue=Number(k>>BigInt(32)&BigInt(4294967295));return P[j++]=ue,ue=ue>>8,P[j++]=ue,ue=ue>>8,P[j++]=ue,ue=ue>>8,P[j++]=ue,j}function de(P,k,j,$,X){Qe(k,$,X,P,j,7);let se=Number(k&BigInt(4294967295));P[j+7]=se,se=se>>8,P[j+6]=se,se=se>>8,P[j+5]=se,se=se>>8,P[j+4]=se;let ue=Number(k>>BigInt(32)&BigInt(4294967295));return P[j+3]=ue,ue=ue>>8,P[j+2]=ue,ue=ue>>8,P[j+1]=ue,ue=ue>>8,P[j]=ue,j+8}u.prototype.writeBigUInt64LE=Be(function(k,j=0){return ae(this,k,j,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Be(function(k,j=0){return de(this,k,j,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,j,$,X){if(k=+k,j=j>>>0,!X){const pt=Math.pow(2,8*$-1);W(this,k,j,$,pt-1,-pt)}let se=0,ue=1,Xe=0;for(this[j]=k&255;++se<$&&(ue*=256);)k<0&&Xe===0&&this[j+se-1]!==0&&(Xe=1),this[j+se]=(k/ue>>0)-Xe&255;return j+$},u.prototype.writeIntBE=function(k,j,$,X){if(k=+k,j=j>>>0,!X){const pt=Math.pow(2,8*$-1);W(this,k,j,$,pt-1,-pt)}let se=$-1,ue=1,Xe=0;for(this[j+se]=k&255;--se>=0&&(ue*=256);)k<0&&Xe===0&&this[j+se+1]!==0&&(Xe=1),this[j+se]=(k/ue>>0)-Xe&255;return j+$},u.prototype.writeInt8=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,1,127,-128),k<0&&(k=255+k+1),this[j]=k&255,j+1},u.prototype.writeInt16LE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,2,32767,-32768),this[j]=k&255,this[j+1]=k>>>8,j+2},u.prototype.writeInt16BE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,2,32767,-32768),this[j]=k>>>8,this[j+1]=k&255,j+2},u.prototype.writeInt32LE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,4,2147483647,-2147483648),this[j]=k&255,this[j+1]=k>>>8,this[j+2]=k>>>16,this[j+3]=k>>>24,j+4},u.prototype.writeInt32BE=function(k,j,$){return k=+k,j=j>>>0,$||W(this,k,j,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[j]=k>>>24,this[j+1]=k>>>16,this[j+2]=k>>>8,this[j+3]=k&255,j+4},u.prototype.writeBigInt64LE=Be(function(k,j=0){return ae(this,k,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Be(function(k,j=0){return de(this,k,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(P,k,j,$,X,se){if(j+$>P.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function we(P,k,j,$,X){return k=+k,j=j>>>0,X||fe(P,k,j,4),n.write(P,k,j,$,23,4),j+4}u.prototype.writeFloatLE=function(k,j,$){return we(this,k,j,!0,$)},u.prototype.writeFloatBE=function(k,j,$){return we(this,k,j,!1,$)};function ce(P,k,j,$,X){return k=+k,j=j>>>0,X||fe(P,k,j,8),n.write(P,k,j,$,52,8),j+8}u.prototype.writeDoubleLE=function(k,j,$){return ce(this,k,j,!0,$)},u.prototype.writeDoubleBE=function(k,j,$){return ce(this,k,j,!1,$)},u.prototype.copy=function(k,j,$,X){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if($||($=0),!X&&X!==0&&(X=this.length),j>=k.length&&(j=k.length),j||(j=0),X>0&&X<$&&(X=$),X===$||k.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),k.length-j<X-$&&(X=k.length-j+$);const se=X-$;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,$,X):Uint8Array.prototype.set.call(k,this.subarray($,X),j),se},u.prototype.fill=function(k,j,$,X){if(typeof k=="string"){if(typeof j=="string"?(X=j,j=0,$=this.length):typeof $=="string"&&(X=$,$=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!u.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(k.length===1){const ue=k.charCodeAt(0);(X==="utf8"&&ue<128||X==="latin1")&&(k=ue)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(j<0||this.length<j||this.length<$)throw new RangeError("Out of range index");if($<=j)return this;j=j>>>0,$=$===void 0?this.length:$>>>0,k||(k=0);let se;if(typeof k=="number")for(se=j;se<$;++se)this[se]=k;else{const ue=u.isBuffer(k)?k:u.from(k,X),Xe=ue.length;if(Xe===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(se=0;se<$-j;++se)this[se+j]=ue[se%Xe]}return this};const ge={};function be(P,k,j){ge[P]=class extends j{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${P}]`,this.stack,delete this.name}get code(){return P}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${P}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(P){return P?`${P} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(P,k){return`The "${P}" argument must be of type number. Received type ${typeof k}`},TypeError),be("ERR_OUT_OF_RANGE",function(P,k,j){let $=`The value of "${P}" is out of range.`,X=j;return Number.isInteger(j)&&Math.abs(j)>2**32?X=De(String(j)):typeof j=="bigint"&&(X=String(j),(j>BigInt(2)**BigInt(32)||j<-(BigInt(2)**BigInt(32)))&&(X=De(X)),X+="n"),$+=` It must be ${k}. Received ${X}`,$},RangeError);function De(P){let k="",j=P.length;const $=P[0]==="-"?1:0;for(;j>=$+4;j-=3)k=`_${P.slice(j-3,j)}${k}`;return`${P.slice(0,j)}${k}`}function Ze(P,k,j){Te(k,"offset"),(P[k]===void 0||P[k+j]===void 0)&&yt(k,P.length-(j+1))}function Qe(P,k,j,$,X,se){if(P>j||P<k){const ue=typeof k=="bigint"?"n":"";let Xe;throw k===0||k===BigInt(0)?Xe=`>= 0${ue} and < 2${ue} ** ${(se+1)*8}${ue}`:Xe=`>= -(2${ue} ** ${(se+1)*8-1}${ue}) and < 2 ** ${(se+1)*8-1}${ue}`,new ge.ERR_OUT_OF_RANGE("value",Xe,P)}Ze($,X,se)}function Te(P,k){if(typeof P!="number")throw new ge.ERR_INVALID_ARG_TYPE(k,"number",P)}function yt(P,k,j){throw Math.floor(P)!==P?(Te(P,j),new ge.ERR_OUT_OF_RANGE("offset","an integer",P)):k<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,P)}const tn=/[^+/0-9A-Za-z-_]/g;function nn(P){if(P=P.split("=")[0],P=P.trim().replace(tn,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function xn(P,k){k=k||1/0;let j;const $=P.length;let X=null;const se=[];for(let ue=0;ue<$;++ue){if(j=P.charCodeAt(ue),j>55295&&j<57344){if(!X){if(j>56319){(k-=3)>-1&&se.push(239,191,189);continue}else if(ue+1===$){(k-=3)>-1&&se.push(239,191,189);continue}X=j;continue}if(j<56320){(k-=3)>-1&&se.push(239,191,189),X=j;continue}j=(X-55296<<10|j-56320)+65536}else X&&(k-=3)>-1&&se.push(239,191,189);if(X=null,j<128){if((k-=1)<0)break;se.push(j)}else if(j<2048){if((k-=2)<0)break;se.push(j>>6|192,j&63|128)}else if(j<65536){if((k-=3)<0)break;se.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((k-=4)<0)break;se.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return se}function Gr(P){const k=[];for(let j=0;j<P.length;++j)k.push(P.charCodeAt(j)&255);return k}function le(P,k){let j,$,X;const se=[];for(let ue=0;ue<P.length&&!((k-=2)<0);++ue)j=P.charCodeAt(ue),$=j>>8,X=j%256,se.push(X),se.push($);return se}function he(P){return e.toByteArray(nn(P))}function je(P,k,j,$){let X;for(X=0;X<$&&!(X+j>=k.length||X>=P.length);++X)k[X+j]=P[X];return X}function pe(P,k){return P instanceof k||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===k.name}function Pe(P){return P!==P}const ke=function(){const P="0123456789abcdef",k=new Array(256);for(let j=0;j<16;++j){const $=j*16;for(let X=0;X<16;++X)k[$+X]=P[j]+P[X]}return k}();function Be(P){return typeof BigInt>"u"?Ye:P}function Ye(){throw new Error("BigInt not supported")}}(hg)),hg}var YI=GI();const QI=Eh(YI);globalThis.Buffer||(globalThis.Buffer=QI.Buffer);AbortSignal.any||(AbortSignal.any=function(t){if(t.length===0)return new AbortController().signal;if(t.length===1)return t[0];for(const r of t)if(r.aborted){const s=new AbortController;return s.abort(r.reason),s.signal}const e=new AbortController,n=r=>{const s=r.target;e.abort(s.reason)};for(const r of t)r.addEventListener("abort",n,{once:!0});return e.signal.addEventListener("abort",()=>{for(const r of t)r.removeEventListener("abort",n)},{once:!0}),e.signal});AbortSignal.timeout||(AbortSignal.timeout=function(t){const e=new AbortController;return setTimeout(()=>{e.abort(new DOMException("The operation was aborted due to timeout","TimeoutError"))},t),e.signal});var y=Sh();const _e=Eh(y),Jv=LI({__proto__:null,default:_e},[y]);class ZI extends y.Component{constructor(n){super(n);Re(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error caught by ErrorBoundary:",n,r),this.setState({error:n,errorInfo:r})}render(){var n,r;return this.state.hasError?this.props.fallback?this.props.fallback:c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Something went wrong"}),c.jsx("p",{className:"text-muted-foreground",children:"An unexpected error occurred. The error has been reported."})]}),c.jsx("div",{className:"bg-muted p-4 rounded-lg",children:c.jsxs("details",{className:"text-sm",children:[c.jsx("summary",{className:"cursor-pointer font-medium text-foreground",children:"Error details"}),c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-foreground",children:"Message:"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:(n=this.state.error)==null?void 0:n.message})]}),((r=this.state.error)==null?void 0:r.stack)&&c.jsxs("div",{children:[c.jsx("strong",{className:"text-foreground",children:"Stack trace:"}),c.jsx("pre",{className:"text-xs text-muted-foreground mt-1 overflow-auto max-h-32",children:this.state.error.stack})]})]})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Try again"}),c.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors",children:"Reload page"})]})]})}):this.props.children}}var Ml=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yi=typeof window>"u"||"Deno"in globalThis;function Er(){}function XI(t,e){return typeof t=="function"?t(e):t}function Ty(t){return typeof t=="number"&&t>=0&&t!==1/0}function qS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Za(t,e){return typeof t=="function"?t(e):t}function Fr(t,e){return typeof t=="function"?t(e):t}function Db(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==e0(l,e.options))return!1}else if(!ru(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||i&&!i(e))}function Lb(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Qi(e.options.mutationKey)!==Qi(i))return!1}else if(!ru(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function e0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Qi)(t)}function Qi(t){return JSON.stringify(t,(e,n)=>Py(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ru(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ru(t[n],e[n])):!1}function KS(t,e){if(t===e)return t;const n=$b(t)&&$b(e);if(n||Py(t)&&Py(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),l=i.length,u=n?[]:{};let f=0;for(let h=0;h<l;h++){const m=n?h:i[h];(!n&&r.includes(m)||n)&&t[m]===void 0&&e[m]===void 0?(u[m]=void 0,f++):(u[m]=KS(t[m],e[m]),u[m]===t[m]&&t[m]!==void 0&&f++)}return s===l&&f===s?t:u}return e}function If(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $b(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Py(t){if(!Bb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Bb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Bb(t){return Object.prototype.toString.call(t)==="[object Object]"}function JI(t){return new Promise(e=>{setTimeout(e,t)})}function Ry(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?KS(t,e):e}function e3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function t3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var t0=Symbol();function GS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===t0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var $i,Lo,rl,IS,n3=(IS=class extends Ml{constructor(){super();qe(this,$i);qe(this,Lo);qe(this,rl);Ie(this,rl,e=>{if(!Yi&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,Lo)||this.setEventListener(Y(this,rl))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,Lo))==null||e.call(this),Ie(this,Lo,void 0))}setEventListener(e){var n;Ie(this,rl,e),(n=Y(this,Lo))==null||n.call(this),Ie(this,Lo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Y(this,$i)!==e&&(Ie(this,$i,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Y(this,$i)=="boolean"?Y(this,$i):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$i=new WeakMap,Lo=new WeakMap,rl=new WeakMap,IS),n0=new n3,sl,$o,ol,MS,r3=(MS=class extends Ml{constructor(){super();qe(this,sl,!0);qe(this,$o);qe(this,ol);Ie(this,ol,e=>{if(!Yi&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,$o)||this.setEventListener(Y(this,ol))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,$o))==null||e.call(this),Ie(this,$o,void 0))}setEventListener(e){var n;Ie(this,ol,e),(n=Y(this,$o))==null||n.call(this),Ie(this,$o,e(this.setOnline.bind(this)))}setOnline(e){Y(this,sl)!==e&&(Ie(this,sl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Y(this,sl)}},sl=new WeakMap,$o=new WeakMap,ol=new WeakMap,MS),Mf=new r3;function Ay(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function s3(t){return Math.min(1e3*2**t,3e4)}function YS(t){return(t??"online")==="online"?Mf.isOnline():!0}var QS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function pg(t){return t instanceof QS}function ZS(t){let e=!1,n=0,r=!1,s;const i=Ay(),l=v=>{var b;r||(x(new QS(v)),(b=t.abort)==null||b.call(t))},u=()=>{e=!0},f=()=>{e=!1},h=()=>n0.isFocused()&&(t.networkMode==="always"||Mf.isOnline())&&t.canRun(),m=()=>YS(t.networkMode)&&t.canRun(),p=v=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,v),s==null||s(),i.resolve(v))},x=v=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,v),s==null||s(),i.reject(v))},w=()=>new Promise(v=>{var b;s=N=>{(r||h())&&v(N)},(b=t.onPause)==null||b.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),S=()=>{if(r)return;let v;const b=n===0?t.initialPromise:void 0;try{v=b??t.fn()}catch(N){v=Promise.reject(N)}Promise.resolve(v).then(p).catch(N=>{var B;if(r)return;const _=t.retry??(Yi?0:3),T=t.retryDelay??s3,M=typeof T=="function"?T(n,N):T,D=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,N);if(e||!D){x(N);return}n++,(B=t.onFail)==null||B.call(t,n,N),JI(M).then(()=>h()?void 0:w()).then(()=>{e?x(N):S()})})};return{promise:i,cancel:l,continue:()=>(s==null||s(),i),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?S():w().then(S),i)}}var o3=t=>setTimeout(t,0);function i3(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=o3;const i=u=>{e?t.push(u):s(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{i(()=>{u(...f)})},schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var un=i3(),Bi,OS,XS=(OS=class{constructor(){qe(this,Bi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ty(this.gcTime)&&Ie(this,Bi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yi?1/0:5*60*1e3))}clearGcTimeout(){Y(this,Bi)&&(clearTimeout(Y(this,Bi)),Ie(this,Bi,void 0))}},Bi=new WeakMap,OS),il,al,br,Fi,Tn,Eu,Ui,$r,As,DS,a3=(DS=class extends XS{constructor(e){super();qe(this,$r);qe(this,il);qe(this,al);qe(this,br);qe(this,Fi);qe(this,Tn);qe(this,Eu);qe(this,Ui);Ie(this,Ui,!1),Ie(this,Eu,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ie(this,Fi,e.client),Ie(this,br,Y(this,Fi).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ie(this,il,l3(this.options)),this.state=e.state??Y(this,il),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Y(this,Tn))==null?void 0:e.promise}setOptions(e){this.options={...Y(this,Eu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,br).remove(this)}setData(e,n){const r=Ry(this.state.data,e,this.options);return st(this,$r,As).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){st(this,$r,As).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=Y(this,Tn))==null?void 0:r.promise;return(s=Y(this,Tn))==null||s.cancel(e),n?n.then(Er).catch(Er):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,il))}isActive(){return this.observers.some(e=>Fr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===t0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!qS(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Y(this,Tn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Y(this,Tn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Y(this,br).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Y(this,Tn)&&(Y(this,Ui)?Y(this,Tn).cancel({revert:!0}):Y(this,Tn).cancelRetry()),this.scheduleGc()),Y(this,br).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,$r,As).call(this,{type:"invalidate"})}fetch(e,n){var f,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Y(this,Tn))return Y(this,Tn).continueRetry(),Y(this,Tn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(x=>x.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ie(this,Ui,!0),r.signal)})},i=()=>{const p=GS(this.options,n),x={client:Y(this,Fi),queryKey:this.queryKey,meta:this.meta};return s(x),Ie(this,Ui,!1),this.options.persister?this.options.persister(p,x,this):p(x)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Y(this,Fi),state:this.state,fetchFn:i};s(l),(f=this.options.behavior)==null||f.onFetch(l,this),Ie(this,al,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&st(this,$r,As).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const u=p=>{var x,w,S,v;pg(p)&&p.silent||st(this,$r,As).call(this,{type:"error",error:p}),pg(p)||((w=(x=Y(this,br).config).onError)==null||w.call(x,p,this),(v=(S=Y(this,br).config).onSettled)==null||v.call(S,this.state.data,p,this)),this.scheduleGc()};return Ie(this,Tn,ZS({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var x,w,S,v;if(p===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){u(b);return}(w=(x=Y(this,br).config).onSuccess)==null||w.call(x,p,this),(v=(S=Y(this,br).config).onSettled)==null||v.call(S,p,this.state.error,this),this.scheduleGc()},onError:u,onFail:(p,x)=>{st(this,$r,As).call(this,{type:"failed",failureCount:p,error:x})},onPause:()=>{st(this,$r,As).call(this,{type:"pause"})},onContinue:()=>{st(this,$r,As).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Y(this,Tn).start()}},il=new WeakMap,al=new WeakMap,br=new WeakMap,Fi=new WeakMap,Tn=new WeakMap,Eu=new WeakMap,Ui=new WeakMap,$r=new WeakSet,As=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...JS(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return pg(s)&&s.revert&&Y(this,al)?{...Y(this,al),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),un.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Y(this,br).notify({query:this,type:"updated",action:e})})},DS);function JS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:YS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function l3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var us,LS,c3=(LS=class extends Ml{constructor(e={}){super();qe(this,us);this.config=e,Ie(this,us,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??e0(s,n);let l=this.get(i);return l||(l=new a3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){Y(this,us).has(e.queryHash)||(Y(this,us).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Y(this,us).get(e.queryHash);n&&(e.destroy(),n===e&&Y(this,us).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Y(this,us).get(e)}getAll(){return[...Y(this,us).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Db(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Db(e,r)):n}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},us=new WeakMap,LS),ds,$n,zi,fs,Io,$S,u3=($S=class extends XS{constructor(e){super();qe(this,fs);qe(this,ds);qe(this,$n);qe(this,zi);this.mutationId=e.mutationId,Ie(this,$n,e.mutationCache),Ie(this,ds,[]),this.state=e.state||eN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Y(this,ds).includes(e)||(Y(this,ds).push(e),this.clearGcTimeout(),Y(this,$n).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ie(this,ds,Y(this,ds).filter(n=>n!==e)),this.scheduleGc(),Y(this,$n).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Y(this,ds).length||(this.state.status==="pending"?this.scheduleGc():Y(this,$n).remove(this))}continue(){var e;return((e=Y(this,zi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,l,u,f,h,m,p,x,w,S,v,b,N,_,T,M,D,B,O,F;const n=()=>{st(this,fs,Io).call(this,{type:"continue"})};Ie(this,zi,ZS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(R,L)=>{st(this,fs,Io).call(this,{type:"failed",failureCount:R,error:L})},onPause:()=>{st(this,fs,Io).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,$n).canRun(this)}));const r=this.state.status==="pending",s=!Y(this,zi).canStart();try{if(r)n();else{st(this,fs,Io).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(i=Y(this,$n).config).onMutate)==null?void 0:l.call(i,e,this));const L=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e));L!==this.state.context&&st(this,fs,Io).call(this,{type:"pending",context:L,variables:e,isPaused:s})}const R=await Y(this,zi).start();return await((m=(h=Y(this,$n).config).onSuccess)==null?void 0:m.call(h,R,e,this.state.context,this)),await((x=(p=this.options).onSuccess)==null?void 0:x.call(p,R,e,this.state.context)),await((S=(w=Y(this,$n).config).onSettled)==null?void 0:S.call(w,R,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,R,null,e,this.state.context)),st(this,fs,Io).call(this,{type:"success",data:R}),R}catch(R){try{throw await((_=(N=Y(this,$n).config).onError)==null?void 0:_.call(N,R,e,this.state.context,this)),await((M=(T=this.options).onError)==null?void 0:M.call(T,R,e,this.state.context)),await((B=(D=Y(this,$n).config).onSettled)==null?void 0:B.call(D,void 0,R,this.state.variables,this.state.context,this)),await((F=(O=this.options).onSettled)==null?void 0:F.call(O,void 0,R,e,this.state.context)),R}finally{st(this,fs,Io).call(this,{type:"error",error:R})}}finally{Y(this,$n).runNext(this)}}},ds=new WeakMap,$n=new WeakMap,zi=new WeakMap,fs=new WeakSet,Io=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),un.batch(()=>{Y(this,ds).forEach(r=>{r.onMutationUpdate(e)}),Y(this,$n).notify({mutation:this,type:"updated",action:e})})},$S);function eN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ms,Br,Su,BS,d3=(BS=class extends Ml{constructor(e={}){super();qe(this,Ms);qe(this,Br);qe(this,Su);this.config=e,Ie(this,Ms,new Set),Ie(this,Br,new Map),Ie(this,Su,0)}build(e,n,r){const s=new u3({mutationCache:this,mutationId:++tf(this,Su)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Y(this,Ms).add(e);const n=sf(e);if(typeof n=="string"){const r=Y(this,Br).get(n);r?r.push(e):Y(this,Br).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Y(this,Ms).delete(e)){const n=sf(e);if(typeof n=="string"){const r=Y(this,Br).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Y(this,Br).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=sf(e);if(typeof n=="string"){const r=Y(this,Br).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=sf(e);if(typeof n=="string"){const s=(r=Y(this,Br).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){un.batch(()=>{Y(this,Ms).forEach(e=>{this.notify({type:"removed",mutation:e})}),Y(this,Ms).clear(),Y(this,Br).clear()})}getAll(){return Array.from(Y(this,Ms))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Lb(n,r))}findAll(e={}){return this.getAll().filter(n=>Lb(e,n))}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(e.map(n=>n.continue().catch(Er))))}},Ms=new WeakMap,Br=new WeakMap,Su=new WeakMap,BS);function sf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Fb(t){return{onFetch:(e,n)=>{var m,p,x,w,S;const r=e.options,s=(x=(p=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:p.fetchMore)==null?void 0:x.direction,i=((w=e.state.data)==null?void 0:w.pages)||[],l=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const h=async()=>{let v=!1;const b=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},N=GS(e.options,e.fetchOptions),_=async(T,M,D)=>{if(v)return Promise.reject();if(M==null&&T.pages.length)return Promise.resolve(T);const B={client:e.client,queryKey:e.queryKey,pageParam:M,direction:D?"backward":"forward",meta:e.options.meta};b(B);const O=await N(B),{maxPages:F}=e.options,R=D?t3:e3;return{pages:R(T.pages,O,F),pageParams:R(T.pageParams,M,F)}};if(s&&i.length){const T=s==="backward",M=T?f3:Ub,D={pages:i,pageParams:l},B=M(r,D);u=await _(D,B,T)}else{const T=t??i.length;do{const M=f===0?l[0]??r.initialPageParam:Ub(r,u);if(f>0&&M==null)break;u=await _(u,M),f++}while(f<T)}return u};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function Ub(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function f3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var qt,Bo,Fo,ll,cl,Uo,ul,dl,FS,h3=(FS=class{constructor(t={}){qe(this,qt);qe(this,Bo);qe(this,Fo);qe(this,ll);qe(this,cl);qe(this,Uo);qe(this,ul);qe(this,dl);Ie(this,qt,t.queryCache||new c3),Ie(this,Bo,t.mutationCache||new d3),Ie(this,Fo,t.defaultOptions||{}),Ie(this,ll,new Map),Ie(this,cl,new Map),Ie(this,Uo,0)}mount(){tf(this,Uo)._++,Y(this,Uo)===1&&(Ie(this,ul,n0.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,qt).onFocus())})),Ie(this,dl,Mf.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,qt).onOnline())})))}unmount(){var t,e;tf(this,Uo)._--,Y(this,Uo)===0&&((t=Y(this,ul))==null||t.call(this),Ie(this,ul,void 0),(e=Y(this,dl))==null||e.call(this),Ie(this,dl,void 0))}isFetching(t){return Y(this,qt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,Bo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,qt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Y(this,qt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Za(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Y(this,qt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Y(this,qt).get(r.queryHash),i=s==null?void 0:s.state.data,l=XI(e,i);if(l!==void 0)return Y(this,qt).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return un.batch(()=>Y(this,qt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,qt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Y(this,qt);un.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Y(this,qt);return un.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=un.batch(()=>Y(this,qt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Er).catch(Er)}invalidateQueries(t,e={}){return un.batch(()=>(Y(this,qt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=un.batch(()=>Y(this,qt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Er)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Er)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Y(this,qt).build(this,e);return n.isStaleByTime(Za(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Er).catch(Er)}fetchInfiniteQuery(t){return t.behavior=Fb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Er).catch(Er)}ensureInfiniteQueryData(t){return t.behavior=Fb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Mf.isOnline()?Y(this,Bo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,qt)}getMutationCache(){return Y(this,Bo)}getDefaultOptions(){return Y(this,Fo)}setDefaultOptions(t){Ie(this,Fo,t)}setQueryDefaults(t,e){Y(this,ll).set(Qi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Y(this,ll).values()],n={};return e.forEach(r=>{ru(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Y(this,cl).set(Qi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Y(this,cl).values()],n={};return e.forEach(r=>{ru(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Y(this,Fo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=e0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===t0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,Fo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,qt).clear(),Y(this,Bo).clear()}},qt=new WeakMap,Bo=new WeakMap,Fo=new WeakMap,ll=new WeakMap,cl=new WeakMap,Uo=new WeakMap,ul=new WeakMap,dl=new WeakMap,FS),Xn,xt,Nu,Bn,Wi,fl,zo,Wo,ku,hl,pl,Hi,Vi,Ho,ml,jt,Vc,Iy,My,Oy,Dy,Ly,$y,By,tN,US,p3=(US=class extends Ml{constructor(e,n){super();qe(this,jt);qe(this,Xn);qe(this,xt);qe(this,Nu);qe(this,Bn);qe(this,Wi);qe(this,fl);qe(this,zo);qe(this,Wo);qe(this,ku);qe(this,hl);qe(this,pl);qe(this,Hi);qe(this,Vi);qe(this,Ho);qe(this,ml,new Set);this.options=n,Ie(this,Xn,e),Ie(this,Wo,null),Ie(this,zo,Ay()),this.options.experimental_prefetchInRender||Y(this,zo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Y(this,xt).addObserver(this),zb(Y(this,xt),this.options)?st(this,jt,Vc).call(this):this.updateResult(),st(this,jt,Dy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fy(Y(this,xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fy(Y(this,xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,st(this,jt,Ly).call(this),st(this,jt,$y).call(this),Y(this,xt).removeObserver(this)}setOptions(e){const n=this.options,r=Y(this,xt);if(this.options=Y(this,Xn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fr(this.options.enabled,Y(this,xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");st(this,jt,By).call(this),Y(this,xt).setOptions(this.options),n._defaulted&&!If(this.options,n)&&Y(this,Xn).getQueryCache().notify({type:"observerOptionsUpdated",query:Y(this,xt),observer:this});const s=this.hasListeners();s&&Wb(Y(this,xt),r,this.options,n)&&st(this,jt,Vc).call(this),this.updateResult(),s&&(Y(this,xt)!==r||Fr(this.options.enabled,Y(this,xt))!==Fr(n.enabled,Y(this,xt))||Za(this.options.staleTime,Y(this,xt))!==Za(n.staleTime,Y(this,xt)))&&st(this,jt,Iy).call(this);const i=st(this,jt,My).call(this);s&&(Y(this,xt)!==r||Fr(this.options.enabled,Y(this,xt))!==Fr(n.enabled,Y(this,xt))||i!==Y(this,Ho))&&st(this,jt,Oy).call(this,i)}getOptimisticResult(e){const n=Y(this,Xn).getQueryCache().build(Y(this,Xn),e),r=this.createResult(n,e);return g3(this,r)&&(Ie(this,Bn,r),Ie(this,fl,this.options),Ie(this,Wi,Y(this,xt).state)),r}getCurrentResult(){return Y(this,Bn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){Y(this,ml).add(e)}getCurrentQuery(){return Y(this,xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Y(this,Xn).defaultQueryOptions(e),r=Y(this,Xn).getQueryCache().build(Y(this,Xn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return st(this,jt,Vc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Y(this,Bn)))}createResult(e,n){var R;const r=Y(this,xt),s=this.options,i=Y(this,Bn),l=Y(this,Wi),u=Y(this,fl),h=e!==r?e.state:Y(this,Nu),{state:m}=e;let p={...m},x=!1,w;if(n._optimisticResults){const L=this.hasListeners(),A=!L&&zb(e,n),U=L&&Wb(e,r,n,s);(A||U)&&(p={...p,...JS(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:S,errorUpdatedAt:v,status:b}=p;w=p.data;let N=!1;if(n.placeholderData!==void 0&&w===void 0&&b==="pending"){let L;i!=null&&i.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(L=i.data,N=!0):L=typeof n.placeholderData=="function"?n.placeholderData((R=Y(this,pl))==null?void 0:R.state.data,Y(this,pl)):n.placeholderData,L!==void 0&&(b="success",w=Ry(i==null?void 0:i.data,L,n),x=!0)}if(n.select&&w!==void 0&&!N)if(i&&w===(l==null?void 0:l.data)&&n.select===Y(this,ku))w=Y(this,hl);else try{Ie(this,ku,n.select),w=n.select(w),w=Ry(i==null?void 0:i.data,w,n),Ie(this,hl,w),Ie(this,Wo,null)}catch(L){Ie(this,Wo,L)}Y(this,Wo)&&(S=Y(this,Wo),w=Y(this,hl),v=Date.now(),b="error");const _=p.fetchStatus==="fetching",T=b==="pending",M=b==="error",D=T&&_,B=w!==void 0,F={status:b,fetchStatus:p.fetchStatus,isPending:T,isSuccess:b==="success",isError:M,isInitialLoading:D,isLoading:D,data:w,dataUpdatedAt:p.dataUpdatedAt,error:S,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:_,isRefetching:_&&!T,isLoadingError:M&&!B,isPaused:p.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:M&&B,isStale:r0(e,n),refetch:this.refetch,promise:Y(this,zo)};if(this.options.experimental_prefetchInRender){const L=K=>{F.status==="error"?K.reject(F.error):F.data!==void 0&&K.resolve(F.data)},A=()=>{const K=Ie(this,zo,F.promise=Ay());L(K)},U=Y(this,zo);switch(U.status){case"pending":e.queryHash===r.queryHash&&L(U);break;case"fulfilled":(F.status==="error"||F.data!==U.value)&&A();break;case"rejected":(F.status!=="error"||F.error!==U.reason)&&A();break}}return F}updateResult(){const e=Y(this,Bn),n=this.createResult(Y(this,xt),this.options);if(Ie(this,Wi,Y(this,xt).state),Ie(this,fl,this.options),Y(this,Wi).data!==void 0&&Ie(this,pl,Y(this,xt)),If(n,e))return;Ie(this,Bn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!Y(this,ml).size)return!0;const l=new Set(i??Y(this,ml));return this.options.throwOnError&&l.add("error"),Object.keys(Y(this,Bn)).some(u=>{const f=u;return Y(this,Bn)[f]!==e[f]&&l.has(f)})};st(this,jt,tN).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&st(this,jt,Dy).call(this)}},Xn=new WeakMap,xt=new WeakMap,Nu=new WeakMap,Bn=new WeakMap,Wi=new WeakMap,fl=new WeakMap,zo=new WeakMap,Wo=new WeakMap,ku=new WeakMap,hl=new WeakMap,pl=new WeakMap,Hi=new WeakMap,Vi=new WeakMap,Ho=new WeakMap,ml=new WeakMap,jt=new WeakSet,Vc=function(e){st(this,jt,By).call(this);let n=Y(this,xt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Er)),n},Iy=function(){st(this,jt,Ly).call(this);const e=Za(this.options.staleTime,Y(this,xt));if(Yi||Y(this,Bn).isStale||!Ty(e))return;const r=qS(Y(this,Bn).dataUpdatedAt,e)+1;Ie(this,Hi,setTimeout(()=>{Y(this,Bn).isStale||this.updateResult()},r))},My=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Y(this,xt)):this.options.refetchInterval)??!1},Oy=function(e){st(this,jt,$y).call(this),Ie(this,Ho,e),!(Yi||Fr(this.options.enabled,Y(this,xt))===!1||!Ty(Y(this,Ho))||Y(this,Ho)===0)&&Ie(this,Vi,setInterval(()=>{(this.options.refetchIntervalInBackground||n0.isFocused())&&st(this,jt,Vc).call(this)},Y(this,Ho)))},Dy=function(){st(this,jt,Iy).call(this),st(this,jt,Oy).call(this,st(this,jt,My).call(this))},Ly=function(){Y(this,Hi)&&(clearTimeout(Y(this,Hi)),Ie(this,Hi,void 0))},$y=function(){Y(this,Vi)&&(clearInterval(Y(this,Vi)),Ie(this,Vi,void 0))},By=function(){const e=Y(this,Xn).getQueryCache().build(Y(this,Xn),this.options);if(e===Y(this,xt))return;const n=Y(this,xt);Ie(this,xt,e),Ie(this,Nu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},tN=function(e){un.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Y(this,Bn))}),Y(this,Xn).getQueryCache().notify({query:Y(this,xt),type:"observerResultsUpdated"})})},US);function m3(t,e){return Fr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function zb(t,e){return m3(t,e)||t.state.data!==void 0&&Fy(t,e,e.refetchOnMount)}function Fy(t,e,n){if(Fr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&r0(t,e)}return!1}function Wb(t,e,n,r){return(t!==e||Fr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&r0(t,n)}function r0(t,e){return Fr(e.enabled,t)!==!1&&t.isStaleByTime(Za(e.staleTime,t))}function g3(t,e){return!If(t.getCurrentResult(),e)}var Vo,qo,Jn,Os,Hs,bf,Uy,zS,y3=(zS=class extends Ml{constructor(n,r){super();qe(this,Hs);qe(this,Vo);qe(this,qo);qe(this,Jn);qe(this,Os);Ie(this,Vo,n),this.setOptions(r),this.bindMethods(),st(this,Hs,bf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=Y(this,Vo).defaultMutationOptions(n),If(this.options,r)||Y(this,Vo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Y(this,Jn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Qi(r.mutationKey)!==Qi(this.options.mutationKey)?this.reset():((s=Y(this,Jn))==null?void 0:s.state.status)==="pending"&&Y(this,Jn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Y(this,Jn))==null||n.removeObserver(this)}onMutationUpdate(n){st(this,Hs,bf).call(this),st(this,Hs,Uy).call(this,n)}getCurrentResult(){return Y(this,qo)}reset(){var n;(n=Y(this,Jn))==null||n.removeObserver(this),Ie(this,Jn,void 0),st(this,Hs,bf).call(this),st(this,Hs,Uy).call(this)}mutate(n,r){var s;return Ie(this,Os,r),(s=Y(this,Jn))==null||s.removeObserver(this),Ie(this,Jn,Y(this,Vo).getMutationCache().build(Y(this,Vo),this.options)),Y(this,Jn).addObserver(this),Y(this,Jn).execute(n)}},Vo=new WeakMap,qo=new WeakMap,Jn=new WeakMap,Os=new WeakMap,Hs=new WeakSet,bf=function(){var r;const n=((r=Y(this,Jn))==null?void 0:r.state)??eN();Ie(this,qo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Uy=function(n){un.batch(()=>{var r,s,i,l,u,f,h,m;if(Y(this,Os)&&this.hasListeners()){const p=Y(this,qo).variables,x=Y(this,qo).context;(n==null?void 0:n.type)==="success"?((s=(r=Y(this,Os)).onSuccess)==null||s.call(r,n.data,p,x),(l=(i=Y(this,Os)).onSettled)==null||l.call(i,n.data,null,p,x)):(n==null?void 0:n.type)==="error"&&((f=(u=Y(this,Os)).onError)==null||f.call(u,n.error,p,x),(m=(h=Y(this,Os)).onSettled)==null||m.call(h,void 0,n.error,p,x))}this.listeners.forEach(p=>{p(Y(this,qo))})})},zS),nN=y.createContext(void 0),_u=t=>{const e=y.useContext(nN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},v3=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(nN.Provider,{value:t,children:e})),rN=y.createContext(!1),x3=()=>y.useContext(rN);rN.Provider;function w3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var b3=y.createContext(w3()),E3=()=>y.useContext(b3);function sN(t,e){return typeof t=="function"?t(...e):!!t}function zy(){}var S3=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},N3=t=>{y.useEffect(()=>{t.clearReset()},[t])},k3=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||sN(n,[t.error,r])),C3=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},j3=(t,e)=>t.isLoading&&t.isFetching&&!e,_3=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Hb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function T3(t,e,n){var p,x,w,S,v;const r=_u(),s=x3(),i=E3(),l=r.defaultQueryOptions(t);(x=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||x.call(p,l),l._optimisticResults=s?"isRestoring":"optimistic",C3(l),S3(l,i),N3(i);const u=!r.getQueryCache().get(l.queryHash),[f]=y.useState(()=>new e(r,l)),h=f.getOptimisticResult(l),m=!s&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(b=>{const N=m?f.subscribe(un.batchCalls(b)):zy;return f.updateResult(),N},[f,m]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),y.useEffect(()=>{f.setOptions(l)},[l,f]),_3(l,h))throw Hb(l,f,i);if(k3({result:h,errorResetBoundary:i,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((S=(w=r.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||S.call(w,l,h),l.experimental_prefetchInRender&&!Yi&&j3(h,s)){const b=u?Hb(l,f,i):(v=r.getQueryCache().get(l.queryHash))==null?void 0:v.promise;b==null||b.catch(zy).finally(()=>{f.updateResult()})}return l.notifyOnChangeProps?h:f.trackResult(h)}function ua(t,e){return T3(t,p3)}function su(t,e){const n=_u(),[r]=y.useState(()=>new y3(n,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const s=y.useSyncExternalStore(y.useCallback(l=>r.subscribe(un.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=y.useCallback((l,u)=>{r.mutate(l,u).catch(zy)},[r]);if(s.error&&sN(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Wy(t,e={},n){for(const r in t){const s=t[r],i=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Wy(s,e,i):typeof s=="function"&&(e[i]=s)}return e}const P3={run:t=>t()},R3=()=>P3,oN=typeof console.createTask<"u"?console.createTask:R3;function A3(t,e){const n=e.shift(),r=oN(n);return t.reduce((s,i)=>s.then(()=>r.run(()=>i(...e))),Promise.resolve())}function I3(t,e){const n=e.shift(),r=oN(n);return Promise.all(t.map(s=>r.run(()=>s(...e))))}function mg(t,e){for(const n of[...t])n(e)}class M3{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const s=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!r.allowDeprecated){let l=i.message;l||(l=`${s} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(l)||(console.warn(l),this._deprecatedMessages.add(l))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,s=(...i)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...i));return r=this.hook(e,s),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const s of r)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Wy(e),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(e){const n=Wy(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(A3,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(I3,e,...n)}callHookWith(e,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&mg(this._before,s);const i=e(n in this._hooks?[...this._hooks[n]]:[],r);return i instanceof Promise?i.finally(()=>{this._after&&s&&mg(this._after,s)}):(this._after&&s&&mg(this._after,s),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function O3(){return new M3}const D3=new Set(["link","style","script","noscript"]),L3=new Set(["title","titleTemplate","script","style","noscript"]),Vb=new Set(["base","meta","link","style","script","noscript"]),$3=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),B3=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),F3=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),U3=new Set(["templateParams","htmlAttrs","bodyAttrs"]),s0=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),z3=["name","property","http-equiv"];function iN(t){const e=t.split(":");return e.length?s0.has(e[1]):!1}function Hy(t){const{props:e,tag:n}=t;if(B3.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const r of z3)if(e[r]!==void 0)return`${n}:${e[r]}`}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(L3.has(n)){const r=t.textContent||t.innerHTML;if(r)return`${n}:content:${r}`}}function qb(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function Vy(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let s;if(e&&(s=e(n,t)),Array.isArray(s))return s.map(i=>Vy(i,e));if((s==null?void 0:s.constructor)===Object){const i={};for(const l of Object.keys(s))i[l]=Vy(s[l],e,l);return i}return s}function W3(t,e){const n=t==="style"?new Map:new Set;function r(s){const i=s.trim();if(i)if(t==="style"){const[l,...u]=i.split(":").map(f=>f.trim());l&&u.length&&n.set(l,u.join(":"))}else i.split(" ").filter(Boolean).forEach(l=>n.add(l))}return typeof e=="string"?t==="style"?e.split(";").forEach(r):r(e):Array.isArray(e)?e.forEach(s=>r(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,i])=>{i&&i!=="false"&&(t==="style"?n.set(s.trim(),i):r(s))}),n}function aN(t,e){return t.props=t.props||{},e&&Object.entries(e).forEach(([n,r])=>{if(r===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=W3(n,r);return}if(F3.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let l=e.type;if(e.type||(l="application/json"),!(l!=null&&l.endsWith("json"))&&l!=="speculationrules")return;e.type=l,t.props.type=l,t[n]=JSON.stringify(r)}else t[n]=r;return}const s=String(r),i=n.startsWith("data-");s==="true"||s===""?t.props[n]=i?s:!0:!r&&i&&s==="false"?t.props[n]="false":r!==void 0&&(t.props[n]=r)}),t}function H3(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},r=aN({tag:t,props:{}},n);return r.key&&D3.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function V3(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(s,i)=>{for(let l=0;l<e.length;l++)i=e[l](s,i);return i};t=n(void 0,t);const r=[];return t=Vy(t,n),Object.entries(t||{}).forEach(([s,i])=>{if(i!==void 0)for(const l of Array.isArray(i)?i:[i])r.push(H3(s,l))}),r.flat()}const Kb=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,Gb={base:-10,title:10},q3={critical:-8,high:-1,low:2},Yb={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},K3=/@import/,Ic=t=>t===""||t===!0;function G3(t,e){var i;if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const r=q3[e.tagPriority]||0,s=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Yb;if(e.tag in Gb)n=Gb[e.tag];else if(e.tag==="meta"){const l=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;l&&(n=Yb.meta[l])}else e.tag==="link"&&e.props.rel?n=s.link[e.props.rel]:e.tag==="script"?Ic(e.props.async)?n=s.script.async:e.props.src&&!Ic(e.props.defer)&&!Ic(e.props.async)&&e.props.type!=="module"&&!((i=e.props.type)!=null&&i.endsWith("json"))?n=s.script.sync:Ic(e.props.defer)&&e.props.src&&!Ic(e.props.async)&&(n=s.script.defer):e.tag==="style"&&(n=e.innerHTML&&K3.test(e.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function Qb(t,e){const n=typeof e=="function"?e(t):e,r=n.key||String(t.plugins.size+1);t.plugins.get(r)||(t.plugins.set(r,n),t.hooks.addHooks(n.hooks||{}))}function Y3(t={}){var u;const e=O3();e.addHooks(t.hooks||{});const n=!t.document,r=new Map,s=new Map,i=[],l={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:r,headEntries(){return[...r.values()]},use:f=>Qb(l,f),push(f,h){const m={...h||{}};delete m.head;const p=m._index??l._entryCount++,x={_i:p,input:f,options:m},w={_poll(S=!1){l.dirty=!0,!S&&i.push(p),e.callHook("entries:updated",l)},dispose(){r.delete(p)&&w._poll(!0)},patch(S){(!m.mode||m.mode==="server"&&n||m.mode==="client"&&!n)&&(x.input=S,r.set(p,x),w._poll())}};return w.patch(f),w},async resolveTags(){var w;const f={tagMap:new Map,tags:[],entries:[...l.entries.values()]};for(await e.callHook("entries:resolve",f);i.length;){const S=i.shift(),v=r.get(S);if(v){const b={tags:V3(v.input,t.propResolvers||[]).map(N=>Object.assign(N,v.options)),entry:v};await e.callHook("entries:normalize",b),v._tags=b.tags.map((N,_)=>(N._w=G3(l,N),N._p=(v._i<<10)+_,N._d=Hy(N),N))}}let h=!1;f.entries.flatMap(S=>(S._tags||[]).map(v=>({...v,props:{...v.props}}))).sort(Kb).reduce((S,v)=>{const b=String(v._d||v._p);if(!S.has(b))return S.set(b,v);const N=S.get(b);if(((v==null?void 0:v.tagDuplicateStrategy)||(U3.has(v.tag)?"merge":null)||(v.key&&v.key===N.key?"merge":null))==="merge"){const T={...N.props};Object.entries(v.props).forEach(([M,D])=>T[M]=M==="style"?new Map([...N.props.style||new Map,...D]):M==="class"?new Set([...N.props.class||new Set,...D]):D),S.set(b,{...v,props:T})}else v._p>>10===N._p>>10&&v.tag==="meta"&&iN(b)?(S.set(b,Object.assign([...Array.isArray(N)?N:[N],v],v)),h=!0):(v._w===N._w?v._p>N._p:(v==null?void 0:v._w)<(N==null?void 0:N._w))&&S.set(b,v);return S},f.tagMap);const m=f.tagMap.get("title"),p=f.tagMap.get("titleTemplate");if(l._title=m==null?void 0:m.textContent,p){const S=p==null?void 0:p.textContent;if(l._titleTemplate=S,S){let v=typeof S=="function"?S(m==null?void 0:m.textContent):S;typeof v=="string"&&!l.plugins.has("template-params")&&(v=v.replace("%s",(m==null?void 0:m.textContent)||"")),m?v===null?f.tagMap.delete("title"):f.tagMap.set("title",{...m,textContent:v}):(p.tag="title",p.textContent=v)}}f.tags=Array.from(f.tagMap.values()),h&&(f.tags=f.tags.flat().sort(Kb)),await e.callHook("tags:beforeResolve",f),await e.callHook("tags:resolve",f),await e.callHook("tags:afterResolve",f);const x=[];for(const S of f.tags){const{innerHTML:v,tag:b,props:N}=S;if($3.has(b)&&!(Object.keys(N).length===0&&!S.innerHTML&&!S.textContent)&&!(b==="meta"&&!N.content&&!N["http-equiv"]&&!N.charset)){if(b==="script"&&v){if((w=N.type)!=null&&w.endsWith("json")){const _=typeof v=="string"?v:JSON.stringify(v);S.innerHTML=_.replace(/</g,"\\u003C")}else typeof v=="string"&&(S.innerHTML=v.replace(new RegExp(`</${b}`,"g"),`<\\/${b}`));S._d=Hy(S)}x.push(S)}}return x}};return((t==null?void 0:t.plugins)||[]).forEach(f=>Qb(l,f)),l.hooks.callHook("init",l),(u=t.init)==null||u.forEach(f=>f&&l.push(f)),l}async function lN(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const r={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async s=>{var w;const i=new Map,l=new Promise(S=>{t.resolveTags().then(v=>{S(v.map(b=>{const N=i.get(b._d)||0,_={tag:b,id:(N?`${b._d}:${N}`:b._d)||qb(b),shouldRender:!0};return b._d&&iN(b._d)&&i.set(b._d,N+1),_}))})});let u=t._dom;if(!u){u={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const S of["body","head"]){const v=(w=n[S])==null?void 0:w.children;for(const b of v){const N=b.tagName.toLowerCase();if(!Vb.has(N))continue;const _=aN({tag:N,props:{}},{innerHTML:b.innerHTML,...b.getAttributeNames().reduce((T,M)=>(T[M]=b.getAttribute(M),T),{})||{}});if(_.key=b.getAttribute("data-hid")||void 0,_._d=Hy(_)||qb(_),u.elMap.has(_._d)){let T=1,M=_._d;for(;u.elMap.has(M);)M=`${_._d}:${T++}`;u.elMap.set(M,b)}else u.elMap.set(_._d,b)}}}u.pendingSideEffects={...u.sideEffects},u.sideEffects={};function f(S,v,b){const N=`${S}:${v}`;u.sideEffects[N]=b,delete u.pendingSideEffects[N]}function h({id:S,$el:v,tag:b}){const N=b.tag.endsWith("Attrs");u.elMap.set(S,v),N||(b.textContent&&b.textContent!==v.textContent&&(v.textContent=b.textContent),b.innerHTML&&b.innerHTML!==v.innerHTML&&(v.innerHTML=b.innerHTML),f(S,"el",()=>{v==null||v.remove(),u.elMap.delete(S)}));for(const _ in b.props){if(!Object.prototype.hasOwnProperty.call(b.props,_))continue;const T=b.props[_];if(_.startsWith("on")&&typeof T=="function"){const D=v==null?void 0:v.dataset;if(D&&D[`${_}fired`]){const B=_.slice(0,-5);T.call(v,new Event(B.substring(2)))}v.getAttribute(`data-${_}`)!==""&&((b.tag==="bodyAttrs"?n.defaultView:v).addEventListener(_.substring(2),T.bind(v)),v.setAttribute(`data-${_}`,""));continue}const M=`attr:${_}`;if(_==="class"){if(!T)continue;for(const D of T)N&&f(S,`${M}:${D}`,()=>v.classList.remove(D)),!v.classList.contains(D)&&v.classList.add(D)}else if(_==="style"){if(!T)continue;for(const[D,B]of T)f(S,`${M}:${D}`,()=>{v.style.removeProperty(D)}),v.style.setProperty(D,B)}else T!==!1&&T!==null&&(v.getAttribute(_)!==T&&v.setAttribute(_,T===!0?"":String(T)),N&&f(S,M,()=>v.removeAttribute(_)))}}const m=[],p={bodyClose:void 0,bodyOpen:void 0,head:void 0},x=await l;for(const S of x){const{tag:v,shouldRender:b,id:N}=S;if(b){if(v.tag==="title"){n.title=v.textContent,f("title","",()=>n.title=u.title);continue}S.$el=S.$el||u.elMap.get(N),S.$el?h(S):Vb.has(v.tag)&&m.push(S)}}for(const S of m){const v=S.tag.tagPosition||"head";S.$el=n.createElement(S.tag.tag),h(S),p[v]=p[v]||n.createDocumentFragment(),p[v].appendChild(S.$el)}for(const S of x)await t.hooks.callHook("dom:renderTag",S,n,f);p.head&&n.head.appendChild(p.head),p.bodyOpen&&n.body.insertBefore(p.bodyOpen,n.body.firstChild),p.bodyClose&&n.body.appendChild(p.bodyClose);for(const S in u.pendingSideEffects)u.pendingSideEffects[S]();t._dom=u,await t.hooks.callHook("dom:rendered",{renders:x}),s()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function Q3(t={}){var r,s,i;const e=((r=t.domOptions)==null?void 0:r.render)||lN;t.document=t.document||(typeof window<"u"?document:void 0);const n=((i=(s=t.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:i.innerHTML)||!1;return Y3({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function Z3(t,e){let n=0;return()=>{const r=++n;e(()=>{n===r&&t()})}}const cN=y.createContext(null);function uN(t={}){const e=Q3({domOptions:{render:Z3(()=>lN(e),n=>setTimeout(n,0))},...t});return e}function X3({children:t,head:e}){return y.createElement(cN.Provider,{value:e||uN()},t)}const ou={META:new Set(["twitter"]),OG:new Set(["og","book","article","profile","fb"]),MEDIA:new Set(["ogImage","ogVideo","ogAudio","twitterImage"]),HTTP_EQUIV:new Set(["contentType","defaultStyle","xUaCompatible"])},J3={articleExpirationTime:"article:expiration_time",articleModifiedTime:"article:modified_time",articlePublishedTime:"article:published_time",bookReleaseDate:"book:release_date",fbAppId:"fb:app_id",ogAudioSecureUrl:"og:audio:secure_url",ogAudioUrl:"og:audio",ogImageSecureUrl:"og:image:secure_url",ogImageUrl:"og:image",ogSiteName:"og:site_name",ogVideoSecureUrl:"og:video:secure_url",ogVideoUrl:"og:video",profileFirstName:"profile:first_name",profileLastName:"profile:last_name",profileUsername:"profile:username",msapplicationConfig:"msapplication-Config",msapplicationTileColor:"msapplication-TileColor",msapplicationTileImage:"msapplication-TileImage"},dN={appleItunesApp:{unpack:{entrySeparator:", ",resolve:({key:t,value:e})=>`${$s(t)}=${e}`}},refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve:({key:t,value:e})=>t==="seconds"?`${e}`:void 0}},robots:{unpack:{entrySeparator:", ",resolve:({key:t,value:e})=>typeof e=="boolean"?$s(t):`${$s(t)}:${e}`}},contentSecurityPolicy:{metaKey:"http-equiv",unpack:{entrySeparator:"; ",resolve:({key:t,value:e})=>`${$s(t)} ${e}`}},charset:{}};function $s(t){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n=e.indexOf("-");return n===-1?e:ou.META.has(e.slice(0,n))||ou.OG.has(e.slice(0,n))?t.replace(/([A-Z])/g,":$1").toLowerCase():e}function fN(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>String(n)!=="false"&&e))}function qy(t){return Array.isArray(t)?t.map(qy):!t||typeof t!="object"?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[$s(e),qy(n)]))}function hN(t,e={}){const{entrySeparator:n="",keyValueSeparator:r="",wrapValue:s,resolve:i}=e;return Object.entries(t).map(([l,u])=>{if(i){const h=i({key:l,value:u});if(h!==void 0)return h}const f=typeof u=="object"?hN(u,e):typeof u=="number"?u.toString():typeof u=="string"&&s?`${s}${u.replace(new RegExp(s,"g"),`\\${s}`)}${s}`:u;return`${l}${r}${f}`}).join(n)}function Zb(t,e){const n=fN(e),r=$s(t),s=pN(r);if(!s0.has(r))return[{[s]:r,...n}];const i=Object.fromEntries(Object.entries(n).map(([l,u])=>[`${t}${l==="url"?"":`${l[0].toUpperCase()}${l.slice(1)}`}`,u]));return Of(i||{}).sort((l,u)=>{var f,h;return(((f=l[s])==null?void 0:f.length)||0)-(((h=u[s])==null?void 0:h.length)||0)})}function pN(t){var r;if(((r=dN[t])==null?void 0:r.metaKey)==="http-equiv"||ou.HTTP_EQUIV.has(t))return"http-equiv";const e=$s(t),n=e.indexOf(":");return n===-1?"name":ou.OG.has(e.slice(0,n))?"property":"name"}function eM(t){return J3[t]||$s(t)}function tM(t,e){var n;return e==="refresh"?`${t.seconds};url=${t.url}`:hN(qy(t),{keyValueSeparator:"=",entrySeparator:", ",resolve:({value:r,key:s})=>r===null?"":typeof r=="boolean"?s:void 0,...(n=dN[e])==null?void 0:n.unpack})}function Of(t){const e=[],n={};for(const[s,i]of Object.entries(t)){if(Array.isArray(i)){if(s==="themeColor"){i.forEach(l=>{typeof l=="object"&&l!==null&&e.push({name:"theme-color",...l})});continue}for(const l of i)if(typeof l=="object"&&l!==null){const u=[],f=[];for(const[h,m]of Object.entries(l)){const p=`${s}${h==="url"?"":`:${h}`}`,x=Of({[p]:m});(h==="url"?u:f).push(...x)}e.push(...u,...f)}else e.push(...typeof l=="string"?Of({[s]:l}):Zb(s,l));continue}if(typeof i=="object"&&i)if(ou.MEDIA.has(s)){const l=s.startsWith("twitter")?"twitter":"og",u=s.replace(/^(og|twitter)/,"").toLowerCase(),f=l==="twitter"?"name":"property";i.url&&e.push({[f]:`${l}:${u}`,content:i.url}),i.secureUrl&&e.push({[f]:`${l}:${u}:secure_url`,content:i.secureUrl});for(const[h,m]of Object.entries(i))h!=="url"&&h!=="secureUrl"&&e.push({[f]:`${l}:${u}:${h}`,content:m})}else s0.has($s(s))?e.push(...Zb(s,i)):n[s]=fN(i);else n[s]=i}const r=Object.entries(n).map(([s,i])=>{if(s==="charset")return{charset:i===null?"_null":i};const l=pN(s),u=eM(s),f=i===null?"_null":typeof i=="object"?tM(i,s):typeof i=="number"?i.toString():i;return l==="http-equiv"?{"http-equiv":u,content:f}:{[l]:u,content:f}});return[...e,...r].map(s=>"content"in s&&s.content==="_null"?{...s,content:null}:s)}const nM={key:"flatMeta",hooks:{"entries:normalize":t=>{const e=[];t.tags=t.tags.map(n=>n.tag!=="_flatMeta"?n:(e.push(Of(n.props).map(r=>({...n,tag:"meta",props:r}))),!1)).filter(Boolean).concat(...e)}}};function rM(t={}){return e=>(e.push({meta:[{name:"twitter:card",content:t.twitterCard||"summary_large_image",tagPriority:"low"},{property:"og:title",tagPriority:"low","data-infer":""},{property:"og:description",tagPriority:"low","data-infer":""}]}),{key:"infer-seo-meta",hooks:{"tags:beforeResolve":({tagMap:n})=>{var u,f;let r=e._titleTemplate||e._title;const s=n.get("meta:og:title");typeof(s==null?void 0:s.props["data-infer"])<"u"&&(typeof r=="function"&&(r=r(e._title)),s.props.content=t.ogTitle?t.ogTitle(r):r||"",s.processTemplateParams=!0);const i=(f=(u=n.get("meta:description"))==null?void 0:u.props)==null?void 0:f.content,l=n.get("meta:og:description");typeof(l==null?void 0:l.props["data-infer"])<"u"&&(l.props.content=t.ogDescription?t.ogDescription(i):i||"",l.processTemplateParams=!0)}}})}class Zc{constructor(e){Re(this,"pubkey");Re(this,"relays");Re(this,"secret");const n=new URL(e),r=new URLSearchParams(n.search),s=n.hostname||n.pathname.slice(2),i=r.getAll("relay"),l=r.get("secret")??void 0;if(!s)throw new Error("Invalid bunker URI");this.pubkey=s,this.relays=i,this.secret=l}get href(){return this.toString()}toString(){return Zc.toString(this)}static fromJSON(e){const n=Zc.toString(e);return new Zc(n)}static toString(e){const n=new URLSearchParams;for(const r of e.relays)n.append("relay",r);return e.secret&&n.set("secret",e.secret),`bunker://${e.pubkey}?${n.toString()}`}}class sM{get nostr(){const e=globalThis.nostr;if(!e)throw new Error("Browser extension not available");return e}async getPublicKey(){const e=await this.nostr.getPublicKey();if(typeof e!="string")throw new Error(`Nostr public key retrieval failed: expected string, got ${JSON.stringify(e)}`);return e}async signEvent(e){const n=await this.nostr.signEvent(e);if(typeof n!="object"||!n.id||!n.pubkey||!n.sig)throw new Error(`Nostr event signing failed: expected object with id, pubkey, and sig, got ${JSON.stringify(n)}`);return n}async getRelays(){if(!this.nostr.getRelays)return{};const e=await this.nostr.getRelays();if(typeof e!="object"||e===null)throw new Error(`Nostr getRelays failed: expected object, got ${JSON.stringify(e)}`);return this.nostr.getRelays()}get nip04(){const e=this.nostr;if(e.nip04)return{encrypt:async(n,r)=>{const s=await e.nip04.encrypt(n,r);if(typeof s!="string")throw new Error(`NIP-04 encryption failed: expected string result, got ${JSON.stringify(s)}`);return s},decrypt:async(n,r)=>{const s=await e.nip04.decrypt(n,r);if(typeof s!="string")throw new Error(`NIP-04 decryption failed: expected string result, got ${JSON.stringify(s)}`);return s}}}get nip44(){const e=this.nostr;if(e.nip44)return{encrypt:async(n,r)=>{const s=await e.nip44.encrypt(n,r);if(typeof s!="string")throw new Error(`NIP-44 encryption failed: expected string result, got ${JSON.stringify(s)}`);return s},decrypt:async(n,r)=>{const s=await e.nip44.decrypt(n,r);if(typeof s!="string")throw new Error(`NIP-44 decryption failed: expected string result, got ${JSON.stringify(s)}`);return s}}}}function Xb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function mN(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function oM(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xb(t.outputLen),Xb(t.blockLen)}function Df(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function iM(t,e){mN(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const gg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gN=t=>t instanceof Uint8Array,yg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ns=(t,e)=>t<<32-e|t>>>e,aM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!aM)throw new Error("Non little-endian hardware is not supported");function lM(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function o0(t){if(typeof t=="string"&&(t=lM(t)),!gN(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function cM(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!gN(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let yN=class{clone(){return this._cloneInto()}};function uM(t){const e=r=>t().update(o0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function vN(t=32){if(gg&&typeof gg.getRandomValues=="function")return gg.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function dM(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),l=Number(n>>s&i),u=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,l,r),t.setUint32(e+h,u,r)}let fM=class extends yN{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yg(this.buffer)}update(e){Df(this);const{view:n,buffer:r,blockLen:s}=this;e=o0(e);const i=e.length;for(let l=0;l<i;){const u=Math.min(s-this.pos,i-l);if(u===s){const f=yg(e);for(;s<=i-l;l+=s)this.process(f,l);continue}r.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Df(this),iM(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:l}=this;n[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let p=l;p<s;p++)n[p]=0;dM(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=yg(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)u.setUint32(4*p,m[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:l,pos:u}=this;return e.length=s,e.pos=u,e.finished=i,e.destroyed=l,s%n&&e.buffer.set(r),e}};const hM=(t,e,n)=>t&e^~t&n,pM=(t,e,n)=>t&e^t&n^e&n,mM=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),So=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),No=new Uint32Array(64);let gM=class extends fM{constructor(){super(64,32,8,!1),this.A=So[0]|0,this.B=So[1]|0,this.C=So[2]|0,this.D=So[3]|0,this.E=So[4]|0,this.F=So[5]|0,this.G=So[6]|0,this.H=So[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:l,G:u,H:f}=this;return[e,n,r,s,i,l,u,f]}set(e,n,r,s,i,l,u,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=l|0,this.G=u|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)No[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const x=No[p-15],w=No[p-2],S=ns(x,7)^ns(x,18)^x>>>3,v=ns(w,17)^ns(w,19)^w>>>10;No[p]=v+No[p-7]+S+No[p-16]|0}let{A:r,B:s,C:i,D:l,E:u,F:f,G:h,H:m}=this;for(let p=0;p<64;p++){const x=ns(u,6)^ns(u,11)^ns(u,25),w=m+x+hM(u,f,h)+mM[p]+No[p]|0,v=(ns(r,2)^ns(r,13)^ns(r,22))+pM(r,s,i)|0;m=h,h=f,f=u,u=l+w|0,l=i,i=s,s=r,r=w+v|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,l=l+this.D|0,u=u+this.E|0,f=f+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,s,i,l,u,f,h,m)}roundClean(){No.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ky=uM(()=>new gM);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xN=BigInt(0),Nh=BigInt(1),yM=BigInt(2),kh=t=>t instanceof Uint8Array,vM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vl(t){if(!kh(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=vM[t[n]];return e}function wN(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function i0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function xl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),l=Number.parseInt(i,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");n[r]=l}return n}function er(t){return i0(vl(t))}function a0(t){if(!kh(t))throw new Error("Uint8Array expected");return i0(vl(Uint8Array.from(t).reverse()))}function ni(t,e){return xl(t.toString(16).padStart(e*2,"0"))}function l0(t,e){return ni(t,e).reverse()}function xM(t){return xl(wN(t))}function Pn(t,e,n){let r;if(typeof e=="string")try{r=xl(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(kh(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function Zi(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!kh(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function wM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bM(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function EM(t){let e;for(e=0;t>xN;t>>=Nh,e+=1);return e}function SM(t,e){return t>>BigInt(e)&Nh}const NM=(t,e,n)=>t|(n?Nh:xN)<<BigInt(e),c0=t=>(yM<<BigInt(t-1))-Nh,vg=t=>new Uint8Array(t),Jb=t=>Uint8Array.from(t);function bN(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=vg(t),s=vg(t),i=0;const l=()=>{r.fill(1),s.fill(0),i=0},u=(...p)=>n(s,r,...p),f=(p=vg())=>{s=u(Jb([0]),p),r=u(),p.length!==0&&(s=u(Jb([1]),p),r=u())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const x=[];for(;p<e;){r=u();const w=r.slice();x.push(w),p+=r.length}return Zi(...x)};return(p,x)=>{l(),f(p);let w;for(;!(w=x(h()));)f();return l(),w}}const kM={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Tu(t,e,n={}){const r=(s,i,l)=>{const u=kM[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=t[s];if(!(l&&f===void 0)&&!u(f,t))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const CM=Object.freeze(Object.defineProperty({__proto__:null,bitGet:SM,bitLen:EM,bitMask:c0,bitSet:NM,bytesToHex:vl,bytesToNumberBE:er,bytesToNumberLE:a0,concatBytes:Zi,createHmacDrbg:bN,ensureBytes:Pn,equalBytes:wM,hexToBytes:xl,hexToNumber:i0,numberToBytesBE:ni,numberToBytesLE:l0,numberToHexUnpadded:wN,numberToVarBytesBE:xM,utf8ToBytes:bM,validateObject:Tu},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gn=BigInt(0),Zt=BigInt(1),Ii=BigInt(2),jM=BigInt(3),Gy=BigInt(4),eE=BigInt(5),tE=BigInt(8);BigInt(9);BigInt(16);function Sn(t,e){const n=t%e;return n>=gn?n:e+n}function _M(t,e,n){if(n<=gn||e<gn)throw new Error("Expected power/modulo > 0");if(n===Zt)return gn;let r=Zt;for(;e>gn;)e&Zt&&(r=r*t%n),t=t*t%n,e>>=Zt;return r}function vr(t,e,n){let r=t;for(;e-- >gn;)r*=r,r%=n;return r}function Yy(t,e){if(t===gn||e<=gn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Sn(t,e),r=e,s=gn,i=Zt;for(;n!==gn;){const u=r/n,f=r%n,h=s-i*u;r=n,n=f,s=i,i=h}if(r!==Zt)throw new Error("invert: does not exist");return Sn(s,e)}function TM(t){const e=(t-Zt)/Ii;let n,r,s;for(n=t-Zt,r=0;n%Ii===gn;n/=Ii,r++);for(s=Ii;s<t&&_M(s,e,t)!==t-Zt;s++);if(r===1){const l=(t+Zt)/Gy;return function(f,h){const m=f.pow(h,l);if(!f.eql(f.sqr(m),h))throw new Error("Cannot find square root");return m}}const i=(n+Zt)/Ii;return function(u,f){if(u.pow(f,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=r,m=u.pow(u.mul(u.ONE,s),n),p=u.pow(f,i),x=u.pow(f,n);for(;!u.eql(x,u.ONE);){if(u.eql(x,u.ZERO))return u.ZERO;let w=1;for(let v=u.sqr(x);w<h&&!u.eql(v,u.ONE);w++)v=u.sqr(v);const S=u.pow(m,Zt<<BigInt(h-w-1));m=u.sqr(S),p=u.mul(p,S),x=u.mul(x,m),h=w}return p}}function PM(t){if(t%Gy===jM){const e=(t+Zt)/Gy;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%tE===eE){const e=(t-eE)/tE;return function(r,s){const i=r.mul(s,Ii),l=r.pow(i,e),u=r.mul(s,l),f=r.mul(r.mul(u,Ii),l),h=r.mul(u,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),s))throw new Error("Cannot find square root");return h}}return TM(t)}const RM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function AM(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=RM.reduce((r,s)=>(r[s]="function",r),e);return Tu(t,n)}function IM(t,e,n){if(n<gn)throw new Error("Expected power > 0");if(n===gn)return t.ONE;if(n===Zt)return e;let r=t.ONE,s=e;for(;n>gn;)n&Zt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Zt;return r}function MM(t,e){const n=new Array(e.length),r=e.reduce((i,l,u)=>t.is0(l)?i:(n[u]=i,t.mul(i,l)),t.ONE),s=t.inv(r);return e.reduceRight((i,l,u)=>t.is0(l)?i:(n[u]=t.mul(i,n[u]),t.mul(i,l)),s),n}function EN(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function OM(t,e,n=!1,r={}){if(t<=gn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=EN(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const l=PM(t),u=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:c0(s),ZERO:gn,ONE:Zt,create:f=>Sn(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return gn<=f&&f<t},is0:f=>f===gn,isOdd:f=>(f&Zt)===Zt,neg:f=>Sn(-f,t),eql:(f,h)=>f===h,sqr:f=>Sn(f*f,t),add:(f,h)=>Sn(f+h,t),sub:(f,h)=>Sn(f-h,t),mul:(f,h)=>Sn(f*h,t),pow:(f,h)=>IM(u,f,h),div:(f,h)=>Sn(f*Yy(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Yy(f,t),sqrt:r.sqrt||(f=>l(u,f)),invertBatch:f=>MM(u,f),cmov:(f,h,m)=>m?h:f,toBytes:f=>n?l0(f,i):ni(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return n?a0(f):er(f)}});return Object.freeze(u)}function SN(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function NN(t){const e=SN(t);return e+Math.ceil(e/2)}function DM(t,e,n=!1){const r=t.length,s=SN(e),i=NN(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const l=n?er(t):a0(t),u=Sn(l,e-Zt)+Zt;return n?l0(u,s):ni(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const LM=BigInt(0),xg=BigInt(1);function $M(t,e){const n=(s,i)=>{const l=i.negate();return s?l:i},r=s=>{const i=Math.ceil(e/s)+1,l=2**(s-1);return{windows:i,windowSize:l}};return{constTimeNegate:n,unsafeLadder(s,i){let l=t.ZERO,u=s;for(;i>LM;)i&xg&&(l=l.add(u)),u=u.double(),i>>=xg;return l},precomputeWindow(s,i){const{windows:l,windowSize:u}=r(i),f=[];let h=s,m=h;for(let p=0;p<l;p++){m=h,f.push(m);for(let x=1;x<u;x++)m=m.add(h),f.push(m);h=m.double()}return f},wNAF(s,i,l){const{windows:u,windowSize:f}=r(s);let h=t.ZERO,m=t.BASE;const p=BigInt(2**s-1),x=2**s,w=BigInt(s);for(let S=0;S<u;S++){const v=S*f;let b=Number(l&p);l>>=w,b>f&&(b-=x,l+=xg);const N=v,_=v+Math.abs(b)-1,T=S%2!==0,M=b<0;b===0?m=m.add(n(T,i[N])):h=h.add(n(M,i[_]))}return{p:h,f:m}},wNAFCached(s,i,l,u){const f=s._WINDOW_SIZE||1;let h=i.get(s);return h||(h=this.precomputeWindow(s,f),f!==1&&i.set(s,u(h))),this.wNAF(f,h,l)}}}function kN(t){return AM(t.Fp),Tu(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...EN(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BM(t){const e=kN(t);Tu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:FM,hexToBytes:UM}=CM,Mi={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Mi;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:FM(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Mi,n=typeof t=="string"?UM(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Mi._parseInt(n.subarray(2)),{d:l,l:u}=Mi._parseInt(i);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:l}},hexFromSig(t){const e=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const m=h.toString(16);return m.length&1?`0${m}`:m},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,l=s.length/2,u=n(i),f=n(l);return`30${n(l+i+4)}02${f}${s}02${u}${r}`}},Ls=BigInt(0),Sr=BigInt(1);BigInt(2);const nE=BigInt(3);BigInt(4);function zM(t){const e=BM(t),{Fp:n}=e,r=e.toBytes||((S,v,b)=>{const N=v.toAffine();return Zi(Uint8Array.from([4]),n.toBytes(N.x),n.toBytes(N.y))}),s=e.fromBytes||(S=>{const v=S.subarray(1),b=n.fromBytes(v.subarray(0,n.BYTES)),N=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:b,y:N}});function i(S){const{a:v,b}=e,N=n.sqr(S),_=n.mul(N,S);return n.add(n.add(_,n.mul(S,v)),b)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function l(S){return typeof S=="bigint"&&Ls<S&&S<e.n}function u(S){if(!l(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(S){const{allowedPrivateKeyLengths:v,nByteLength:b,wrapPrivateKey:N,n:_}=e;if(v&&typeof S!="bigint"){if(S instanceof Uint8Array&&(S=vl(S)),typeof S!="string"||!v.includes(S.length))throw new Error("Invalid key");S=S.padStart(b*2,"0")}let T;try{T=typeof S=="bigint"?S:er(Pn("private key",S,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof S}`)}return N&&(T=Sn(T,_)),u(T),T}const h=new Map;function m(S){if(!(S instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(v,b,N){if(this.px=v,this.py=b,this.pz=N,v==null||!n.isValid(v))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(N==null||!n.isValid(N))throw new Error("z required")}static fromAffine(v){const{x:b,y:N}=v||{};if(!v||!n.isValid(b)||!n.isValid(N))throw new Error("invalid affine point");if(v instanceof p)throw new Error("projective point not allowed");const _=T=>n.eql(T,n.ZERO);return _(b)&&_(N)?p.ZERO:new p(b,N,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const b=n.invertBatch(v.map(N=>N.pz));return v.map((N,_)=>N.toAffine(b[_])).map(p.fromAffine)}static fromHex(v){const b=p.fromAffine(s(Pn("pointHex",v)));return b.assertValidity(),b}static fromPrivateKey(v){return p.BASE.multiply(f(v))}_setWindowSize(v){this._WINDOW_SIZE=v,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:b}=this.toAffine();if(!n.isValid(v)||!n.isValid(b))throw new Error("bad point: x or y not FE");const N=n.sqr(b),_=i(v);if(!n.eql(N,_))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){m(v);const{px:b,py:N,pz:_}=this,{px:T,py:M,pz:D}=v,B=n.eql(n.mul(b,D),n.mul(T,_)),O=n.eql(n.mul(N,D),n.mul(M,_));return B&&O}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b}=e,N=n.mul(b,nE),{px:_,py:T,pz:M}=this;let D=n.ZERO,B=n.ZERO,O=n.ZERO,F=n.mul(_,_),R=n.mul(T,T),L=n.mul(M,M),A=n.mul(_,T);return A=n.add(A,A),O=n.mul(_,M),O=n.add(O,O),D=n.mul(v,O),B=n.mul(N,L),B=n.add(D,B),D=n.sub(R,B),B=n.add(R,B),B=n.mul(D,B),D=n.mul(A,D),O=n.mul(N,O),L=n.mul(v,L),A=n.sub(F,L),A=n.mul(v,A),A=n.add(A,O),O=n.add(F,F),F=n.add(O,F),F=n.add(F,L),F=n.mul(F,A),B=n.add(B,F),L=n.mul(T,M),L=n.add(L,L),F=n.mul(L,A),D=n.sub(D,F),O=n.mul(L,R),O=n.add(O,O),O=n.add(O,O),new p(D,B,O)}add(v){m(v);const{px:b,py:N,pz:_}=this,{px:T,py:M,pz:D}=v;let B=n.ZERO,O=n.ZERO,F=n.ZERO;const R=e.a,L=n.mul(e.b,nE);let A=n.mul(b,T),U=n.mul(N,M),K=n.mul(_,D),H=n.add(b,N),V=n.add(T,M);H=n.mul(H,V),V=n.add(A,U),H=n.sub(H,V),V=n.add(b,_);let Q=n.add(T,D);return V=n.mul(V,Q),Q=n.add(A,K),V=n.sub(V,Q),Q=n.add(N,_),B=n.add(M,D),Q=n.mul(Q,B),B=n.add(U,K),Q=n.sub(Q,B),F=n.mul(R,V),B=n.mul(L,K),F=n.add(B,F),B=n.sub(U,F),F=n.add(U,F),O=n.mul(B,F),U=n.add(A,A),U=n.add(U,A),K=n.mul(R,K),V=n.mul(L,V),U=n.add(U,K),K=n.sub(A,K),K=n.mul(R,K),V=n.add(V,K),A=n.mul(U,V),O=n.add(O,A),A=n.mul(Q,V),B=n.mul(H,B),B=n.sub(B,A),A=n.mul(H,U),F=n.mul(Q,F),F=n.add(F,A),new p(B,O,F)}subtract(v){return this.add(v.negate())}is0(){return this.equals(p.ZERO)}wNAF(v){return w.wNAFCached(this,h,v,b=>{const N=n.invertBatch(b.map(_=>_.pz));return b.map((_,T)=>_.toAffine(N[T])).map(p.fromAffine)})}multiplyUnsafe(v){const b=p.ZERO;if(v===Ls)return b;if(u(v),v===Sr)return this;const{endo:N}=e;if(!N)return w.unsafeLadder(this,v);let{k1neg:_,k1:T,k2neg:M,k2:D}=N.splitScalar(v),B=b,O=b,F=this;for(;T>Ls||D>Ls;)T&Sr&&(B=B.add(F)),D&Sr&&(O=O.add(F)),F=F.double(),T>>=Sr,D>>=Sr;return _&&(B=B.negate()),M&&(O=O.negate()),O=new p(n.mul(O.px,N.beta),O.py,O.pz),B.add(O)}multiply(v){u(v);let b=v,N,_;const{endo:T}=e;if(T){const{k1neg:M,k1:D,k2neg:B,k2:O}=T.splitScalar(b);let{p:F,f:R}=this.wNAF(D),{p:L,f:A}=this.wNAF(O);F=w.constTimeNegate(M,F),L=w.constTimeNegate(B,L),L=new p(n.mul(L.px,T.beta),L.py,L.pz),N=F.add(L),_=R.add(A)}else{const{p:M,f:D}=this.wNAF(b);N=M,_=D}return p.normalizeZ([N,_])[0]}multiplyAndAddUnsafe(v,b,N){const _=p.BASE,T=(D,B)=>B===Ls||B===Sr||!D.equals(_)?D.multiplyUnsafe(B):D.multiply(B),M=T(this,b).add(T(v,N));return M.is0()?void 0:M}toAffine(v){const{px:b,py:N,pz:_}=this,T=this.is0();v==null&&(v=T?n.ONE:n.inv(_));const M=n.mul(b,v),D=n.mul(N,v),B=n.mul(_,v);if(T)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:M,y:D}}isTorsionFree(){const{h:v,isTorsionFree:b}=e;if(v===Sr)return!0;if(b)return b(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:b}=e;return v===Sr?this:b?b(p,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(p,this,v)}toHex(v=!0){return vl(this.toRawBytes(v))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const x=e.nBitLength,w=$M(p,e.endo?Math.ceil(x/2):x);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:l}}function WM(t){const e=kN(t);return Tu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function HM(t){const e=WM(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function l(V){return Ls<V&&V<n.ORDER}function u(V){return Sn(V,r)}function f(V){return Yy(V,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:m,weierstrassEquation:p,isWithinCurveOrder:x}=zM({...e,toBytes(V,Q,te){const Z=Q.toAffine(),G=n.toBytes(Z.x),ne=Zi;return te?ne(Uint8Array.from([Q.hasEvenY()?2:3]),G):ne(Uint8Array.from([4]),G,n.toBytes(Z.y))},fromBytes(V){const Q=V.length,te=V[0],Z=V.subarray(1);if(Q===s&&(te===2||te===3)){const G=er(Z);if(!l(G))throw new Error("Point is not on curve");const ne=p(G);let z=n.sqrt(ne);const W=(z&Sr)===Sr;return(te&1)===1!==W&&(z=n.neg(z)),{x:G,y:z}}else if(Q===i&&te===4){const G=n.fromBytes(Z.subarray(0,n.BYTES)),ne=n.fromBytes(Z.subarray(n.BYTES,2*n.BYTES));return{x:G,y:ne}}else throw new Error(`Point of length ${Q} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),w=V=>vl(ni(V,e.nByteLength));function S(V){const Q=r>>Sr;return V>Q}function v(V){return S(V)?u(-V):V}const b=(V,Q,te)=>er(V.slice(Q,te));class N{constructor(Q,te,Z){this.r=Q,this.s=te,this.recovery=Z,this.assertValidity()}static fromCompact(Q){const te=e.nByteLength;return Q=Pn("compactSignature",Q,te*2),new N(b(Q,0,te),b(Q,te,2*te))}static fromDER(Q){const{r:te,s:Z}=Mi.toSig(Pn("DER",Q));return new N(te,Z)}assertValidity(){if(!x(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!x(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Q){return new N(this.r,this.s,Q)}recoverPublicKey(Q){const{r:te,s:Z,recovery:G}=this,ne=O(Pn("msgHash",Q));if(G==null||![0,1,2,3].includes(G))throw new Error("recovery id invalid");const z=G===2||G===3?te+e.n:te;if(z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=(G&1)===0?"02":"03",ae=h.fromHex(W+w(z)),de=f(z),fe=u(-ne*de),we=u(Z*de),ce=h.BASE.multiplyAndAddUnsafe(ae,fe,we);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return xl(this.toDERHex())}toDERHex(){return Mi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xl(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const _={isValidPrivateKey(V){try{return m(V),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const V=NN(e.n);return DM(e.randomBytes(V),e.n)},precompute(V=8,Q=h.BASE){return Q._setWindowSize(V),Q.multiply(BigInt(3)),Q}};function T(V,Q=!0){return h.fromPrivateKey(V).toRawBytes(Q)}function M(V){const Q=V instanceof Uint8Array,te=typeof V=="string",Z=(Q||te)&&V.length;return Q?Z===s||Z===i:te?Z===2*s||Z===2*i:V instanceof h}function D(V,Q,te=!0){if(M(V))throw new Error("first arg must be private key");if(!M(Q))throw new Error("second arg must be public key");return h.fromHex(Q).multiply(m(V)).toRawBytes(te)}const B=e.bits2int||function(V){const Q=er(V),te=V.length*8-e.nBitLength;return te>0?Q>>BigInt(te):Q},O=e.bits2int_modN||function(V){return u(B(V))},F=c0(e.nBitLength);function R(V){if(typeof V!="bigint")throw new Error("bigint expected");if(!(Ls<=V&&V<F))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ni(V,e.nByteLength)}function L(V,Q,te=A){if(["recovered","canonical"].some(be=>be in te))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:G}=e;let{lowS:ne,prehash:z,extraEntropy:W}=te;ne==null&&(ne=!0),V=Pn("msgHash",V),z&&(V=Pn("prehashed msgHash",Z(V)));const ae=O(V),de=m(Q),fe=[R(de),R(ae)];if(W!=null){const be=W===!0?G(n.BYTES):W;fe.push(Pn("extraEntropy",be))}const we=Zi(...fe),ce=ae;function ge(be){const De=B(be);if(!x(De))return;const Ze=f(De),Qe=h.BASE.multiply(De).toAffine(),Te=u(Qe.x);if(Te===Ls)return;const yt=u(Ze*u(ce+Te*de));if(yt===Ls)return;let tn=(Qe.x===Te?0:2)|Number(Qe.y&Sr),nn=yt;return ne&&S(yt)&&(nn=v(yt),tn^=1),new N(Te,nn,tn)}return{seed:we,k2sig:ge}}const A={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function K(V,Q,te=A){const{seed:Z,k2sig:G}=L(V,Q,te),ne=e;return bN(ne.hash.outputLen,ne.nByteLength,ne.hmac)(Z,G)}h.BASE._setWindowSize(8);function H(V,Q,te,Z=U){var Qe;const G=V;if(Q=Pn("msgHash",Q),te=Pn("publicKey",te),"strict"in Z)throw new Error("options.strict was renamed to lowS");const{lowS:ne,prehash:z}=Z;let W,ae;try{if(typeof G=="string"||G instanceof Uint8Array)try{W=N.fromDER(G)}catch(Te){if(!(Te instanceof Mi.Err))throw Te;W=N.fromCompact(G)}else if(typeof G=="object"&&typeof G.r=="bigint"&&typeof G.s=="bigint"){const{r:Te,s:yt}=G;W=new N(Te,yt)}else throw new Error("PARSE");ae=h.fromHex(te)}catch(Te){if(Te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ne&&W.hasHighS())return!1;z&&(Q=e.hash(Q));const{r:de,s:fe}=W,we=O(Q),ce=f(fe),ge=u(we*ce),be=u(de*ce),De=(Qe=h.BASE.multiplyAndAddUnsafe(ae,ge,be))==null?void 0:Qe.toAffine();return De?u(De.x)===de:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:D,sign:K,verify:H,ProjectivePoint:h,Signature:N,utils:_}}let CN=class extends yN{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,oM(e);const r=o0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let l=0;l<i.length;l++)i[l]^=54;this.iHash.update(i),this.oHash=e.create();for(let l=0;l<i.length;l++)i[l]^=106;this.oHash.update(i),i.fill(0)}update(e){return Df(this),this.iHash.update(e),this}digestInto(e){Df(this),mN(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:l,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=l,e.outputLen=u,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const jN=(t,e,n)=>new CN(t,e).update(n).digest();jN.create=(t,e)=>new CN(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function VM(t){return{hash:t,hmac:(e,...n)=>jN(t,e,cM(...n)),randomBytes:vN}}function qM(t,e){const n=r=>HM({...t,...VM(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ch=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Lf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_N=BigInt(1),$f=BigInt(2),rE=(t,e)=>(t+e/$f)/e;function TN(t){const e=Ch,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),l=BigInt(23),u=BigInt(44),f=BigInt(88),h=t*t*t%e,m=h*h*t%e,p=vr(m,n,e)*m%e,x=vr(p,n,e)*m%e,w=vr(x,$f,e)*h%e,S=vr(w,s,e)*w%e,v=vr(S,i,e)*S%e,b=vr(v,u,e)*v%e,N=vr(b,f,e)*b%e,_=vr(N,u,e)*v%e,T=vr(_,n,e)*m%e,M=vr(T,l,e)*S%e,D=vr(M,r,e)*h%e,B=vr(D,$f,e);if(!Qy.eql(Qy.sqr(B),t))throw new Error("Cannot find square root");return B}const Qy=OM(Ch,void 0,void 0,{sqrt:TN}),Ol=qM({a:BigInt(0),b:BigInt(7),Fp:Qy,n:Lf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Lf,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-_N*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,l=BigInt("0x100000000000000000000000000000000"),u=rE(i*t,e),f=rE(-r*t,e);let h=Sn(t-u*n-f*s,e),m=Sn(-u*r-f*i,e);const p=h>l,x=m>l;if(p&&(h=e-h),x&&(m=e-m),h>l||m>l)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:p,k1:h,k2neg:x,k2:m}}}},Ky),jh=BigInt(0),PN=t=>typeof t=="bigint"&&jh<t&&t<Ch,KM=t=>typeof t=="bigint"&&jh<t&&t<Lf,sE={};function Bf(t,...e){let n=sE[t];if(n===void 0){const r=Ky(Uint8Array.from(t,s=>s.charCodeAt(0)));n=Zi(r,r),sE[t]=n}return Ky(Zi(n,...e))}const u0=t=>t.toRawBytes(!0).slice(1),Zy=t=>ni(t,32),wg=t=>Sn(t,Ch),iu=t=>Sn(t,Lf),d0=Ol.ProjectivePoint,GM=(t,e,n)=>d0.BASE.multiplyAndAddUnsafe(t,e,n);function Xy(t){let e=Ol.utils.normPrivateKeyToScalar(t),n=d0.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:iu(-e),bytes:u0(n)}}function RN(t){if(!PN(t))throw new Error("bad x: need 0 < x < p");const e=wg(t*t),n=wg(e*t+BigInt(7));let r=TN(n);r%$f!==jh&&(r=wg(-r));const s=new d0(t,r,_N);return s.assertValidity(),s}function AN(...t){return iu(er(Bf("BIP0340/challenge",...t)))}function YM(t){return Xy(t).bytes}function QM(t,e,n=vN(32)){const r=Pn("message",t),{bytes:s,scalar:i}=Xy(e),l=Pn("auxRand",n,32),u=Zy(i^er(Bf("BIP0340/aux",l))),f=Bf("BIP0340/nonce",u,s,r),h=iu(er(f));if(h===jh)throw new Error("sign failed: k is zero");const{bytes:m,scalar:p}=Xy(h),x=AN(m,s,r),w=new Uint8Array(64);if(w.set(m,0),w.set(Zy(iu(p+x*i)),32),!IN(w,r,s))throw new Error("sign: Invalid signature produced");return w}function IN(t,e,n){const r=Pn("signature",t,64),s=Pn("message",e),i=Pn("publicKey",n,32);try{const l=RN(er(i)),u=er(r.subarray(0,32));if(!PN(u))return!1;const f=er(r.subarray(32,64));if(!KM(f))return!1;const h=AN(Zy(u),u0(l),s),m=GM(l,f,iu(-h));return!(!m||!m.hasEvenY()||m.toAffine().x!==u)}catch{return!1}}const Mc={getPublicKey:YM,sign:QM,verify:IN,utils:{randomPrivateKey:Ol.utils.randomPrivateKey,lift_x:RN,pointToBytes:u0,numberToBytesBE:ni,bytesToNumberBE:er,taggedHash:Bf,mod:Sn}},bg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f0=t=>t instanceof Uint8Array,Eg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),rs=(t,e)=>t<<32-e|t>>>e,ZM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ZM)throw new Error("Non little-endian hardware is not supported");const XM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function An(t){if(!f0(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=XM[t[n]];return e}function Xi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),l=Number.parseInt(i,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");n[r]=l}return n}function JM(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function au(t){if(typeof t=="string"&&(t=JM(t)),!f0(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function _h(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!f0(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class MN{clone(){return this._cloneInto()}}function ON(t){const e=r=>t().update(au(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function DN(t=32){if(bg&&typeof bg.getRandomValues=="function")return bg.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Jy(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function eO(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function LN(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function tO(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jy(t.outputLen),Jy(t.blockLen)}function nO(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rO(t,e){LN(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ps={number:Jy,bool:eO,bytes:LN,hash:tO,exists:nO,output:rO};function sO(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),l=Number(n>>s&i),u=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,l,r),t.setUint32(e+h,u,r)}class oO extends MN{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Eg(this.buffer)}update(e){ps.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=au(e);const i=e.length;for(let l=0;l<i;){const u=Math.min(s-this.pos,i-l);if(u===s){const f=Eg(e);for(;s<=i-l;l+=s)this.process(f,l);continue}r.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ps.exists(this),ps.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:l}=this;n[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let p=l;p<s;p++)n[p]=0;sO(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=Eg(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)u.setUint32(4*p,m[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:l,pos:u}=this;return e.length=s,e.pos=u,e.finished=i,e.destroyed=l,s%n&&e.buffer.set(r),e}}const iO=(t,e,n)=>t&e^~t&n,aO=(t,e,n)=>t&e^t&n^e&n,lO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ko=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Co=new Uint32Array(64);class $N extends oO{constructor(){super(64,32,8,!1),this.A=ko[0]|0,this.B=ko[1]|0,this.C=ko[2]|0,this.D=ko[3]|0,this.E=ko[4]|0,this.F=ko[5]|0,this.G=ko[6]|0,this.H=ko[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:l,G:u,H:f}=this;return[e,n,r,s,i,l,u,f]}set(e,n,r,s,i,l,u,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=l|0,this.G=u|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)Co[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const x=Co[p-15],w=Co[p-2],S=rs(x,7)^rs(x,18)^x>>>3,v=rs(w,17)^rs(w,19)^w>>>10;Co[p]=v+Co[p-7]+S+Co[p-16]|0}let{A:r,B:s,C:i,D:l,E:u,F:f,G:h,H:m}=this;for(let p=0;p<64;p++){const x=rs(u,6)^rs(u,11)^rs(u,25),w=m+x+iO(u,f,h)+lO[p]+Co[p]|0,v=(rs(r,2)^rs(r,13)^rs(r,22))+aO(r,s,i)|0;m=h,h=f,f=u,u=l+w|0,l=i,i=s,s=r,r=w+v|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,l=l+this.D|0,u=u+this.E|0,f=f+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,s,i,l,u,f,h,m)}roundClean(){Co.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class cO extends $N{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Dl=ON(()=>new $N);ON(()=>new cO);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ll(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function Js(...t){const e=(s,i)=>l=>s(i(l)),n=Array.from(t).reverse().reduce((s,i)=>s?e(s,i.encode):i.encode,void 0),r=t.reduce((s,i)=>s?e(s,i.decode):i.decode,void 0);return{encode:n,decode:r}}function eo(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(Ll(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})}}}function to(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of e)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function Th(t,e="="){if(Ll(t),typeof e!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let s of n)if(typeof s!="string")throw new Error(`padding.decode: non-string input=${s}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function BN(t){if(typeof t!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>t(e)}}function oE(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const s=[],i=Array.from(t);for(i.forEach(l=>{if(Ll(l),l<0||l>=e)throw new Error(`Wrong integer: ${l}`)});;){let l=0,u=!0;for(let f=r;f<i.length;f++){const h=i[f],m=e*l+h;if(!Number.isSafeInteger(m)||e*l/e!==l||m-h!==e*l)throw new Error("convertRadix: carry overflow");if(l=m%n,i[f]=Math.floor(m/n),!Number.isSafeInteger(i[f])||i[f]*n+l!==m)throw new Error("convertRadix: carry overflow");if(u)i[f]?u=!1:r=f;else continue}if(s.push(l),u)break}for(let l=0;l<t.length-1&&t[l]===0;l++)s.push(0);return s.reverse()}const FN=(t,e)=>e?FN(e,t%e):t,Ff=(t,e)=>t+(e-FN(t,e));function ev(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ff(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Ff(e,n)}`);let s=0,i=0;const l=2**n-1,u=[];for(const f of t){if(Ll(f),f>=2**e)throw new Error(`convertRadix2: invalid data word=${f} from=${e}`);if(s=s<<e|f,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)u.push((s>>i-n&l)>>>0);s&=2**i-1}if(s=s<<n-i&l,!r&&i>=e)throw new Error("Excess padding");if(!r&&s)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&u.push(s>>>0),u}function uO(t){return Ll(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return oE(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(oE(e,t,2**8))}}}function ci(t,e=!1){if(Ll(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Ff(8,t)>32||Ff(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return ev(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(ev(n,t,8,e))}}}function iE(t){if(typeof t!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch{}}}const dO=Js(ci(4),eo("0123456789ABCDEF"),to("")),fO=Js(ci(5),eo("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Th(5),to(""));Js(ci(5),eo("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Th(5),to(""));Js(ci(5),eo("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),to(""),BN(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Vs=Js(ci(6),eo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Th(6),to("")),hO=Js(ci(6),eo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Th(6),to("")),h0=t=>Js(uO(58),eo(t),to("")),tv=h0("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");h0("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");h0("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const aE=[0,2,3,5,6,7,9,10,11],pO={encode(t){let e="";for(let n=0;n<t.length;n+=8){const r=t.subarray(n,n+8);e+=tv.encode(r).padStart(aE[r.length],"1")}return e},decode(t){let e=[];for(let n=0;n<t.length;n+=11){const r=t.slice(n,n+11),s=aE.indexOf(r.length),i=tv.decode(r);for(let l=0;l<i.length-s;l++)if(i[l]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(i.slice(i.length-s)))}return Uint8Array.from(e)}},nv=Js(eo("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),to("")),lE=[996825010,642813549,513874426,1027748829,705979059];function Oc(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<lE.length;r++)(e>>r&1)===1&&(n^=lE[r]);return n}function cE(t,e,n=1){const r=t.length;let s=1;for(let i=0;i<r;i++){const l=t.charCodeAt(i);if(l<33||l>126)throw new Error(`Invalid prefix (${t})`);s=Oc(s)^l>>5}s=Oc(s);for(let i=0;i<r;i++)s=Oc(s)^t.charCodeAt(i)&31;for(let i of e)s=Oc(s)^i;for(let i=0;i<6;i++)s=Oc(s);return s^=n,nv.encode(ev([s%2**30],30,5,!1))}function UN(t){const e=t==="bech32"?1:734539939,n=ci(5),r=n.decode,s=n.encode,i=iE(r);function l(m,p,x=90){if(typeof m!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof m}`);if(!Array.isArray(p)||p.length&&typeof p[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof p}`);const w=m.length+7+p.length;if(x!==!1&&w>x)throw new TypeError(`Length ${w} exceeds limit ${x}`);return m=m.toLowerCase(),`${m}1${nv.encode(p)}${cE(m,p,e)}`}function u(m,p=90){if(typeof m!="string")throw new Error(`bech32.decode input should be string, not ${typeof m}`);if(m.length<8||p!==!1&&m.length>p)throw new TypeError(`Wrong string length: ${m.length} (${m}). Expected (8..${p})`);const x=m.toLowerCase();if(m!==x&&m!==m.toUpperCase())throw new Error("String must be lowercase or uppercase");m=x;const w=m.lastIndexOf("1");if(w===0||w===-1)throw new Error('Letter "1" must be present between prefix and data only');const S=m.slice(0,w),v=m.slice(w+1);if(v.length<6)throw new Error("Data must be at least 6 characters long");const b=nv.decode(v).slice(0,-6),N=cE(S,b,e);if(!v.endsWith(N))throw new Error(`Invalid checksum in ${m}: expected "${N}"`);return{prefix:S,words:b}}const f=iE(u);function h(m){const{prefix:p,words:x}=u(m,!1);return{prefix:p,words:x,bytes:r(x)}}return{encode:l,decode:u,decodeToBytes:h,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:i,toWords:s}}const wl=UN("bech32");UN("bech32m");const mO={encode:t=>new TextDecoder().decode(t),decode:t=>new TextEncoder().encode(t)},gO=Js(ci(4),eo("0123456789abcdef"),to(""),BN(t=>{if(typeof t!="string"||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})),yO={utf8:mO,hex:gO,base16:dO,base32:fO,base64:Vs,base64url:hO,base58:tv,base58xmr:pO};`${Object.keys(yO).join(", ")}`;function Sg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function uE(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function vO(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Bs(t,...e){if(!vO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const In=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),xO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xO)throw new Error("Non little-endian hardware is not supported");function wO(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function bO(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const EO=(t,e)=>(Object.assign(e,t),e),Zo=16,SO=283;function p0(t){return t<<1^SO&-(t>>7)}function Qa(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(e&1),t=p0(t);return n}const rv=(()=>{let t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=p0(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return e})(),NO=rv.map((t,e)=>rv.indexOf(e)),kO=t=>t<<24|t>>>8,Ng=t=>t<<8|t>>>24;function zN(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((h,m)=>e(t[m])),r=n.map(Ng),s=r.map(Ng),i=s.map(Ng),l=new Uint32Array(256*256),u=new Uint32Array(256*256),f=new Uint16Array(256*256);for(let h=0;h<256;h++)for(let m=0;m<256;m++){const p=h*256+m;l[p]=n[h]^r[m],u[p]=s[h]^i[m],f[p]=t[h]<<8|t[m]}return{sbox:t,sbox2:f,T0:n,T1:r,T2:s,T3:i,T01:l,T23:u}}const m0=zN(rv,t=>Qa(t,3)<<24|t<<16|t<<8|Qa(t,2)),WN=zN(NO,t=>Qa(t,11)<<24|Qa(t,13)<<16|Qa(t,9)<<8|Qa(t,14)),CO=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=p0(n))t[e]=n;return t})();function HN(t){Bs(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=m0,r=In(t),s=r.length,i=u=>ms(n,u,u,u,u),l=new Uint32Array(e+28);l.set(r);for(let u=s;u<l.length;u++){let f=l[u-1];u%s===0?f=i(kO(f))^CO[u/s-1]:s>6&&u%s===4&&(f=i(f)),l[u]=l[u-s]^f}return l}function jO(t){const e=HN(t),n=e.slice(),r=e.length,{sbox2:s}=m0,{T0:i,T1:l,T2:u,T3:f}=WN;for(let h=0;h<r;h+=4)for(let m=0;m<4;m++)n[h+m]=e[r-h-4+m];e.fill(0);for(let h=4;h<r-4;h++){const m=n[h],p=ms(s,m,m,m,m);n[h]=i[p&255]^l[p>>>8&255]^u[p>>>16&255]^f[p>>>24]}return n}function Ko(t,e,n,r,s,i){return t[n<<8&65280|r>>>8&255]^e[s>>>8&65280|i>>>24&255]}function ms(t,e,n,r,s){return t[e&255|n&65280]|t[r>>>16&255|s>>>16&65280]<<16}function dE(t,e,n,r,s){const{sbox2:i,T01:l,T23:u}=m0;let f=0;e^=t[f++],n^=t[f++],r^=t[f++],s^=t[f++];const h=t.length/4-2;for(let S=0;S<h;S++){const v=t[f++]^Ko(l,u,e,n,r,s),b=t[f++]^Ko(l,u,n,r,s,e),N=t[f++]^Ko(l,u,r,s,e,n),_=t[f++]^Ko(l,u,s,e,n,r);e=v,n=b,r=N,s=_}const m=t[f++]^ms(i,e,n,r,s),p=t[f++]^ms(i,n,r,s,e),x=t[f++]^ms(i,r,s,e,n),w=t[f++]^ms(i,s,e,n,r);return{s0:m,s1:p,s2:x,s3:w}}function _O(t,e,n,r,s){const{sbox2:i,T01:l,T23:u}=WN;let f=0;e^=t[f++],n^=t[f++],r^=t[f++],s^=t[f++];const h=t.length/4-2;for(let S=0;S<h;S++){const v=t[f++]^Ko(l,u,e,s,r,n),b=t[f++]^Ko(l,u,n,e,s,r),N=t[f++]^Ko(l,u,r,n,e,s),_=t[f++]^Ko(l,u,s,r,n,e);e=v,n=b,r=N,s=_}const m=t[f++]^ms(i,e,s,r,n),p=t[f++]^ms(i,n,e,s,r),x=t[f++]^ms(i,r,n,e,s),w=t[f++]^ms(i,s,r,n,e);return{s0:m,s1:p,s2:x,s3:w}}function VN(t,e){if(!e)return new Uint8Array(t);if(Bs(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);return e}function TO(t){if(Bs(t),t.length%Zo!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Zo}`)}function PO(t,e,n){let r=t.length;const s=r%Zo;if(!e&&s!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const i=In(t);if(e){let f=Zo-s;f||(f=Zo),r=r+f}const l=VN(r,n),u=In(l);return{b:i,o:u,out:l}}function RO(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const s=t.subarray(0,-r);for(let i=0;i<r;i++)if(t[n-i-1]!==r)throw new Error("aes/pcks5: wrong padding");return s}function AO(t){const e=new Uint8Array(16),n=In(e);e.set(t);const r=Zo-t.length;for(let s=Zo-r;s<Zo;s++)e[s]=r;return n}const qN=EO({blockSize:16,nonceLength:16},function(e,n,r={}){Bs(e),Bs(n,16);const s=!r.disablePadding;return{encrypt:(i,l)=>{const u=HN(e),{b:f,o:h,out:m}=PO(i,s,l),p=In(n);let x=p[0],w=p[1],S=p[2],v=p[3],b=0;for(;b+4<=f.length;)x^=f[b+0],w^=f[b+1],S^=f[b+2],v^=f[b+3],{s0:x,s1:w,s2:S,s3:v}=dE(u,x,w,S,v),h[b++]=x,h[b++]=w,h[b++]=S,h[b++]=v;if(s){const N=AO(i.subarray(b*4));x^=N[0],w^=N[1],S^=N[2],v^=N[3],{s0:x,s1:w,s2:S,s3:v}=dE(u,x,w,S,v),h[b++]=x,h[b++]=w,h[b++]=S,h[b++]=v}return u.fill(0),m},decrypt:(i,l)=>{TO(i);const u=jO(e),f=In(n),h=VN(i.length,l),m=In(i),p=In(h);let x=f[0],w=f[1],S=f[2],v=f[3];for(let b=0;b+4<=m.length;){const N=x,_=w,T=S,M=v;x=m[b+0],w=m[b+1],S=m[b+2],v=m[b+3];const{s0:D,s1:B,s2:O,s3:F}=_O(u,x,w,S,v);p[b++]=D^N,p[b++]=B^_,p[b++]=O^T,p[b++]=F^M}return u.fill(0),RO(h,s)}}}),KN=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),IO=KN("expand 16-byte k"),MO=KN("expand 32-byte k"),OO=In(IO),GN=In(MO);GN.slice();function St(t,e){return t<<e|t>>>32-e}function sv(t){return t.byteOffset%4===0}const of=64,DO=16,YN=2**32-1,fE=new Uint32Array;function LO(t,e,n,r,s,i,l,u){const f=s.length,h=new Uint8Array(of),m=In(h),p=sv(s)&&sv(i),x=p?In(s):fE,w=p?In(i):fE;for(let S=0;S<f;l++){if(t(e,n,r,m,l,u),l>=YN)throw new Error("arx: counter overflow");const v=Math.min(of,f-S);if(p&&v===of){const b=S/4;if(S%4!==0)throw new Error("arx: invalid block position");for(let N=0,_;N<DO;N++)_=b+N,w[_]=x[_]^m[N];S+=of;continue}for(let b=0,N;b<v;b++)N=S+b,i[N]=s[N]^h[b];S+=v}}function $O(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:l}=wO({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Sg(s),Sg(l),uE(i),uE(n),(u,f,h,m,p=0)=>{Bs(u),Bs(f),Bs(h);const x=h.length;if(m||(m=new Uint8Array(x)),Bs(m),Sg(p),p<0||p>=YN)throw new Error("arx: counter overflow");if(m.length<x)throw new Error(`arx: output (${m.length}) is shorter than data (${x})`);const w=[];let S=u.length,v,b;if(S===32)v=u.slice(),w.push(v),b=GN;else if(S===16&&n)v=new Uint8Array(32),v.set(u),v.set(u,16),b=OO,w.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${S}`);sv(f)||(f=f.slice(),w.push(f));const N=In(v);if(r){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,N,In(f.subarray(0,16)),N),f=f.subarray(16)}const _=16-s;if(_!==f.length)throw new Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){const M=new Uint8Array(12);M.set(f,i?0:12-f.length),f=M,w.push(f)}const T=In(f);for(LO(t,b,N,T,h,m,p,l);w.length>0;)w.pop().fill(0);return m}}function BO(t,e,n,r,s,i=20){let l=t[0],u=t[1],f=t[2],h=t[3],m=e[0],p=e[1],x=e[2],w=e[3],S=e[4],v=e[5],b=e[6],N=e[7],_=s,T=n[0],M=n[1],D=n[2],B=l,O=u,F=f,R=h,L=m,A=p,U=x,K=w,H=S,V=v,Q=b,te=N,Z=_,G=T,ne=M,z=D;for(let ae=0;ae<i;ae+=2)B=B+L|0,Z=St(Z^B,16),H=H+Z|0,L=St(L^H,12),B=B+L|0,Z=St(Z^B,8),H=H+Z|0,L=St(L^H,7),O=O+A|0,G=St(G^O,16),V=V+G|0,A=St(A^V,12),O=O+A|0,G=St(G^O,8),V=V+G|0,A=St(A^V,7),F=F+U|0,ne=St(ne^F,16),Q=Q+ne|0,U=St(U^Q,12),F=F+U|0,ne=St(ne^F,8),Q=Q+ne|0,U=St(U^Q,7),R=R+K|0,z=St(z^R,16),te=te+z|0,K=St(K^te,12),R=R+K|0,z=St(z^R,8),te=te+z|0,K=St(K^te,7),B=B+A|0,z=St(z^B,16),Q=Q+z|0,A=St(A^Q,12),B=B+A|0,z=St(z^B,8),Q=Q+z|0,A=St(A^Q,7),O=O+U|0,Z=St(Z^O,16),te=te+Z|0,U=St(U^te,12),O=O+U|0,Z=St(Z^O,8),te=te+Z|0,U=St(U^te,7),F=F+K|0,G=St(G^F,16),H=H+G|0,K=St(K^H,12),F=F+K|0,G=St(G^F,8),H=H+G|0,K=St(K^H,7),R=R+L|0,ne=St(ne^R,16),V=V+ne|0,L=St(L^V,12),R=R+L|0,ne=St(ne^R,8),V=V+ne|0,L=St(L^V,7);let W=0;r[W++]=l+B|0,r[W++]=u+O|0,r[W++]=f+F|0,r[W++]=h+R|0,r[W++]=m+L|0,r[W++]=p+A|0,r[W++]=x+U|0,r[W++]=w+K|0,r[W++]=S+H|0,r[W++]=v+V|0,r[W++]=b+Q|0,r[W++]=N+te|0,r[W++]=_+Z|0,r[W++]=T+G|0,r[W++]=M+ne|0,r[W++]=D+z|0}const QN=$O(BO,{counterRight:!1,counterLength:4,allowShortKeys:!1});class ZN extends MN{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ps.hash(e);const r=au(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let l=0;l<i.length;l++)i[l]^=54;this.iHash.update(i),this.oHash=e.create();for(let l=0;l<i.length;l++)i[l]^=106;this.oHash.update(i),i.fill(0)}update(e){return ps.exists(this),this.iHash.update(e),this}digestInto(e){ps.exists(this),ps.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:l,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=l,e.outputLen=u,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ph=(t,e,n)=>new ZN(t,e).update(n).digest();Ph.create=(t,e)=>new ZN(t,e);function FO(t,e,n){return ps.hash(t),Ph(t,au(n),au(e))}const kg=new Uint8Array([0]),hE=new Uint8Array;function UO(t,e,n,r=32){if(ps.hash(t),ps.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=hE);const i=new Uint8Array(s*t.outputLen),l=Ph.create(t,e),u=l._cloneInto(),f=new Uint8Array(l.outputLen);for(let h=0;h<s;h++)kg[0]=h+1,u.update(h===0?hE:f).update(n).update(kg).digestInto(f),i.set(f,t.outputLen*h),l._cloneInto(u);return l.destroy(),u.destroy(),f.fill(0),kg.fill(0),i.slice(0,r)}var zO=Object.defineProperty,Ut=(t,e)=>{for(var n in e)zO(t,n,{get:e[n],enumerable:!0})},Ua=Symbol("verified"),WO=t=>t instanceof Object;function g0(t){if(!WO(t)||typeof t.kind!="number"||typeof t.content!="string"||typeof t.created_at!="number"||typeof t.pubkey!="string"||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]!="string")return!1}return!0}var HO={};Ut(HO,{Queue:()=>ek,QueueNode:()=>JN,binarySearch:()=>y0,bytesToHex:()=>An,hexToBytes:()=>Xi,insertEventIntoAscendingList:()=>qO,insertEventIntoDescendingList:()=>VO,normalizeURL:()=>XN,utf8Decoder:()=>Fs,utf8Encoder:()=>Ur});var Fs=new TextDecoder("utf-8"),Ur=new TextEncoder;function XN(t){try{t.indexOf("://")===-1&&(t="wss://"+t);let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}catch{throw new Error(`Invalid URL: ${t}`)}}function VO(t,e){const[n,r]=y0(t,s=>e.id===s.id?0:e.created_at===s.created_at?-1:s.created_at-e.created_at);return r||t.splice(n,0,e),t}function qO(t,e){const[n,r]=y0(t,s=>e.id===s.id?0:e.created_at===s.created_at?-1:e.created_at-s.created_at);return r||t.splice(n,0,e),t}function y0(t,e){let n=0,r=t.length-1;for(;n<=r;){const s=Math.floor((n+r)/2),i=e(t[s]);if(i===0)return[s,!0];i<0?r=s-1:n=s+1}return[n,!1]}var JN=class{constructor(t){Re(this,"value");Re(this,"next",null);Re(this,"prev",null);this.value=t}},ek=class{constructor(){Re(this,"first");Re(this,"last");this.first=null,this.last=null}enqueue(t){const e=new JN(t);return this.last?this.last===this.first?(this.last=e,this.last.prev=this.first,this.first.next=e):(e.prev=this.last,this.last.next=e,this.last=e):(this.first=e,this.last=e),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const t=this.first;return this.first=t.next,this.first&&(this.first.prev=null),t.value}},KO=class{generateSecretKey(){return Mc.utils.randomPrivateKey()}getPublicKey(t){return An(Mc.getPublicKey(t))}finalizeEvent(t,e){const n=t;return n.pubkey=An(Mc.getPublicKey(e)),n.id=Xc(n),n.sig=An(Mc.sign(Xc(n),e)),n[Ua]=!0,n}verifyEvent(t){if(typeof t[Ua]=="boolean")return t[Ua];const e=Xc(t);if(e!==t.id)return t[Ua]=!1,!1;try{const n=Mc.verify(t.sig,e,t.pubkey);return t[Ua]=n,n}catch{return t[Ua]=!1,!1}}};function GO(t){if(!g0(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function Xc(t){let e=Dl(Ur.encode(GO(t)));return An(e)}var Rh=new KO,bl=Rh.generateSecretKey,Ji=Rh.getPublicKey,Cr=Rh.finalizeEvent,Pu=Rh.verifyEvent,YO={};Ut(YO,{Application:()=>G5,BadgeAward:()=>r5,BadgeDefinition:()=>U5,BlockedRelaysList:()=>k5,BookmarkList:()=>E5,Bookmarksets:()=>$5,Calendar:()=>tD,CalendarEventRSVP:()=>nD,ChannelCreation:()=>ik,ChannelHideMessage:()=>ck,ChannelMessage:()=>lk,ChannelMetadata:()=>ak,ChannelMuteUser:()=>uk,ClassifiedListing:()=>Z5,ClientAuth:()=>fk,CommunitiesList:()=>S5,CommunityDefinition:()=>oD,CommunityPostApproval:()=>d5,Contacts:()=>e5,CreateOrUpdateProduct:()=>H5,CreateOrUpdateStall:()=>W5,Curationsets:()=>B5,Date:()=>J5,DirectMessageRelaysList:()=>T5,DraftClassifiedListing:()=>X5,DraftLong:()=>q5,Emojisets:()=>K5,EncryptedDirectMessage:()=>t5,EventDeletion:()=>n5,FileMetadata:()=>o5,FileServerPreference:()=>P5,Followsets:()=>O5,GenericRepost:()=>w0,Genericlists:()=>D5,GiftWrap:()=>dk,HTTPAuth:()=>b0,Handlerinformation:()=>sD,Handlerrecommendation:()=>rD,Highlights:()=>v5,InterestsList:()=>j5,Interestsets:()=>z5,JobFeedback:()=>p5,JobRequest:()=>f5,JobResult:()=>h5,Label:()=>u5,LightningPubRPC:()=>A5,LiveChatMessage:()=>i5,LiveEvent:()=>Y5,LongFormArticle:()=>V5,Metadata:()=>XO,Mutelist:()=>x5,NWCWalletInfo:()=>R5,NWCWalletRequest:()=>hk,NWCWalletResponse:()=>I5,NostrConnect:()=>M5,OpenTimestamps:()=>s5,Pinlist:()=>w5,PrivateDirectMessage:()=>ok,ProblemTracker:()=>a5,ProfileBadges:()=>F5,PublicChatsList:()=>N5,Reaction:()=>x0,RecommendRelay:()=>JO,RelayList:()=>b5,Relaysets:()=>L5,Report:()=>l5,Reporting:()=>c5,Repost:()=>v0,Seal:()=>sk,SearchRelaysList:()=>C5,ShortTextNote:()=>rk,Time:()=>eD,UserEmojiList:()=>_5,UserStatuses:()=>Q5,Zap:()=>y5,ZapGoal:()=>m5,ZapRequest:()=>g5,classifyKind:()=>QO,isAddressableKind:()=>Ih,isEphemeralKind:()=>nk,isKind:()=>ZO,isRegularKind:()=>tk,isReplaceableKind:()=>Ah});function tk(t){return 1e3<=t&&t<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(t)}function Ah(t){return[0,3].includes(t)||1e4<=t&&t<2e4}function nk(t){return 2e4<=t&&t<3e4}function Ih(t){return 3e4<=t&&t<4e4}function QO(t){return tk(t)?"regular":Ah(t)?"replaceable":nk(t)?"ephemeral":Ih(t)?"parameterized":"unknown"}function ZO(t,e){const n=e instanceof Array?e:[e];return g0(t)&&n.includes(t.kind)||!1}var XO=0,rk=1,JO=2,e5=3,t5=4,n5=5,v0=6,x0=7,r5=8,sk=13,ok=14,w0=16,ik=40,ak=41,lk=42,ck=43,uk=44,s5=1040,dk=1059,o5=1063,i5=1311,a5=1971,l5=1984,c5=1984,u5=1985,d5=4550,f5=5999,h5=6999,p5=7e3,m5=9041,g5=9734,y5=9735,v5=9802,x5=1e4,w5=10001,b5=10002,E5=10003,S5=10004,N5=10005,k5=10006,C5=10007,j5=10015,_5=10030,T5=10050,P5=10096,R5=13194,A5=21e3,fk=22242,hk=23194,I5=23195,M5=24133,b0=27235,O5=3e4,D5=30001,L5=30002,$5=30003,B5=30004,F5=30008,U5=30009,z5=30015,W5=30017,H5=30018,V5=30023,q5=30024,K5=30030,G5=30078,Y5=30311,Q5=30315,Z5=30402,X5=30403,J5=31922,eD=31923,tD=31924,nD=31925,rD=31989,sD=31990,oD=34550;function iD(t,e){if(t.ids&&t.ids.indexOf(e.id)===-1||t.kinds&&t.kinds.indexOf(e.kind)===-1||t.authors&&t.authors.indexOf(e.pubkey)===-1)return!1;for(let n in t)if(n[0]==="#"){let r=n.slice(1),s=t[`#${r}`];if(s&&!e.tags.find(([i,l])=>i===n.slice(1)&&s.indexOf(l)!==-1))return!1}return!(t.since&&e.created_at<t.since||t.until&&e.created_at>t.until)}function pk(t,e){for(let n=0;n<t.length;n++)if(iD(t[n],e))return!0;return!1}function mk(t){var e,n,r,s,i,l;if(t.ids&&!t.ids.length||t.kinds&&!t.kinds.length||t.authors&&!t.authors.length)return 0;for(const[u,f]of Object.entries(t))if(u[0]==="#"&&Array.isArray(f)&&!f.length)return 0;return Math.min(Math.max(0,t.limit??1/0),((e=t.ids)==null?void 0:e.length)??1/0,(n=t.authors)!=null&&n.length&&((r=t.kinds)!=null&&r.every(u=>Ah(u)))?t.authors.length*t.kinds.length:1/0,(s=t.authors)!=null&&s.length&&((i=t.kinds)!=null&&i.every(u=>Ih(u)))&&((l=t["#d"])!=null&&l.length)?t.authors.length*t.kinds.length*t["#d"].length:1/0)}var aD={};Ut(aD,{getHex64:()=>Mh,getInt:()=>gk,getSubscriptionId:()=>yk,matchEventId:()=>lD,matchEventKind:()=>uD,matchEventPubkey:()=>cD});function Mh(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,s=t.slice(r).indexOf('"')+r+1;return t.slice(s,s+64)}function gk(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,s=t.slice(r),i=Math.min(s.indexOf(","),s.indexOf("}"));return parseInt(s.slice(0,i),10)}function yk(t){let e=t.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let n=t.slice(e+7+1).indexOf('"');if(n===-1)return null;let r=e+7+1+n,s=t.slice(r+1,80).indexOf('"');if(s===-1)return null;let i=r+1+s;return t.slice(r+1,i)}function lD(t,e){return e===Mh(t,"id")}function cD(t,e){return e===Mh(t,"pubkey")}function uD(t,e){return e===gk(t,"kind")}var dD={};Ut(dD,{makeAuthEvent:()=>vk});function vk(t,e){return{kind:fk,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t],["challenge",e]],content:""}}async function fD(){return new Promise(t=>{const e=new MessageChannel,n=()=>{e.port1.removeEventListener("message",n),t()};e.port1.addEventListener("message",n),e.port2.postMessage(0),e.port1.start()})}var xk=class extends Error{constructor(t,e){super(`Tried to send message '${t} on a closed connection to ${e}.`),this.name="SendingOnClosedConnection"}},wk=class{constructor(t,e){Re(this,"url");Re(this,"_connected",!1);Re(this,"onclose",null);Re(this,"onnotice",t=>console.debug(`NOTICE from ${this.url}: ${t}`));Re(this,"baseEoseTimeout",4400);Re(this,"connectionTimeout",4400);Re(this,"publishTimeout",4400);Re(this,"openSubs",new Map);Re(this,"connectionTimeoutHandle");Re(this,"connectionPromise");Re(this,"openCountRequests",new Map);Re(this,"openEventPublishes",new Map);Re(this,"ws");Re(this,"incomingMessageQueue",new ek);Re(this,"queueRunning",!1);Re(this,"challenge");Re(this,"authPromise");Re(this,"serial",0);Re(this,"verifyEvent");Re(this,"_WebSocket");this.url=XN(t),this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation||WebSocket}static async connect(t,e){const n=new wk(t,e);return await n.connect(),n}closeAllSubscriptions(t){for(let[e,n]of this.openSubs)n.close(t);this.openSubs.clear();for(let[e,n]of this.openEventPublishes)n.reject(new Error(t));this.openEventPublishes.clear();for(let[e,n]of this.openCountRequests)n.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.authPromise=void 0,this.connectionPromise=new Promise((t,e)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;e("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){clearTimeout(this.connectionTimeoutHandle),e(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=n=>{var r;clearTimeout(this.connectionTimeoutHandle),e(n.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=n=>{var r;clearTimeout(this.connectionTimeoutHandle),e(n.message||"websocket closed"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await fD();this.queueRunning=!1}handleNext(){var n,r;const t=this.incomingMessageQueue.dequeue();if(!t)return!1;const e=yk(t);if(e){const s=this.openSubs.get(e);if(!s)return;const i=Mh(t,"id"),l=(n=s.alreadyHaveEvent)==null?void 0:n.call(s,i);if((r=s.receivedEvent)==null||r.call(s,this,i),l)return}try{let s=JSON.parse(t);switch(s[0]){case"EVENT":{const i=this.openSubs.get(s[1]),l=s[2];this.verifyEvent(l)&&pk(i.filters,l)&&i.onevent(l);return}case"COUNT":{const i=s[1],l=s[2],u=this.openCountRequests.get(i);u&&(u.resolve(l.count),this.openCountRequests.delete(i));return}case"EOSE":{const i=this.openSubs.get(s[1]);if(!i)return;i.receivedEose();return}case"OK":{const i=s[1],l=s[2],u=s[3],f=this.openEventPublishes.get(i);f&&(clearTimeout(f.timeout),l?f.resolve(u):f.reject(new Error(u)),this.openEventPublishes.delete(i));return}case"CLOSED":{const i=s[1],l=this.openSubs.get(i);if(!l)return;l.closed=!0,l.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1];return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new xk(t,this.url);this.connectionPromise.then(()=>{var e;(e=this.ws)==null||e.send(t)})}async auth(t){const e=this.challenge;if(!e)throw new Error("can't perform auth, no challenge was received");return this.authPromise?this.authPromise:(this.authPromise=new Promise(async(n,r)=>{try{let s=await t(vk(this.url,e)),i=setTimeout(()=>{let l=this.openEventPublishes.get(s.id);l&&(l.reject(new Error("auth timed out")),this.openEventPublishes.delete(s.id))},this.publishTimeout);this.openEventPublishes.set(s.id,{resolve:n,reject:r,timeout:i}),this.send('["AUTH",'+JSON.stringify(s)+"]")}catch(s){console.warn("subscribe auth function failed:",s)}}),this.authPromise)}async publish(t){const e=new Promise((n,r)=>{const s=setTimeout(()=>{const i=this.openEventPublishes.get(t.id);i&&(i.reject(new Error("publish timed out")),this.openEventPublishes.delete(t.id))},this.publishTimeout);this.openEventPublishes.set(t.id,{resolve:n,reject:r,timeout:s})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),e}async count(t,e){this.serial++;const n=(e==null?void 0:e.id)||"count:"+this.serial,r=new Promise((s,i)=>{this.openCountRequests.set(n,{resolve:s,reject:i})});return this.send('["COUNT","'+n+'",'+JSON.stringify(t).substring(1)),r}subscribe(t,e){const n=this.prepareSubscription(t,e);return n.fire(),n}prepareSubscription(t,e){this.serial++;const n=e.id||(e.label?e.label+":":"sub:")+this.serial,r=new hD(this,n,t,e);return this.openSubs.set(n,r),r}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},hD=class{constructor(t,e,n,r){Re(this,"relay");Re(this,"id");Re(this,"closed",!1);Re(this,"eosed",!1);Re(this,"filters");Re(this,"alreadyHaveEvent");Re(this,"receivedEvent");Re(this,"onevent");Re(this,"oneose");Re(this,"onclose");Re(this,"eoseTimeout");Re(this,"eoseTimeoutHandle");this.relay=t,this.filters=n,this.id=e,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||t.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(s=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,s)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var e;if(!this.closed&&this.relay.connected){try{this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]")}catch(n){if(!(n instanceof xk))throw n}this.closed=!0}this.relay.openSubs.delete(this.id),(e=this.onclose)==null||e.call(this,t)}},bk;try{bk=WebSocket}catch{}var Ek=class extends wk{constructor(t){super(t,{verifyEvent:Pu,websocketImplementation:bk})}static async connect(t){const e=new Ek(t);return await e.connect(),e}},pD;try{pD=WebSocket}catch{}var tr={};Ut(tr,{BECH32_REGEX:()=>Sk,Bech32MaxSize:()=>E0,NostrTypeGuard:()=>mD,decode:()=>Oh,decodeNostrURI:()=>yD,encodeBytes:()=>Lh,naddrEncode:()=>SD,neventEncode:()=>ED,noteEncode:()=>wD,nprofileEncode:()=>bD,npubEncode:()=>xD,nsecEncode:()=>vD});var mD={isNProfile:t=>/^nprofile1[a-z\d]+$/.test(t||""),isNEvent:t=>/^nevent1[a-z\d]+$/.test(t||""),isNAddr:t=>/^naddr1[a-z\d]+$/.test(t||""),isNSec:t=>/^nsec1[a-z\d]{58}$/.test(t||""),isNPub:t=>/^npub1[a-z\d]{58}$/.test(t||""),isNote:t=>/^note1[a-z\d]+$/.test(t||""),isNcryptsec:t=>/^ncryptsec1[a-z\d]+$/.test(t||"")},E0=5e3,Sk=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function gD(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=t&255,e}function yD(t){try{return t.startsWith("nostr:")&&(t=t.substring(6)),Oh(t)}catch{return{type:"invalid",data:null}}}function Oh(t){var s,i,l,u,f,h,m;let{prefix:e,words:n}=wl.decode(t,E0),r=new Uint8Array(wl.fromWords(n));switch(e){case"nprofile":{let p=Cg(r);if(!((s=p[0])!=null&&s[0]))throw new Error("missing TLV 0 for nprofile");if(p[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:An(p[0][0]),relays:p[1]?p[1].map(x=>Fs.decode(x)):[]}}}case"nevent":{let p=Cg(r);if(!((i=p[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(p[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(p[2]&&p[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(p[3]&&p[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:An(p[0][0]),relays:p[1]?p[1].map(x=>Fs.decode(x)):[],author:(l=p[2])!=null&&l[0]?An(p[2][0]):void 0,kind:(u=p[3])!=null&&u[0]?parseInt(An(p[3][0]),16):void 0}}}case"naddr":{let p=Cg(r);if(!((f=p[0])!=null&&f[0]))throw new Error("missing TLV 0 for naddr");if(!((h=p[2])!=null&&h[0]))throw new Error("missing TLV 2 for naddr");if(p[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((m=p[3])!=null&&m[0]))throw new Error("missing TLV 3 for naddr");if(p[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Fs.decode(p[0][0]),pubkey:An(p[2][0]),kind:parseInt(An(p[3][0]),16),relays:p[1]?p[1].map(x=>Fs.decode(x)):[]}}}case"nsec":return{type:e,data:r};case"npub":case"note":return{type:e,data:An(r)};default:throw new Error(`unknown prefix ${e}`)}}function Cg(t){let e={},n=t;for(;n.length>0;){let r=n[0],s=n[1],i=n.slice(2,2+s);if(n=n.slice(2+s),i.length<s)throw new Error(`not enough data to read on TLV ${r}`);e[r]=e[r]||[],e[r].push(i)}return e}function vD(t){return Lh("nsec",t)}function xD(t){return Lh("npub",Xi(t))}function wD(t){return Lh("note",Xi(t))}function Dh(t,e){let n=wl.toWords(e);return wl.encode(t,n,E0)}function Lh(t,e){return Dh(t,e)}function bD(t){let e=S0({0:[Xi(t.pubkey)],1:(t.relays||[]).map(n=>Ur.encode(n))});return Dh("nprofile",e)}function ED(t){let e;t.kind!==void 0&&(e=gD(t.kind));let n=S0({0:[Xi(t.id)],1:(t.relays||[]).map(r=>Ur.encode(r)),2:t.author?[Xi(t.author)]:[],3:e?[new Uint8Array(e)]:[]});return Dh("nevent",n)}function SD(t){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,t.kind,!1);let n=S0({0:[Ur.encode(t.identifier)],1:(t.relays||[]).map(r=>Ur.encode(r)),2:[Xi(t.pubkey)],3:[new Uint8Array(e)]});return Dh("naddr",n)}function S0(t){let e=[];return Object.entries(t).reverse().forEach(([n,r])=>{r.forEach(s=>{let i=new Uint8Array(s.length+2);i.set([parseInt(n)],0),i.set([s.length],1),i.set(s,2),e.push(i)})}),_h(...e)}var lu={};Ut(lu,{decrypt:()=>ND,encrypt:()=>Nk});function Nk(t,e,n){const r=t instanceof Uint8Array?An(t):t,s=Ol.getSharedSecret(r,"02"+e),i=kk(s);let l=Uint8Array.from(DN(16)),u=Ur.encode(n),f=qN(i,l).encrypt(u),h=Vs.encode(new Uint8Array(f)),m=Vs.encode(new Uint8Array(l.buffer));return`${h}?iv=${m}`}function ND(t,e,n){const r=t instanceof Uint8Array?An(t):t;let[s,i]=n.split("?iv="),l=Ol.getSharedSecret(r,"02"+e),u=kk(l),f=Vs.decode(i),h=Vs.decode(s),m=qN(u,f).decrypt(h);return Fs.decode(m)}function kk(t){return t.slice(1,33)}var kD={};Ut(kD,{NIP05_REGEX:()=>N0,isNip05:()=>CD,isValid:()=>TD,queryProfile:()=>Ck,searchDomain:()=>_D,useFetchImplementation:()=>jD});var N0=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,CD=t=>N0.test(t||""),$h;try{$h=fetch}catch{}function jD(t){$h=t}async function _D(t,e=""){try{const n=`https://${t}/.well-known/nostr.json?name=${e}`,r=await $h(n,{redirect:"manual"});if(r.status!==200)throw Error("Wrong response code");return(await r.json()).names}catch{return{}}}async function Ck(t){var s;const e=t.match(N0);if(!e)return null;const[,n="_",r]=e;try{const i=`https://${r}/.well-known/nostr.json?name=${n}`,l=await $h(i,{redirect:"manual"});if(l.status!==200)throw Error("Wrong response code");const u=await l.json(),f=u.names[n];return f?{pubkey:f,relays:(s=u.relays)==null?void 0:s[f]}:null}catch{return null}}async function TD(t,e){const n=await Ck(e);return n?n.pubkey===t:!1}var PD={};Ut(PD,{parse:()=>RD});function RD(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let s=t.tags.length-1;s>=0;s--){const i=t.tags[s];if(i[0]==="e"&&i[1]){const[l,u,f,h,m]=i,p={id:u,relays:f?[f]:[],author:m};if(h==="root"){e.root=p;continue}if(h==="reply"){e.reply=p;continue}if(h==="mention"){e.mentions.push(p);continue}n?r=p:n=p,e.mentions.push(p);continue}if(i[0]==="q"&&i[1]){const[l,u,f]=i;e.quotes.push({id:u,relays:f?[f]:[]})}if(i[0]==="p"&&i[1]){e.profiles.push({pubkey:i[1],relays:i[2]?[i[2]]:[]});continue}}return e.root||(e.root=r||n||e.reply),e.reply||(e.reply=n||e.root),[e.reply,e.root].forEach(s=>{if(!s)return;let i=e.mentions.indexOf(s);if(i!==-1&&e.mentions.splice(i,1),s.author){let l=e.profiles.find(u=>u.pubkey===s.author);l&&l.relays&&(s.relays||(s.relays=[]),l.relays.forEach(u=>{var f;((f=s.relays)==null?void 0:f.indexOf(u))===-1&&s.relays.push(u)}),l.relays=s.relays)}}),e.mentions.forEach(s=>{if(s.author){let i=e.profiles.find(l=>l.pubkey===s.author);i&&i.relays&&(s.relays||(s.relays=[]),i.relays.forEach(l=>{s.relays.indexOf(l)===-1&&s.relays.push(l)}),i.relays=s.relays)}}),e}var AD={};Ut(AD,{fetchRelayInformation:()=>MD,useFetchImplementation:()=>ID});var jk;try{jk=fetch}catch{}function ID(t){jk=t}async function MD(t){return await(await fetch(t.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var OD={};Ut(OD,{fastEventHash:()=>Tk,getPow:()=>_k,minePow:()=>DD});function _k(t){let e=0;for(let n=0;n<64;n+=8){const r=parseInt(t.substring(n,n+8),16);if(r===0)e+=32;else{e+=Math.clz32(r);break}}return e}function DD(t,e){let n=0;const r=t,s=["nonce",n.toString(),e.toString()];for(r.tags.push(s);;){const i=Math.floor(new Date().getTime()/1e3);if(i!==r.created_at&&(n=0,r.created_at=i),s[1]=(++n).toString(),r.id=Tk(r),_k(r.id)>=e)break}return r}function Tk(t){return An(Dl(Ur.encode(JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content]))))}var LD={};Ut(LD,{unwrapEvent:()=>GD,unwrapManyEvents:()=>YD,wrapEvent:()=>zk,wrapManyEvents:()=>KD});var $D={};Ut($D,{createRumor:()=>$k,createSeal:()=>Bk,createWrap:()=>Fk,unwrapEvent:()=>T0,unwrapManyEvents:()=>Uk,wrapEvent:()=>Uf,wrapManyEvents:()=>VD});var Go={};Ut(Go,{decrypt:()=>_0,encrypt:()=>j0,getConversationKey:()=>k0,v2:()=>WD});var Pk=1,Rk=65535;function k0(t,e){const n=Ol.getSharedSecret(t,"02"+e).subarray(1,33);return FO(Dl,n,"nip44-v2")}function Ak(t,e){const n=UO(Dl,t,e,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function C0(t){if(!Number.isSafeInteger(t)||t<1)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)}function BD(t){if(!Number.isSafeInteger(t)||t<Pk||t>Rk)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t,!1),e}function FD(t){const e=Ur.encode(t),n=e.length,r=BD(n),s=new Uint8Array(C0(n)-n);return _h(r,e,s)}function UD(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(e<Pk||e>Rk||n.length!==e||t.length!==2+C0(e))throw new Error("invalid padding");return Fs.decode(n)}function Ik(t,e,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=_h(n,e);return Ph(Dl,t,r)}function zD(t){if(typeof t!="string")throw new Error("payload must be a valid string");const e=t.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(t[0]==="#")throw new Error("unknown encryption version");let n;try{n=Vs.decode(t)}catch(i){throw new Error("invalid base64: "+i.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const s=n[0];if(s!==2)throw new Error("unknown encryption version "+s);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function j0(t,e,n=DN(32)){const{chacha_key:r,chacha_nonce:s,hmac_key:i}=Ak(e,n),l=FD(t),u=QN(r,s,l),f=Ik(i,u,n);return Vs.encode(_h(new Uint8Array([2]),n,u,f))}function _0(t,e){const{nonce:n,ciphertext:r,mac:s}=zD(t),{chacha_key:i,chacha_nonce:l,hmac_key:u}=Ak(e,n),f=Ik(u,r,n);if(!bO(f,s))throw new Error("invalid MAC");const h=QN(i,l,r);return UD(h)}var WD={utils:{getConversationKey:k0,calcPaddedLen:C0},encrypt:j0,decrypt:_0},HD=2*24*60*60,Mk=()=>Math.round(Date.now()/1e3),Ok=()=>Math.round(Mk()-Math.random()*HD),Dk=(t,e)=>k0(t,e),Lk=(t,e,n)=>j0(JSON.stringify(t),Dk(e,n)),pE=(t,e)=>JSON.parse(_0(t.content,Dk(e,t.pubkey)));function $k(t,e){const n={created_at:Mk(),content:"",tags:[],...t,pubkey:Ji(e)};return n.id=Xc(n),n}function Bk(t,e,n){return Cr({kind:sk,content:Lk(t,e,n),created_at:Ok(),tags:[]},e)}function Fk(t,e){const n=bl();return Cr({kind:dk,content:Lk(t,n,e),created_at:Ok(),tags:[["p",e]]},n)}function Uf(t,e,n){const r=$k(t,e),s=Bk(r,e,n);return Fk(s,n)}function VD(t,e,n){if(!n||n.length===0)throw new Error("At least one recipient is required.");const r=Ji(e),s=[Uf(t,e,r)];return n.forEach(i=>{s.push(Uf(t,e,i))}),s}function T0(t,e){const n=pE(t,e);return pE(n,e)}function Uk(t,e){let n=[];return t.forEach(r=>{n.push(T0(r,e))}),n.sort((r,s)=>r.created_at-s.created_at),n}function qD(t,e,n,r){const s={created_at:Math.ceil(Date.now()/1e3),kind:ok,tags:[],content:e};return(Array.isArray(t)?t:[t]).forEach(({publicKey:l,relayUrl:u})=>{s.tags.push(u?["p",l,u]:["p",l])}),r&&s.tags.push(["e",r.eventId,r.relayUrl||"","reply"]),n&&s.tags.push(["subject",n]),s}function zk(t,e,n,r,s){const i=qD(e,n,r,s);return Uf(i,t,e.publicKey)}function KD(t,e,n,r,s){if(!e||e.length===0)throw new Error("At least one recipient is required.");return[{publicKey:Ji(t)},...e].map(l=>zk(t,l,n,r,s))}var GD=T0,YD=Uk,QD={};Ut(QD,{finishRepostEvent:()=>ZD,getRepostedEvent:()=>XD,getRepostedEventPointer:()=>Wk});function ZD(t,e,n,r){var l;let s;const i=[...t.tags??[],["e",e.id,n],["p",e.pubkey]];return e.kind===rk?s=v0:(s=w0,i.push(["k",String(e.kind)])),Cr({kind:s,tags:i,content:t.content===""||(l=e.tags)!=null&&l.find(u=>u[0]==="-")?"":JSON.stringify(e),created_at:t.created_at},r)}function Wk(t){if(![v0,w0].includes(t.kind))return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const s=t.tags[r];s.length>=2&&(s[0]==="e"&&e===void 0?e=s:s[0]==="p"&&n===void 0&&(n=s))}if(e!==void 0)return{id:e[1],relays:[e[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function XD(t,{skipVerification:e}={}){const n=Wk(t);if(n===void 0||t.content==="")return;let r;try{r=JSON.parse(t.content)}catch{return}if(r.id===n.id&&!(!e&&!Pu(r)))return r}var JD={};Ut(JD,{NOSTR_URI_REGEX:()=>P0,parse:()=>tL,test:()=>eL});var P0=new RegExp(`nostr:(${Sk.source})`);function eL(t){return typeof t=="string"&&new RegExp(`^${P0.source}$`).test(t)}function tL(t){const e=t.match(new RegExp(`^${P0.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:Oh(e[1])}}var nL={};Ut(nL,{finishReactionEvent:()=>rL,getReactedEventPointer:()=>sL});function rL(t,e,n){const r=e.tags.filter(s=>s.length>=2&&(s[0]==="e"||s[0]==="p"));return Cr({...t,kind:x0,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function sL(t){if(t.kind!==x0)return;let e,n;for(let r=t.tags.length-1;r>=0&&(e===void 0||n===void 0);r--){const s=t.tags[r];s.length>=2&&(s[0]==="e"&&e===void 0?e=s:s[0]==="p"&&n===void 0&&(n=s))}if(!(e===void 0||n===void 0))return{id:e[1],relays:[e[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var oL={};Ut(oL,{parse:()=>aL});var iL=/\W/m,mE=/\W |\W$|$|,| /m;function*aL(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.indexOf(":",r);if(s===-1)break;if(t.substring(s-5,s)==="nostr"){const i=t.substring(s+60).match(iL),l=i?s+60+i.index:e;try{let u,{data:f,type:h}=Oh(t.substring(s+1,l));switch(h){case"npub":u={pubkey:f};break;case"nsec":case"note":r=l+1;continue;default:u=f}n!==s-5&&(yield{type:"text",text:t.substring(n,s-5)}),yield{type:"reference",pointer:u},r=l,n=r;continue}catch{r=s+1;continue}}else if(t.substring(s-5,s)==="https"||t.substring(s-4,s)==="http"){const i=t.substring(s+4).match(mE),l=i?s+4+i.index:e,u=t[s-1]==="s"?5:4;try{let f=new URL(t.substring(s-u,l));if(f.hostname.indexOf(".")===-1)throw new Error("invalid url");if(n!==s-u&&(yield{type:"text",text:t.substring(n,s-u)}),f.pathname.endsWith(".png")||f.pathname.endsWith(".jpg")||f.pathname.endsWith(".jpeg")||f.pathname.endsWith(".gif")||f.pathname.endsWith(".webp")){yield{type:"image",url:f.toString()},r=l,n=r;continue}if(f.pathname.endsWith(".mp4")||f.pathname.endsWith(".avi")||f.pathname.endsWith(".webm")||f.pathname.endsWith(".mkv")){yield{type:"video",url:f.toString()},r=l,n=r;continue}if(f.pathname.endsWith(".mp3")||f.pathname.endsWith(".aac")||f.pathname.endsWith(".ogg")||f.pathname.endsWith(".opus")){yield{type:"audio",url:f.toString()},r=l,n=r;continue}yield{type:"url",url:f.toString()},r=l,n=r;continue}catch{r=l+1;continue}}else if(t.substring(s-3,s)==="wss"||t.substring(s-2,s)==="ws"){const i=t.substring(s+4).match(mE),l=i?s+4+i.index:e,u=t[s-1]==="s"?3:2;try{let f=new URL(t.substring(s-u,l));if(f.hostname.indexOf(".")===-1)throw new Error("invalid ws url");n!==s-u&&(yield{type:"text",text:t.substring(n,s-u)}),yield{type:"relay",url:f.toString()},r=l,n=r;continue}catch{r=l+1;continue}}else{r=s+1;continue}}n!==e&&(yield{type:"text",text:t.substring(n)})}var lL={};Ut(lL,{channelCreateEvent:()=>cL,channelHideMessageEvent:()=>fL,channelMessageEvent:()=>dL,channelMetadataEvent:()=>uL,channelMuteUserEvent:()=>hL});var cL=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Cr({kind:ik,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},uL=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Cr({kind:ak,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},dL=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),Cr({kind:lk,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},fL=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Cr({kind:ck,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},hL=(t,e)=>{let n;if(typeof t.content=="object")n=JSON.stringify(t.content);else if(typeof t.content=="string")n=t.content;else return;return Cr({kind:uk,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)},pL={};Ut(pL,{EMOJI_SHORTCODE_REGEX:()=>Hk,matchAll:()=>mL,regex:()=>R0,replaceAll:()=>gL});var Hk=/:(\w+):/,R0=()=>new RegExp(`\\B${Hk.source}\\B`,"g");function*mL(t){const e=t.matchAll(R0());for(const n of e)try{const[r,s]=n;yield{shortcode:r,name:s,start:n.index,end:n.index+r.length}}catch{}}function gL(t,e){return t.replaceAll(R0(),(n,r)=>e({shortcode:n,name:r}))}var yL={};Ut(yL,{useFetchImplementation:()=>vL,validateGithub:()=>xL});var A0;try{A0=fetch}catch{}function vL(t){A0=t}async function xL(t,e,n){try{return await(await A0(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch{return!1}}var wL={};Ut(wL,{makeNwcRequestEvent:()=>EL,parseConnectionString:()=>bL});function bL(t){const{pathname:e,searchParams:n}=new URL(t),r=e,s=n.get("relay"),i=n.get("secret");if(!r||!s||!i)throw new Error("invalid connection string");return{pubkey:r,relay:s,secret:i}}async function EL(t,e,n){const s=Nk(e,t,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),i={kind:hk,created_at:Math.round(Date.now()/1e3),content:s,tags:[["p",t]]};return Cr(i,e)}var SL={};Ut(SL,{normalizeIdentifier:()=>NL});function NL(t){return t=t.trim().toLowerCase(),t=t.normalize("NFKC"),Array.from(t).map(e=>new RegExp("\\p{Letter}","u").test(e)||new RegExp("\\p{Number}","u").test(e)?e:"-").join("")}var Ef={};Ut(Ef,{getSatoshisAmountFromBolt11:()=>PL,getZapEndpoint:()=>CL,makeZapReceipt:()=>TL,makeZapRequest:()=>jL,useFetchImplementation:()=>kL,validateZapRequest:()=>_L});var I0;try{I0=fetch}catch{}function kL(t){I0=t}async function CL(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:l}=wl.decode(n,1e3),u=wl.fromWords(l);e=Fs.decode(u)}else if(r){let[l,u]=r.split("@");e=new URL(`/.well-known/lnurlp/${l}`,`https://${u}`).toString()}else return null;let i=await(await I0(e)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null}function jL({profile:t,event:e,amount:n,relays:r,comment:s=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:s,tags:[["p",t],["amount",n.toString()],["relays",...r]]};if(e&&typeof e=="string"&&i.tags.push(["e",e]),e&&typeof e=="object"){if(Ah(e.kind)){const l=["a",`${e.kind}:${e.pubkey}:`];i.tags.push(l)}else if(Ih(e.kind)){let l=e.tags.find(([f,h])=>f==="d"&&h);if(!l)throw new Error("d tag not found or is empty");const u=["a",`${e.kind}:${e.pubkey}:${l[1]}`];i.tags.push(u)}}return i}function _L(t){let e;try{e=JSON.parse(t)}catch{return"Invalid zap request JSON."}if(!g0(e))return"Zap request is not a valid Nostr event.";if(!Pu(e))return"Invalid signature on zap request.";let n=e.tags.find(([i,l])=>i==="p"&&l);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find(([i,l])=>i==="e"&&l);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([i,l])=>i==="relays"&&l)?null:"Zap request doesn't have a 'relays' tag."}function TL({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let s=JSON.parse(t),i=s.tags.filter(([u])=>u==="e"||u==="p"||u==="a"),l={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["P",s.pubkey],["bolt11",n],["description",t]]};return e&&l.tags.push(["preimage",e]),l}function PL(t){if(t.length<50)return 0;t=t.substring(0,50);const e=t.lastIndexOf("1");if(e===-1)return 0;const n=t.substring(0,e);if(!n.startsWith("lnbc"))return 0;const r=n.substring(4);if(r.length<1)return 0;const s=r[r.length-1],i=s.charCodeAt(0)-48,l=i>=0&&i<=9;let u=r.length-1;if(l&&u++,u<1)return 0;const f=parseInt(r.substring(0,u));switch(s){case"m":return f*1e5;case"u":return f*100;case"n":return f/10;case"p":return f/1e4;default:return f*1e8}}var RL={};Ut(RL,{getToken:()=>AL,hashPayload:()=>M0,unpackEventFromToken:()=>qk,validateEvent:()=>Xk,validateEventKind:()=>Gk,validateEventMethodTag:()=>Qk,validateEventPayloadTag:()=>Zk,validateEventTimestamp:()=>Kk,validateEventUrlTag:()=>Yk,validateToken:()=>IL});var Vk="Nostr ";async function AL(t,e,n,r=!1,s){const i={kind:b0,tags:[["u",t],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};s&&i.tags.push(["payload",M0(s)]);const l=await n(i);return(r?Vk:"")+Vs.encode(Ur.encode(JSON.stringify(l)))}async function IL(t,e,n){const r=await qk(t).catch(i=>{throw i});return await Xk(r,e,n).catch(i=>{throw i})}async function qk(t){if(!t)throw new Error("Missing token");t=t.replace(Vk,"");const e=Fs.decode(Vs.decode(t));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function Kk(t){return t.created_at?Math.round(new Date().getTime()/1e3)-t.created_at<60:!1}function Gk(t){return t.kind===b0}function Yk(t,e){const n=t.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===e:!1}function Qk(t,e){const n=t.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===e.toLowerCase():!1}function M0(t){const e=Dl(Ur.encode(JSON.stringify(t)));return An(e)}function Zk(t,e){const n=t.tags.find(s=>s[0]==="payload");if(!n)return!1;const r=M0(e);return n.length>0&&n[1]===r}async function Xk(t,e,n,r){if(!Pu(t))throw new Error("Invalid nostr event, signature invalid");if(!Gk(t))throw new Error("Invalid nostr event, kind invalid");if(!Kk(t))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Yk(t,e))throw new Error("Invalid nostr event, url tag invalid");if(!Qk(t,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Zk(t,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var WS,HS,bh,Jk;const ls=class ls{constructor(e){qe(this,bh);Re(this,"cache");Re(this,WS,"NSet");this.cache=e??new Map}get size(){return this.cache.size}add(e){st(this,bh,Jk).call(this,e);for(const n of this){if(ls.deletes(n,e)||ls.replaces(n,e))return this;ls.replaces(e,n)&&this.delete(n)}return this.cache.set(e.id,e),this}clear(){this.cache.clear()}delete(e){return this.cache.delete(e.id)}forEach(e,n){return this.cache.forEach((r,s)=>e(r,r,this),n)}has(e){return this.cache.has(e.id)}*entries(){for(const e of this.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of ls.sortEvents([...this.cache.values()]))yield e}[(HS=Symbol.iterator,WS=Symbol.toStringTag,HS)](){return this.values()}static isReplaceable(e){return[0,3].includes(e)||1e4<=e&&e<2e4}static isAddressable(e){return 3e4<=e&&e<4e4}static replaces(e,n){var i,l;const{kind:r,pubkey:s}=e;if(ls.isReplaceable(r))return r===n.kind&&s===n.pubkey&&ls.sortEvents([e,n])[0]===e;if(ls.isAddressable(r)){const u=((i=e.tags.find(([h])=>h==="d"))==null?void 0:i[1])||"",f=((l=n.tags.find(([h])=>h==="d"))==null?void 0:l[1])||"";return r===n.kind&&s===n.pubkey&&ls.sortEvents([e,n])[0]===e&&u===f}return!1}static deletes(e,n){const{kind:r,pubkey:s,tags:i}=e;if(r===5&&s===n.pubkey){for(const[l,u]of i)if(l==="e"&&u===n.id)return!0}return!1}static sortEvents(e){return e.sort((n,r)=>n.created_at!==r.created_at?r.created_at-n.created_at:n.id.localeCompare(r.id))}union(e){throw new Error("Method not implemented.")}intersection(e){throw new Error("Method not implemented.")}difference(e){throw new Error("Method not implemented.")}symmetricDifference(e){throw new Error("Method not implemented.")}isSubsetOf(e){throw new Error("Method not implemented.")}isSupersetOf(e){throw new Error("Method not implemented.")}isDisjointFrom(e){throw new Error("Method not implemented.")}};bh=new WeakSet,Jk=function(e){if(e.kind===5){for(const n of e.tags)if(n[0]==="e"){const r=this.cache.get(n[1]);r&&r.pubkey===e.pubkey&&this.delete(r)}}};let zf=ls;var Nt;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const l of s)i[l]=l;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),l={};for(const u of i)l[u]=s[u];return t.objectValues(l)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&i.push(l);return i},t.find=(s,i)=>{for(const l of s)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Nt||(Nt={}));var gE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(gE||(gE={}));const Ue=Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Do=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return Number.isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ee=Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class qs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,f=0;for(;f<l.path.length;){const h=l.path[f];f===l.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(n(l))):u[h]=u[h]||{_errors:[]},u=u[h],f++}}};return s(this),r}static assert(e){if(!(e instanceof qs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}qs.create=t=>new qs(t);const ov=(t,e)=>{let n;switch(t.code){case Ee.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ee.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Nt.jsonStringifyReplacer)}`;break;case Ee.unrecognized_keys:n=`Unrecognized key(s) in object: ${Nt.joinValues(t.keys,", ")}`;break;case Ee.invalid_union:n="Invalid input";break;case Ee.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Nt.joinValues(t.options)}`;break;case Ee.invalid_enum_value:n=`Invalid enum value. Expected ${Nt.joinValues(t.options)}, received '${t.received}'`;break;case Ee.invalid_arguments:n="Invalid function arguments";break;case Ee.invalid_return_type:n="Invalid function return type";break;case Ee.invalid_date:n="Invalid date";break;case Ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Nt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ee.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ee.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ee.custom:n="Invalid input";break;case Ee.invalid_intersection_types:n="Intersection results could not be merged";break;case Ee.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ee.not_finite:n="Number must be finite";break;default:n=e.defaultError,Nt.assertNever(t)}return{message:n}};let ML=ov;function OL(){return ML}const DL=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],l={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let u="";const f=r.filter(h=>!!h).slice().reverse();for(const h of f)u=h(l,{data:e,defaultError:u}).message;return{...s,path:i,message:u}};function Me(t,e){const n=OL(),r=DL({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ov?void 0:ov].filter(s=>!!s)});t.common.issues.push(r)}class Un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return tt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,l=await s.value;r.push({key:i,value:l})}return Un.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:l}=s;if(i.status==="aborted"||l.status==="aborted")return tt;i.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(r[i.value]=l.value)}return{status:e.value,value:r}}}const tt=Object.freeze({status:"aborted"}),qc=t=>({status:"dirty",value:t}),jr=t=>({status:"valid",value:t}),yE=t=>t.status==="aborted",vE=t=>t.status==="dirty",El=t=>t.status==="valid",Wf=t=>typeof Promise<"u"&&t instanceof Promise;var Ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ve||(Ve={}));class vs{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xE=(t,e)=>{if(El(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qs(t.common.issues);return this._error=n,this._error}}};function ct(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,u)=>{const{message:f}=t;return l.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??r??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:f??n??u.defaultError}},description:s}}class wt{get description(){return this._def.description}_getType(e){return Do(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Do(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Un,ctx:{common:e.parent.common,data:e.data,parsedType:Do(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Wf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Do(e)},s=this._parseSync({data:e,path:r.path,parent:r});return xE(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Do(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return El(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>El(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Do(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Wf(s)?s:Promise.resolve(s));return xE(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const l=e(s),u=()=>i.addIssue({code:Ee.custom,...r(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new kl({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Xo.create(this,this._def)}nullable(){return Cl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gs.create(this)}promise(){return Gf.create(this,this._def)}or(e){return Vf.create([this,e],this._def)}and(e){return qf.create(this,e,this._def)}transform(e){return new kl({...ct(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new cv({...ct(this._def),innerType:this,defaultValue:n,typeName:nt.ZodDefault})}brand(){return new o6({typeName:nt.ZodBranded,type:this,...ct(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new uv({...ct(this._def),innerType:this,catchValue:n,typeName:nt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return O0.create(this,e)}readonly(){return dv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LL=/^c[^\s-]{8,}$/i,$L=/^[0-9a-z]+$/,BL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,FL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UL=/^[a-z0-9_-]{21}$/i,zL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,WL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,HL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,VL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let jg;const qL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,KL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,GL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,QL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",XL=new RegExp(`^${eC}$`);function tC(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function JL(t){return new RegExp(`^${tC(t)}$`)}function e6(t){let e=`${eC}T${tC(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function t6(t,e){return!!((e==="v4"||!e)&&qL.test(t)||(e==="v6"||!e)&&GL.test(t))}function n6(t,e){if(!zL.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function r6(t,e){return!!((e==="v4"||!e)&&KL.test(t)||(e==="v6"||!e)&&YL.test(t))}class Us extends wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_type,expected:Ue.string,received:i.parsedType}),tt}const r=new Un;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const l=e.data.length>i.value,u=e.data.length<i.value;(l||u)&&(s=this._getOrReturnCtx(e,s),l?Me(s,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Me(s,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")HL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")jg||(jg=new RegExp(VL,"u")),jg.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")FL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")UL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"nanoid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")LL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")$L.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")BL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:Ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:Ee.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:Ee.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?e6(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?XL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?JL(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?WL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"duration",code:Ee.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?t6(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:Ee.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?n6(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"jwt",code:Ee.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?r6(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cidr",code:Ee.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?QL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"base64",code:Ee.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?ZL.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"base64url",code:Ee.invalid_string,message:i.message}),r.dirty()):Nt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ee.invalid_string,...Ve.errToObj(r)})}_addCheck(e){return new Us({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ve.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ve.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ve.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ve.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ve.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ve.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ve.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ve.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ve.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ve.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ve.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ve.errToObj(n)})}nonempty(e){return this.min(1,Ve.errToObj(e))}trim(){return new Us({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Us({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Us({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Us.create=t=>new Us({checks:[],typeName:nt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ct(t)});function s6(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),l=Number.parseInt(e.toFixed(s).replace(".",""));return i%l/10**s}class Sl extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_type,expected:Ue.number,received:i.parsedType}),tt}let r;const s=new Un;for(const i of this._def.checks)i.kind==="int"?Nt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?s6(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.not_finite,message:i.message}),s.dirty()):Nt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ve.toString(n))}setLimit(e,n,r,s){return new Sl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ve.toString(s)}]})}_addCheck(e){return new Sl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Nt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Sl.create=t=>new Sl({checks:[],typeName:nt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ct(t)});class cu extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ue.bigint)return this._getInvalidInput(e);let r;const s=new Un;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Nt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Me(n,{code:Ee.invalid_type,expected:Ue.bigint,received:n.parsedType}),tt}gte(e,n){return this.setLimit("min",e,!0,Ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ve.toString(n))}setLimit(e,n,r,s){return new cu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ve.toString(s)}]})}_addCheck(e){return new cu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}cu.create=t=>new cu({checks:[],typeName:nt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ct(t)});class iv extends wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:Ee.invalid_type,expected:Ue.boolean,received:r.parsedType}),tt}return jr(e.data)}}iv.create=t=>new iv({typeName:nt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ct(t)});class Hf extends wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_type,expected:Ue.date,received:i.parsedType}),tt}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_date}),tt}const r=new Un;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:Ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Nt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Hf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ve.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ve.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Hf.create=t=>new Hf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:nt.ZodDate,...ct(t)});class wE extends wt{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:Ee.invalid_type,expected:Ue.symbol,received:r.parsedType}),tt}return jr(e.data)}}wE.create=t=>new wE({typeName:nt.ZodSymbol,...ct(t)});class bE extends wt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:Ee.invalid_type,expected:Ue.undefined,received:r.parsedType}),tt}return jr(e.data)}}bE.create=t=>new bE({typeName:nt.ZodUndefined,...ct(t)});class EE extends wt{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return Me(r,{code:Ee.invalid_type,expected:Ue.null,received:r.parsedType}),tt}return jr(e.data)}}EE.create=t=>new EE({typeName:nt.ZodNull,...ct(t)});class SE extends wt{constructor(){super(...arguments),this._any=!0}_parse(e){return jr(e.data)}}SE.create=t=>new SE({typeName:nt.ZodAny,...ct(t)});class NE extends wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return jr(e.data)}}NE.create=t=>new NE({typeName:nt.ZodUnknown,...ct(t)});class ri extends wt{_parse(e){const n=this._getOrReturnCtx(e);return Me(n,{code:Ee.invalid_type,expected:Ue.never,received:n.parsedType}),tt}}ri.create=t=>new ri({typeName:nt.ZodNever,...ct(t)});class kE extends wt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:Ee.invalid_type,expected:Ue.void,received:r.parsedType}),tt}return jr(e.data)}}kE.create=t=>new kE({typeName:nt.ZodVoid,...ct(t)});class gs extends wt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return Me(n,{code:Ee.invalid_type,expected:Ue.array,received:n.parsedType}),tt;if(s.exactLength!==null){const l=n.data.length>s.exactLength.value,u=n.data.length<s.exactLength.value;(l||u)&&(Me(n,{code:l?Ee.too_big:Ee.too_small,minimum:u?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Me(n,{code:Ee.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Me(n,{code:Ee.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>s.type._parseAsync(new vs(n,l,n.path,u)))).then(l=>Un.mergeArray(r,l));const i=[...n.data].map((l,u)=>s.type._parseSync(new vs(n,l,n.path,u)));return Un.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new gs({...this._def,minLength:{value:e,message:Ve.toString(n)}})}max(e,n){return new gs({...this._def,maxLength:{value:e,message:Ve.toString(n)}})}length(e,n){return new gs({...this._def,exactLength:{value:e,message:Ve.toString(n)}})}nonempty(e){return this.min(1,e)}}gs.create=(t,e)=>new gs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...ct(e)});function Ka(t){if(t instanceof Jt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Xo.create(Ka(r))}return new Jt({...t._def,shape:()=>e})}else return t instanceof gs?new gs({...t._def,type:Ka(t.element)}):t instanceof Xo?Xo.create(Ka(t.unwrap())):t instanceof Cl?Cl.create(Ka(t.unwrap())):t instanceof ea?ea.create(t.items.map(e=>Ka(e))):t}class Jt extends wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Nt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ue.object){const h=this._getOrReturnCtx(e);return Me(h,{code:Ee.invalid_type,expected:Ue.object,received:h.parsedType}),tt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof ri&&this._def.unknownKeys==="strip"))for(const h in s.data)l.includes(h)||u.push(h);const f=[];for(const h of l){const m=i[h],p=s.data[h];f.push({key:{status:"valid",value:h},value:m._parse(new vs(s,p,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof ri){const h=this._def.unknownKeys;if(h==="passthrough")for(const m of u)f.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(h==="strict")u.length>0&&(Me(s,{code:Ee.unrecognized_keys,keys:u}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const m of u){const p=s.data[m];f.push({key:{status:"valid",value:m},value:h._parse(new vs(s,p,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const m of f){const p=await m.key,x=await m.value;h.push({key:p,value:x,alwaysSet:m.alwaysSet})}return h}).then(h=>Un.mergeObjectSync(r,h)):Un.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Ve.errToObj,new Jt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,l;const s=((l=(i=this._def).errorMap)==null?void 0:l.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ve.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Jt({...this._def,unknownKeys:"strip"})}passthrough(){return new Jt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Jt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Jt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Jt({...this._def,catchall:e})}pick(e){const n={};for(const r of Nt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Jt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Nt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Jt({...this._def,shape:()=>n})}deepPartial(){return Ka(this)}partial(e){const n={};for(const r of Nt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Jt({...this._def,shape:()=>n})}required(e){const n={};for(const r of Nt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Xo;)i=i._def.innerType;n[r]=i}return new Jt({...this._def,shape:()=>n})}keyof(){return nC(Nt.objectKeys(this.shape))}}Jt.create=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strip",catchall:ri.create(),typeName:nt.ZodObject,...ct(e)});Jt.strictCreate=(t,e)=>new Jt({shape:()=>t,unknownKeys:"strict",catchall:ri.create(),typeName:nt.ZodObject,...ct(e)});Jt.lazycreate=(t,e)=>new Jt({shape:t,unknownKeys:"strip",catchall:ri.create(),typeName:nt.ZodObject,...ct(e)});class Vf extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=i.map(u=>new qs(u.ctx.common.issues));return Me(n,{code:Ee.invalid_union,unionErrors:l}),tt}if(n.common.async)return Promise.all(r.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(s);{let i;const l=[];for(const f of r){const h={...n,common:{...n.common,issues:[]},parent:null},m=f._parseSync({data:n.data,path:n.path,parent:h});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:h}),h.common.issues.length&&l.push(h.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const u=l.map(f=>new qs(f));return Me(n,{code:Ee.invalid_union,unionErrors:u}),tt}}get options(){return this._def.options}}Vf.create=(t,e)=>new Vf({options:t,typeName:nt.ZodUnion,...ct(e)});function av(t,e){const n=Do(t),r=Do(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=Nt.objectKeys(e),i=Nt.objectKeys(t).filter(u=>s.indexOf(u)!==-1),l={...t,...e};for(const u of i){const f=av(t[u],e[u]);if(!f.valid)return{valid:!1};l[u]=f.data}return{valid:!0,data:l}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const l=t[i],u=e[i],f=av(l,u);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qf extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,l)=>{if(yE(i)||yE(l))return tt;const u=av(i.value,l.value);return u.valid?((vE(i)||vE(l))&&n.dirty(),{status:n.value,value:u.data}):(Me(r,{code:Ee.invalid_intersection_types}),tt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,l])=>s(i,l)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qf.create=(t,e,n)=>new qf({left:t,right:e,typeName:nt.ZodIntersection,...ct(n)});class ea extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return Me(r,{code:Ee.invalid_type,expected:Ue.array,received:r.parsedType}),tt;if(r.data.length<this._def.items.length)return Me(r,{code:Ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:Ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((l,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new vs(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(i).then(l=>Un.mergeArray(n,l)):Un.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:t,typeName:nt.ZodTuple,rest:null,...ct(e)})};class Kf extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return Me(r,{code:Ee.invalid_type,expected:Ue.object,received:r.parsedType}),tt;const s=[],i=this._def.keyType,l=this._def.valueType;for(const u in r.data)s.push({key:i._parse(new vs(r,u,r.path,u)),value:l._parse(new vs(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Un.mergeObjectAsync(n,s):Un.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof wt?new Kf({keyType:e,valueType:n,typeName:nt.ZodRecord,...ct(r)}):new Kf({keyType:Us.create(),valueType:e,typeName:nt.ZodRecord,...ct(n)})}}class CE extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return Me(r,{code:Ee.invalid_type,expected:Ue.map,received:r.parsedType}),tt;const s=this._def.keyType,i=this._def.valueType,l=[...r.data.entries()].map(([u,f],h)=>({key:s._parse(new vs(r,u,r.path,[h,"key"])),value:i._parse(new vs(r,f,r.path,[h,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of l){const h=await f.key,m=await f.value;if(h.status==="aborted"||m.status==="aborted")return tt;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(h.value,m.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const f of l){const h=f.key,m=f.value;if(h.status==="aborted"||m.status==="aborted")return tt;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(h.value,m.value)}return{status:n.value,value:u}}}}CE.create=(t,e,n)=>new CE({valueType:e,keyType:t,typeName:nt.ZodMap,...ct(n)});class uu extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return Me(r,{code:Ee.invalid_type,expected:Ue.set,received:r.parsedType}),tt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:Ee.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:Ee.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function l(f){const h=new Set;for(const m of f){if(m.status==="aborted")return tt;m.status==="dirty"&&n.dirty(),h.add(m.value)}return{status:n.value,value:h}}const u=[...r.data.values()].map((f,h)=>i._parse(new vs(r,f,r.path,h)));return r.common.async?Promise.all(u).then(f=>l(f)):l(u)}min(e,n){return new uu({...this._def,minSize:{value:e,message:Ve.toString(n)}})}max(e,n){return new uu({...this._def,maxSize:{value:e,message:Ve.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}uu.create=(t,e)=>new uu({valueType:t,minSize:null,maxSize:null,typeName:nt.ZodSet,...ct(e)});class jE extends wt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jE.create=(t,e)=>new jE({getter:t,typeName:nt.ZodLazy,...ct(e)});class lv extends wt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Me(n,{received:n.data,code:Ee.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}lv.create=(t,e)=>new lv({value:t,typeName:nt.ZodLiteral,...ct(e)});function nC(t,e){return new Nl({values:t,typeName:nt.ZodEnum,...ct(e)})}class Nl extends wt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{expected:Nt.joinValues(r),received:n.parsedType,code:Ee.invalid_type}),tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{received:n.data,code:Ee.invalid_enum_value,options:r}),tt}return jr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Nl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Nl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Nl.create=nC;class _E extends wt{_parse(e){const n=Nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=Nt.objectValues(n);return Me(r,{expected:Nt.joinValues(s),received:r.parsedType,code:Ee.invalid_type}),tt}if(this._cache||(this._cache=new Set(Nt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Nt.objectValues(n);return Me(r,{received:r.data,code:Ee.invalid_enum_value,options:s}),tt}return jr(e.data)}get enum(){return this._def.values}}_E.create=(t,e)=>new _E({values:t,typeName:nt.ZodNativeEnum,...ct(e)});class Gf extends wt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return Me(n,{code:Ee.invalid_type,expected:Ue.promise,received:n.parsedType}),tt;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return jr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Gf.create=(t,e)=>new Gf({type:t,typeName:nt.ZodPromise,...ct(e)});class kl extends wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:l=>{Me(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const l=s.transform(r.data,i);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return tt;const f=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return f.status==="aborted"?tt:f.status==="dirty"||n.value==="dirty"?qc(f.value):f});{if(n.value==="aborted")return tt;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?tt:u.status==="dirty"||n.value==="dirty"?qc(u.value):u}}if(s.type==="refinement"){const l=u=>{const f=s.refinement(u,i);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?tt:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?tt:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(s.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!El(l))return tt;const u=s.transform(l.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>El(l)?Promise.resolve(s.transform(l.value,i)).then(u=>({status:n.value,value:u})):tt);Nt.assertNever(s)}}kl.create=(t,e,n)=>new kl({schema:t,typeName:nt.ZodEffects,effect:e,...ct(n)});kl.createWithPreprocess=(t,e,n)=>new kl({schema:e,effect:{type:"preprocess",transform:t},typeName:nt.ZodEffects,...ct(n)});class Xo extends wt{_parse(e){return this._getType(e)===Ue.undefined?jr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xo.create=(t,e)=>new Xo({innerType:t,typeName:nt.ZodOptional,...ct(e)});class Cl extends wt{_parse(e){return this._getType(e)===Ue.null?jr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cl.create=(t,e)=>new Cl({innerType:t,typeName:nt.ZodNullable,...ct(e)});class cv extends wt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}cv.create=(t,e)=>new cv({innerType:t,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ct(e)});class uv extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Wf(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}uv.create=(t,e)=>new uv({innerType:t,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ct(e)});class TE extends wt{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:Ee.invalid_type,expected:Ue.nan,received:r.parsedType}),tt}return{status:"valid",value:e.data}}}TE.create=t=>new TE({typeName:nt.ZodNaN,...ct(t)});class o6 extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class O0 extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?tt:i.status==="dirty"?(n.dirty(),qc(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?tt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new O0({in:e,out:n,typeName:nt.ZodPipeline})}}class dv extends wt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(El(s)&&(s.value=Object.freeze(s.value)),s);return Wf(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}dv.create=(t,e)=>new dv({innerType:t,typeName:nt.ZodReadonly,...ct(e)});var nt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(nt||(nt={}));const ht=Us.create,Mo=Sl.create,Jc=iv.create;ri.create;gs.create;const Is=Jt.create,PE=Vf.create;qf.create;const xr=ea.create,i6=Kf.create,wr=lv.create,a6=Nl.create;Gf.create;Xo.create;Cl.create;const l6=tt;class ut{static id(){return ht().regex(/^[0-9a-f]{64}$/)}static event(){return Is({id:ut.id(),kind:Mo().int().nonnegative(),pubkey:ut.id(),tags:ht().array().array(),content:ht(),created_at:Mo().int().nonnegative(),sig:ht()}).required({id:!0,kind:!0,pubkey:!0,tags:!0,content:!0,created_at:!0,sig:!0})}static filter(){return Is({kinds:Mo().int().nonnegative().array().optional(),ids:ut.id().array().optional(),authors:ut.id().array().optional(),since:Mo().int().nonnegative().optional(),until:Mo().int().nonnegative().optional(),limit:Mo().int().nonnegative().optional(),search:ht().optional()}).passthrough().transform(e=>{const n=["kinds","ids","authors","since","until","limit","search"];return Object.entries(e).reduce((r,[s,i])=>((n.includes(s)||s.startsWith("#"))&&(r[s]=i),r),{})})}static bech32(e){return ht().regex(/^[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}$/).refine(n=>e?n.startsWith(`${e}1`):!0)}static relayUrl(){return ht().url().regex(/^wss?:\/\//)}static clientEVENT(){return xr([wr("EVENT"),ut.event()])}static clientREQ(){return xr([wr("REQ"),ht()]).rest(ut.filter())}static clientCOUNT(){return xr([wr("COUNT"),ht()]).rest(ut.filter())}static clientCLOSE(){return xr([wr("CLOSE"),ht()])}static clientAUTH(){return xr([wr("AUTH"),ut.event()])}static clientMsg(){return PE([ut.clientEVENT(),ut.clientREQ(),ut.clientCOUNT(),ut.clientCLOSE(),ut.clientAUTH()])}static relayEVENT(){return xr([wr("EVENT"),ht(),ut.event()])}static relayOK(){return xr([wr("OK"),ut.id(),Jc(),ht()])}static relayEOSE(){return xr([wr("EOSE"),ht()])}static relayNOTICE(){return xr([wr("NOTICE"),ht()])}static relayCLOSED(){return xr([wr("CLOSED"),ht(),ht()])}static relayAUTH(){return xr([wr("AUTH"),ht()])}static relayCOUNT(){return xr([wr("COUNT"),ht(),Is({count:Mo().int().nonnegative(),approximate:Jc().optional()})])}static relayMsg(){return PE([ut.relayEVENT(),ut.relayOK(),ut.relayEOSE(),ut.relayNOTICE(),ut.relayCLOSED(),ut.relayAUTH(),ut.relayCOUNT()])}static metadata(){return Is({about:ht().optional().catch(void 0),banner:ht().url().optional().catch(void 0),bot:Jc().optional().catch(void 0),display_name:ht().optional().catch(void 0),lud06:ut.bech32("lnurl").optional().catch(void 0),lud16:ht().email().optional().catch(void 0),name:ht().optional().catch(void 0),nip05:ht().email().optional().catch(void 0),picture:ht().url().optional().catch(void 0),website:ht().url().optional().catch(void 0)}).passthrough()}static connectRequest(){return Is({id:ht(),method:ht(),params:ht().array()})}static connectResponse(){return Is({id:ht(),result:ht(),error:ht().optional()})}static json(){return ht().transform((e,n)=>{try{return JSON.parse(e)}catch{return n.addIssue({code:Ee.custom,message:"Invalid JSON"}),l6}})}}class rC{constructor({relay:e,pubkey:n,signer:r,timeout:s,encryption:i="nip44"}){Re(this,"relay");Re(this,"pubkey");Re(this,"signer");Re(this,"timeout");Re(this,"encryption");Re(this,"nip04",{encrypt:async(e,n)=>this.cmd("nip04_encrypt",[e,n]),decrypt:async(e,n)=>this.cmd("nip04_decrypt",[e,n])});Re(this,"nip44",{encrypt:async(e,n)=>this.cmd("nip44_encrypt",[e,n]),decrypt:async(e,n)=>this.cmd("nip44_decrypt",[e,n])});this.relay=e,this.pubkey=n,this.signer=r,this.timeout=s,this.encryption=i}async getPublicKey(){return this.cmd("get_public_key",[])}async signEvent(e){const n=await this.cmd("sign_event",[JSON.stringify(e)]);return ut.json().pipe(ut.event()).parse(n)}async getRelays(){const e=await this.cmd("get_relays",[]);return ut.json().pipe(i6(ht(),Is({read:Jc(),write:Jc()}))).parse(e)}async connect(e){const n=[this.pubkey];return e&&n.push(e),this.cmd("connect",n)}async ping(){return this.cmd("ping",[])}async cmd(e,n){const r=typeof this.timeout=="number"?AbortSignal.timeout(this.timeout):void 0,{result:s,error:i}=await this.send({id:crypto.randomUUID(),method:e,params:n},{signal:r});if(i)throw new Error(i);return s}async send(e,n={}){const{signal:r}=n,s=await this.signer.signEvent({kind:24133,content:await this.encrypt(this.pubkey,JSON.stringify(e)),created_at:Math.floor(Date.now()/1e3),tags:[["p",this.pubkey]]}),i=await this.signer.getPublicKey(),l=this.relay.req([{kinds:[24133],authors:[this.pubkey],"#p":[i]}],{signal:r}),u=new Promise((f,h)=>{(async()=>{try{for await(const m of l){if(m[0]==="CLOSED")throw new Error("Subscription closed");if(m[0]==="EVENT"){const p=m[2],x=await this.decrypt(this.pubkey,p.content),w=ut.json().pipe(ut.connectResponse()).parse(x);if(w.id===e.id){f(w);return}}}}catch(m){h(m)}})()});return await this.relay.event(s,{signal:r}),u}async encrypt(e,n){switch(this.encryption){case"nip04":return this.signer.nip04.encrypt(e,n);case"nip44":return this.signer.nip44.encrypt(e,n)}}async decrypt(e,n){switch(this.encryption){case"nip04":return this.signer.nip04.decrypt(e,n);case"nip44":return this.signer.nip44.decrypt(e,n)}}}const c6=new TextEncoder;function u6(t){var n;const e=typeof t;return e!=="object"?e:t===null?"null":((n=t==null?void 0:t.constructor)==null?void 0:n.name)??"object"}function sC(t){if(typeof t=="string")return c6.encode(t);if(t instanceof Uint8Array)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new TypeError(`The input must be a Uint8Array, a string, or an ArrayBuffer. Received a value of the type ${u6(t)}.`)}const RE=new TextEncoder().encode("0123456789abcdef");new TextEncoder;const d6=new TextDecoder;function f6(t){const e=sC(t),n=new Uint8Array(e.length*2);for(let r=0;r<n.length;r++){const s=e[r];n[r*2]=RE[s>>4],n[r*2+1]=RE[s&15]}return d6.decode(n)}const Ps=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];function h6(t){const e=sC(t);let n="",r;const s=e.length;for(r=2;r<s;r+=3)n+=Ps[e[r-2]>>2],n+=Ps[(e[r-2]&3)<<4|e[r-1]>>4],n+=Ps[(e[r-1]&15)<<2|e[r]>>6],n+=Ps[e[r]&63];return r===s+1&&(n+=Ps[e[r-2]>>2],n+=Ps[(e[r-2]&3)<<4],n+="=="),r===s&&(n+=Ps[e[r-2]>>2],n+=Ps[(e[r-2]&3)<<4|e[r-1]>>4],n+=Ps[(e[r-1]&15)<<2],n+="="),n}function p6(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return r}class m6{static encodeEvent(e){return h6(JSON.stringify(e))}static decodeEvent(e){const n=p6(e),r=new TextDecoder().decode(n);return ut.json().pipe(ut.event()).parse(r)}}class Nr{static regular(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}static replaceable(e){return 1e4<=e&&e<2e4||[0,3].includes(e)}static ephemeral(e){return 2e4<=e&&e<3e4}static addressable(e){return 3e4<=e&&e<4e4}static parameterizedReplaceable(e){return Nr.addressable(e)}}class g6{constructor(e){Re(this,"set");Re(this,"capacity");this.set=new Set,this.capacity=e}add(e){if(!this.set.has(e)){if(this.set.size>=this.capacity){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}[Symbol.iterator](){return this.set.values()}}var gl,yl,Cu;class oC{constructor(e){qe(this,gl,[]);qe(this,yl);qe(this,Cu,!1);e!=null&&e.aborted?this.abort():e==null||e.addEventListener("abort",()=>this.abort(),{once:!0})}async*[Symbol.asyncIterator](){for(;!Y(this,Cu);){if(Y(this,gl).length){yield Y(this,gl).shift();continue}await new Promise(e=>{Ie(this,yl,e)})}throw new DOMException("The signal has been aborted","AbortError")}push(e){var n;Y(this,gl).push(e),(n=Y(this,yl))==null||n.call(this)}abort(){var e;Ie(this,Cu,!0),(e=Y(this,yl))==null||e.call(this)}}gl=new WeakMap,yl=new WeakMap,Cu=new WeakMap;class D0{constructor(e){Re(this,"_relays",new Map);Re(this,"opts");this.opts=e}relay(e){const n=this._relays.get(e);if(n)return n;{const r=this.opts.open(e);return this._relays.set(e,r),r}}group(e){return new D0({open:n=>this.relay(n),reqRouter:n=>new Map(e.map(r=>[r,n])),eventRouter:()=>e})}get relays(){return this._relays}async*req(e,n){const r=new AbortController,s=n!=null&&n.signal?AbortSignal.any([n.signal,r.signal]):r.signal,i=n!=null&&n.relays?new Map(n.relays.map(p=>[p,e])):await this.opts.reqRouter(e);if(i.size<1)return;const l=new oC(s),u=new Set,f=new Set,h=new g6(1e3),m=[];for(const[p,x]of i.entries()){const w=this.relay(p),S=(async()=>{try{for await(const v of w.req(x,{signal:s}))if(v[0]==="EOSE"&&(u.add(p),u.size===i.size&&l.push(v)),v[0]==="CLOSED"&&(f.add(p),f.size===i.size&&l.push(v)),v[0]==="EVENT"){const[,,b]=v;h.has(b.id)||(h.add(b.id),l.push(v))}}catch{}})();m.push(S)}try{for await(const p of l)yield p}finally{r.abort(),await Promise.allSettled(m)}}async event(e,n){const r=(n==null?void 0:n.relays)??await this.opts.eventRouter(e);r.length&&await Promise.any(r.map(s=>this.relay(s).event(e,n)))}async query(e,n){const r=new Map,s=new zf(r);if(e.reduce((l,u)=>l+mk(u),0)===0)return[];try{for await(const l of this.req(e,n))if(l[0]==="EOSE"||(l[0]==="EVENT"&&s.add(l[2]),l[0]==="CLOSED"))break}catch{}return e.some(l=>typeof l.search=="string")?[...r.values()]:[...s]}async close(){await Promise.all([...this._relays.values()].map(e=>e.close()))}async[Symbol.asyncDispose](){await this.close()}}class y6{constructor(e,n){if(this._retries=0,!Number.isInteger(e)||e<0)throw new Error("Base must be a positive integer or zero");if(n!==void 0&&(!Number.isInteger(n)||n<0))throw new Error("ExpMax must be a undefined, a positive integer or zero");this.base=e,this.expMax=n,this.i=0}get retries(){return this._retries}get current(){return this.base*Math.pow(2,this.i)}next(){return this._retries++,this.i=this.expMax===void 0?this.i+1:Math.min(this.i+1,this.expMax),this.current}reset(){this._retries=0,this.i=0}}class v6{constructor(){this.elements=[]}add(e){this.elements.push(e)}clear(){this.elements.length=0}forEach(e){this.elements.forEach(e)}length(){return this.elements.length}isEmpty(){return this.elements.length===0}peek(){return this.elements[0]}read(){return this.elements.shift()}}var Rt;(function(t){t.open="open",t.close="close",t.error="error",t.message="message",t.retry="retry",t.reconnect="reconnect"})(Rt||(Rt={}));class x6{constructor(e,n,r){var s,i,l,u,f,h,m,p,x,w,S,v,b,N,_;this._closedByUser=!1,this.handleOpenEvent=T=>this.handleEvent(Rt.open,T),this.handleErrorEvent=T=>this.handleEvent(Rt.error,T),this.handleCloseEvent=T=>this.handleEvent(Rt.close,T),this.handleMessageEvent=T=>this.handleEvent(Rt.message,T),this._url=e,this._protocols=n,this._options={buffer:r==null?void 0:r.buffer,retry:{maxRetries:(s=r==null?void 0:r.retry)===null||s===void 0?void 0:s.maxRetries,instantReconnect:(i=r==null?void 0:r.retry)===null||i===void 0?void 0:i.instantReconnect,backoff:(l=r==null?void 0:r.retry)===null||l===void 0?void 0:l.backoff},listeners:{open:[...(f=(u=r==null?void 0:r.listeners)===null||u===void 0?void 0:u.open)!==null&&f!==void 0?f:[]],close:[...(m=(h=r==null?void 0:r.listeners)===null||h===void 0?void 0:h.close)!==null&&m!==void 0?m:[]],error:[...(x=(p=r==null?void 0:r.listeners)===null||p===void 0?void 0:p.error)!==null&&x!==void 0?x:[]],message:[...(S=(w=r==null?void 0:r.listeners)===null||w===void 0?void 0:w.message)!==null&&S!==void 0?S:[]],retry:[...(b=(v=r==null?void 0:r.listeners)===null||v===void 0?void 0:v.retry)!==null&&b!==void 0?b:[]],reconnect:[...(_=(N=r==null?void 0:r.listeners)===null||N===void 0?void 0:N.reconnect)!==null&&_!==void 0?_:[]]}},this._underlyingWebsocket=this.tryConnect()}get url(){return this._url}get protocols(){return this._protocols}get buffer(){return this._options.buffer}get maxRetries(){return this._options.retry.maxRetries}get instantReconnect(){return this._options.retry.instantReconnect}get backoff(){return this._options.retry.backoff}get closedByUser(){return this._closedByUser}get lastConnection(){return this._lastConnection}get underlyingWebsocket(){return this._underlyingWebsocket}get readyState(){return this._underlyingWebsocket.readyState}get bufferedAmount(){return this._underlyingWebsocket.bufferedAmount}get extensions(){return this._underlyingWebsocket.extensions}get binaryType(){return this._underlyingWebsocket.binaryType}set binaryType(e){this._underlyingWebsocket.binaryType=e}send(e){this.closedByUser||(this._underlyingWebsocket.readyState===this._underlyingWebsocket.OPEN?this._underlyingWebsocket.send(e):this.buffer!==void 0&&this.buffer.add(e))}close(e,n){this.cancelScheduledConnectionRetry(),this._closedByUser=!0,this._underlyingWebsocket.close(e,n)}addEventListener(e,n,r){this._options.listeners[e].push({listener:n,options:r})}removeEventListener(e,n,r){const s=i=>i.listener!==n||i.options!==r;this._options.listeners[e]=this._options.listeners[e].filter(s)}tryConnect(){return this._underlyingWebsocket=new WebSocket(this.url,this.protocols),this._underlyingWebsocket.addEventListener(Rt.open,this.handleOpenEvent),this._underlyingWebsocket.addEventListener(Rt.close,this.handleCloseEvent),this._underlyingWebsocket.addEventListener(Rt.error,this.handleErrorEvent),this._underlyingWebsocket.addEventListener(Rt.message,this.handleMessageEvent),this._underlyingWebsocket}clearWebsocket(){this._underlyingWebsocket.removeEventListener(Rt.open,this.handleOpenEvent),this._underlyingWebsocket.removeEventListener(Rt.close,this.handleCloseEvent),this._underlyingWebsocket.removeEventListener(Rt.error,this.handleErrorEvent),this._underlyingWebsocket.removeEventListener(Rt.message,this.handleMessageEvent),this._underlyingWebsocket.close()}dispatchEvent(e,n){const r=this._options.listeners[e],s=[];r.forEach(({listener:i,options:l})=>{i(this,n),(l===void 0||l.once===void 0||!l.once)&&s.push({listener:i,options:l})}),this._options.listeners[e]=s}handleEvent(e,n){switch(e){case Rt.close:this.dispatchEvent(e,n),this.scheduleConnectionRetryIfNeeded();break;case Rt.open:if(this.backoff!==void 0&&this._lastConnection!==void 0){const r={retries:this.backoff.retries,lastConnection:new Date(this._lastConnection)},s=new CustomEvent(Rt.reconnect,{detail:r});this.dispatchEvent(Rt.reconnect,s),this.backoff.reset()}this._lastConnection=new Date,this.dispatchEvent(e,n),this.sendBufferedData();break;case Rt.retry:this.dispatchEvent(e,n),this.clearWebsocket(),this.tryConnect();break;default:this.dispatchEvent(e,n);break}}sendBufferedData(){if(this.buffer!==void 0)for(let e=this.buffer.read();e!==void 0;e=this.buffer.read())this.send(e)}scheduleConnectionRetryIfNeeded(){if(this.closedByUser||this.backoff===void 0)return;const e=r=>{const s=new CustomEvent(Rt.retry,{detail:r});this.handleEvent(Rt.retry,s)},n={backoff:this._options.retry.instantReconnect===!0?0:this.backoff.next(),retries:this._options.retry.instantReconnect===!0?0:this.backoff.retries,lastConnection:this._lastConnection};(this._options.retry.maxRetries===void 0||n.retries<=this._options.retry.maxRetries)&&(this.retryTimeout=globalThis.setTimeout(()=>e(n),n.backoff))}cancelScheduledConnectionRetry(){globalThis.clearTimeout(this.retryTimeout)}}class w6{constructor(e){this._url=e}get url(){return this._url}withProtocols(e){return this._protocols=e,this}get protocols(){return this._protocols}withMaxRetries(e){var n;return this._options=Object.assign(Object.assign({},this._options),{retry:Object.assign(Object.assign({},(n=this._options)===null||n===void 0?void 0:n.retry),{maxRetries:e})}),this}get maxRetries(){var e,n;return(n=(e=this._options)===null||e===void 0?void 0:e.retry)===null||n===void 0?void 0:n.maxRetries}withInstantReconnect(e){var n;return this._options=Object.assign(Object.assign({},this._options),{retry:Object.assign(Object.assign({},(n=this._options)===null||n===void 0?void 0:n.retry),{instantReconnect:e})}),this}get instantReconnect(){var e,n;return(n=(e=this._options)===null||e===void 0?void 0:e.retry)===null||n===void 0?void 0:n.instantReconnect}withBackoff(e){var n;return this._options=Object.assign(Object.assign({},this._options),{retry:Object.assign(Object.assign({},(n=this._options)===null||n===void 0?void 0:n.retry),{backoff:e})}),this}get backoff(){var e,n;return(n=(e=this._options)===null||e===void 0?void 0:e.retry)===null||n===void 0?void 0:n.backoff}withBuffer(e){return this._options=Object.assign(Object.assign({},this._options),{buffer:e}),this}get buffer(){var e;return(e=this._options)===null||e===void 0?void 0:e.buffer}onOpen(e,n){return this.addListener(Rt.open,e,n),this}onClose(e,n){return this.addListener(Rt.close,e,n),this}onError(e,n){return this.addListener(Rt.error,e,n),this}onMessage(e,n){return this.addListener(Rt.message,e,n),this}onRetry(e,n){return this.addListener(Rt.retry,e,n),this}onReconnect(e,n){return this.addListener(Rt.reconnect,e,n),this}build(){return new x6(this._url,this._protocols,this._options)}addListener(e,n,r){var s,i,l,u,f,h,m,p,x,w,S,v,b,N,_,T,M,D,B,O,F;return this._options=Object.assign(Object.assign({},this._options),{listeners:{open:(l=(i=(s=this._options)===null||s===void 0?void 0:s.listeners)===null||i===void 0?void 0:i.open)!==null&&l!==void 0?l:[],close:(h=(f=(u=this._options)===null||u===void 0?void 0:u.listeners)===null||f===void 0?void 0:f.close)!==null&&h!==void 0?h:[],error:(x=(p=(m=this._options)===null||m===void 0?void 0:m.listeners)===null||p===void 0?void 0:p.error)!==null&&x!==void 0?x:[],message:(v=(S=(w=this._options)===null||w===void 0?void 0:w.listeners)===null||S===void 0?void 0:S.message)!==null&&v!==void 0?v:[],retry:(_=(N=(b=this._options)===null||b===void 0?void 0:b.listeners)===null||N===void 0?void 0:N.retry)!==null&&_!==void 0?_:[],reconnect:(D=(M=(T=this._options)===null||T===void 0?void 0:T.listeners)===null||M===void 0?void 0:M.reconnect)!==null&&D!==void 0?D:[],[e]:[...(F=(O=(B=this._options)===null||B===void 0?void 0:B.listeners)===null||O===void 0?void 0:O[e])!==null&&F!==void 0?F:[],{listener:n,options:r}]}}),this}}class b6{constructor(e,n={}){Re(this,"socket");Re(this,"subs",new Map);Re(this,"closedByUser",!1);Re(this,"idleTimer");Re(this,"controller",new AbortController);Re(this,"url");Re(this,"opts");Re(this,"ee",new EventTarget);this.url=e,this.opts=n,this.socket=this.createSocket(),this.maybeStartIdleTimer()}get subscriptions(){return[...this.subs.values()]}log(e){var n,r;(r=(n=this.opts).log)==null||r.call(n,{...e,url:this.url})}createSocket(){const{backoff:e=new y6(1e3)}=this.opts;return new w6(this.url).withBuffer(new v6).withBackoff(e===!1?void 0:e).onOpen(n=>{this.log({level:"debug",ns:"relay.ws.state",state:"open",readyState:n.readyState});for(const r of this.subs.values())this.send(r)}).onClose(n=>{this.log({level:"debug",ns:"relay.ws.state",state:"close",readyState:n.readyState}),this.subs.size||this.socket.close()}).onReconnect(n=>{this.log({level:"debug",ns:"relay.ws.state",state:"reconnect",readyState:n.readyState})}).onRetry((n,r)=>{this.log({level:"warn",ns:"relay.ws.retry",readyState:n.readyState,backoff:r.detail.backoff})}).onError(n=>{this.log({level:"error",ns:"relay.ws.error",readyState:n.readyState})}).onMessage((n,r)=>{if(typeof r.data!="string"){this.close();return}const s=ut.json().pipe(ut.relayMsg()).safeParse(r.data);s.success?(this.log({level:"trace",ns:"relay.ws.message",data:s.data}),this.receive(s.data)):this.log({level:"warn",ns:"relay.ws.message",error:s.error})}).build()}receive(e){const{auth:n,verifyEvent:r=Pu}=this.opts;switch(e[0]){case"EVENT":if(!r(e[2]))break;this.ee.dispatchEvent(new CustomEvent(`sub:${e[1]}`,{detail:e}));break;case"EOSE":this.ee.dispatchEvent(new CustomEvent(`sub:${e[1]}`,{detail:e}));break;case"CLOSED":this.subs.delete(e[1]),this.maybeStartIdleTimer(),this.ee.dispatchEvent(new CustomEvent(`sub:${e[1]}`,{detail:e})),this.ee.dispatchEvent(new CustomEvent(`count:${e[1]}`,{detail:e}));break;case"OK":this.ee.dispatchEvent(new CustomEvent(`ok:${e[1]}`,{detail:e}));break;case"NOTICE":this.ee.dispatchEvent(new CustomEvent("notice",{detail:e}));break;case"COUNT":this.ee.dispatchEvent(new CustomEvent(`count:${e[1]}`,{detail:e}));break;case"AUTH":n==null||n(e[1]).then(s=>this.send(["AUTH",s])).catch(()=>{})}}send(e){switch(this.log({level:"trace",ns:"relay.ws.send",data:e}),this.wake(),e[0]){case"REQ":this.subs.set(e[1],e);break;case"CLOSE":this.subs.delete(e[1]),this.maybeStartIdleTimer();break;case"EVENT":case"COUNT":return this.socket.send(JSON.stringify(e))}this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify(e))}async*req(e,n={}){const{signal:r}=n,s=crypto.randomUUID(),i=this.on(`sub:${s}`,r),l=["REQ",s,...e];this.send(l);try{for await(const u of i){if(u[0]==="EOSE"&&(yield u),u[0]==="CLOSED")break;if(u[0]==="EVENT")if(pk(e,u[2]))yield u;else continue}}finally{this.send(["CLOSE",s])}}async query(e,n){const r=new zf,s=e.reduce((i,l)=>i+mk(l),0);if(s===0)return[];for await(const i of this.req(e,n)){if(i[0]==="EOSE")break;if(i[0]==="EVENT"&&r.add(i[2]),i[0]==="CLOSED")throw new Error("Subscription closed");if(r.size>=s)break}return[...r]}async event(e,n){const r=this.once(`ok:${e.id}`,n==null?void 0:n.signal);try{this.send(["EVENT",e])}catch(l){throw r.catch(()=>{}),l}const[,,s,i]=await r;if(!s)throw new Error(i)}async count(e,n){const r=crypto.randomUUID(),s=this.once(`count:${r}`,n==null?void 0:n.signal);try{this.send(["COUNT",r,...e])}catch(l){throw s.catch(()=>{}),l}const i=await s;switch(i[0]){case"CLOSED":throw new Error("Subscription closed");case"COUNT":{const[,,l]=i;return l}}throw new Error("Count ended -- this should never happen")}async*on(e,n){const r=n?AbortSignal.any([this.controller.signal,n]):this.controller.signal;if(r.aborted)throw this.abortError();const s=new oC(r),i=l=>s.push(l.detail);this.ee.addEventListener(e,i);try{for await(const l of s)yield l}finally{this.ee.removeEventListener(e,i)}}async once(e,n){for await(const r of this.on(e,n))return r;throw new Error("Unreachable")}abortError(){return new DOMException("The signal has been aborted","AbortError")}maybeStartIdleTimer(){const{idleTimeout:e=3e4}=this.opts;e!==!1&&(this.idleTimer||this.subs.size||this.closedByUser||(this.log({level:"debug",ns:"relay.idletimer",state:"running",timeout:e}),this.idleTimer=setTimeout(()=>{this.log({level:"debug",ns:"relay.idletimer",state:"aborted",timeout:e}),this.socket.close()},e)))}stopIdleTimer(){this.log({level:"debug",ns:"relay.idletimer",state:"stopped"}),clearTimeout(this.idleTimer),this.idleTimer=void 0}wake(){this.stopIdleTimer(),!this.closedByUser&&this.socket.closedByUser?(this.log({level:"debug",ns:"relay.wake",state:"awoken"}),this.socket=this.createSocket()):this.closedByUser||this.socket.closedByUser?this.log({level:"debug",ns:"relay.wake",state:"closed"}):this.log({level:"debug",ns:"relay.wake",state:"awake"})}async close(){this.closedByUser=!0,this.socket.close(),this.stopIdleTimer(),this.controller.abort(),this.socket.readyState!==WebSocket.CLOSED&&await new Promise(e=>{this.socket.addEventListener(Rt.close,e,{once:!0})})}async[Symbol.asyncDispose](){await this.close()}}var Ds,ju,fv;class du{constructor(e){qe(this,ju);qe(this,Ds);Re(this,"pubkey");Re(this,"nip04",{encrypt:async(e,n)=>lu.encrypt(Y(this,Ds),e,n),decrypt:async(e,n)=>lu.decrypt(Y(this,Ds),e,n)});Re(this,"nip44",{encrypt:async(e,n)=>{const r=st(this,ju,fv).call(this,e);return Go.v2.encrypt(n,r)},decrypt:async(e,n)=>{const r=st(this,ju,fv).call(this,e);return Go.v2.decrypt(n,r)}});Ie(this,Ds,e)}async getPublicKey(){return this.pubkey??(this.pubkey=Ji(Y(this,Ds)))}async signEvent(e){return Cr(e,Y(this,Ds))}}Ds=new WeakMap,ju=new WeakSet,fv=function(e){return Go.v2.utils.getConversationKey(Y(this,Ds),e)};const iC=y.createContext(void 0);function Hr(){const t=y.useContext(iC);if(!t)throw new Error("useNostr must be used within a NostrProvider");return t}class qi{constructor(e,n,r){Re(this,"id");Re(this,"type");Re(this,"pubkey");Re(this,"createdAt");Re(this,"data");this.id=`${e}:${n}`,this.type=e,this.pubkey=n,this.createdAt=new Date().toISOString(),this.data=r}static fromNsec(e){const n=tr.decode(e);if(n.type!=="nsec")throw new Error("Invalid nsec");const r=n.data,s=Ji(r);return new qi("nsec",s,{nsec:tr.nsecEncode(r)})}static async fromBunker(e,n){const{pubkey:r,secret:s,relays:i}=new Zc(e);if(!i.length)throw new Error("No relay provided");const l=bl(),u=tr.nsecEncode(l),f=new du(l),h=new rC({relay:n.group(i),pubkey:r,signer:f,timeout:6e4});await h.connect(s);const m=await h.getPublicKey();return new qi("bunker",m,{bunkerPubkey:r,clientNsec:u,relays:i})}static async fromExtension(){const e=globalThis.nostr;if(!e)throw new Error("Nostr extension is not available");const n=await e.getPublicKey();return new qi("extension",n,null)}toJSON(){return{id:this.id,type:this.type,pubkey:this.pubkey,createdAt:this.createdAt,data:this.data}}}const aC=y.createContext(void 0);function E6(t,e){switch(e.type){case"login.add":{const n=t.filter(r=>r.id!==e.login.id);return e.set?[e.login,...n]:[...n,e.login]}case"login.remove":return t.filter(n=>n.id!==e.id);case"login.set":{const n=t.find(s=>s.id===e.id);if(!n)return t;const r=t.filter(s=>s.id!==e.id);return[n,...r]}case"login.clear":return[];default:return t}}function S6(t){const[e,n]=y.useReducer(E6,[],()=>{const r=localStorage.getItem(t);return r?JSON.parse(r):[]});return y.useEffect(()=>{localStorage.setItem(t,JSON.stringify(e))},[e]),[e,n]}const N6=({children:t,storageKey:e})=>{const[n,r]=S6(e),s={logins:n,addLogin:i=>r({type:"login.add",login:i}),removeLogin:i=>r({type:"login.remove",id:i}),setLogin:i=>r({type:"login.set",id:i}),clearLogins:()=>r({type:"login.clear"})};return c.jsx(aC.Provider,{value:s,children:t})};class Ki{constructor(e,n,r){this.method=e,this.pubkey=n,this.signer=r}static fromNsecLogin(e){const n=tr.decode(e.data.nsec);return new Ki(e.type,e.pubkey,new du(n.data))}static fromBunkerLogin(e,n){const r=tr.decode(e.data.clientNsec),s=new du(r.data);return new Ki(e.type,e.pubkey,new rC({relay:n.group(e.data.relays),pubkey:e.pubkey,signer:s,timeout:6e4}))}static fromExtensionLogin(e){return new Ki(e.type,e.pubkey,new sM)}}function L0(){const t=y.useContext(aC);if(!t)throw new Error("useNostrLogin must be used within a NostrLoginProvider");return t}const lC=y.createContext(void 0);function Ru(){const t=y.useContext(lC);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t}const k6=t=>{const{children:e}=t,{config:n,presetRelays:r}=Ru(),s=_u(),i=y.useRef(void 0),l=y.useRef(n.relayUrl);return y.useEffect(()=>{l.current=n.relayUrl,s.invalidateQueries({queryKey:["nostr"]})},[n.relayUrl,s]),i.current||(i.current=new D0({open(u){return new b6(u)},reqRouter(u){return new Map([[l.current,u]])},eventRouter(u){const f=new Set([l.current]);for(const{url:h}of r??[])if(f.add(h),f.size>=5)break;return[...f]}})),c.jsx(iC.Provider,{value:{nostr:i.current},children:e})},C6=1,j6=1e6;let _g=0;function _6(){return _g=(_g+1)%Number.MAX_SAFE_INTEGER,_g.toString()}const Tg=new Map,AE=t=>{if(Tg.has(t))return;const e=setTimeout(()=>{Tg.delete(t),eu({type:"REMOVE_TOAST",toastId:t})},j6);Tg.set(t,e)},T6=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,C6)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?AE(n):t.toasts.forEach(r=>{AE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Sf=[];let Nf={toasts:[]};function eu(t){Nf=T6(Nf,t),Sf.forEach(e=>{e(Nf)})}function Qn({...t}){const e=_6(),n=s=>eu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>eu({type:"DISMISS_TOAST",toastId:e});return eu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function ui(){const[t,e]=y.useState(Nf);return y.useEffect(()=>(Sf.push(e),()=>{const n=Sf.indexOf(e);n>-1&&Sf.splice(n,1)}),[t]),{...t,toast:Qn,dismiss:n=>eu({type:"DISMISS_TOAST",toastId:n})}}var $l=VS();const P6=Eh($l);function Se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function IE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ks(...t){return e=>{let n=!1;const r=t.map(s=>{const i=IE(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():IE(t[s],null)}}}}function it(...t){return y.useCallback(Ks(...t),t)}function R6(t,e){const n=y.createContext(e),r=i=>{const{children:l,...u}=i,f=y.useMemo(()=>u,Object.values(u));return c.jsx(n.Provider,{value:f,children:l})};r.displayName=t+"Provider";function s(i){const l=y.useContext(n);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Mn(t,e=[]){let n=[];function r(i,l){const u=y.createContext(l),f=n.length;n=[...n,l];const h=p=>{var N;const{scope:x,children:w,...S}=p,v=((N=x==null?void 0:x[t])==null?void 0:N[f])||u,b=y.useMemo(()=>S,Object.values(S));return c.jsx(v.Provider,{value:b,children:w})};h.displayName=i+"Provider";function m(p,x){var v;const w=((v=x==null?void 0:x[t])==null?void 0:v[f])||u,S=y.useContext(w);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[h,m]}const s=()=>{const i=n.map(l=>y.createContext(l));return function(u){const f=(u==null?void 0:u[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...u,[t]:f}}),[u,f])}};return s.scopeName=t,[r,A6(s,...e)]}function A6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=r.reduce((u,{useScope:f,scopeName:h})=>{const p=f(i)[`__scope${h}`];return{...u,...p}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}function si(t){const e=M6(t),n=y.forwardRef((r,s)=>{const{children:i,...l}=r,u=y.Children.toArray(i),f=u.find(D6);if(f){const h=f.props.children,m=u.map(p=>p===f?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:p);return c.jsx(e,{...l,ref:s,children:y.isValidElement(h)?y.cloneElement(h,void 0,m):null})}return c.jsx(e,{...l,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var I6=si("Slot");function M6(t){const e=y.forwardRef((n,r)=>{const{children:s,...i}=n;if(y.isValidElement(s)){const l=$6(s),u=L6(i,s.props);return s.type!==y.Fragment&&(u.ref=r?Ks(r,l):l),y.cloneElement(s,u)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cC=Symbol("radix.slottable");function O6(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=cC,e}function D6(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cC}function L6(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...u)=>{i(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function $6(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Bh(t){const e=t+"CollectionProvider",[n,r]=Mn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=v=>{const{scope:b,children:N}=v,_=_e.useRef(null),T=_e.useRef(new Map).current;return c.jsx(s,{scope:b,itemMap:T,collectionRef:_,children:N})};l.displayName=e;const u=t+"CollectionSlot",f=si(u),h=_e.forwardRef((v,b)=>{const{scope:N,children:_}=v,T=i(u,N),M=it(b,T.collectionRef);return c.jsx(f,{ref:M,children:_})});h.displayName=u;const m=t+"CollectionItemSlot",p="data-radix-collection-item",x=si(m),w=_e.forwardRef((v,b)=>{const{scope:N,children:_,...T}=v,M=_e.useRef(null),D=it(b,M),B=i(m,N);return _e.useEffect(()=>(B.itemMap.set(M,{ref:M,...T}),()=>void B.itemMap.delete(M))),c.jsx(x,{[p]:"",ref:D,children:_})});w.displayName=m;function S(v){const b=i(t+"CollectionConsumer",v);return _e.useCallback(()=>{const _=b.collectionRef.current;if(!_)return[];const T=Array.from(_.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((B,O)=>T.indexOf(B.ref.current)-T.indexOf(O.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:h,ItemSlot:w},S,r]}var B6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=B6.reduce((t,e)=>{const n=si(`Primitive.${e}`),r=y.forwardRef((s,i)=>{const{asChild:l,...u}=s,f=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(f,{...u,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $0(t,e){t&&$l.flushSync(()=>t.dispatchEvent(e))}function Kt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function F6(t,e=globalThis==null?void 0:globalThis.document){const n=Kt(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var U6="DismissableLayer",hv="dismissableLayer.update",z6="dismissableLayer.pointerDownOutside",W6="dismissableLayer.focusOutside",ME,uC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),da=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:u,...f}=t,h=y.useContext(uC),[m,p]=y.useState(null),x=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=y.useState({}),S=it(e,O=>p(O)),v=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),N=v.indexOf(b),_=m?v.indexOf(m):-1,T=h.layersWithOutsidePointerEventsDisabled.size>0,M=_>=N,D=V6(O=>{const F=O.target,R=[...h.branches].some(L=>L.contains(F));!M||R||(s==null||s(O),l==null||l(O),O.defaultPrevented||u==null||u())},x),B=q6(O=>{const F=O.target;[...h.branches].some(L=>L.contains(F))||(i==null||i(O),l==null||l(O),O.defaultPrevented||u==null||u())},x);return F6(O=>{_===h.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&u&&(O.preventDefault(),u()))},x),y.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(ME=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),OE(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=ME)}},[m,x,n,h]),y.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),OE())},[m,h]),y.useEffect(()=>{const O=()=>w({});return document.addEventListener(hv,O),()=>document.removeEventListener(hv,O)},[]),c.jsx(Ae.div,{...f,ref:S,style:{pointerEvents:T?M?"auto":"none":void 0,...t.style},onFocusCapture:Se(t.onFocusCapture,B.onFocusCapture),onBlurCapture:Se(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Se(t.onPointerDownCapture,D.onPointerDownCapture)})});da.displayName=U6;var H6="DismissableLayerBranch",dC=y.forwardRef((t,e)=>{const n=y.useContext(uC),r=y.useRef(null),s=it(e,r);return y.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(Ae.div,{...t,ref:s})});dC.displayName=H6;function V6(t,e=globalThis==null?void 0:globalThis.document){const n=Kt(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let f=function(){fC(z6,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function q6(t,e=globalThis==null?void 0:globalThis.document){const n=Kt(t),r=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!r.current&&fC(W6,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function OE(){const t=new CustomEvent(hv);document.dispatchEvent(t)}function fC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$0(s,i):s.dispatchEvent(i)}var K6=da,G6=dC,Gt=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},Y6="Portal",Bl=y.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,i]=y.useState(!1);Gt(()=>i(!0),[]);const l=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?P6.createPortal(c.jsx(Ae.div,{...r,ref:e}),l):null});Bl.displayName=Y6;function Q6(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var vn=t=>{const{present:e,children:n}=t,r=Z6(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),i=it(r.ref,X6(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:i}):null};vn.displayName="Presence";function Z6(t){const[e,n]=y.useState(),r=y.useRef(null),s=y.useRef(t),i=y.useRef("none"),l=t?"mounted":"unmounted",[u,f]=Q6(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=af(r.current);i.current=u==="mounted"?h:"none"},[u]),Gt(()=>{const h=r.current,m=s.current;if(m!==t){const x=i.current,w=af(h);t?f("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?f("UNMOUNT"):f(m&&x!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,f]),Gt(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,p=w=>{const v=af(r.current).includes(w.animationName);if(w.target===e&&v&&(f("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},x=w=>{w.target===e&&(i.current=af(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:y.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function af(t){return(t==null?void 0:t.animationName)||"none"}function X6(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var J6=Jv[" useInsertionEffect ".trim().toString()]||Gt;function nr({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,l]=e8({defaultProp:e,onChange:n}),u=t!==void 0,f=u?t:s;{const m=y.useRef(t!==void 0);y.useEffect(()=>{const p=m.current;p!==u&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=y.useCallback(m=>{var p;if(u){const x=t8(m)?m(t):m;x!==t&&((p=l.current)==null||p.call(l,x))}else i(m)},[u,t,i,l]);return[f,h]}function e8({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),s=y.useRef(n),i=y.useRef(e);return J6(()=>{i.current=e},[e]),y.useEffect(()=>{var l;s.current!==n&&((l=i.current)==null||l.call(i,n),s.current=n)},[n,s]),[n,r,i]}function t8(t){return typeof t=="function"}var hC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),n8="VisuallyHidden",Fh=y.forwardRef((t,e)=>c.jsx(Ae.span,{...t,ref:e,style:{...hC,...t.style}}));Fh.displayName=n8;var r8=Fh,B0="ToastProvider",[F0,s8,o8]=Bh("Toast"),[pC,iG]=Mn("Toast",[o8]),[i8,Uh]=pC(B0),mC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=t,[u,f]=y.useState(null),[h,m]=y.useState(0),p=y.useRef(!1),x=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${B0}\`. Expected non-empty \`string\`.`),c.jsx(F0.Provider,{scope:e,children:c.jsx(i8,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:u,onViewportChange:f,onToastAdd:y.useCallback(()=>m(w=>w+1),[]),onToastRemove:y.useCallback(()=>m(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:x,children:l})})};mC.displayName=B0;var gC="ToastViewport",a8=["F8"],pv="toast.viewportPause",mv="toast.viewportResume",yC=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=a8,label:s="Notifications ({hotkey})",...i}=t,l=Uh(gC,n),u=s8(n),f=y.useRef(null),h=y.useRef(null),m=y.useRef(null),p=y.useRef(null),x=it(e,p,l.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=l.toastCount>0;y.useEffect(()=>{const b=N=>{var T;r.length!==0&&r.every(M=>N[M]||N.code===M)&&((T=p.current)==null||T.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),y.useEffect(()=>{const b=f.current,N=p.current;if(S&&b&&N){const _=()=>{if(!l.isClosePausedRef.current){const B=new CustomEvent(pv);N.dispatchEvent(B),l.isClosePausedRef.current=!0}},T=()=>{if(l.isClosePausedRef.current){const B=new CustomEvent(mv);N.dispatchEvent(B),l.isClosePausedRef.current=!1}},M=B=>{!b.contains(B.relatedTarget)&&T()},D=()=>{b.contains(document.activeElement)||T()};return b.addEventListener("focusin",_),b.addEventListener("focusout",M),b.addEventListener("pointermove",_),b.addEventListener("pointerleave",D),window.addEventListener("blur",_),window.addEventListener("focus",T),()=>{b.removeEventListener("focusin",_),b.removeEventListener("focusout",M),b.removeEventListener("pointermove",_),b.removeEventListener("pointerleave",D),window.removeEventListener("blur",_),window.removeEventListener("focus",T)}}},[S,l.isClosePausedRef]);const v=y.useCallback(({tabbingDirection:b})=>{const _=u().map(T=>{const M=T.ref.current,D=[M,...w8(M)];return b==="forwards"?D:D.reverse()});return(b==="forwards"?_.reverse():_).flat()},[u]);return y.useEffect(()=>{const b=p.current;if(b){const N=_=>{var D,B,O;const T=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!T){const F=document.activeElement,R=_.shiftKey;if(_.target===b&&R){(D=h.current)==null||D.focus();return}const U=v({tabbingDirection:R?"backwards":"forwards"}),K=U.findIndex(H=>H===F);Pg(U.slice(K+1))?_.preventDefault():R?(B=h.current)==null||B.focus():(O=m.current)==null||O.focus()}};return b.addEventListener("keydown",N),()=>b.removeEventListener("keydown",N)}},[u,v]),c.jsxs(G6,{ref:f,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&c.jsx(gv,{ref:h,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});Pg(b)}}),c.jsx(F0.Slot,{scope:n,children:c.jsx(Ae.ol,{tabIndex:-1,...i,ref:x})}),S&&c.jsx(gv,{ref:m,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});Pg(b)}})]})});yC.displayName=gC;var vC="ToastFocusProxy",gv=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Uh(vC,n);return c.jsx(Fh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var h;const u=l.relatedTarget;!((h=i.viewport)!=null&&h.contains(u))&&r()}})});gv.displayName=vC;var Au="Toast",l8="toast.swipeStart",c8="toast.swipeMove",u8="toast.swipeCancel",d8="toast.swipeEnd",xC=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...l}=t,[u,f]=nr({prop:r,defaultProp:s??!0,onChange:i,caller:Au});return c.jsx(vn,{present:n||u,children:c.jsx(p8,{open:u,...l,ref:e,onClose:()=>f(!1),onPause:Kt(t.onPause),onResume:Kt(t.onResume),onSwipeStart:Se(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(t.onSwipeMove,h=>{const{x:m,y:p}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:Se(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(t.onSwipeEnd,h=>{const{x:m,y:p}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),f(!1)})})})});xC.displayName=Au;var[f8,h8]=pC(Au,{onClose(){}}),p8=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:u,onPause:f,onResume:h,onSwipeStart:m,onSwipeMove:p,onSwipeCancel:x,onSwipeEnd:w,...S}=t,v=Uh(Au,n),[b,N]=y.useState(null),_=it(e,H=>N(H)),T=y.useRef(null),M=y.useRef(null),D=s||v.duration,B=y.useRef(0),O=y.useRef(D),F=y.useRef(0),{onToastAdd:R,onToastRemove:L}=v,A=Kt(()=>{var V;(b==null?void 0:b.contains(document.activeElement))&&((V=v.viewport)==null||V.focus()),l()}),U=y.useCallback(H=>{!H||H===1/0||(window.clearTimeout(F.current),B.current=new Date().getTime(),F.current=window.setTimeout(A,H))},[A]);y.useEffect(()=>{const H=v.viewport;if(H){const V=()=>{U(O.current),h==null||h()},Q=()=>{const te=new Date().getTime()-B.current;O.current=O.current-te,window.clearTimeout(F.current),f==null||f()};return H.addEventListener(pv,Q),H.addEventListener(mv,V),()=>{H.removeEventListener(pv,Q),H.removeEventListener(mv,V)}}},[v.viewport,D,f,h,U]),y.useEffect(()=>{i&&!v.isClosePausedRef.current&&U(D)},[i,D,v.isClosePausedRef,U]),y.useEffect(()=>(R(),()=>L()),[R,L]);const K=y.useMemo(()=>b?CC(b):null,[b]);return v.viewport?c.jsxs(c.Fragment,{children:[K&&c.jsx(m8,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),c.jsx(f8,{scope:n,onClose:A,children:$l.createPortal(c.jsx(F0.ItemSlot,{scope:n,children:c.jsx(K6,{asChild:!0,onEscapeKeyDown:Se(u,()=>{v.isFocusedToastEscapeKeyDownRef.current||A(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(Ae.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...S,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Se(t.onKeyDown,H=>{H.key==="Escape"&&(u==null||u(H.nativeEvent),H.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Se(t.onPointerDown,H=>{H.button===0&&(T.current={x:H.clientX,y:H.clientY})}),onPointerMove:Se(t.onPointerMove,H=>{if(!T.current)return;const V=H.clientX-T.current.x,Q=H.clientY-T.current.y,te=!!M.current,Z=["left","right"].includes(v.swipeDirection),G=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ne=Z?G(0,V):0,z=Z?0:G(0,Q),W=H.pointerType==="touch"?10:2,ae={x:ne,y:z},de={originalEvent:H,delta:ae};te?(M.current=ae,lf(c8,p,de,{discrete:!1})):DE(ae,v.swipeDirection,W)?(M.current=ae,lf(l8,m,de,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(V)>W||Math.abs(Q)>W)&&(T.current=null)}),onPointerUp:Se(t.onPointerUp,H=>{const V=M.current,Q=H.target;if(Q.hasPointerCapture(H.pointerId)&&Q.releasePointerCapture(H.pointerId),M.current=null,T.current=null,V){const te=H.currentTarget,Z={originalEvent:H,delta:V};DE(V,v.swipeDirection,v.swipeThreshold)?lf(d8,w,Z,{discrete:!0}):lf(u8,x,Z,{discrete:!0}),te.addEventListener("click",G=>G.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),m8=t=>{const{__scopeToast:e,children:n,...r}=t,s=Uh(Au,e),[i,l]=y.useState(!1),[u,f]=y.useState(!1);return v8(()=>l(!0)),y.useEffect(()=>{const h=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:c.jsx(Bl,{asChild:!0,children:c.jsx(Fh,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},g8="ToastTitle",wC=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(Ae.div,{...r,ref:e})});wC.displayName=g8;var y8="ToastDescription",bC=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(Ae.div,{...r,ref:e})});bC.displayName=y8;var EC="ToastAction",SC=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?c.jsx(kC,{altText:n,asChild:!0,children:c.jsx(U0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${EC}\`. Expected non-empty \`string\`.`),null)});SC.displayName=EC;var NC="ToastClose",U0=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=h8(NC,n);return c.jsx(kC,{asChild:!0,children:c.jsx(Ae.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,s.onClose)})})});U0.displayName=NC;var kC=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return c.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function CC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),x8(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...CC(r))}}),e}function lf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$0(s,i):s.dispatchEvent(i)}var DE=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function v8(t=()=>{}){const e=Kt(t);Gt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function x8(t){return t.nodeType===t.ELEMENT_NODE}function w8(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Pg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var b8=mC,jC=yC,_C=xC,TC=wC,PC=bC,RC=SC,AC=U0;function IC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=IC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function MC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=IC(t))&&(r&&(r+=" "),r+=e);return r}const LE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$E=MC,Fl=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $E(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,l=Object.keys(s).map(h=>{const m=n==null?void 0:n[h],p=i==null?void 0:i[h];if(m===null)return null;const x=LE(m)||LE(p);return s[h][x]}),u=n&&Object.entries(n).reduce((h,m)=>{let[p,x]=m;return x===void 0||(h[p]=x),h},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:p,className:x,...w}=m;return Object.entries(w).every(S=>{let[v,b]=S;return Array.isArray(b)?b.includes({...i,...u}[v]):{...i,...u}[v]===b})?[...h,p,x]:h},[]);return $E(t,l,f,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:l,...u},f)=>y.createElement("svg",{ref:f,...S8,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OC("lucide",s),...u},[...l.map(([h,m])=>y.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const n=y.forwardRef(({className:r,...s},i)=>y.createElement(N8,{ref:i,iconNode:e,className:OC(`lucide-${E8(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=We("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=We("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=We("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=We("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=We("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=We("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=We("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=We("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=We("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=We("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=We("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=We("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=We("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=We("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=We("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=We("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=We("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=We("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=We("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=We("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=We("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=We("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=We("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=We("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=We("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=We("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=We("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=We("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=We("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=We("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=We("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=We("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=We("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=We("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=We("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=We("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=We("Sparkle",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=We("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=We("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=We("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=We("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=We("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=We("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=We("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=We("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=We("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=We("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=We("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=We("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=We("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=We("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),q0="-",Y8=t=>{const e=Z8(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const u=l.split(q0);return u[0]===""&&u.length!==1&&u.shift(),HC(u,e)||Q8(l)},getConflictingClassGroupIds:(l,u)=>{const f=n[l]||[];return u&&r[l]?[...f,...r[l]]:f}}},HC=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?HC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(q0);return(l=e.validators.find(({validator:u})=>u(i)))==null?void 0:l.classGroupId},WE=/^\[(.+)\]$/,Q8=t=>{if(WE.test(t)){const e=WE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Z8=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return J8(Object.entries(t.classGroups),n).forEach(([i,l])=>{Ev(l,r,i,e)}),r},Ev=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:HE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(X8(s)){Ev(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,l])=>{Ev(l,HE(e,i),n,r)})})},HE=(t,e)=>{let n=t;return e.split(q0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},X8=t=>t.isThemeGetter,J8=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,u])=>[e+l,u])):i);return[n,s]}):t,e$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,l)=>{n.set(i,l),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return s(i,l),l},set(i,l){n.has(i)?n.set(i,l):s(i,l)}}},VC="!",t$=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,l=u=>{const f=[];let h=0,m=0,p;for(let b=0;b<u.length;b++){let N=u[b];if(h===0){if(N===s&&(r||u.slice(b,b+i)===e)){f.push(u.slice(m,b)),m=b+i;continue}if(N==="/"){p=b;continue}}N==="["?h++:N==="]"&&h--}const x=f.length===0?u:u.substring(m),w=x.startsWith(VC),S=w?x.substring(1):x,v=p&&p>m?p-m:void 0;return{modifiers:f,hasImportantModifier:w,baseClassName:S,maybePostfixModifierPosition:v}};return n?u=>n({className:u,parseClassName:l}):l},n$=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},r$=t=>({cache:e$(t.cacheSize),parseClassName:t$(t),...Y8(t)}),s$=/\s+/,o$=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],l=t.trim().split(s$);let u="";for(let f=l.length-1;f>=0;f-=1){const h=l[f],{modifiers:m,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:w}=n(h);let S=!!w,v=r(S?x.substring(0,w):x);if(!v){if(!S){u=h+(u.length>0?" "+u:u);continue}if(v=r(x),!v){u=h+(u.length>0?" "+u:u);continue}S=!1}const b=n$(m).join(":"),N=p?b+VC:b,_=N+v;if(i.includes(_))continue;i.push(_);const T=s(v,S);for(let M=0;M<T.length;++M){const D=T[M];i.push(N+D)}u=h+(u.length>0?" "+u:u)}return u};function i$(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=qC(e))&&(r&&(r+=" "),r+=n);return r}const qC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=qC(t[r]))&&(n&&(n+=" "),n+=e);return n};function a$(t,...e){let n,r,s,i=l;function l(f){const h=e.reduce((m,p)=>p(m),t());return n=r$(h),r=n.cache.get,s=n.cache.set,i=u,u(f)}function u(f){const h=r(f);if(h)return h;const m=o$(f,n);return s(f,m),m}return function(){return i(i$.apply(null,arguments))}}const Dt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},KC=/^\[(?:([a-z-]+):)?(.+)\]$/i,l$=/^\d+\/\d+$/,c$=new Set(["px","full","screen"]),u$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,h$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rs=t=>Ja(t)||c$.has(t)||l$.test(t),jo=t=>Ul(t,"length",E$),Ja=t=>!!t&&!Number.isNaN(Number(t)),Rg=t=>Ul(t,"number",Ja),Dc=t=>!!t&&Number.isInteger(Number(t)),m$=t=>t.endsWith("%")&&Ja(t.slice(0,-1)),lt=t=>KC.test(t),_o=t=>u$.test(t),g$=new Set(["length","size","percentage"]),y$=t=>Ul(t,g$,GC),v$=t=>Ul(t,"position",GC),x$=new Set(["image","url"]),w$=t=>Ul(t,x$,N$),b$=t=>Ul(t,"",S$),Lc=()=>!0,Ul=(t,e,n)=>{const r=KC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},E$=t=>d$.test(t)&&!f$.test(t),GC=()=>!1,S$=t=>h$.test(t),N$=t=>p$.test(t),k$=()=>{const t=Dt("colors"),e=Dt("spacing"),n=Dt("blur"),r=Dt("brightness"),s=Dt("borderColor"),i=Dt("borderRadius"),l=Dt("borderSpacing"),u=Dt("borderWidth"),f=Dt("contrast"),h=Dt("grayscale"),m=Dt("hueRotate"),p=Dt("invert"),x=Dt("gap"),w=Dt("gradientColorStops"),S=Dt("gradientColorStopPositions"),v=Dt("inset"),b=Dt("margin"),N=Dt("opacity"),_=Dt("padding"),T=Dt("saturate"),M=Dt("scale"),D=Dt("sepia"),B=Dt("skew"),O=Dt("space"),F=Dt("translate"),R=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",lt,e],U=()=>[lt,e],K=()=>["",Rs,jo],H=()=>["auto",Ja,lt],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",lt],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[Ja,lt];return{cacheSize:500,separator:":",theme:{colors:[Lc],spacing:[Rs,jo],blur:["none","",_o,lt],brightness:z(),borderColor:[t],borderRadius:["none","","full",_o,lt],borderSpacing:U(),borderWidth:K(),contrast:z(),grayscale:G(),hueRotate:z(),invert:G(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[m$,jo],inset:A(),margin:A(),opacity:z(),padding:U(),saturate:z(),scale:z(),sepia:G(),skew:z(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",lt]}],container:["container"],columns:[{columns:[_o]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),lt]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dc,lt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",lt]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",Dc,lt]}],"grid-cols":[{"grid-cols":[Lc]}],"col-start-end":[{col:["auto",{span:["full",Dc,lt]},lt]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Lc]}],"row-start-end":[{row:["auto",{span:[Dc,lt]},lt]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",lt]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",lt,e]}],"min-w":[{"min-w":[lt,e,"min","max","fit"]}],"max-w":[{"max-w":[lt,e,"none","full","min","max","fit","prose",{screen:[_o]},_o]}],h:[{h:[lt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[lt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",_o,jo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Rg]}],"font-family":[{font:[Lc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",lt]}],"line-clamp":[{"line-clamp":["none",Ja,Rg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rs,lt]}],"list-image":[{"list-image":["none",lt]}],"list-style-type":[{list:["none","disc","decimal",lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rs,jo]}],"underline-offset":[{"underline-offset":["auto",Rs,lt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),v$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",y$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},w$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Rs,lt]}],"outline-w":[{outline:[Rs,jo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Rs,jo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",_o,b$]}],"shadow-color":[{shadow:[Lc]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",_o,lt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[p]}],saturate:[{saturate:[T]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",lt]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",lt]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Dc,lt]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",lt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rs,jo,Rg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},C$=a$(k$);function xe(...t){return C$(MC(t))}const j$=b8,YC=y.forwardRef(({className:t,...e},n)=>c.jsx(jC,{ref:n,className:xe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));YC.displayName=jC.displayName;const _$=Fl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),QC=y.forwardRef(({className:t,variant:e,...n},r)=>c.jsx(_C,{ref:r,className:xe(_$({variant:e}),t),...n}));QC.displayName=_C.displayName;const T$=y.forwardRef(({className:t,...e},n)=>c.jsx(RC,{ref:n,className:xe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));T$.displayName=RC.displayName;const ZC=y.forwardRef(({className:t,...e},n)=>c.jsx(AC,{ref:n,className:xe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(qh,{className:"h-4 w-4"})}));ZC.displayName=AC.displayName;const XC=y.forwardRef(({className:t,...e},n)=>c.jsx(TC,{ref:n,className:xe("text-sm font-semibold",t),...e}));XC.displayName=TC.displayName;const JC=y.forwardRef(({className:t,...e},n)=>c.jsx(PC,{ref:n,className:xe("text-sm opacity-90",t),...e}));JC.displayName=PC.displayName;function P$(){const{toasts:t}=ui();return c.jsxs(j$,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return c.jsxs(QC,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(XC,{children:n}),r&&c.jsx(JC,{children:r})]}),s,c.jsx(ZC,{})]},e)}),c.jsx(YC,{})]})}var R$=Jv[" useId ".trim().toString()]||(()=>{}),A$=0;function dn(t){const[e,n]=y.useState(R$());return Gt(()=>{n(r=>r??String(A$++))},[t]),e?`radix-${e}`:""}const I$=["top","right","bottom","left"],oi=Math.min,cr=Math.max,Qf=Math.round,cf=Math.floor,ys=t=>({x:t,y:t}),M$={left:"right",right:"left",bottom:"top",top:"bottom"},O$={start:"end",end:"start"};function Sv(t,e,n){return cr(t,oi(e,n))}function Gs(t,e){return typeof t=="function"?t(e):t}function Ys(t){return t.split("-")[0]}function zl(t){return t.split("-")[1]}function K0(t){return t==="x"?"y":"x"}function G0(t){return t==="y"?"height":"width"}function Ws(t){return["top","bottom"].includes(Ys(t))?"y":"x"}function Y0(t){return K0(Ws(t))}function D$(t,e,n){n===void 0&&(n=!1);const r=zl(t),s=Y0(t),i=G0(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=Zf(l)),[l,Zf(l)]}function L$(t){const e=Zf(t);return[Nv(t),e,Nv(e)]}function Nv(t){return t.replace(/start|end/g,e=>O$[e])}function $$(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:l;default:return[]}}function B$(t,e,n,r){const s=zl(t);let i=$$(Ys(t),n==="start",r);return s&&(i=i.map(l=>l+"-"+s),e&&(i=i.concat(i.map(Nv)))),i}function Zf(t){return t.replace(/left|right|bottom|top/g,e=>M$[e])}function F$(t){return{top:0,right:0,bottom:0,left:0,...t}}function ej(t){return typeof t!="number"?F$(t):{top:t,right:t,bottom:t,left:t}}function Xf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function VE(t,e,n){let{reference:r,floating:s}=t;const i=Ws(e),l=Y0(e),u=G0(l),f=Ys(e),h=i==="y",m=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,x=r[u]/2-s[u]/2;let w;switch(f){case"top":w={x:m,y:r.y-s.height};break;case"bottom":w={x:m,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:p};break;case"left":w={x:r.x-s.width,y:p};break;default:w={x:r.x,y:r.y}}switch(zl(e)){case"start":w[l]-=x*(n&&h?-1:1);break;case"end":w[l]+=x*(n&&h?-1:1);break}return w}const U$=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:l}=n,u=i.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:s}),{x:m,y:p}=VE(h,r,f),x=r,w={},S=0;for(let v=0;v<u.length;v++){const{name:b,fn:N}=u[v],{x:_,y:T,data:M,reset:D}=await N({x:m,y:p,initialPlacement:r,placement:x,strategy:s,middlewareData:w,rects:h,platform:l,elements:{reference:t,floating:e}});m=_??m,p=T??p,w={...w,[b]:{...w[b],...M}},D&&S<=50&&(S++,typeof D=="object"&&(D.placement&&(x=D.placement),D.rects&&(h=D.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:m,y:p}=VE(h,x,f)),v=-1)}return{x:m,y:p,placement:x,strategy:s,middlewareData:w}};async function fu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:l,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:x=!1,padding:w=0}=Gs(e,t),S=ej(w),b=u[x?p==="floating"?"reference":"floating":p],N=Xf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:h,rootBoundary:m,strategy:f})),_=p==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),M=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},D=Xf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:T,strategy:f}):_);return{top:(N.top-D.top+S.top)/M.y,bottom:(D.bottom-N.bottom+S.bottom)/M.y,left:(N.left-D.left+S.left)/M.x,right:(D.right-N.right+S.right)/M.x}}const z$=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:l,elements:u,middlewareData:f}=e,{element:h,padding:m=0}=Gs(t,e)||{};if(h==null)return{};const p=ej(m),x={x:n,y:r},w=Y0(s),S=G0(w),v=await l.getDimensions(h),b=w==="y",N=b?"top":"left",_=b?"bottom":"right",T=b?"clientHeight":"clientWidth",M=i.reference[S]+i.reference[w]-x[w]-i.floating[S],D=x[w]-i.reference[w],B=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let O=B?B[T]:0;(!O||!await(l.isElement==null?void 0:l.isElement(B)))&&(O=u.floating[T]||i.floating[S]);const F=M/2-D/2,R=O/2-v[S]/2-1,L=oi(p[N],R),A=oi(p[_],R),U=L,K=O-v[S]-A,H=O/2-v[S]/2+F,V=Sv(U,H,K),Q=!f.arrow&&zl(s)!=null&&H!==V&&i.reference[S]/2-(H<U?L:A)-v[S]/2<0,te=Q?H<U?H-U:H-K:0;return{[w]:x[w]+te,data:{[w]:V,centerOffset:H-V-te,...Q&&{alignmentOffset:te}},reset:Q}}}),W$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:l,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:x,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:v=!0,...b}=Gs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const N=Ys(s),_=Ws(u),T=Ys(u)===u,M=await(f.isRTL==null?void 0:f.isRTL(h.floating)),D=x||(T||!v?[Zf(u)]:L$(u)),B=S!=="none";!x&&B&&D.push(...B$(u,v,S,M));const O=[u,...D],F=await fu(e,b),R=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&R.push(F[N]),p){const V=D$(s,l,M);R.push(F[V[0]],F[V[1]])}if(L=[...L,{placement:s,overflows:R}],!R.every(V=>V<=0)){var A,U;const V=(((A=i.flip)==null?void 0:A.index)||0)+1,Q=O[V];if(Q){var K;const Z=p==="alignment"?_!==Ws(Q):!1,G=((K=L[0])==null?void 0:K.overflows[0])>0;if(!Z||G)return{data:{index:V,overflows:L},reset:{placement:Q}}}let te=(U=L.filter(Z=>Z.overflows[0]<=0).sort((Z,G)=>Z.overflows[1]-G.overflows[1])[0])==null?void 0:U.placement;if(!te)switch(w){case"bestFit":{var H;const Z=(H=L.filter(G=>{if(B){const ne=Ws(G.placement);return ne===_||ne==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(ne=>ne>0).reduce((ne,z)=>ne+z,0)]).sort((G,ne)=>G[1]-ne[1])[0])==null?void 0:H[0];Z&&(te=Z);break}case"initialPlacement":te=u;break}if(s!==te)return{reset:{placement:te}}}return{}}}};function qE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KE(t){return I$.some(e=>t[e]>=0)}const H$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Gs(t,e);switch(r){case"referenceHidden":{const i=await fu(e,{...s,elementContext:"reference"}),l=qE(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:KE(l)}}}case"escaped":{const i=await fu(e,{...s,altBoundary:!0}),l=qE(i,n.floating);return{data:{escapedOffsets:l,escaped:KE(l)}}}default:return{}}}}};async function V$(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=Ys(n),u=zl(n),f=Ws(n)==="y",h=["left","top"].includes(l)?-1:1,m=i&&f?-1:1,p=Gs(e,t);let{mainAxis:x,crossAxis:w,alignmentAxis:S}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof S=="number"&&(w=u==="end"?S*-1:S),f?{x:w*m,y:x*h}:{x:x*h,y:w*m}}const q$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:l,middlewareData:u}=e,f=await V$(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:i+f.y,data:{...f,placement:l}}}}},K$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:u={fn:b=>{let{x:N,y:_}=b;return{x:N,y:_}}},...f}=Gs(t,e),h={x:n,y:r},m=await fu(e,f),p=Ws(Ys(s)),x=K0(p);let w=h[x],S=h[p];if(i){const b=x==="y"?"top":"left",N=x==="y"?"bottom":"right",_=w+m[b],T=w-m[N];w=Sv(_,w,T)}if(l){const b=p==="y"?"top":"left",N=p==="y"?"bottom":"right",_=S+m[b],T=S-m[N];S=Sv(_,S,T)}const v=u.fn({...e,[x]:w,[p]:S});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[x]:i,[p]:l}}}}}},G$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:l}=e,{offset:u=0,mainAxis:f=!0,crossAxis:h=!0}=Gs(t,e),m={x:n,y:r},p=Ws(s),x=K0(p);let w=m[x],S=m[p];const v=Gs(u,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(f){const T=x==="y"?"height":"width",M=i.reference[x]-i.floating[T]+b.mainAxis,D=i.reference[x]+i.reference[T]-b.mainAxis;w<M?w=M:w>D&&(w=D)}if(h){var N,_;const T=x==="y"?"width":"height",M=["top","left"].includes(Ys(s)),D=i.reference[p]-i.floating[T]+(M&&((N=l.offset)==null?void 0:N[p])||0)+(M?0:b.crossAxis),B=i.reference[p]+i.reference[T]+(M?0:((_=l.offset)==null?void 0:_[p])||0)-(M?b.crossAxis:0);S<D?S=D:S>B&&(S=B)}return{[x]:w,[p]:S}}}},Y$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:l,elements:u}=e,{apply:f=()=>{},...h}=Gs(t,e),m=await fu(e,h),p=Ys(s),x=zl(s),w=Ws(s)==="y",{width:S,height:v}=i.floating;let b,N;p==="top"||p==="bottom"?(b=p,N=x===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(N=p,b=x==="end"?"top":"bottom");const _=v-m.top-m.bottom,T=S-m.left-m.right,M=oi(v-m[b],_),D=oi(S-m[N],T),B=!e.middlewareData.shift;let O=M,F=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(F=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(O=_),B&&!x){const L=cr(m.left,0),A=cr(m.right,0),U=cr(m.top,0),K=cr(m.bottom,0);w?F=S-2*(L!==0||A!==0?L+A:cr(m.left,m.right)):O=v-2*(U!==0||K!==0?U+K:cr(m.top,m.bottom))}await f({...e,availableWidth:F,availableHeight:O});const R=await l.getDimensions(u.floating);return S!==R.width||v!==R.height?{reset:{rects:!0}}:{}}}};function Kh(){return typeof window<"u"}function Wl(t){return tj(t)?(t.nodeName||"").toLowerCase():"#document"}function ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ws(t){var e;return(e=(tj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tj(t){return Kh()?t instanceof Node||t instanceof ur(t).Node:!1}function zr(t){return Kh()?t instanceof Element||t instanceof ur(t).Element:!1}function xs(t){return Kh()?t instanceof HTMLElement||t instanceof ur(t).HTMLElement:!1}function GE(t){return!Kh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ur(t).ShadowRoot}function Iu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Wr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function Q$(t){return["table","td","th"].includes(Wl(t))}function Gh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Q0(t){const e=Z0(),n=zr(t)?Wr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Z$(t){let e=ii(t);for(;xs(e)&&!jl(e);){if(Q0(e))return e;if(Gh(e))return null;e=ii(e)}return null}function Z0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function jl(t){return["html","body","#document"].includes(Wl(t))}function Wr(t){return ur(t).getComputedStyle(t)}function Yh(t){return zr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ii(t){if(Wl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||GE(t)&&t.host||ws(t);return GE(e)?e.host:e}function nj(t){const e=ii(t);return jl(e)?t.ownerDocument?t.ownerDocument.body:t.body:xs(e)&&Iu(e)?e:nj(e)}function hu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=nj(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),l=ur(s);if(i){const u=kv(l);return e.concat(l,l.visualViewport||[],Iu(s)?s:[],u&&n?hu(u):[])}return e.concat(s,hu(s,[],n))}function kv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function rj(t){const e=Wr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=xs(t),i=s?t.offsetWidth:n,l=s?t.offsetHeight:r,u=Qf(n)!==i||Qf(r)!==l;return u&&(n=i,r=l),{width:n,height:r,$:u}}function X0(t){return zr(t)?t:t.contextElement}function el(t){const e=X0(t);if(!xs(e))return ys(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=rj(e);let l=(i?Qf(n.width):n.width)/r,u=(i?Qf(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const X$=ys(0);function sj(t){const e=ur(t);return!Z0()||!e.visualViewport?X$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function J$(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ur(t)?!1:e}function ra(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=X0(t);let l=ys(1);e&&(r?zr(r)&&(l=el(r)):l=el(t));const u=J$(i,n,r)?sj(i):ys(0);let f=(s.left+u.x)/l.x,h=(s.top+u.y)/l.y,m=s.width/l.x,p=s.height/l.y;if(i){const x=ur(i),w=r&&zr(r)?ur(r):r;let S=x,v=kv(S);for(;v&&r&&w!==S;){const b=el(v),N=v.getBoundingClientRect(),_=Wr(v),T=N.left+(v.clientLeft+parseFloat(_.paddingLeft))*b.x,M=N.top+(v.clientTop+parseFloat(_.paddingTop))*b.y;f*=b.x,h*=b.y,m*=b.x,p*=b.y,f+=T,h+=M,S=ur(v),v=kv(S)}}return Xf({width:m,height:p,x:f,y:h})}function J0(t,e){const n=Yh(t).scrollLeft;return e?e.left+n:ra(ws(t)).left+n}function oj(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:J0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function eB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",l=ws(r),u=e?Gh(e.floating):!1;if(r===l||u&&i)return n;let f={scrollLeft:0,scrollTop:0},h=ys(1);const m=ys(0),p=xs(r);if((p||!p&&!i)&&((Wl(r)!=="body"||Iu(l))&&(f=Yh(r)),xs(r))){const w=ra(r);h=el(r),m.x=w.x+r.clientLeft,m.y=w.y+r.clientTop}const x=l&&!p&&!i?oj(l,f,!0):ys(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+m.x+x.x,y:n.y*h.y-f.scrollTop*h.y+m.y+x.y}}function tB(t){return Array.from(t.getClientRects())}function nB(t){const e=ws(t),n=Yh(t),r=t.ownerDocument.body,s=cr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=cr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+J0(t);const u=-n.scrollTop;return Wr(r).direction==="rtl"&&(l+=cr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:l,y:u}}function rB(t,e){const n=ur(t),r=ws(t),s=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,u=0,f=0;if(s){i=s.width,l=s.height;const h=Z0();(!h||h&&e==="fixed")&&(u=s.offsetLeft,f=s.offsetTop)}return{width:i,height:l,x:u,y:f}}function sB(t,e){const n=ra(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=xs(t)?el(t):ys(1),l=t.clientWidth*i.x,u=t.clientHeight*i.y,f=s*i.x,h=r*i.y;return{width:l,height:u,x:f,y:h}}function YE(t,e,n){let r;if(e==="viewport")r=rB(t,n);else if(e==="document")r=nB(ws(t));else if(zr(e))r=sB(e,n);else{const s=sj(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Xf(r)}function ij(t,e){const n=ii(t);return n===e||!zr(n)||jl(n)?!1:Wr(n).position==="fixed"||ij(n,e)}function oB(t,e){const n=e.get(t);if(n)return n;let r=hu(t,[],!1).filter(u=>zr(u)&&Wl(u)!=="body"),s=null;const i=Wr(t).position==="fixed";let l=i?ii(t):t;for(;zr(l)&&!jl(l);){const u=Wr(l),f=Q0(l);!f&&u.position==="fixed"&&(s=null),(i?!f&&!s:!f&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Iu(l)&&!f&&ij(t,l))?r=r.filter(m=>m!==l):s=u,l=ii(l)}return e.set(t,r),r}function iB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const l=[...n==="clippingAncestors"?Gh(e)?[]:oB(e,this._c):[].concat(n),r],u=l[0],f=l.reduce((h,m)=>{const p=YE(e,m,s);return h.top=cr(p.top,h.top),h.right=oi(p.right,h.right),h.bottom=oi(p.bottom,h.bottom),h.left=cr(p.left,h.left),h},YE(e,u,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function aB(t){const{width:e,height:n}=rj(t);return{width:e,height:n}}function lB(t,e,n){const r=xs(e),s=ws(e),i=n==="fixed",l=ra(t,!0,i,e);let u={scrollLeft:0,scrollTop:0};const f=ys(0);function h(){f.x=J0(s)}if(r||!r&&!i)if((Wl(e)!=="body"||Iu(s))&&(u=Yh(e)),r){const w=ra(e,!0,i,e);f.x=w.x+e.clientLeft,f.y=w.y+e.clientTop}else s&&h();i&&!r&&s&&h();const m=s&&!r&&!i?oj(s,u):ys(0),p=l.left+u.scrollLeft-f.x-m.x,x=l.top+u.scrollTop-f.y-m.y;return{x:p,y:x,width:l.width,height:l.height}}function Ag(t){return Wr(t).position==="static"}function QE(t,e){if(!xs(t)||Wr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ws(t)===n&&(n=n.ownerDocument.body),n}function aj(t,e){const n=ur(t);if(Gh(t))return n;if(!xs(t)){let s=ii(t);for(;s&&!jl(s);){if(zr(s)&&!Ag(s))return s;s=ii(s)}return n}let r=QE(t,e);for(;r&&Q$(r)&&Ag(r);)r=QE(r,e);return r&&jl(r)&&Ag(r)&&!Q0(r)?n:r||Z$(t)||n}const cB=async function(t){const e=this.getOffsetParent||aj,n=this.getDimensions,r=await n(t.floating);return{reference:lB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uB(t){return Wr(t).direction==="rtl"}const dB={convertOffsetParentRelativeRectToViewportRelativeRect:eB,getDocumentElement:ws,getClippingRect:iB,getOffsetParent:aj,getElementRects:cB,getClientRects:tB,getDimensions:aB,getScale:el,isElement:zr,isRTL:uB};function lj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function fB(t,e){let n=null,r;const s=ws(t);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),i();const h=t.getBoundingClientRect(),{left:m,top:p,width:x,height:w}=h;if(u||e(),!x||!w)return;const S=cf(p),v=cf(s.clientWidth-(m+x)),b=cf(s.clientHeight-(p+w)),N=cf(m),T={rootMargin:-S+"px "+-v+"px "+-b+"px "+-N+"px",threshold:cr(0,oi(1,f))||1};let M=!0;function D(B){const O=B[0].intersectionRatio;if(O!==f){if(!M)return l();O?l(!1,O):r=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!lj(h,t.getBoundingClientRect())&&l(),M=!1}try{n=new IntersectionObserver(D,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,T)}n.observe(t)}return l(!0),i}function hB(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,h=X0(t),m=s||i?[...h?hu(h):[],...hu(e)]:[];m.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),i&&N.addEventListener("resize",n)});const p=h&&u?fB(h,n):null;let x=-1,w=null;l&&(w=new ResizeObserver(N=>{let[_]=N;_&&_.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var T;(T=w)==null||T.observe(e)})),n()}),h&&!f&&w.observe(h),w.observe(e));let S,v=f?ra(t):null;f&&b();function b(){const N=ra(t);v&&!lj(v,N)&&n(),v=N,S=requestAnimationFrame(b)}return n(),()=>{var N;m.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),p==null||p(),(N=w)==null||N.disconnect(),w=null,f&&cancelAnimationFrame(S)}}const pB=q$,mB=K$,gB=W$,yB=Y$,vB=H$,ZE=z$,xB=G$,wB=(t,e,n)=>{const r=new Map,s={platform:dB,...n},i={...s.platform,_c:r};return U$(t,e,{...s,platform:i})};var jf=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Jf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Jf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Jf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function cj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function XE(t,e){const n=cj(t);return Math.round(e*n)/n}function Ig(t){const e=y.useRef(t);return jf(()=>{e.current=t}),e}function bB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:l}={},transform:u=!0,whileElementsMounted:f,open:h}=t,[m,p]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[x,w]=y.useState(r);Jf(x,r)||w(r);const[S,v]=y.useState(null),[b,N]=y.useState(null),_=y.useCallback(Z=>{Z!==B.current&&(B.current=Z,v(Z))},[]),T=y.useCallback(Z=>{Z!==O.current&&(O.current=Z,N(Z))},[]),M=i||S,D=l||b,B=y.useRef(null),O=y.useRef(null),F=y.useRef(m),R=f!=null,L=Ig(f),A=Ig(s),U=Ig(h),K=y.useCallback(()=>{if(!B.current||!O.current)return;const Z={placement:e,strategy:n,middleware:x};A.current&&(Z.platform=A.current),wB(B.current,O.current,Z).then(G=>{const ne={...G,isPositioned:U.current!==!1};H.current&&!Jf(F.current,ne)&&(F.current=ne,$l.flushSync(()=>{p(ne)}))})},[x,e,n,A,U]);jf(()=>{h===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,p(Z=>({...Z,isPositioned:!1})))},[h]);const H=y.useRef(!1);jf(()=>(H.current=!0,()=>{H.current=!1}),[]),jf(()=>{if(M&&(B.current=M),D&&(O.current=D),M&&D){if(L.current)return L.current(M,D,K);K()}},[M,D,K,L,R]);const V=y.useMemo(()=>({reference:B,floating:O,setReference:_,setFloating:T}),[_,T]),Q=y.useMemo(()=>({reference:M,floating:D}),[M,D]),te=y.useMemo(()=>{const Z={position:n,left:0,top:0};if(!Q.floating)return Z;const G=XE(Q.floating,m.x),ne=XE(Q.floating,m.y);return u?{...Z,transform:"translate("+G+"px, "+ne+"px)",...cj(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:ne}},[n,u,Q.floating,m.x,m.y]);return y.useMemo(()=>({...m,update:K,refs:V,elements:Q,floatingStyles:te}),[m,K,V,Q,te])}const EB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ZE({element:r.current,padding:s}).fn(n):{}:r?ZE({element:r,padding:s}).fn(n):{}}}},SB=(t,e)=>({...pB(t),options:[t,e]}),NB=(t,e)=>({...mB(t),options:[t,e]}),kB=(t,e)=>({...xB(t),options:[t,e]}),CB=(t,e)=>({...gB(t),options:[t,e]}),jB=(t,e)=>({...yB(t),options:[t,e]}),_B=(t,e)=>({...vB(t),options:[t,e]}),TB=(t,e)=>({...EB(t),options:[t,e]});var PB="Arrow",uj=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return c.jsx(Ae.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});uj.displayName=PB;var RB=uj;function dj(t){const[e,n]=y.useState(void 0);return Gt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,u;if("borderBoxSize"in i){const f=i.borderBoxSize,h=Array.isArray(f)?f[0]:f;l=h.inlineSize,u=h.blockSize}else l=t.offsetWidth,u=t.offsetHeight;n({width:l,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var ex="Popper",[fj,di]=Mn(ex),[AB,hj]=fj(ex),pj=t=>{const{__scopePopper:e,children:n}=t,[r,s]=y.useState(null);return c.jsx(AB,{scope:e,anchor:r,onAnchorChange:s,children:n})};pj.displayName=ex;var mj="PopperAnchor",gj=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=hj(mj,n),l=y.useRef(null),u=it(e,l);return y.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:c.jsx(Ae.div,{...s,ref:u})});gj.displayName=mj;var tx="PopperContent",[IB,MB]=fj(tx),yj=y.forwardRef((t,e)=>{var ce,ge,be,De,Ze,Qe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:x=!1,updatePositionStrategy:w="optimized",onPlaced:S,...v}=t,b=hj(tx,n),[N,_]=y.useState(null),T=it(e,Te=>_(Te)),[M,D]=y.useState(null),B=dj(M),O=(B==null?void 0:B.width)??0,F=(B==null?void 0:B.height)??0,R=r+(i!=="center"?"-"+i:""),L=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},A=Array.isArray(h)?h:[h],U=A.length>0,K={padding:L,boundary:A.filter(DB),altBoundary:U},{refs:H,floatingStyles:V,placement:Q,isPositioned:te,middlewareData:Z}=bB({strategy:"fixed",placement:R,whileElementsMounted:(...Te)=>hB(...Te,{animationFrame:w==="always"}),elements:{reference:b.anchor},middleware:[SB({mainAxis:s+F,alignmentAxis:l}),f&&NB({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?kB():void 0,...K}),f&&CB({...K}),jB({...K,apply:({elements:Te,rects:yt,availableWidth:tn,availableHeight:nn})=>{const{width:xn,height:Gr}=yt.reference,le=Te.floating.style;le.setProperty("--radix-popper-available-width",`${tn}px`),le.setProperty("--radix-popper-available-height",`${nn}px`),le.setProperty("--radix-popper-anchor-width",`${xn}px`),le.setProperty("--radix-popper-anchor-height",`${Gr}px`)}}),M&&TB({element:M,padding:u}),LB({arrowWidth:O,arrowHeight:F}),x&&_B({strategy:"referenceHidden",...K})]}),[G,ne]=wj(Q),z=Kt(S);Gt(()=>{te&&(z==null||z())},[te,z]);const W=(ce=Z.arrow)==null?void 0:ce.x,ae=(ge=Z.arrow)==null?void 0:ge.y,de=((be=Z.arrow)==null?void 0:be.centerOffset)!==0,[fe,we]=y.useState();return Gt(()=>{N&&we(window.getComputedStyle(N).zIndex)},[N]),c.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:te?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(De=Z.transformOrigin)==null?void 0:De.x,(Ze=Z.transformOrigin)==null?void 0:Ze.y].join(" "),...((Qe=Z.hide)==null?void 0:Qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(IB,{scope:n,placedSide:G,onArrowChange:D,arrowX:W,arrowY:ae,shouldHideArrow:de,children:c.jsx(Ae.div,{"data-side":G,"data-align":ne,...v,ref:T,style:{...v.style,animation:te?void 0:"none"}})})})});yj.displayName=tx;var vj="PopperArrow",OB={top:"bottom",right:"left",bottom:"top",left:"right"},xj=y.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=MB(vj,r),l=OB[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(RB,{...s,ref:n,style:{...s.style,display:"block"}})})});xj.displayName=vj;function DB(t){return t!==null}var LB=t=>({name:"transformOrigin",options:t,fn(e){var b,N,_;const{placement:n,rects:r,middlewareData:s}=e,l=((b=s.arrow)==null?void 0:b.centerOffset)!==0,u=l?0:t.arrowWidth,f=l?0:t.arrowHeight,[h,m]=wj(n),p={start:"0%",center:"50%",end:"100%"}[m],x=(((N=s.arrow)==null?void 0:N.x)??0)+u/2,w=(((_=s.arrow)==null?void 0:_.y)??0)+f/2;let S="",v="";return h==="bottom"?(S=l?p:`${x}px`,v=`${-f}px`):h==="top"?(S=l?p:`${x}px`,v=`${r.floating.height+f}px`):h==="right"?(S=`${-f}px`,v=l?p:`${w}px`):h==="left"&&(S=`${r.floating.width+f}px`,v=l?p:`${w}px`),{data:{x:S,y:v}}}});function wj(t){const[e,n="center"]=t.split("-");return[e,n]}var Qh=pj,Mu=gj,Zh=yj,Xh=xj,[Jh,aG]=Mn("Tooltip",[di]),ep=di(),bj="TooltipProvider",$B=700,Cv="tooltip.open",[BB,nx]=Jh(bj),Ej=t=>{const{__scopeTooltip:e,delayDuration:n=$B,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,l=y.useRef(!0),u=y.useRef(!1),f=y.useRef(0);return y.useEffect(()=>{const h=f.current;return()=>window.clearTimeout(h)},[]),c.jsx(BB,{scope:e,isOpenDelayedRef:l,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(f.current),l.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:y.useCallback(h=>{u.current=h},[]),disableHoverableContent:s,children:i})};Ej.displayName=bj;var pu="Tooltip",[FB,tp]=Jh(pu),Sj=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:l,delayDuration:u}=t,f=nx(pu,t.__scopeTooltip),h=ep(e),[m,p]=y.useState(null),x=dn(),w=y.useRef(0),S=l??f.disableHoverableContent,v=u??f.delayDuration,b=y.useRef(!1),[N,_]=nr({prop:r,defaultProp:s??!1,onChange:O=>{O?(f.onOpen(),document.dispatchEvent(new CustomEvent(Cv))):f.onClose(),i==null||i(O)},caller:pu}),T=y.useMemo(()=>N?b.current?"delayed-open":"instant-open":"closed",[N]),M=y.useCallback(()=>{window.clearTimeout(w.current),w.current=0,b.current=!1,_(!0)},[_]),D=y.useCallback(()=>{window.clearTimeout(w.current),w.current=0,_(!1)},[_]),B=y.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{b.current=!0,_(!0),w.current=0},v)},[v,_]);return y.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),c.jsx(Qh,{...h,children:c.jsx(FB,{scope:e,contentId:x,open:N,stateAttribute:T,trigger:m,onTriggerChange:p,onTriggerEnter:y.useCallback(()=>{f.isOpenDelayedRef.current?B():M()},[f.isOpenDelayedRef,B,M]),onTriggerLeave:y.useCallback(()=>{S?D():(window.clearTimeout(w.current),w.current=0)},[D,S]),onOpen:M,onClose:D,disableHoverableContent:S,children:n})})};Sj.displayName=pu;var jv="TooltipTrigger",Nj=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=tp(jv,n),i=nx(jv,n),l=ep(n),u=y.useRef(null),f=it(e,u,s.onTriggerChange),h=y.useRef(!1),m=y.useRef(!1),p=y.useCallback(()=>h.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),c.jsx(Mu,{asChild:!0,...l,children:c.jsx(Ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:f,onPointerMove:Se(t.onPointerMove,x=>{x.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:Se(t.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:Se(t.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Se(t.onFocus,()=>{h.current||s.onOpen()}),onBlur:Se(t.onBlur,s.onClose),onClick:Se(t.onClick,s.onClose)})})});Nj.displayName=jv;var UB="TooltipPortal",[lG,zB]=Jh(UB,{forceMount:void 0}),_l="TooltipContent",kj=y.forwardRef((t,e)=>{const n=zB(_l,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,l=tp(_l,t.__scopeTooltip);return c.jsx(vn,{present:r||l.open,children:l.disableHoverableContent?c.jsx(Cj,{side:s,...i,ref:e}):c.jsx(WB,{side:s,...i,ref:e})})}),WB=y.forwardRef((t,e)=>{const n=tp(_l,t.__scopeTooltip),r=nx(_l,t.__scopeTooltip),s=y.useRef(null),i=it(e,s),[l,u]=y.useState(null),{trigger:f,onClose:h}=n,m=s.current,{onPointerInTransitChange:p}=r,x=y.useCallback(()=>{u(null),p(!1)},[p]),w=y.useCallback((S,v)=>{const b=S.currentTarget,N={x:S.clientX,y:S.clientY},_=GB(N,b.getBoundingClientRect()),T=YB(N,_),M=QB(v.getBoundingClientRect()),D=XB([...T,...M]);u(D),p(!0)},[p]);return y.useEffect(()=>()=>x(),[x]),y.useEffect(()=>{if(f&&m){const S=b=>w(b,m),v=b=>w(b,f);return f.addEventListener("pointerleave",S),m.addEventListener("pointerleave",v),()=>{f.removeEventListener("pointerleave",S),m.removeEventListener("pointerleave",v)}}},[f,m,w,x]),y.useEffect(()=>{if(l){const S=v=>{const b=v.target,N={x:v.clientX,y:v.clientY},_=(f==null?void 0:f.contains(b))||(m==null?void 0:m.contains(b)),T=!ZB(N,l);_?x():T&&(x(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[f,m,l,h,x]),c.jsx(Cj,{...t,ref:i})}),[HB,VB]=Jh(pu,{isInside:!1}),qB=O6("TooltipContent"),Cj=y.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:l,...u}=t,f=tp(_l,n),h=ep(n),{onClose:m}=f;return y.useEffect(()=>(document.addEventListener(Cv,m),()=>document.removeEventListener(Cv,m)),[m]),y.useEffect(()=>{if(f.trigger){const p=x=>{const w=x.target;w!=null&&w.contains(f.trigger)&&m()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[f.trigger,m]),c.jsx(da,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:m,children:c.jsxs(Zh,{"data-state":f.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(qB,{children:r}),c.jsx(HB,{scope:n,isInside:!0,children:c.jsx(r8,{id:f.contentId,role:"tooltip",children:s||r})})]})})});kj.displayName=_l;var jj="TooltipArrow",KB=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=ep(n);return VB(jj,n).isInside?null:c.jsx(Xh,{...s,...r,ref:e})});KB.displayName=jj;function GB(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function YB(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function QB(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function ZB(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const u=e[i],f=e[l],h=u.x,m=u.y,p=f.x,x=f.y;m>r!=x>r&&n<(p-h)*(r-m)/(x-m)+h&&(s=!s)}return s}function XB(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),JB(e)}function JB(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var eF=Ej,tF=Sj,nF=Nj,_j=kj;const Gi=eF,Oi=tF,Di=nF,Yo=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(_j,{ref:r,sideOffset:e,className:xe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Yo.displayName=_j.displayName;function eh(t,e,n){const r=(n==null?void 0:n.serialize)||JSON.stringify,s=(n==null?void 0:n.deserialize)||JSON.parse,[i,l]=y.useState(()=>{try{const f=localStorage.getItem(t);return f?s(f):e}catch(f){return console.warn(`Failed to load ${t} from localStorage:`,f),e}}),u=f=>{try{const h=f instanceof Function?f(i):f;l(h),localStorage.setItem(t,r(h))}catch(h){console.warn(`Failed to save ${t} to localStorage:`,h)}};return y.useEffect(()=>{const f=h=>{if(h.key===t&&h.newValue!==null)try{l(s(h.newValue))}catch(m){console.warn(`Failed to sync ${t} from localStorage:`,m)}};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[t,s]),[i,u]}const rF=Is({theme:a6(["dark","light","system"]),relayUrl:ht().url()});function sF(t){const{children:e,storageKey:n,defaultConfig:r,presetRelays:s}=t,[i,l]=eh(n,{},{serialize:JSON.stringify,deserialize:m=>{const p=JSON.parse(m);return rF.partial().parse(p)}}),u=m=>{l(m)},f={...r,...i},h={config:f,updateConfig:u,presetRelays:s};return oF(f.theme),c.jsx(lC.Provider,{value:h,children:e})}function oF(t){y.useEffect(()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),t==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(n);return}e.classList.add(t)},[t]),y.useEffect(()=>{if(t!=="system")return;const e=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{const r=window.document.documentElement;r.classList.remove("light","dark");const s=e.matches?"dark":"light";r.classList.add(s)};return e.addEventListener("change",n),()=>e.removeEventListener("change",n)},[t])}var JE,Mg,iF=(JE=function(t,e){function n(R){if(!Number.isSafeInteger(R))throw new Error(`Wrong integer: ${R}`)}function r(...R){const L=(A,U)=>K=>A(U(K));return{encode:Array.from(R).reverse().reduce((A,U)=>A?L(A,U.encode):U.encode,void 0),decode:R.reduce((A,U)=>A?L(A,U.decode):U.decode,void 0)}}function s(R){return{encode:L=>{if(!Array.isArray(L)||L.length&&typeof L[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return L.map(A=>{if(n(A),A<0||A>=R.length)throw new Error(`Digit index outside alphabet: ${A} (alphabet: ${R.length})`);return R[A]})},decode:L=>{if(!Array.isArray(L)||L.length&&typeof L[0]!="string")throw new Error("alphabet.decode input should be array of strings");return L.map(A=>{if(typeof A!="string")throw new Error(`alphabet.decode: not string element=${A}`);const U=R.indexOf(A);if(U===-1)throw new Error(`Unknown letter: "${A}". Allowed: ${R}`);return U})}}}function i(R=""){if(typeof R!="string")throw new Error("join separator should be string");return{encode:L=>{if(!Array.isArray(L)||L.length&&typeof L[0]!="string")throw new Error("join.encode input should be array of strings");for(let A of L)if(typeof A!="string")throw new Error(`join.encode: non-string input=${A}`);return L.join(R)},decode:L=>{if(typeof L!="string")throw new Error("join.decode input should be string");return L.split(R)}}}function l(R,L="="){if(n(R),typeof L!="string")throw new Error("padding chr should be string");return{encode(A){if(!Array.isArray(A)||A.length&&typeof A[0]!="string")throw new Error("padding.encode input should be array of strings");for(let U of A)if(typeof U!="string")throw new Error(`padding.encode: non-string input=${U}`);for(;A.length*R%8;)A.push(L);return A},decode(A){if(!Array.isArray(A)||A.length&&typeof A[0]!="string")throw new Error("padding.encode input should be array of strings");for(let K of A)if(typeof K!="string")throw new Error(`padding.decode: non-string input=${K}`);let U=A.length;if(U*R%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;U>0&&A[U-1]===L;U--)if(!((U-1)*R%8))throw new Error("Invalid padding: string has too much padding");return A.slice(0,U)}}}function u(R){if(typeof R!="function")throw new Error("normalize fn should be function");return{encode:L=>L,decode:L=>R(L)}}function f(R,L,A){if(L<2)throw new Error(`convertRadix: wrong from=${L}, base cannot be less than 2`);if(A<2)throw new Error(`convertRadix: wrong to=${A}, base cannot be less than 2`);if(!Array.isArray(R))throw new Error("convertRadix: data should be array");if(!R.length)return[];let U=0;const K=[],H=Array.from(R);for(H.forEach(V=>{if(n(V),V<0||V>=L)throw new Error(`Wrong integer: ${V}`)});;){let V=0,Q=!0;for(let te=U;te<H.length;te++){const Z=H[te],G=L*V+Z;if(!Number.isSafeInteger(G)||L*V/L!==V||G-Z!=L*V)throw new Error("convertRadix: carry overflow");if(V=G%A,H[te]=Math.floor(G/A),!Number.isSafeInteger(H[te])||H[te]*A+V!==G)throw new Error("convertRadix: carry overflow");Q&&(H[te]?Q=!1:U=te)}if(K.push(V),Q)break}for(let V=0;V<R.length-1&&R[V]===0;V++)K.push(0);return K.reverse()}Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0,e.assertNumber=n;const h=(R,L)=>L?h(L,R%L):R,m=(R,L)=>R+(L-h(R,L));function p(R,L,A,U){if(!Array.isArray(R))throw new Error("convertRadix2: data should be array");if(L<=0||L>32)throw new Error(`convertRadix2: wrong from=${L}`);if(A<=0||A>32)throw new Error(`convertRadix2: wrong to=${A}`);if(m(L,A)>32)throw new Error(`convertRadix2: carry overflow from=${L} to=${A} carryBits=${m(L,A)}`);let K=0,H=0;const V=2**A-1,Q=[];for(const te of R){if(n(te),te>=2**L)throw new Error(`convertRadix2: invalid data word=${te} from=${L}`);if(K=K<<L|te,H+L>32)throw new Error(`convertRadix2: carry overflow pos=${H} from=${L}`);for(H+=L;H>=A;H-=A)Q.push((K>>H-A&V)>>>0);K&=2**H-1}if(K=K<<A-H&V,!U&&H>=L)throw new Error("Excess padding");if(!U&&K)throw new Error(`Non-zero padding: ${K}`);return U&&H>0&&Q.push(K>>>0),Q}function x(R){return n(R),{encode:L=>{if(!(L instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return f(Array.from(L),256,R)},decode:L=>{if(!Array.isArray(L)||L.length&&typeof L[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(f(L,R,256))}}}function w(R,L=!1){if(n(R),R<=0||R>32)throw new Error("radix2: bits should be in (0..32]");if(m(8,R)>32||m(R,8)>32)throw new Error("radix2: carry overflow");return{encode:A=>{if(!(A instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(A),8,R,!L)},decode:A=>{if(!Array.isArray(A)||A.length&&typeof A[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(p(A,R,8,L))}}}function S(R){if(typeof R!="function")throw new Error("unsafeWrapper fn should be function");return function(...L){try{return R.apply(null,L)}catch{}}}function v(R,L){if(n(R),typeof L!="function")throw new Error("checksum fn should be function");return{encode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const U=L(A).slice(0,R),K=new Uint8Array(A.length+R);return K.set(A),K.set(U,A.length),K},decode(A){if(!(A instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const U=A.slice(0,-R),K=L(U).slice(0,R),H=A.slice(-R);for(let V=0;V<R;V++)if(K[V]!==H[V])throw new Error("Invalid checksum");return U}}}e.utils={alphabet:s,chain:r,checksum:v,radix:x,radix2:w,join:i,padding:l},e.base16=r(w(4),s("0123456789ABCDEF"),i("")),e.base32=r(w(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),l(5),i("")),e.base32hex=r(w(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),l(5),i("")),e.base32crockford=r(w(5),s("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),u(R=>R.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=r(w(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),l(6),i("")),e.base64url=r(w(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),l(6),i(""));const b=R=>r(x(58),s(R),i(""));e.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const N=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(R){let L="";for(let A=0;A<R.length;A+=8){const U=R.subarray(A,A+8);L+=e.base58.encode(U).padStart(N[U.length],"1")}return L},decode(R){let L=[];for(let A=0;A<R.length;A+=11){const U=R.slice(A,A+11),K=N.indexOf(U.length),H=e.base58.decode(U);for(let V=0;V<H.length-K;V++)if(H[V]!==0)throw new Error("base58xmr: wrong padding");L=L.concat(Array.from(H.slice(H.length-K)))}return Uint8Array.from(L)}},e.base58check=R=>r(v(4,L=>R(R(L))),e.base58);const _=r(s("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),T=[996825010,642813549,513874426,1027748829,705979059];function M(R){const L=R>>25;let A=(33554431&R)<<5;for(let U=0;U<T.length;U++)(L>>U&1)==1&&(A^=T[U]);return A}function D(R,L,A=1){const U=R.length;let K=1;for(let H=0;H<U;H++){const V=R.charCodeAt(H);if(V<33||V>126)throw new Error(`Invalid prefix (${R})`);K=M(K)^V>>5}K=M(K);for(let H=0;H<U;H++)K=M(K)^31&R.charCodeAt(H);for(let H of L)K=M(K)^H;for(let H=0;H<6;H++)K=M(K);return K^=A,_.encode(p([K%2**30],30,5,!1))}function B(R){const L=R==="bech32"?1:734539939,A=w(5),U=A.decode,K=A.encode,H=S(U);function V(Q,te=90){if(typeof Q!="string")throw new Error("bech32.decode input should be string, not "+typeof Q);if(Q.length<8||te!==!1&&Q.length>te)throw new TypeError(`Wrong string length: ${Q.length} (${Q}). Expected (8..${te})`);const Z=Q.toLowerCase();if(Q!==Z&&Q!==Q.toUpperCase())throw new Error("String must be lowercase or uppercase");const G=(Q=Z).lastIndexOf("1");if(G===0||G===-1)throw new Error('Letter "1" must be present between prefix and data only');const ne=Q.slice(0,G),z=Q.slice(G+1);if(z.length<6)throw new Error("Data must be at least 6 characters long");const W=_.decode(z).slice(0,-6),ae=D(ne,W,L);if(!z.endsWith(ae))throw new Error(`Invalid checksum in ${Q}: expected "${ae}"`);return{prefix:ne,words:W}}return{encode:function(Q,te,Z=90){if(typeof Q!="string")throw new Error("bech32.encode prefix should be string, not "+typeof Q);if(!Array.isArray(te)||te.length&&typeof te[0]!="number")throw new Error("bech32.encode words should be array of numbers, not "+typeof te);const G=Q.length+7+te.length;if(Z!==!1&&G>Z)throw new TypeError(`Length ${G} exceeds limit ${Z}`);return`${Q=Q.toLowerCase()}1${_.encode(te)}${D(Q,te,L)}`},decode:V,decodeToBytes:function(Q){const{prefix:te,words:Z}=V(Q,!1);return{prefix:te,words:Z,bytes:U(Z)}},decodeUnsafe:S(V),fromWords:U,fromWordsUnsafe:H,toWords:K}}e.bech32=B("bech32"),e.bech32m=B("bech32m"),e.utf8={encode:R=>new TextDecoder().decode(R),decode:R=>new TextEncoder().encode(R)},e.hex=r(w(4),s("0123456789abcdef"),i(""),u(R=>{if(typeof R!="string"||R.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof R} with length ${R.length}`);return R.toLowerCase()}));const O={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},F=`Invalid encoding type. Available types: ${Object.keys(O).join(", ")}`;e.bytesToString=(R,L)=>{if(typeof R!="string"||!O.hasOwnProperty(R))throw new TypeError(F);if(!(L instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return O[R].encode(L)},e.str=e.bytesToString,e.stringToBytes=(R,L)=>{if(!O.hasOwnProperty(R))throw new TypeError(F);if(typeof L!="string")throw new TypeError("stringToBytes() expects string");return O[R].decode(L)},e.bytes=e.stringToBytes},JE(Mg={exports:{}},Mg.exports),Mg.exports);const{bech32:cs,hex:Dr,utf8:aF}=iF,e2={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},t2={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},n2={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},r2={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},s2={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},uf=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],lF={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},cF=BigInt("2100000000000000000"),o2=BigInt(1e11),_v={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},Tj={};for(let t=0,e=Object.keys(_v);t<e.length;t++){const n=e[t],r=_v[e[t]].toString();Tj[r]=n}const uF={1:t=>Dr.encode(cs.fromWordsUnsafe(t)),16:t=>Dr.encode(cs.fromWordsUnsafe(t)),13:t=>aF.encode(cs.fromWordsUnsafe(t)),19:t=>Dr.encode(cs.fromWordsUnsafe(t)),23:t=>Dr.encode(cs.fromWordsUnsafe(t)),27:t=>Dr.encode(cs.fromWordsUnsafe(t)),6:th,24:th,3:function(t){const e=[];let n,r,s,i,l,u=cs.fromWordsUnsafe(t);for(;u.length>0;)n=Dr.encode(u.slice(0,33)),r=Dr.encode(u.slice(33,41)),s=parseInt(Dr.encode(u.slice(41,45)),16),i=parseInt(Dr.encode(u.slice(45,49)),16),l=parseInt(Dr.encode(u.slice(49,51)),16),u=u.slice(51),e.push({pubkey:n,short_channel_id:r,fee_base_msat:s,fee_proportional_millionths:i,cltv_expiry_delta:l});return e},5:function(t){const e=t.slice().reverse().map(s=>[!!(1&s),!!(2&s),!!(4&s),!!(8&s),!!(16&s)]).reduce((s,i)=>s.concat(i),[]);for(;e.length<2*uf.length;)e.push(!1);const n={};uf.forEach((s,i)=>{let l;l=e[2*i]?"required":e[2*i+1]?"supported":"unsupported",n[s]=l});const r=e.slice(2*uf.length);return n.extra_bits={start_bit:2*uf.length,bits:r,has_required:r.reduce((s,i,l)=>l%2!=0?s||!1:s||i,!1)},n}};function dF(t){return e=>({tagCode:parseInt(t),words:cs.encode("unknown",e,Number.MAX_SAFE_INTEGER)})}function th(t){return t.reverse().reduce((e,n,r)=>e+n*Math.pow(32,r),0)}const fF=t=>Uint8Array.from(t.match(/.{1,2}/g).map(e=>parseInt(e,16))),hF=t=>{if(!t)return null;try{const e=function(p,x){if(typeof p!="string")throw new Error("Lightning Payment Request must be string");if(p.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const w=[],S=cs.decode(p,Number.MAX_SAFE_INTEGER);p=p.toLowerCase();const v=S.prefix;let b=S.words,N=p.slice(v.length+1),_=b.slice(-104);b=b.slice(0,-104);let T=v.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(T&&!T[2]&&(T=v.match(/^ln(\S+)$/)),!T)throw new Error("Not a proper lightning payment request");w.push({name:"lightning_network",letters:"ln"});const M=T[1];let D;switch(M){case e2.bech32:D=e2;break;case t2.bech32:D=t2;break;case n2.bech32:D=n2;break;case r2.bech32:D=r2;break;case s2.bech32:D=s2}if(!D||D.bech32!==M)throw new Error("Unknown coin bech32 prefix");w.push({name:"coin_network",letters:M,value:D});const B=T[2];let O;B?(O=function(V,Q){let te,Z;if(V.slice(-1).match(/^[munp]$/))te=V.slice(-1),Z=V.slice(0,-1);else{if(V.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");Z=V}if(!Z.match(/^\d+$/))throw new Error("Not a valid human readable amount");const G=BigInt(Z),ne=te?G*o2/lF[te]:G*o2;if(te==="p"&&G%BigInt(10)!==BigInt(0)||ne>cF)throw new Error("Amount is outside of valid range");return ne.toString()}(B+T[3]),w.push({name:"amount",letters:T[2]+T[3],value:O})):O=null,w.push({name:"separator",letters:"1"});const F=th(b.slice(0,7));let R,L,A,U;for(b=b.slice(7),w.push({name:"timestamp",letters:N.slice(0,7),value:F}),N=N.slice(7);b.length>0;){const V=b[0].toString();R=Tj[V]||"unknown_tag",L=uF[V]||dF(V),b=b.slice(1),A=th(b.slice(0,2)),b=b.slice(2),U=b.slice(0,A),b=b.slice(A),w.push({name:R,tag:N[0],letters:N.slice(0,3+A),value:L(U)}),N=N.slice(3+A)}w.push({name:"signature",letters:N.slice(0,104),value:Dr.encode(cs.fromWordsUnsafe(_))}),N=N.slice(104),w.push({name:"checksum",letters:N});let K={paymentRequest:p,sections:w,get expiry(){let V=w.find(Q=>Q.name==="expiry");if(V)return H("timestamp")+V.value},get route_hints(){return w.filter(V=>V.name==="route_hint").map(V=>V.value)}};for(let V in _v)V!=="route_hint"&&Object.defineProperty(K,V,{get:()=>H(V)});return K;function H(V){let Q=w.find(te=>te.name===V);return Q?Q.value:void 0}}(t);if(!e||!e.sections)return null;const n=e.sections.find(p=>p.name==="payment_hash");if((n==null?void 0:n.name)!=="payment_hash"||!n.value)return null;const r=n.value;let s=0;const i=e.sections.find(p=>p.name==="amount");(i==null?void 0:i.name)==="amount"&&i.value&&(s=parseInt(i.value)/1e3);const l=e.sections.find(p=>p.name==="timestamp");if((l==null?void 0:l.name)!=="timestamp"||!l.value)return null;const u=l.value;let f;const h=e.sections.find(p=>p.name==="expiry");(h==null?void 0:h.name)==="expiry"&&(f=h.value);const m=e.sections.find(p=>p.name==="description");return{paymentHash:r,satoshi:s,timestamp:u,expiry:f,description:(m==null?void 0:m.name)==="description"?m==null?void 0:m.value:void 0}}catch{return null}};function i2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const Pj=t=>t instanceof Uint8Array,Og=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ss=(t,e)=>t<<32-e|t>>>e;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const pF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nh(t){if(!Pj(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=pF[t[n]];return e}function Rj(t){if(typeof t=="string"&&(t=function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(t)),!Pj(t))throw new Error("expected Uint8Array, got "+typeof t);return t}let mF=class{clone(){return this._cloneInto()}};function gF(t){const e=r=>t().update(Rj(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class yF extends mF{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Og(this.buffer)}update(e){i2(this);const{view:n,buffer:r,blockLen:s}=this,i=(e=Rj(e)).length;for(let l=0;l<i;){const u=Math.min(s-this.pos,i-l);if(u!==s)r.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(n,0),this.pos=0);else{const f=Og(e);for(;s<=i-l;l+=s)this.process(f,l)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){i2(this),function(p,x){(function(S,...v){if(!(S instanceof Uint8Array))throw new Error("Expected Uint8Array");if(v.length>0&&!v.includes(S.length))throw new Error(`Expected Uint8Array of length ${v}, not of length=${S.length}`)})(p);const w=x.outputLen;if(p.length<w)throw new Error(`digestInto() expects output buffer of length at least ${w}`)}(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:l}=this;n[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let p=l;p<s;p++)n[p]=0;(function(p,x,w,S){if(typeof p.setBigUint64=="function")return p.setBigUint64(x,w,S);const v=BigInt(32),b=BigInt(4294967295),N=Number(w>>v&b),_=Number(w&b),T=S?0:4;p.setUint32(x+(S?4:0),N,S),p.setUint32(x+T,_,S)})(r,s-8,BigInt(8*this.length),i),this.process(r,0);const u=Og(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)u.setUint32(4*p,m[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:l,pos:u}=this;return e.length=s,e.pos=u,e.finished=i,e.destroyed=l,s%n&&e.buffer.set(r),e}}const vF=(t,e,n)=>t&e^t&n^e&n,xF=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),To=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Po=new Uint32Array(64);let wF=class extends yF{constructor(){super(64,32,8,!1),this.A=0|To[0],this.B=0|To[1],this.C=0|To[2],this.D=0|To[3],this.E=0|To[4],this.F=0|To[5],this.G=0|To[6],this.H=0|To[7]}get(){const{A:e,B:n,C:r,D:s,E:i,F:l,G:u,H:f}=this;return[e,n,r,s,i,l,u,f]}set(e,n,r,s,i,l,u,f){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|s,this.E=0|i,this.F=0|l,this.G=0|u,this.H=0|f}process(e,n){for(let x=0;x<16;x++,n+=4)Po[x]=e.getUint32(n,!1);for(let x=16;x<64;x++){const w=Po[x-15],S=Po[x-2],v=ss(w,7)^ss(w,18)^w>>>3,b=ss(S,17)^ss(S,19)^S>>>10;Po[x]=b+Po[x-7]+v+Po[x-16]|0}let{A:r,B:s,C:i,D:l,E:u,F:f,G:h,H:m}=this;for(let x=0;x<64;x++){const w=m+(ss(u,6)^ss(u,11)^ss(u,25))+((p=u)&f^~p&h)+xF[x]+Po[x]|0,S=(ss(r,2)^ss(r,13)^ss(r,22))+vF(r,s,i)|0;m=h,h=f,f=u,u=l+w|0,l=i,i=s,s=r,r=w+S|0}var p;r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,l=l+this.D|0,u=u+this.E|0,f=f+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,s,i,l,u,f,h,m)}roundClean(){Po.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const rh=gF(()=>new wF);let rx=class{constructor(e){var n,r,s,i;if(this.paymentRequest=void 0,this.paymentHash=void 0,this.preimage=void 0,this.verify=void 0,this.satoshi=void 0,this.expiry=void 0,this.timestamp=void 0,this.createdDate=void 0,this.expiryDate=void 0,this.description=void 0,this.successAction=void 0,this.paymentRequest=e.pr,!this.paymentRequest)throw new Error("Invalid payment request");const l=hF(this.paymentRequest);if(!l)throw new Error("Failed to decode payment request");this.paymentHash=l.paymentHash,this.satoshi=l.satoshi,this.timestamp=l.timestamp,this.expiry=l.expiry,this.createdDate=new Date(1e3*this.timestamp),this.expiryDate=this.expiry?new Date(1e3*(this.timestamp+this.expiry)):void 0,this.description=(n=l.description)!=null?n:null,this.verify=(r=e.verify)!=null?r:null,this.preimage=(s=e.preimage)!=null?s:null,this.successAction=(i=e.successAction)!=null?i:null}async isPaid(){if(this.preimage)return this.validatePreimage(this.preimage);if(this.verify)return await this.verifyPayment();throw new Error("Could not verify payment")}validatePreimage(e){if(!e||!this.paymentHash)return!1;try{const n=nh(rh(fF(e)));return this.paymentHash===n}catch{return!1}}async verifyPayment(){try{if(!this.verify)throw new Error("LNURL verify not available");const e=await fetch(this.verify);if(!e.ok)throw new Error(`Verification request failed: ${e.status} ${e.statusText}`);const n=await e.json();return n.preimage&&(this.preimage=n.preimage),n.settled}catch(e){return console.error("Failed to check LNURL-verify",e),!1}}hasExpired(){const{expiryDate:e}=this;return!!e&&e.getTime()<Date.now()}};const bF=t=>{if(t.tag!=="keysend")throw new Error("Invalid keysend params");if(t.status!=="OK")throw new Error("Keysend status not OK");if(!t.pubkey)throw new Error("Pubkey does not exist");let e,n;return t.customData&&t.customData[0]&&(e=t.customData[0].customKey,n=t.customData[0].customValue),{destination:t.pubkey,customKey:e,customValue:n}};async function EF({satoshi:t,comment:e,p:n,e:r,relays:s},i={}){const l=i.nostr||globalThis.nostr;if(!l)throw new Error("nostr option or window.nostr is not available");const u=[["relays",...s],["amount",t.toString()]];n&&u.push(["p",n]),r&&u.push(["e",r]);const f={pubkey:await l.getPublicKey(),created_at:Math.floor(Date.now()/1e3),kind:9734,tags:u,content:e??""};return f.id=kF(f),await l.signEvent(f)}function SF(t){if(typeof t.content!="string"||typeof t.created_at!="number"||!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){const n=t.tags[e];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function NF(t){if(!SF(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}function kF(t){return nh(rh(NF(t)))}function CF(t,e){let n,r;var s,i;return e&&t&&(n=(s=t.names)==null?void 0:s[e],r=n?(i=t.relays)==null?void 0:i[n]:void 0),[t,n,r]}const jF=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)/,Aj=t=>!!t&&jF.test(t),a2=({amount:t,min:e,max:n})=>t>0&&t>=e&&t<=n,_F=async t=>{if(t.tag!=="payRequest")throw new Error("Invalid pay service params");const e=(t.callback+"").trim();if(!Aj(e))throw new Error("Callback must be a valid url");const n=Math.ceil(Number(t.minSendable||0)),r=Math.floor(Number(t.maxSendable));if(!n||!r||n>r)throw new Error("Invalid pay service params");let s,i;try{s=JSON.parse(t.metadata+""),i=nh(rh(t.metadata+""))}catch{s=[],i=nh(rh("[]"))}let l="",u="",f="",h="";for(let x=0;x<s.length;x++){const[w,S]=s[x];switch(w){case"text/plain":f=S;break;case"text/identifier":h=S;break;case"text/email":l=S;break;case"image/png;base64":case"image/jpeg;base64":u="data:"+w+","+S}}const m=t.payerData;let p;try{p=new URL(e).hostname}catch{}return{callback:e,fixed:n===r,min:n,max:r,domain:p,metadata:s,metadataHash:i,identifier:h,email:l,description:f,image:u,payerData:m,commentAllowed:Number(t.commentAllowed)||0,rawData:t,allowsNostr:t.allowsNostr||!1}};function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tv.apply(this,arguments)}const TF=async(t,e)=>{const{boost:n}=t;e||(e={});const r=e.webln||globalThis.webln;if(!r)throw new Error("WebLN not available");if(!r.keysend)throw new Error("Keysend not available in current WebLN provider");const s=t.amount||Math.floor(n.value_msat/1e3),i={destination:t.destination,amount:s,customRecords:{7629169:JSON.stringify(n)}};return t.customKey&&t.customValue&&(i.customRecords[t.customKey]=t.customValue),await r.enable(),await r.keysend(i)},PF=/^((?:[^<>()[\]\\.,;:\s@"]+(?:\.[^<>()[\]\\.,;:\s@"]+)*)|(?:".+"))@((?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(?:(?:[a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;let RF=class{constructor(e,n){this.address=void 0,this.options=void 0,this.username=void 0,this.domain=void 0,this.pubkey=void 0,this.lnurlpData=void 0,this.keysendData=void 0,this.nostrData=void 0,this.nostrPubkey=void 0,this.nostrRelays=void 0,this.webln=void 0,this.address=e,this.options={proxy:"https://api.getalby.com/lnurl"},this.options=Object.assign(this.options,n),this.parse(),this.webln=this.options.webln}parse(){const e=PF.exec(this.address.toLowerCase());e&&(this.username=e[1],this.domain=e[2])}getWebLN(){return this.webln||globalThis.webln}async fetch(){return this.options.proxy?this.fetchWithProxy():this.fetchWithoutProxy()}async fetchWithProxy(){const e=await fetch(`${this.options.proxy}/lightning-address-details?${new URLSearchParams({ln:this.address}).toString()}`);if(!e.ok)throw new Error(`Failed to fetch lnurl info: ${e.status} ${e.statusText}`);const n=await e.json();await this.parseLnUrlPayResponse(n.lnurlp),this.parseKeysendResponse(n.keysend),this.parseNostrResponse(n.nostr)}async fetchWithoutProxy(){this.domain&&this.username&&await Promise.all([this.fetchLnurlData(),this.fetchKeysendData(),this.fetchNostrData()])}async fetchLnurlData(){const e=await fetch(this.lnurlpUrl());if(e.ok){const n=await e.json();await this.parseLnUrlPayResponse(n)}}async fetchKeysendData(){const e=await fetch(this.keysendUrl());if(e.ok){const n=await e.json();this.parseKeysendResponse(n)}}async fetchNostrData(){const e=await fetch(this.nostrUrl());if(e.ok){const n=await e.json();this.parseNostrResponse(n)}}lnurlpUrl(){return`https://${this.domain}/.well-known/lnurlp/${this.username}`}keysendUrl(){return`https://${this.domain}/.well-known/keysend/${this.username}`}nostrUrl(){return`https://${this.domain}/.well-known/nostr.json?name=${this.username}`}async generateInvoice(e){let n;if(this.options.proxy){const i=await fetch(`${this.options.proxy}/generate-invoice?${new URLSearchParams(Tv({ln:this.address},e)).toString()}`);if(!i.ok)throw new Error(`Failed to generate invoice: ${i.status} ${i.statusText}`);n=(await i.json()).invoice}else{if(!this.lnurlpData)throw new Error("No lnurlpData available. Please call fetch() first.");if(!this.lnurlpData.callback||!Aj(this.lnurlpData.callback))throw new Error("Valid callback does not exist in lnurlpData");const i=new URL(this.lnurlpData.callback);i.search=new URLSearchParams(e).toString();const l=await fetch(i.toString());if(!l.ok)throw new Error(`Failed to generate invoice: ${l.status} ${l.statusText}`);n=await l.json()}const r=n&&n.pr&&n.pr.toString();if(!r)throw new Error("Invalid pay service invoice");const s={pr:r};if(n&&n.verify&&(s.verify=n.verify.toString()),n&&n.successAction&&typeof n.successAction=="object"){const{tag:i,message:l,description:u,url:f}=n.successAction;i==="message"?s.successAction={tag:i,message:l}:i==="url"&&(s.successAction={tag:i,description:u,url:f})}return new rx(s)}async requestInvoice(e){if(!this.lnurlpData)throw new Error("No lnurlpData available. Please call fetch() first.");const n=1e3*e.satoshi,{commentAllowed:r,min:s,max:i}=this.lnurlpData;if(!a2({amount:n,min:s,max:i}))throw new Error("Invalid amount");if(e.comment&&r&&r>0&&e.comment.length>r)throw new Error(`The comment length must be ${r} characters or fewer`);const l={amount:n.toString()};return e.comment&&(l.comment=e.comment),e.payerdata&&(l.payerdata=JSON.stringify(e.payerdata)),this.generateInvoice(l)}async boost(e,n=0){if(!this.keysendData)throw new Error("No keysendData available. Please call fetch() first.");const{destination:r,customKey:s,customValue:i}=this.keysendData,l=this.getWebLN();if(!l)throw new Error("WebLN not available");return TF({destination:r,customKey:s,customValue:i,amount:n,boost:e},{webln:l})}async zapInvoice({satoshi:e,comment:n,relays:r,e:s},i={}){if(!this.lnurlpData)throw new Error("No lnurlpData available. Please call fetch() first.");if(!this.nostrPubkey)throw new Error("Nostr Pubkey is missing");const l=this.nostrPubkey,u=1e3*e,{allowsNostr:f,min:h,max:m}=this.lnurlpData;if(!a2({amount:u,min:h,max:m}))throw new Error("Invalid amount");if(!f)throw new Error("Your provider does not support zaps");const p=await EF({satoshi:u,comment:n,p:l,e:s,relays:r},i),x={amount:u.toString(),nostr:JSON.stringify(p)};return await this.generateInvoice(x)}async zap(e,n={}){const r=this.zapInvoice(e,n),s=this.getWebLN();if(!s)throw new Error("WebLN not available");return await s.enable(),s.sendPayment((await r).paymentRequest)}async parseLnUrlPayResponse(e){e&&(this.lnurlpData=await _F(e))}parseKeysendResponse(e){e&&(this.keysendData=bF(e))}parseNostrResponse(e){e&&([this.nostrData,this.nostrPubkey,this.nostrRelays]=CF(e,this.username))}};function ei(){return ei=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ei.apply(this,arguments)}if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const AF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IF(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=AF[t[n]];return e}function $c(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=2*r,i=t.slice(s,s+2),l=Number.parseInt(i,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");n[r]=l}return n}class fi extends Error{constructor(e,n){super(e),this.code=void 0,this.code=n}}let MF=class extends fi{},OF=class extends fi{};class Ij extends fi{}let l2=class extends Ij{},c2=class extends Ij{};class u2 extends fi{}let d2=class extends fi{},Dg=class extends fi{},DF=class extends fi{};class LF extends fi{}let Lg=class Pv{static parseWalletConnectUrl(e){e=e.replace("nostrwalletconnect://","http://").replace("nostr+walletconnect://","http://").replace("nostrwalletconnect:","http://").replace("nostr+walletconnect:","http://");const n=new URL(e),r=n.searchParams.get("relay");if(!r)throw new Error("No relay URL found in connection string");const s={walletPubkey:n.host,relayUrl:r},i=n.searchParams.get("secret");i&&(s.secret=i);const l=n.searchParams.get("lud16");return l&&(s.lud16=l),s}constructor(e){this.relay=void 0,this.relayUrl=void 0,this.secret=void 0,this.lud16=void 0,this.walletPubkey=void 0,this.options=void 0,this._encryptionType=void 0,e&&e.nostrWalletConnectUrl&&(e=ei({},Pv.parseWalletConnectUrl(e.nostrWalletConnectUrl),e)),this.options=ei({},e||{}),this.relayUrl=this.options.relayUrl,this.relay=new Ek(this.relayUrl),this.options.secret&&(this.secret=this.options.secret.toLowerCase().startsWith("nsec")?tr.decode(this.options.secret).data:this.options.secret),this.lud16=this.options.lud16,this.walletPubkey=this.options.walletPubkey.toLowerCase().startsWith("npub")?tr.decode(this.options.walletPubkey).data:this.options.walletPubkey,globalThis.WebSocket===void 0&&console.error("WebSocket is undefined. Make sure to `import websocket-polyfill` for nodejs environments")}get nostrWalletConnectUrl(){return this.getNostrWalletConnectUrl()}getNostrWalletConnectUrl(e=!0){let n=`nostr+walletconnect://${this.walletPubkey}?relay=${this.relayUrl}&pubkey=${this.publicKey}`;return e&&(n=`${n}&secret=${this.secret}`),n}get connected(){return this.relay.connected}get publicKey(){if(!this.secret)throw new Error("Missing secret key");return Ji($c(this.secret))}get encryptionType(){if(!this._encryptionType)throw new Error("Missing encryption or version");return this._encryptionType}getPublicKey(){return Promise.resolve(this.publicKey)}signEvent(e){if(!this.secret)throw new Error("Missing secret key");return Promise.resolve(Cr(e,$c(this.secret)))}getEventHash(e){return Xc(e)}close(){return this.relay.close()}async encrypt(e,n){if(!this.secret)throw new Error("Missing secret");let r;if(this.encryptionType==="nip04")r=await lu.encrypt(this.secret,e,n);else{const s=Go.getConversationKey($c(this.secret),e);r=Go.encrypt(n,s)}return r}async decrypt(e,n){if(!this.secret)throw new Error("Missing secret");let r;if(this.encryptionType==="nip04")r=await lu.decrypt(this.secret,e,n);else{const s=Go.getConversationKey($c(this.secret),e);r=Go.decrypt(n,s)}return r}static getAuthorizationUrl(e,n={},r){if(e.indexOf("/#/")>-1)throw new Error("hash router paths not supported");const s=new URL(e);return n.name&&s.searchParams.set("name",n.name),s.searchParams.set("pubkey",r),n.returnTo&&s.searchParams.set("return_to",n.returnTo),n.budgetRenewal&&s.searchParams.set("budget_renewal",n.budgetRenewal),n.expiresAt&&s.searchParams.set("expires_at",Math.floor(n.expiresAt.getTime()/1e3).toString()),n.maxAmount&&s.searchParams.set("max_amount",n.maxAmount.toString()),n.requestMethods&&s.searchParams.set("request_methods",n.requestMethods.join(" ")),n.notificationTypes&&s.searchParams.set("notification_types",n.notificationTypes.join(" ")),n.isolated&&s.searchParams.set("isolated","true"),n.metadata&&s.searchParams.set("metadata",JSON.stringify(n.metadata)),s}static fromAuthorizationUrl(e,n={},r){r=r||IF(bl()),n.name||(n.name=document.location.host);const s=this.getAuthorizationUrl(e,n,Ji($c(r))),i=window.outerHeight/2+window.screenY-300,l=window.outerWidth/2+window.screenX-200;return new Promise((u,f)=>{const h=window.open(s.toString(),`${document.title} - Wallet Connect`,`height=600,width=400,top=${i},left=${l}`);if(!h)return void f(new Error("failed to execute window.open"));const m=x=>{const w=x.data;w&&w.type==="nwc:success"&&x.origin===`${s.protocol}//${s.host}`&&(w.relayUrl||f(new Error("no relayUrl in response")),w.walletPubkey||f(new Error("no walletPubkey in response")),u(new Pv({relayUrl:w.relayUrl,walletPubkey:w.walletPubkey,secret:r,lud16:w.lud16})),clearInterval(p),window.removeEventListener("message",m),h&&h.close())},p=setInterval(()=>{h&&h.closed&&(clearInterval(p),window.removeEventListener("message",m),f(new Error("Popup closed")))},500);window.addEventListener("message",m)})}async getWalletServiceInfo(){var e;await this._checkConnected();const n=await new Promise((f,h)=>{const m=[],p=this.relay.subscribe([{kinds:[13194],limit:1,authors:[this.walletPubkey]}],{eoseTimeout:1e4});p.onevent=x=>{m.push(x)},p.oneose=()=>{p.close(),f(m)}});if(!n.length)throw new Error("no info event (kind 13194) returned from relay");const r=n[0].content,s=n[0].tags.find(f=>f[0]==="notifications"),i=n[0].tags.find(f=>f[0]==="v"),l=n[0].tags.find(f=>f[0]==="encryption");let u=["nip04"];return i&&i[1].includes("1.0")&&u.push("nip44_v2"),l&&(u=l[1].split(" ")),{encryptions:u,capabilities:r.split(/[ |,]/g),notifications:(s==null||(e=s[1])==null?void 0:e.split(" "))||[]}}async getInfo(){try{return await this.executeNip47Request("get_info",{},e=>!!e.methods,{replyTimeout:1e4})}catch(e){throw console.error("Failed to request get_info",e),e}}async getBudget(){try{return await this.executeNip47Request("get_budget",{},e=>e!==void 0,{replyTimeout:1e4})}catch(e){throw console.error("Failed to request get_budget",e),e}}async getBalance(){try{return await this.executeNip47Request("get_balance",{},e=>e.balance!==void 0,{replyTimeout:1e4})}catch(e){throw console.error("Failed to request get_balance",e),e}}async payInvoice(e){try{return await this.executeNip47Request("pay_invoice",e,n=>!!n)}catch(n){throw console.error("Failed to request pay_invoice",n),n}}async payKeysend(e){try{return await this.executeNip47Request("pay_keysend",e,n=>!!n.preimage)}catch(n){throw console.error("Failed to request pay_keysend",n),n}}async signMessage(e){try{return await this.executeNip47Request("sign_message",e,n=>n.message===e.message&&!!n.signature)}catch(n){throw console.error("Failed to request sign_message",n),n}}async createConnection(e){try{return await this.executeNip47Request("create_connection",e,n=>!!n.wallet_pubkey)}catch(n){throw console.error("Failed to request create_connection",n),n}}async multiPayInvoice(e){try{return{invoices:await this.executeMultiNip47Request("multi_pay_invoice",e,e.invoices.length,n=>!!n.preimage),errors:[]}}catch(n){throw console.error("Failed to request multi_pay_invoice",n),n}}async multiPayKeysend(e){try{return{keysends:await this.executeMultiNip47Request("multi_pay_keysend",e,e.keysends.length,n=>!!n.preimage),errors:[]}}catch(n){throw console.error("Failed to request multi_pay_keysend",n),n}}async makeInvoice(e){try{if(!e.amount)throw new Error("No amount specified");return await this.executeNip47Request("make_invoice",e,n=>!!n.invoice)}catch(n){throw console.error("Failed to request make_invoice",n),n}}async makeHoldInvoice(e){try{if(!e.amount)throw new Error("No amount specified");if(!e.payment_hash)throw new Error("No payment hash specified");return await this.executeNip47Request("make_hold_invoice",e,n=>!!n.invoice)}catch(n){throw console.error("Failed to request make_hold_invoice",n),n}}async settleHoldInvoice(e){try{return await this.executeNip47Request("settle_hold_invoice",e,n=>!!n)}catch(n){throw console.error("Failed to request settle_hold_invoice",n),n}}async cancelHoldInvoice(e){try{return await this.executeNip47Request("cancel_hold_invoice",e,n=>!!n)}catch(n){throw console.error("Failed to request cancel_hold_invoice",n),n}}async lookupInvoice(e){try{return await this.executeNip47Request("lookup_invoice",e,n=>!!n.invoice)}catch(n){throw console.error("Failed to request lookup_invoice",n),n}}async listTransactions(e){try{return await this.executeNip47Request("list_transactions",e,n=>!!n.transactions,{replyTimeout:1e4})}catch(n){throw console.error("Failed to request list_transactions",n),n}}async subscribeNotifications(e,n){var r=this;let s,i,l,u=!0;return async function(){for(;u;){try{await r._checkConnected(),await r._selectEncryptionType(),l=r.relay.subscribe([{kinds:[...r.encryptionType==="nip04"?[23196]:[23197]],authors:[r.walletPubkey],"#p":[r.publicKey]}],{}),console.info("subscribed to relay"),l.onevent=async function(f){const h=await r.decrypt(r.walletPubkey,f.content);let m;try{m=JSON.parse(h)}catch(p){return void console.error("Failed to parse decrypted event content",p)}m.notification?(!n||n.indexOf(m.notification_type)>-1)&&e(m):console.error("No notification in response",m)},await new Promise(f=>{s=()=>{f()},i=()=>{console.info("relay disconnected"),s==null||s()},r.relay.onclose=i}),i!==void 0&&(r.relay.onclose=null)}catch(f){console.error("error subscribing to notifications",f||"unknown relay error")}u&&await new Promise(f=>setTimeout(f,1e3))}}(),()=>{var f;u=!1,s==null||s(),(f=l)==null||f.close()}}async executeNip47Request(e,n,r,s){var i=this;return await this._checkConnected(),await this._selectEncryptionType(),new Promise((l,u)=>{(async function(){const f={method:e,params:n},h=await i.encrypt(i.walletPubkey,JSON.stringify(f)),m={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",i.walletPubkey],["v",i.encryptionType==="nip44_v2"?"1.0":"0.0"],["encryption",i.encryptionType]],content:h},p=await i.signEvent(m),x=i.relay.subscribe([{kinds:[23195],authors:[i.walletPubkey],"#e":[p.id]}],{}),w=setTimeout(function(){x.close(),u(new c2(`reply timeout: event ${p.id}`,"INTERNAL"))},(s==null?void 0:s.replyTimeout)||6e4);x.onevent=async function(v){clearTimeout(w),x.close();const b=await i.decrypt(i.walletPubkey,v.content);let N;try{N=JSON.parse(b)}catch{return clearTimeout(w),x.close(),void u(new d2("failed to deserialize response","INTERNAL"))}var _,T;N.result?r(N.result)?l(N.result):(clearTimeout(w),x.close(),u(new Dg("response from NWC failed validation: "+JSON.stringify(N.result),"INTERNAL"))):(clearTimeout(w),x.close(),u(new OF(((_=N.error)==null?void 0:_.message)||"unknown Error",((T=N.error)==null?void 0:T.code)||"INTERNAL")))};const S=setTimeout(function(){x.close(),u(new l2(`publish timeout: ${p.id}`,"INTERNAL"))},(s==null?void 0:s.publishTimeout)||5e3);try{await i.relay.publish(p),clearTimeout(S)}catch(v){clearTimeout(S),u(new u2(`failed to publish: ${v}`,"INTERNAL"))}})()})}async executeMultiNip47Request(e,n,r,s,i){var l=this;await this._checkConnected(),await this._selectEncryptionType();const u=[];return new Promise((f,h)=>{(async function(){const m={method:e,params:n},p=await l.encrypt(l.walletPubkey,JSON.stringify(m)),x={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",l.walletPubkey],["v",l.encryptionType==="nip44_v2"?"1.0":"0.0"],["encryption",l.encryptionType]],content:p},w=await l.signEvent(x),S=l.relay.subscribe([{kinds:[23195],authors:[l.walletPubkey],"#e":[w.id]}],{}),v=setTimeout(function(){S.close(),h(new c2(`reply timeout: event ${w.id}`,"INTERNAL"))},(i==null?void 0:i.replyTimeout)||6e4);S.onevent=async function(N){const _=await l.decrypt(l.walletPubkey,N.content);let T;try{T=JSON.parse(_)}catch{clearTimeout(v),S.close(),h(new d2("failed to deserialize response","INTERNAL"))}if(T.result){var M;if(!s(T.result))return clearTimeout(v),S.close(),void h(new Dg("Response from NWC failed validation: "+JSON.stringify(T.result),"INTERNAL"));const O=(M=N.tags.find(F=>F[0]==="d"))==null?void 0:M[1];if(O===void 0)return clearTimeout(v),S.close(),void h(new Dg("No d tag found in response event","INTERNAL"));u.push(ei({},T.result,{dTag:O})),u.length===r&&(clearTimeout(v),S.close(),f(u))}else{var D,B;clearTimeout(v),S.close(),h(new DF((D=T.error)==null?void 0:D.message,(B=T.error)==null?void 0:B.code))}};const b=setTimeout(function(){S.close(),h(new l2(`Publish timeout: ${w.id}`,"INTERNAL"))},(i==null?void 0:i.publishTimeout)||5e3);try{await l.relay.publish(w),clearTimeout(b)}catch(N){clearTimeout(b),h(new u2(`Failed to publish: ${N}`,"INTERNAL"))}})()})}async _checkConnected(){if(!this.secret)throw new Error("Missing secret key");if(!this.relayUrl)throw new Error("Missing relay url");try{this.relay.connected||await this.relay.connect()}catch{throw console.error("failed to connect to relay",this.relayUrl),new MF("Failed to connect to "+this.relayUrl,"OTHER")}}async _selectEncryptionType(){if(!this._encryptionType){const e=await this.getWalletServiceInfo(),n=this._findPreferredEncryptionType(e.encryptions);if(!n)throw new LF("no compatible encryption or version found between wallet and client","UNSUPPORTED_ENCRYPTION");n==="nip04"&&console.warn("NIP-04 encryption is about to be deprecated. Please upgrade your wallet service to use NIP-44 instead."),this._encryptionType=n}}_findPreferredEncryptionType(e){return e.includes("nip44_v2")?"nip44_v2":e.includes("nip04")?"nip04":null}},$F=class{constructor(e,n){this.transaction=void 0,this.invoice=void 0,this._nwcClient=void 0,this._unsubscribeFunc=void 0,this._timeoutFunc=void 0,this._timeoutId=void 0,this.transaction=n,this.invoice=new rx({pr:n.invoice}),this._nwcClient=e}onPaid(e){var n=this;return async function(){let r;try{var s;r=(s=(await n._nwcClient.getInfo()).notifications)==null?void 0:s.includes("payment_received")}catch{console.error("failed to fetch info, falling back to polling")}const i=u=>{n._unsubscribeFunc==null||n._unsubscribeFunc(),e(u)},l=u=>()=>{n._timeoutFunc=void 0,clearTimeout(n._timeoutId),u()};if(r){const u=f=>{f.notification.payment_hash===n.transaction.payment_hash&&i(f.notification)};n._unsubscribeFunc=l(await n._nwcClient.subscribeNotifications(u,["payment_received"]))}else console.warn("current connection does not support notifications, falling back to polling"),n._unsubscribeFunc=l(n._onPaidPollingFallback(i))}(),this}onTimeout(e,n){return this._timeoutFunc=()=>{var r;(r=this._unsubscribeFunc)==null||r.call(this),n()},this._timeoutId=setTimeout(()=>{var r;(r=this._timeoutFunc)==null||r.call(this)},1e3*e),this}unsubscribe(){var e;(e=this._unsubscribeFunc)==null||e.call(this)}_onPaidPollingFallback(e){var n=this;let r=!0;return async function(){for(;r;){const s=await n._nwcClient.lookupInvoice({payment_hash:n.transaction.payment_hash});if(s.settled_at&&s.preimage){e(s),r=!1;break}await new Promise(i=>setTimeout(i,3e3))}}(),()=>{r=!1}}};async function f2(t){if(typeof t=="number")return{satoshi:t,millisat:1e3*t};const e=await Promise.resolve(t.satoshi);return{satoshi:e,millisat:1e3*e}}class h2{constructor(e){this.nwcClient=void 0,this.nwcClient=typeof e=="string"?new Lg({nostrWalletConnectUrl:e}):e instanceof Lg?e:new Lg(e)}async pay(e,n,r){let s=e;const i=n?await f2(n):void 0;if(s.indexOf("@")>-1){var l,u;if(!i)throw new Error("Amount must be provided when paying to a lightning address");const h=new RF(e);await h.fetch(),s=(await h.requestInvoice({satoshi:i.satoshi,comment:r==null||(l=r.metadata)==null?void 0:l.comment,payerdata:r==null||(u=r.metadata)==null?void 0:u.payer_data})).paymentRequest}const f=await this.nwcClient.payInvoice(ei({},r||{},{invoice:s,amount:i==null?void 0:i.millisat}));return ei({},f,{invoice:new rx({pr:s})})}async requestPayment(e,n){const r=await f2(e),s=await this.nwcClient.makeInvoice(ei({},n||{},{amount:r.millisat}));return new $F(this.nwcClient,s)}close(){this.nwcClient.close()}}function BF(){const{toast:t}=ui(),[e,n]=eh("nwc-connections",[]),[r,s]=eh("nwc-active-connection",null),[i,l]=y.useState({}),u=async(p,x)=>{const S=(b=>{try{return!b.startsWith("nostr+walletconnect://")&&!b.startsWith("nostrwalletconnect://")?(console.error("Invalid NWC URI protocol:",{protocol:b.split("://")[0]}),null):{connectionString:b}}catch(N){return console.error("Failed to parse NWC URI:",N),null}})(p);if(!S)return t({title:"Invalid NWC URI",description:"Please check the connection string and try again.",variant:"destructive"}),!1;if(e.find(b=>b.connectionString===S.connectionString))return t({title:"Connection already exists",description:"This wallet is already connected.",variant:"destructive"}),!1;try{let b;const N=new Promise((D,B)=>{try{const O=new h2(S.connectionString);D(O)}catch(O){B(O)}}),_=new Promise((D,B)=>{b=setTimeout(()=>B(new Error("Connection test timeout")),1e4)});try{await Promise.race([N,_]),b&&clearTimeout(b)}catch(D){throw b&&clearTimeout(b),D}const T={connectionString:S.connectionString,alias:x||"NWC Wallet",isConnected:!0};l(D=>({...D,[S.connectionString]:{alias:T.alias,methods:["pay_invoice"]}}));const M=[...e,T];return n(M),(e.length===0||!r)&&s(S.connectionString),t({title:"Wallet connected",description:`Successfully connected to ${T.alias}.`}),!0}catch(b){console.error("NWC connection failed:",b);const N=b instanceof Error?b.message:"Unknown error occurred";return t({title:"Connection failed",description:`Could not connect to the wallet: ${N}`,variant:"destructive"}),!1}},f=p=>{const x=e.filter(w=>w.connectionString!==p);if(n(x),r===p){const w=x.length>0?x[0].connectionString:null;s(w)}l(w=>{const S={...w};return delete S[p],S}),t({title:"Wallet disconnected",description:"The wallet connection has been removed."})},h=y.useCallback(()=>!r&&e.length>0?(s(e[0].connectionString),e[0]):r&&e.find(x=>x.connectionString===r)||null,[r,e,s]),m=y.useCallback(async(p,x)=>{if(!p.connectionString)throw new Error("Invalid connection: missing connection string");let w;try{w=new h2(p.connectionString)}catch(S){throw console.error("Failed to create NWC client:",S),new Error(`Failed to create NWC client: ${S instanceof Error?S.message:"Unknown error"}`)}try{let S;const v=new Promise((N,_)=>{S=setTimeout(()=>_(new Error("Payment timeout after 15 seconds")),15e3)}),b=w.pay(x);try{const N=await Promise.race([b,v]);return S&&clearTimeout(S),N}catch(N){throw S&&clearTimeout(S),N}}catch(S){throw console.error("NWC payment failed:",S),S instanceof Error?S.message.includes("timeout")?new Error("Payment timed out. Please try again."):S.message.includes("insufficient")?new Error("Insufficient balance in connected wallet."):S.message.includes("invalid")?new Error("Invalid invoice or connection. Please check your wallet."):new Error(`Payment failed: ${S.message}`):new Error("Payment failed with unknown error")}},[]);return{connections:e,activeConnection:r,connectionInfo:i,addConnection:u,removeConnection:f,setActiveConnection:s,getActiveConnection:h,sendPayment:m}}const Mj=y.createContext(null);function sx(){const t=y.useContext(Mj);if(!t)throw new Error("useNWC must be used within a NWCProvider");return t}function FF({children:t}){const e=BF();return c.jsx(Mj.Provider,{value:e,children:t})}const UF="modulepreload",zF=function(t){return"/"+t},p2={},nu=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(n.map(h=>{if(h=zF(h),h in p2)return;p2[h]=!0;const m=h.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":UF,m||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),m)return new Promise((w,S)=>{x.addEventListener("load",w),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};function Vr(t){const{nostr:e}=Hr();return ua({queryKey:["author",t??""],queryFn:async({signal:n})=>{if(!t)return{};const{getTestPlayerMetadata:r}=await nu(async()=>{const{getTestPlayerMetadata:i}=await Promise.resolve().then(()=>aR);return{getTestPlayerMetadata:i}},void 0),s=r(t);if(s)try{return{metadata:ut.json().pipe(ut.metadata()).parse(s.content),event:s}}catch{return{event:s}}try{const[i]=await e.query([{kinds:[0],authors:[t],limit:1}],{signal:AbortSignal.any([n,AbortSignal.timeout(1500)])});if(!i)throw new Error("No event found");try{return{metadata:ut.json().pipe(ut.metadata()).parse(i.content),event:i}}catch{return{event:i}}}catch{return{}}},staleTime:5*60*1e3,retry:1})}function no(){const{nostr:t}=Hr(),{logins:e}=L0(),n=y.useCallback(l=>{switch(l.type){case"nsec":return Ki.fromNsecLogin(l);case"bunker":return Ki.fromBunkerLogin(l,t);case"extension":return Ki.fromExtensionLogin(l);default:throw new Error(`Unsupported login type: ${l.type}`)}},[t]),r=y.useMemo(()=>{const l=[];for(const u of e)try{const f=n(u);l.push(f)}catch(f){console.warn("Skipped invalid login",u.id,f)}return l},[e,n]),s=r[0],i=Vr(s==null?void 0:s.pubkey);return{user:s,users:r,...i.data}}function np(){const{nostr:t}=Hr(),{user:e}=no();return su({mutationFn:async n=>{if(e){const r=n.tags??[];location.protocol==="https:"&&!r.some(([i])=>i==="client")&&r.push(["client",location.hostname]);const s=await e.signer.signEvent({kind:n.kind,content:n.content??"",tags:r,created_at:n.created_at??Math.floor(Date.now()/1e3)});return await t.event(s,{signal:AbortSignal.timeout(5e3)}),s}else throw new Error("User is not logged in")},onError:n=>{console.error("Failed to publish event:",n)},onSuccess:n=>{console.log("Event published successfully:",n)}})}function m2(t){var n;return!(t.kind!==4||!((n=t.tags)==null?void 0:n.some(([r])=>r==="p"))||!t.content)}function Oj(t){const e=new Date(t*1e3),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(r);s.setDate(s.getDate()-1);const i=new Date(r);return i.setDate(i.getDate()-i.getDay()),e>=r?e.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}):e>=s?"Yesterday":e>=i?e.toLocaleDateString(void 0,{weekday:"short"}):e.getFullYear()===n.getFullYear()?e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function Dj(t){return new Date(t*1e3).toLocaleString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}const $t={NIP04:"nip04",NIP17:"nip17",UNKNOWN:"unknown"},Li={NIP04_ONLY:"nip04_only",NIP17_ONLY:"nip17_only",NIP04_OR_NIP17:"nip04_or_nip17"},Bt={IDLE:"idle",CACHE:"cache",RELAYS:"relays",SUBSCRIPTIONS:"subscriptions",READY:"ready"},Zn={DEBOUNCED_WRITE_DELAY:15e3,RECENT_MESSAGE_THRESHOLD:5e3,SUBSCRIPTION_OVERLAP_SECONDS:10,SCAN_TOTAL_LIMIT:2e4,SCAN_BATCH_SIZE:1e3,NIP4_QUERY_TIMEOUT:15e3,NIP17_QUERY_TIMEOUT:3e4,ERROR_LOG_DEBOUNCE_DELAY:2e3},g2={NIP4_STARTING:"Starting NIP-4 scan...",NIP17_STARTING:"Starting NIP-17 scan..."},WF=t=>{let e=0,n=null;return r=>{e++,n&&clearTimeout(n),n=setTimeout(()=>{e>0&&(console.error(`[DM] ${t} processing complete with ${e} errors`),e=0)},Zn.ERROR_LOG_DEBOUNCE_DELAY)}},$g=WF("NIP-17"),Lj=y.createContext(null);function Ou(){const t=y.useContext(Lj);if(!t)throw new Error("useDMContext must be used within DMProvider");return t}const Bg=25;function HF(t){const{messages:e}=Ou(),[n,r]=y.useState(Bg),s=y.useMemo(()=>{const l=e.get(t);if(!l)return{messages:[],hasMoreMessages:!1,totalCount:0,lastMessage:null,lastActivity:0};const u=l.messages.length,f=u>n;return{messages:l.messages.slice(-n),hasMoreMessages:f,totalCount:u,lastMessage:l.lastMessage,lastActivity:l.lastActivity}},[e,t,n]),i=y.useCallback(()=>{r(l=>l+Bg)},[]);return y.useEffect(()=>{r(Bg)},[t]),{...s,loadEarlierMessages:i}}function y2(t,e=[]){if(e.length===0)return t;const n=e.map(r=>r.url).join(`
`);return t?`${t}

${n}`:n}function v2(t=[]){return t.map(e=>{const n=["imeta"];return n.push(`url ${e.url}`),e.mimeType&&n.push(`m ${e.mimeType}`),e.size&&n.push(`size ${e.size}`),e.name&&n.push(`alt ${e.name}`),e.tags.forEach(r=>{r[0]==="x"&&n.push(`x ${r[1]}`),r[0]==="ox"&&n.push(`ox ${r[1]}`)}),n})}function VF({children:t,config:e}){const{enabled:n=!1,protocolMode:r=Li.NIP17_ONLY}=e||{},{user:s}=no(),{nostr:i}=Hr(),{mutateAsync:l}=np(),{toast:u}=ui(),{config:f}=Ru(),h=y.useMemo(()=>s==null?void 0:s.pubkey,[s==null?void 0:s.pubkey]),m=y.useRef(f.relayUrl),p=r!==Li.NIP04_ONLY,[x,w]=y.useState(new Map),[S,v]=y.useState({nip4:null,nip17:null}),[b,N]=y.useState(!1),[_,T]=y.useState(Bt.IDLE),[M,D]=y.useState({isNIP4Connected:!1,isNIP17Connected:!1}),[B,O]=y.useState(!1),[F,R]=y.useState(!1),[L,A]=y.useState({nip4:null,nip17:null}),U=y.useRef(null),K=y.useRef(null),H=y.useRef(null),V=su({mutationFn:async({recipientPubkey:le,content:he,attachments:je=[]})=>{if(!s)throw new Error("User is not logged in");if(!s.signer.nip04)throw new Error("NIP-04 encryption not available");const pe=y2(he,je),Pe=await s.signer.nip04.encrypt(le,pe),ke=[["p",le],...v2(je)];return await l({kind:4,content:Pe,tags:ke})},onError:le=>{console.error("[DM] Failed to send NIP-04 message:",le),u({title:"Failed to send message",description:le.message,variant:"destructive"})}}),Q=su({mutationFn:async({recipientPubkey:le,content:he,attachments:je=[]})=>{if(!s)throw new Error("User is not logged in");if(!s.signer.nip44)throw new Error("NIP-44 encryption not available");const pe=Math.floor(Date.now()/1e3),Pe=Ce=>{const mt=-Math.floor(Math.random()*172800);return Ce+mt},ke=y2(he,je),Be=[["p",le],...v2(je)],P={kind:je&&je.length>0?15:14,pubkey:s.pubkey,created_at:pe,tags:Be,content:ke},k={kind:13,pubkey:s.pubkey,created_at:pe,tags:[],content:await s.signer.nip44.encrypt(le,JSON.stringify(P))},j={kind:13,pubkey:s.pubkey,created_at:pe,tags:[],content:await s.signer.nip44.encrypt(s.pubkey,JSON.stringify(P))},$=bl(),X=bl(),se=new du($),ue=new du(X),Xe=await se.nip44.encrypt(le,JSON.stringify(k)),pt=await ue.nip44.encrypt(s.pubkey,JSON.stringify(j)),[at,kt]=await Promise.all([se.signEvent({kind:1059,created_at:Pe(pe),tags:[["p",le]],content:Xe}),ue.signEvent({kind:1059,created_at:Pe(pe),tags:[["p",s.pubkey]],content:pt})]);try{const Ce=await Promise.allSettled([i.event(at),i.event(kt)]),dt=Ce[0],mt=Ce[1];if(dt.status==="rejected"){console.error("[DM] Failed to publish recipient gift wrap"),console.error("[DM] Recipient gift wrap event:",at);const rt=dt.reason;rt&&typeof rt=="object"&&"errors"in rt?console.error("[DM] Recipient individual relay errors:",rt.errors):console.error("[DM] Recipient error:",rt)}if(mt.status==="rejected"){console.error("[DM] Failed to publish sender gift wrap"),console.error("[DM] Sender gift wrap event:",kt);const rt=mt.reason;rt&&typeof rt=="object"&&"errors"in rt?console.error("[DM] Sender individual relay errors:",rt.errors):console.error("[DM] Sender error:",rt)}if(dt.status==="rejected"&&mt.status==="rejected")throw new Error(`Both gift wraps rejected. Recipient: ${dt.reason}, Sender: ${mt.reason}`)}catch(Ce){throw console.error("[DM] Publish error:",Ce),Ce}return at},onError:le=>{console.error("[DM] Failed to send NIP-17 message:",le),u({title:"Failed to send message",description:le.message,variant:"destructive"})}}),te=y.useCallback(async le=>{if(!(s!=null&&s.pubkey))return;let he=[],je=0,pe=le||0;for(A(Pe=>({...Pe,nip4:{current:0,status:g2.NIP4_STARTING}}));je<Zn.SCAN_TOTAL_LIMIT;){const Pe=Math.min(Zn.SCAN_BATCH_SIZE,Zn.SCAN_TOTAL_LIMIT-je),ke=[{kinds:[4],"#p":[s.pubkey],limit:Pe,since:pe},{kinds:[4],authors:[s.pubkey],limit:Pe,since:pe}];try{const Ye=(await i.query(ke,{signal:AbortSignal.timeout(Zn.NIP4_QUERY_TIMEOUT)})).filter(m2);if(Ye.length===0)break;he=[...he,...Ye],je+=Ye.length,A($=>({...$,nip4:{current:he.length,status:`Batch ${Math.floor(je/Zn.SCAN_BATCH_SIZE)+1} complete: ${Ye.length} messages`}}));const P=Ye.filter($=>$.pubkey!==s.pubkey).length>0?Math.min(...Ye.filter($=>$.pubkey!==s.pubkey).map($=>$.created_at)):1/0,k=Ye.filter($=>$.pubkey===s.pubkey).length>0?Math.min(...Ye.filter($=>$.pubkey===s.pubkey).map($=>$.created_at)):1/0,j=Math.min(P,k);if(j!==1/0&&(pe=j),Ye.length<Pe*2)break}catch(Be){console.error("[DM] NIP-4 Error in batch query:",Be);break}}return A(Pe=>({...Pe,nip4:null})),he},[s,i]),Z=y.useCallback(async le=>{if(!(s!=null&&s.pubkey))return;let he=[],je=0;const pe=2*24*60*60;let Pe=le?le-pe:0;for(A(ke=>({...ke,nip17:{current:0,status:g2.NIP17_STARTING}}));je<Zn.SCAN_TOTAL_LIMIT;){const ke=Math.min(Zn.SCAN_BATCH_SIZE,Zn.SCAN_TOTAL_LIMIT-je),Be=[{kinds:[1059],"#p":[s.pubkey],limit:ke,since:Pe}];try{const Ye=await i.query(Be,{signal:AbortSignal.timeout(Zn.NIP17_QUERY_TIMEOUT)});if(Ye.length===0||(he=[...he,...Ye],je+=Ye.length,A(P=>({...P,nip17:{current:he.length,status:`Batch ${Math.floor(je/Zn.SCAN_BATCH_SIZE)+1} complete: ${Ye.length} messages`}})),Ye.length>0&&(Pe=Math.min(...Ye.map(k=>k.created_at))),Ye.length<ke))break}catch(Ye){console.error("[DM] NIP-17 Error in batch query:",Ye);break}}return A(ke=>({...ke,nip17:null})),he},[s,i]),G=y.useCallback(async(le,he)=>{var je,pe;if(le===$t.NIP17&&!p)return{lastMessageTimestamp:he,messageCount:0};if(!h)return{lastMessageTimestamp:he,messageCount:0};if(le===$t.NIP04){const Pe=await te(he);if(Pe&&Pe.length>0){const ke=new Map;for(const P of Pe){const k=P.pubkey===(s==null?void 0:s.pubkey),j=(pe=(je=P.tags)==null?void 0:je.find(([at])=>at==="p"))==null?void 0:pe[1],$=k?j:P.pubkey;if(!$||$===(s==null?void 0:s.pubkey))continue;const{decryptedContent:X,error:se}=await ne(P,$),ue={...P,content:P.content,decryptedContent:X,error:se};Date.now()-P.created_at*1e3<5e3&&(ue.clientFirstSeen=Date.now()),ke.has($)||ke.set($,z());const pt=ke.get($);pt.messages.push(ue),pt.hasNIP4=!0}ke.forEach(P=>{W(P)}),ae(ke);const Be=Math.floor(Date.now()/1e3);return v(P=>({...P,nip4:Be})),{lastMessageTimestamp:Pe.reduce((P,k)=>k.created_at>P.created_at?k:P).created_at,messageCount:Pe.length}}else{const ke=Math.floor(Date.now()/1e3);return v(Be=>({...Be,nip4:ke})),{lastMessageTimestamp:he,messageCount:0}}}else if(le===$t.NIP17){const Pe=await Z(he);if(Pe&&Pe.length>0){const ke=new Map;for(const P of Pe)try{const{processedMessage:k,conversationPartner:j,sealEvent:$}=await we(P);if(k.error)continue;const X={...$,created_at:k.created_at,decryptedEvent:{...k,content:k.decryptedContent},decryptedContent:k.decryptedContent,originalGiftWrapId:P.id};Date.now()-k.created_at*1e3<5e3&&(X.clientFirstSeen=Date.now()),ke.has(j)||ke.set(j,z()),ke.get(j).messages.push(X),ke.get(j).hasNIP17=!0}catch(k){console.error("[DM] Error processing gift wrap from relay:",k)}ke.forEach(P=>{W(P)}),ae(ke);const Be=Math.floor(Date.now()/1e3);return v(P=>({...P,nip17:Be})),{lastMessageTimestamp:Pe.reduce((P,k)=>k.created_at>P.created_at?k:P).created_at,messageCount:Pe.length}}else{const ke=Math.floor(Date.now()/1e3);return v(Be=>({...Be,nip17:ke})),{lastMessageTimestamp:he,messageCount:0}}}return{lastMessageTimestamp:he,messageCount:0}},[p,h,te,Z,s]),ne=y.useCallback(async(le,he)=>{var je;try{return(je=s==null?void 0:s.signer)!=null&&je.nip04?{decryptedContent:await s.signer.nip04.decrypt(he,le.content)}:{decryptedContent:"",error:"No NIP-04 decryption available"}}catch(pe){return console.error(`[DM] Failed to decrypt NIP-4 message ${le.id}:`,pe),{decryptedContent:"",error:"Decryption failed"}}},[s]),z=y.useCallback(()=>({messages:[],lastActivity:0,lastMessage:null,hasNIP4:!1,hasNIP17:!1}),[]),W=y.useCallback(le=>{le.messages.sort((he,je)=>he.created_at-je.created_at),le.messages.length>0&&(le.lastActivity=le.messages[le.messages.length-1].created_at,le.lastMessage=le.messages[le.messages.length-1])},[]),ae=y.useCallback(le=>{w(he=>{const je=new Map(he);return le.forEach((pe,Pe)=>{const ke=je.get(Pe);if(ke){const Be=new Set(ke.messages.map($=>$.originalGiftWrapId||$.id)),Ye=pe.messages.filter($=>!Be.has($.originalGiftWrapId||$.id)),P=[...ke.messages,...Ye];P.sort(($,X)=>$.created_at-X.created_at);const k=P.length>0?P[P.length-1]:null,j=k?k.created_at:ke.lastActivity;je.set(Pe,{...ke,messages:P,lastActivity:j,lastMessage:k,hasNIP4:ke.hasNIP4||pe.hasNIP4,hasNIP17:ke.hasNIP17||pe.hasNIP17})}else je.set(Pe,pe)}),je})},[]),de=y.useCallback((le,he,je)=>{w(pe=>{const Pe=new Map(pe),ke=Pe.get(he);if(ke){const Be=le.originalGiftWrapId||le.id;if(ke.messages.some(j=>(j.originalGiftWrapId||j.id)===Be))return pe;const Ye=ke.messages.findIndex(j=>j.isSending&&j.pubkey===le.pubkey&&j.decryptedContent===le.decryptedContent&&Math.abs(j.created_at-le.created_at)<=30);let P;if(Ye!==-1){const j=ke.messages[Ye];P=[...ke.messages],P[Ye]={...le,created_at:j.created_at,clientFirstSeen:j.clientFirstSeen}}else P=[...ke.messages,le];P.sort((j,$)=>j.created_at-$.created_at);const k=P[P.length-1];Pe.set(he,{...ke,messages:P,lastActivity:k.created_at,lastMessage:k,hasNIP4:je===$t.NIP04?!0:ke.hasNIP4,hasNIP17:je===$t.NIP17?!0:ke.hasNIP17})}else{const Be={messages:[le],lastActivity:le.created_at,lastMessage:le,hasNIP4:je===$t.NIP04,hasNIP17:je===$t.NIP17};Pe.set(he,Be)}return Pe})},[]),fe=y.useCallback(async le=>{var P,k;if(!(s!=null&&s.pubkey)||!m2(le))return;const he=le.pubkey===s.pubkey,je=(k=(P=le.tags)==null?void 0:P.find(([j])=>j==="p"))==null?void 0:k[1],pe=he?je:le.pubkey;if(!pe||pe===s.pubkey)return;const{decryptedContent:Pe,error:ke}=await ne(le,pe),Be={...le,content:le.content,decryptedContent:Pe,error:ke};Date.now()-le.created_at*1e3<5e3&&(Be.clientFirstSeen=Date.now()),de(Be,pe,$t.NIP04)},[s,ne,de]),we=y.useCallback(async le=>{var he,je;if(!((he=s==null?void 0:s.signer)!=null&&he.nip44))return{processedMessage:{...le,content:"",decryptedContent:"",error:"No NIP-44 decryption available"},conversationPartner:le.pubkey,sealEvent:le};try{const pe=await s.signer.nip44.decrypt(le.pubkey,le.content),Pe=JSON.parse(pe);if(Pe.kind!==13)return console.log(`[DM]  NIP-17 INVALID SEAL - expected kind 13, got ${Pe.kind}`,{giftWrapId:le.id,sealKind:Pe.kind}),{processedMessage:{...le,content:"",decryptedContent:"",error:`Invalid Seal format - expected kind 13, got ${Pe.kind}`},conversationPartner:le.pubkey,sealEvent:le};const ke=await s.signer.nip44.decrypt(Pe.pubkey,Pe.content),Be=JSON.parse(ke);if(Be.kind!==14&&Be.kind!==15)return console.log("[DM]  NIP-17 MESSAGE WITH UNSUPPORTED INNER EVENT KIND:",{giftWrapId:le.id,innerKind:Be.kind,expectedKinds:[14,15],sealPubkey:Pe.pubkey,messageEvent:Be}),{processedMessage:{...le,content:"",decryptedContent:"",error:`Invalid message format - expected kind 14 or 15, got ${Be.kind}`},conversationPartner:le.pubkey,sealEvent:Pe};let Ye;if(Pe.pubkey===s.pubkey){const P=(je=Be.tags.find(([k])=>k==="p"))==null?void 0:je[1];if(!P||P===s.pubkey)return{processedMessage:{...le,content:"",decryptedContent:"",error:"Invalid recipient - malformed p tag"},conversationPartner:le.pubkey,sealEvent:Pe};Ye=P}else Ye=Pe.pubkey;return{processedMessage:{...Be,id:Be.id||`missing-nip17-inner-${Be.created_at}-${Be.pubkey.substring(0,8)}-${Be.content.substring(0,16)}`,decryptedContent:Be.content},conversationPartner:Ye,sealEvent:Pe}}catch(pe){return console.error("[DM] Failed to process NIP-17 gift wrap:",{giftWrapId:le.id,error:pe instanceof Error?pe.message:String(pe)}),$g(pe),{processedMessage:{...le,content:"",decryptedContent:"",error:pe instanceof Error?pe.message:"Failed to decrypt or parse NIP-17 message"},conversationPartner:le.pubkey,sealEvent:le}}},[s]),ce=y.useCallback(async le=>{if(s!=null&&s.pubkey&&le.kind===1059)try{const{processedMessage:he,conversationPartner:je,sealEvent:pe}=await we(le);if(he.error){console.error("[DM] NIP-17 message decryption failed:",{giftWrapId:le.id,error:he.error}),$g(new Error(he.error));return}const Pe={...pe,created_at:he.created_at,decryptedEvent:{...he,content:he.decryptedContent},decryptedContent:he.decryptedContent,originalGiftWrapId:le.id};Date.now()-he.created_at*1e3<5e3&&(Pe.clientFirstSeen=Date.now()),de(Pe,je,$t.NIP17)}catch(he){console.error("[DM] Exception in processIncomingNIP17Message:",{giftWrapId:le.id,error:he instanceof Error?he.message:String(he)}),$g(he)}},[s,we,de]),ge=y.useCallback(async le=>{if(!(!(s!=null&&s.pubkey)||!i)){U.current&&U.current.close();try{let he=le||Math.floor(Date.now()/1e3);!le&&S.nip4&&(he=S.nip4-Zn.SUBSCRIPTION_OVERLAP_SECONDS);const je=[{kinds:[4],"#p":[s.pubkey],since:he},{kinds:[4],authors:[s.pubkey],since:he}],pe=i.req(je);let Pe=!0;(async()=>{try{for await(const ke of pe){if(!Pe)break;ke[0]==="EVENT"&&await fe(ke[2])}}catch(ke){Pe&&console.error("[DM] NIP-4 subscription error:",ke)}})(),U.current={close:()=>{Pe=!1}},D(ke=>({...ke,isNIP4Connected:!0}))}catch(he){console.error("[DM] Failed to start NIP-4 subscription:",he),D(je=>({...je,isNIP4Connected:!1}))}}},[s,i,S.nip4,fe]),be=y.useCallback(async le=>{if(!(!(s!=null&&s.pubkey)||!i||!p)){K.current&&K.current.close();try{let he=le||Math.floor(Date.now()/1e3);!le&&S.nip17&&(he=S.nip17-Zn.SUBSCRIPTION_OVERLAP_SECONDS);const je=2*24*60*60;he=he-je;const pe=[{kinds:[1059],"#p":[s.pubkey],since:he}],Pe=i.req(pe);let ke=!0;(async()=>{try{for await(const Be of Pe){if(!ke)break;Be[0]==="EVENT"&&await ce(Be[2])}}catch(Be){ke&&console.error("[DM] NIP-17 subscription error:",Be)}})(),K.current={close:()=>{ke=!1}},D(Be=>({...Be,isNIP17Connected:!0}))}catch(he){console.error("[DM] Failed to start NIP-17 subscription:",he),D(je=>({...je,isNIP17Connected:!1}))}}},[s,i,S.nip17,p,ce]),De=y.useCallback(async()=>{var le,he;if(!h)return{};try{const{readMessagesFromDB:je}=await nu(async()=>{const{readMessagesFromDB:Be}=await import("./dmMessageStore-D7D6cHjh.js");return{readMessagesFromDB:Be}},[]),pe=await je(h);if(!pe||Object.keys(pe.participants).length===0)return{};const Pe=p?pe.participants:Object.fromEntries(Object.entries(pe.participants).filter(([Be,Ye])=>!Ye.hasNIP17)),ke=new Map;for(const[Be,Ye]of Object.entries(Pe)){const P=await Promise.all(Ye.messages.map(async k=>{var X,se,ue,Xe;let j,$;if(k.kind===4){const pt=k.pubkey===(s==null?void 0:s.pubkey)?(X=k.tags.find(([at])=>at==="p"))==null?void 0:X[1]:k.pubkey;if(pt&&((se=s==null?void 0:s.signer)!=null&&se.nip04))try{j=await s.signer.nip04.decrypt(pt,k.content)}catch{$="Decryption failed"}}else if(k.kind===13&&(ue=s==null?void 0:s.signer)!=null&&ue.nip44)try{const pt=await s.signer.nip44.decrypt(k.pubkey,k.content),at=JSON.parse(pt);return{...k,decryptedEvent:at,decryptedContent:at.content}}catch{$="Decryption failed"}return{...k,id:k.id||`missing-${k.kind}-${k.created_at}-${k.pubkey.substring(0,8)}-${((Xe=k.content)==null?void 0:Xe.substring(0,16))||"nocontent"}`,decryptedContent:j,error:$}}));ke.set(Be,{messages:P,lastActivity:Ye.lastActivity,lastMessage:P.length>0?P[P.length-1]:null,hasNIP4:Ye.hasNIP4,hasNIP17:Ye.hasNIP17})}return w(ke),pe.lastSync&&v(pe.lastSync),{nip4Since:((le=pe.lastSync)==null?void 0:le.nip4)||void 0,nip17Since:((he=pe.lastSync)==null?void 0:he.nip17)||void 0}}catch(je){return console.error("[DM] Error loading cached messages:",je),{}}},[h,p,s]),Ze=y.useCallback(async()=>{if(!b){N(!0),T(Bt.CACHE);try{const{nip4Since:le,nip17Since:he}=await De();O(!0),T(Bt.READY),N(!1),T(Bt.RELAYS);const[je,pe]=await Promise.all([G($t.NIP04,le),p?G($t.NIP17,he):Promise.resolve({lastMessageTimestamp:void 0,messageCount:0})]);je.messageCount+((pe==null?void 0:pe.messageCount)||0)>0&&R(!0),T(Bt.SUBSCRIPTIONS),await Promise.all([ge(je.lastMessageTimestamp),p?be(pe==null?void 0:pe.lastMessageTimestamp):Promise.resolve()]),T(Bt.READY)}catch(le){console.error("[DM] Error in message loading:",le),O(!0),T(Bt.READY),N(!1)}}},[De,G,ge,be,p,b]),Qe=y.useCallback(async()=>{if(!(!n||!h))try{U.current&&(U.current.close(),U.current=null),K.current&&(K.current.close(),K.current=null);const{deleteMessagesFromDB:le}=await nu(async()=>{const{deleteMessagesFromDB:he}=await import("./dmMessageStore-D7D6cHjh.js");return{deleteMessagesFromDB:he}},[]);await le(h),w(new Map),v({nip4:null,nip17:null}),D({isNIP4Connected:!1,isNIP17Connected:!1}),A({nip4:null,nip17:null}),T(Bt.IDLE),O(!1)}catch(le){throw console.error("[DM] Error clearing cache:",le),le}},[n,h]);y.useEffect(()=>{!n||!h||B||b||Ze()},[n,h,B,b,Ze]),y.useEffect(()=>{if(n)return()=>{U.current&&(U.current.close(),U.current=null),K.current&&(K.current.close(),K.current=null)}},[n,h]),y.useEffect(()=>{if(n)return()=>{U.current&&U.current.close(),K.current&&K.current.close(),H.current&&clearTimeout(H.current),D({isNIP4Connected:!1,isNIP17Connected:!1})}},[n]),y.useEffect(()=>{const le=m.current!==f.relayUrl;m.current=f.relayUrl,le&&n&&h&&B&&Qe()},[n,h,f.relayUrl,B,Qe]),y.useEffect(()=>{if(!n||!h)return;const le=he=>{if((he.ctrlKey||he.metaKey)&&he.shiftKey&&(he.key==="R"||he.key==="r"))try{sessionStorage.setItem("dm-clear-cache-on-load","true")}catch(je){console.warn("[DM] SessionStorage unavailable, cache won't clear on hard refresh:",je)}};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[n,h]),y.useEffect(()=>{if(!(!n||!h))try{sessionStorage.getItem("dm-clear-cache-on-load")&&(sessionStorage.removeItem("dm-clear-cache-on-load"),Qe())}catch(le){console.warn("[DM] Could not check sessionStorage for cache clear flag:",le)}},[n,h,Qe]);const Te=y.useMemo(()=>{const le=[];return x.forEach((he,je)=>{if(!he.messages.length)return;const pe=he.messages.some(P=>P.pubkey===(s==null?void 0:s.pubkey)),Pe=pe,ke=!pe,Ye=he.messages[he.messages.length-1].pubkey===(s==null?void 0:s.pubkey);le.push({id:je,pubkey:je,lastMessage:he.lastMessage,lastActivity:he.lastActivity,hasNIP4Messages:he.hasNIP4,hasNIP17Messages:he.hasNIP17,isKnown:Pe,isRequest:ke,lastMessageFromUser:Ye})}),le.sort((he,je)=>je.lastActivity-he.lastActivity)},[x,s==null?void 0:s.pubkey]),yt=y.useCallback(async()=>{if(h)try{const{writeMessagesToDB:le}=await nu(async()=>{const{writeMessagesToDB:pe}=await import("./dmMessageStore-D7D6cHjh.js");return{writeMessagesToDB:pe}},[]),he={participants:{},lastSync:{nip4:S.nip4,nip17:S.nip17}};x.forEach((pe,Pe)=>{he.participants[Pe]={messages:pe.messages.map(ke=>({id:ke.id,pubkey:ke.pubkey,content:ke.content,created_at:ke.created_at,kind:ke.kind,tags:ke.tags,sig:ke.sig,...ke.originalGiftWrapId&&{originalGiftWrapId:ke.originalGiftWrapId}})),lastActivity:pe.lastActivity,hasNIP4:pe.hasNIP4,hasNIP17:pe.hasNIP17}}),await le(h,he);const je=Math.floor(Date.now()/1e3);v(pe=>({nip4:pe.nip4||je,nip17:pe.nip17||je}))}catch(le){console.error("[DM] Error writing messages to IndexedDB:",le)}},[x,h,S]),tn=y.useCallback(()=>{H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{yt(),H.current=null},Zn.DEBOUNCED_WRITE_DELAY)},[yt]);y.useEffect(()=>{!n||x.size===0||(F?(R(!1),yt()):tn())},[n,x,F,yt,tn]);const nn=y.useCallback(async le=>{if(!n)return;const{recipientPubkey:he,content:je,protocol:pe=$t.NIP04,attachments:Pe}=le;if(!h)return;const Be={id:`optimistic-${Date.now()}-${Math.random()}`,kind:pe===$t.NIP04?4:14,pubkey:h,created_at:Math.floor(Date.now()/1e3),tags:[["p",he]],content:"",decryptedContent:je,sig:"",isSending:!0,clientFirstSeen:Date.now()};de(Be,he,pe===$t.NIP04?$t.NIP04:$t.NIP17);try{pe===$t.NIP04?await V.mutateAsync({recipientPubkey:he,content:je,attachments:Pe}):pe===$t.NIP17&&await Q.mutateAsync({recipientPubkey:he,content:je,attachments:Pe})}catch(Ye){console.error(`[DM] Failed to send ${pe} message:`,Ye)}},[n,h,de,V,Q]),xn=b&&(_===Bt.CACHE||_===Bt.RELAYS),Gr={messages:x,isLoading:b,loadingPhase:_,isDoingInitialLoad:xn,lastSync:S,conversations:Te,sendMessage:nn,protocolMode:r,scanProgress:L,subscriptions:M,clearCacheAndRefetch:Qe};return c.jsx(Lj.Provider,{value:Gr,children:t})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}var Qo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qo||(Qo={}));const x2="popstate";function qF(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:l,hash:u}=r.location;return Rv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:sh(s)}return GF(e,n,null,t)}function en(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $j(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KF(){return Math.random().toString(36).substr(2,8)}function w2(t,e){return{usr:t.state,key:t.key,idx:e}}function Rv(t,e,n,r){return n===void 0&&(n=null),mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hl(e):e,{state:n,key:e&&e.key||r||KF()})}function sh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GF(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,l=s.history,u=Qo.Pop,f=null,h=m();h==null&&(h=0,l.replaceState(mu({},l.state,{idx:h}),""));function m(){return(l.state||{idx:null}).idx}function p(){u=Qo.Pop;let b=m(),N=b==null?null:b-h;h=b,f&&f({action:u,location:v.location,delta:N})}function x(b,N){u=Qo.Push;let _=Rv(v.location,b,N);h=m()+1;let T=w2(_,h),M=v.createHref(_);try{l.pushState(T,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(M)}i&&f&&f({action:u,location:v.location,delta:1})}function w(b,N){u=Qo.Replace;let _=Rv(v.location,b,N);h=m();let T=w2(_,h),M=v.createHref(_);l.replaceState(T,"",M),i&&f&&f({action:u,location:v.location,delta:0})}function S(b){let N=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof b=="string"?b:sh(b);return _=_.replace(/ $/,"%20"),en(N,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,N)}let v={get action(){return u},get location(){return t(s,l)},listen(b){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(x2,p),f=b,()=>{s.removeEventListener(x2,p),f=null}},createHref(b){return e(s,b)},createURL:S,encodeLocation(b){let N=S(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:w,go(b){return l.go(b)}};return v}var b2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(b2||(b2={}));function YF(t,e,n){return n===void 0&&(n="/"),QF(t,e,n)}function QF(t,e,n,r){let s=typeof e=="string"?Hl(e):e,i=ox(s.pathname||"/",n);if(i==null)return null;let l=Bj(t);ZF(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let h=cU(i);u=iU(l[f],h)}return u}function Bj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,l,u)=>{let f={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};f.relativePath.startsWith("/")&&(en(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=ti([r,f.relativePath]),m=n.concat(f);i.children&&i.children.length>0&&(en(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Bj(i.children,e,m,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:sU(h,i.index),routesMeta:m})};return t.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,l);else for(let f of Fj(i.path))s(i,l,f)}),e}function Fj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let l=Fj(r.join("/")),u=[];return u.push(...l.map(f=>f===""?i:[i,f].join("/"))),s&&u.push(...l),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function ZF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XF=/^:[\w-]+$/,JF=3,eU=2,tU=1,nU=10,rU=-2,E2=t=>t==="*";function sU(t,e){let n=t.split("/"),r=n.length;return n.some(E2)&&(r+=rU),e&&(r+=eU),n.filter(s=>!E2(s)).reduce((s,i)=>s+(XF.test(i)?JF:i===""?tU:nU),r)}function oU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iU(t,e,n){let{routesMeta:r}=t,s={},i="/",l=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=aU({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},m),x=f.route;if(!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:ti([i,p.pathname]),pathnameBase:hU(ti([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=ti([i,p.pathnameBase]))}return l}function aU(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lU(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,m,p)=>{let{paramName:x,isOptional:w}=m;if(x==="*"){let v=u[p]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const S=u[p];return w&&!S?h[x]=void 0:h[x]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:t}}function lU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$j(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function cU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $j(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ox(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uU(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hl(t):t;return{pathname:n?n.startsWith("/")?n:dU(n,e):e,search:pU(r),hash:mU(s)}}function dU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Uj(t,e){let n=fU(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zj(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Hl(t):(s=mu({},t),en(!s.pathname||!s.pathname.includes("?"),Fg("?","pathname","search",s)),en(!s.pathname||!s.pathname.includes("#"),Fg("#","pathname","hash",s)),en(!s.search||!s.search.includes("#"),Fg("#","search","hash",s)));let i=t===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=n;else{let p=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;s.pathname=x.join("/")}u=p>=0?e[p]:"/"}let f=uU(s,u),h=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||m)&&(f.pathname+="/"),f}const ti=t=>t.join("/").replace(/\/\/+/g,"/"),hU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Wj=["post","put","patch","delete"];new Set(Wj);const yU=["get",...Wj];new Set(yU);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gu(){return gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gu.apply(this,arguments)}const ix=y.createContext(null),vU=y.createContext(null),fa=y.createContext(null),rp=y.createContext(null),hi=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Hj=y.createContext(null);function xU(t,e){let{relative:n}=e===void 0?{}:e;Du()||en(!1);let{basename:r,navigator:s}=y.useContext(fa),{hash:i,pathname:l,search:u}=qj(t,{relative:n}),f=l;return r!=="/"&&(f=l==="/"?r:ti([r,l])),s.createHref({pathname:f,search:u,hash:i})}function Du(){return y.useContext(rp)!=null}function Vl(){return Du()||en(!1),y.useContext(rp).location}function Vj(t){y.useContext(fa).static||y.useLayoutEffect(t)}function wU(){let{isDataRoute:t}=y.useContext(hi);return t?IU():bU()}function bU(){Du()||en(!1);let t=y.useContext(ix),{basename:e,future:n,navigator:r}=y.useContext(fa),{matches:s}=y.useContext(hi),{pathname:i}=Vl(),l=JSON.stringify(Uj(s,n.v7_relativeSplatPath)),u=y.useRef(!1);return Vj(()=>{u.current=!0}),y.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let p=zj(h,JSON.parse(l),i,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ti([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,l,i,t])}function sp(){let{matches:t}=y.useContext(hi),e=t[t.length-1];return e?e.params:{}}function qj(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(fa),{matches:s}=y.useContext(hi),{pathname:i}=Vl(),l=JSON.stringify(Uj(s,r.v7_relativeSplatPath));return y.useMemo(()=>zj(t,JSON.parse(l),i,n==="path"),[t,l,i,n])}function EU(t,e){return SU(t,e)}function SU(t,e,n,r){Du()||en(!1);let{navigator:s,static:i}=y.useContext(fa),{matches:l}=y.useContext(hi),u=l[l.length-1],f=u?u.params:{};u&&u.pathname;let h=u?u.pathnameBase:"/";u&&u.route;let m=Vl(),p;if(e){var x;let N=typeof e=="string"?Hl(e):e;h==="/"||(x=N.pathname)!=null&&x.startsWith(h)||en(!1),p=N}else p=m;let w=p.pathname||"/",S=w;if(h!=="/"){let N=h.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=YF(t,{pathname:S}),b=_U(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:ti([h,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:ti([h,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,r);return e&&b?y.createElement(rp.Provider,{value:{location:gu({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Qo.Pop}},b):b}function NU(){let t=AU(),e=gU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,null)}const kU=y.createElement(NU,null);class CU extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(hi.Provider,{value:this.props.routeContext},y.createElement(Hj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jU(t){let{routeContext:e,match:n,children:r}=t,s=y.useContext(ix);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(hi.Provider,{value:e},r)}function _U(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let m=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);m>=0||en(!1),l=l.slice(0,Math.min(l.length,m+1))}let f=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let p=l[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:x,errors:w}=n,S=p.route.loader&&x[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||S){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((m,p,x)=>{let w,S=!1,v=null,b=null;n&&(w=u&&p.route.id?u[p.route.id]:void 0,v=p.route.errorElement||kU,f&&(h<0&&x===0?(MU("route-fallback"),S=!0,b=null):h===x&&(S=!0,b=p.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,x+1)),_=()=>{let T;return w?T=v:S?T=b:p.route.Component?T=y.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=m,y.createElement(jU,{match:p,routeContext:{outlet:m,matches:N,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?y.createElement(CU,{location:n.location,revalidation:n.revalidation,component:v,error:w,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):_()},null)}var Kj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Kj||{}),Gj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gj||{});function TU(t){let e=y.useContext(ix);return e||en(!1),e}function PU(t){let e=y.useContext(vU);return e||en(!1),e}function RU(t){let e=y.useContext(hi);return e||en(!1),e}function Yj(t){let e=RU(),n=e.matches[e.matches.length-1];return n.route.id||en(!1),n.route.id}function AU(){var t;let e=y.useContext(Hj),n=PU(),r=Yj();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function IU(){let{router:t}=TU(Kj.UseNavigateStable),e=Yj(Gj.UseNavigateStable),n=y.useRef(!1);return Vj(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,gu({fromRouteId:e},i)))},[t,e])}const S2={};function MU(t,e,n){S2[t]||(S2[t]=!0)}function OU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function is(t){en(!1)}function DU(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Qo.Pop,navigator:i,static:l=!1,future:u}=t;Du()&&en(!1);let f=e.replace(/^\/*/,"/"),h=y.useMemo(()=>({basename:f,navigator:i,static:l,future:gu({v7_relativeSplatPath:!1},u)}),[f,u,i,l]);typeof r=="string"&&(r=Hl(r));let{pathname:m="/",search:p="",hash:x="",state:w=null,key:S="default"}=r,v=y.useMemo(()=>{let b=ox(m,f);return b==null?null:{location:{pathname:b,search:p,hash:x,state:w,key:S},navigationType:s}},[f,m,p,x,w,S,s]);return v==null?null:y.createElement(fa.Provider,{value:h},y.createElement(rp.Provider,{children:n,value:v}))}function LU(t){let{children:e,location:n}=t;return EU(Av(e),n)}new Promise(()=>{});function Av(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Av(r.props.children,i));return}r.type!==is&&en(!1),!r.props.index||!r.props.children||en(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Av(r.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iv(){return Iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iv.apply(this,arguments)}function $U(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FU(t,e){return t.button===0&&(!e||e==="_self")&&!BU(t)}const UU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zU="6";try{window.__reactRouterVersion=zU}catch{}const WU="startTransition",N2=Jv[WU];function HU(t){let{basename:e,children:n,future:r,window:s}=t,i=y.useRef();i.current==null&&(i.current=qF({window:s,v5Compat:!0}));let l=i.current,[u,f]=y.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},m=y.useCallback(p=>{h&&N2?N2(()=>f(p)):f(p)},[f,h]);return y.useLayoutEffect(()=>l.listen(m),[l,m]),y.useEffect(()=>OU(r),[r]),y.createElement(DU,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const VU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=y.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:l,state:u,target:f,to:h,preventScrollReset:m,viewTransition:p}=e,x=$U(e,UU),{basename:w}=y.useContext(fa),S,v=!1;if(typeof h=="string"&&qU.test(h)&&(S=h,VU))try{let T=new URL(window.location.href),M=h.startsWith("//")?new URL(T.protocol+h):new URL(h),D=ox(M.pathname,w);M.origin===T.origin&&D!=null?h=D+M.search+M.hash:v=!0}catch{}let b=xU(h,{relative:s}),N=KU(h,{replace:l,state:u,target:f,preventScrollReset:m,relative:s,viewTransition:p});function _(T){r&&r(T),T.defaultPrevented||N(T)}return y.createElement("a",Iv({},x,{href:S||b,onClick:v||i?r:_,ref:n,target:f}))});var k2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(k2||(k2={}));var C2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(C2||(C2={}));function KU(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:l,viewTransition:u}=e===void 0?{}:e,f=wU(),h=Vl(),m=qj(t,{relative:l});return y.useCallback(p=>{if(FU(p,n)){p.preventDefault();let x=r!==void 0?r:sh(h)===sh(m);f(t,{replace:x,state:s,preventScrollReset:i,relative:l,viewTransition:u})}},[h,f,m,r,s,n,t,i,l,u])}function GU(){const{pathname:t}=Vl();return y.useEffect(()=>{window.scrollTo(0,0)},[t]),null}const YU=Fl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Le=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const l=r?I6:"button";return c.jsx(l,{className:xe(YU({variant:e,size:n,className:t})),ref:i,...s})});Le.displayName="Button";const En=y.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:xe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));En.displayName="Input";var Ug="focusScope.autoFocusOnMount",zg="focusScope.autoFocusOnUnmount",j2={bubbles:!1,cancelable:!0},QU="FocusScope",Lu=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=t,[u,f]=y.useState(null),h=Kt(s),m=Kt(i),p=y.useRef(null),x=it(e,v=>f(v)),w=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let v=function(T){if(w.paused||!u)return;const M=T.target;u.contains(M)?p.current=M:Oo(p.current,{select:!0})},b=function(T){if(w.paused||!u)return;const M=T.relatedTarget;M!==null&&(u.contains(M)||Oo(p.current,{select:!0}))},N=function(T){if(document.activeElement===document.body)for(const D of T)D.removedNodes.length>0&&Oo(u)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const _=new MutationObserver(N);return u&&_.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),_.disconnect()}}},[r,u,w.paused]),y.useEffect(()=>{if(u){T2.add(w);const v=document.activeElement;if(!u.contains(v)){const N=new CustomEvent(Ug,j2);u.addEventListener(Ug,h),u.dispatchEvent(N),N.defaultPrevented||(ZU(n7(Qj(u)),{select:!0}),document.activeElement===v&&Oo(u))}return()=>{u.removeEventListener(Ug,h),setTimeout(()=>{const N=new CustomEvent(zg,j2);u.addEventListener(zg,m),u.dispatchEvent(N),N.defaultPrevented||Oo(v??document.body,{select:!0}),u.removeEventListener(zg,m),T2.remove(w)},0)}}},[u,h,m,w]);const S=y.useCallback(v=>{if(!n&&!r||w.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,N=document.activeElement;if(b&&N){const _=v.currentTarget,[T,M]=XU(_);T&&M?!v.shiftKey&&N===M?(v.preventDefault(),n&&Oo(T,{select:!0})):v.shiftKey&&N===T&&(v.preventDefault(),n&&Oo(M,{select:!0})):N===_&&v.preventDefault()}},[n,r,w.paused]);return c.jsx(Ae.div,{tabIndex:-1,...l,ref:x,onKeyDown:S})});Lu.displayName=QU;function ZU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Oo(r,{select:e}),document.activeElement!==n)return}function XU(t){const e=Qj(t),n=_2(e,t),r=_2(e.reverse(),t);return[n,r]}function Qj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _2(t,e){for(const n of t)if(!JU(n,{upTo:e}))return n}function JU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function e7(t){return t instanceof HTMLInputElement&&"select"in t}function Oo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&e7(t)&&e&&t.select()}}var T2=t7();function t7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=P2(t,e),t.unshift(e)},remove(e){var n;t=P2(t,e),(n=t[0])==null||n.resume()}}}function P2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function n7(t){return t.filter(e=>e.tagName!=="A")}var Wg=0;function op(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??R2()),document.body.insertAdjacentElement("beforeend",t[1]??R2()),Wg++,()=>{Wg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Wg--}},[])}function R2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var hs=function(){return hs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hs.apply(this,arguments)};function Zj(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function r7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var _f="right-scroll-bar-position",Tf="width-before-scroll-bar",s7="with-scroll-bars-hidden",o7="--removed-body-scroll-bar-size";function Hg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function i7(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var a7=typeof window<"u"?y.useLayoutEffect:y.useEffect,A2=new WeakMap;function l7(t,e){var n=i7(null,function(r){return t.forEach(function(s){return Hg(s,r)})});return a7(function(){var r=A2.get(n);if(r){var s=new Set(r),i=new Set(t),l=n.current;s.forEach(function(u){i.has(u)||Hg(u,null)}),i.forEach(function(u){s.has(u)||Hg(u,l)})}A2.set(n,t)},[t]),n}function c7(t){return t}function u7(t,e){e===void 0&&(e=c7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var l=e(i,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(u){return i(u)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(i),l=n}var f=function(){var m=l;l=[],m.forEach(i)},h=function(){return Promise.resolve().then(f)};h(),n={push:function(m){l.push(m),h()},filter:function(m){return l=l.filter(m),n}}}};return s}function d7(t){t===void 0&&(t={});var e=u7(null);return e.options=hs({async:!0,ssr:!1},t),e}var Xj=function(t){var e=t.sideCar,n=Zj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,hs({},n))};Xj.isSideCarExport=!0;function f7(t,e){return t.useMedium(e),Xj}var Jj=d7(),Vg=function(){},ip=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Vg,onWheelCapture:Vg,onTouchMoveCapture:Vg}),s=r[0],i=r[1],l=t.forwardProps,u=t.children,f=t.className,h=t.removeScrollBar,m=t.enabled,p=t.shards,x=t.sideCar,w=t.noIsolation,S=t.inert,v=t.allowPinchZoom,b=t.as,N=b===void 0?"div":b,_=t.gapMode,T=Zj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=x,D=l7([n,e]),B=hs(hs({},T),s);return y.createElement(y.Fragment,null,m&&y.createElement(M,{sideCar:Jj,removeScrollBar:h,shards:p,noIsolation:w,inert:S,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:_}),l?y.cloneElement(y.Children.only(u),hs(hs({},B),{ref:D})):y.createElement(N,hs({},B,{className:f,ref:D}),u))});ip.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ip.classNames={fullWidth:Tf,zeroRight:_f};var h7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function p7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=h7();return e&&t.setAttribute("nonce",e),t}function m7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function g7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var y7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=p7())&&(m7(e,n),g7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},v7=function(){var t=y7();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},e_=function(){var t=v7(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},x7={left:0,top:0,right:0,gap:0},qg=function(t){return parseInt(t||"",10)||0},w7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[qg(n),qg(r),qg(s)]},b7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return x7;var e=w7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},E7=e_(),tl="data-scroll-locked",S7=function(t,e,n,r){var s=t.left,i=t.top,l=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(s7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(tl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_f,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Tf,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(_f," .").concat(_f,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tf," .").concat(Tf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(tl,`] {
    `).concat(o7,": ").concat(u,`px;
  }
`)},I2=function(){var t=parseInt(document.body.getAttribute(tl)||"0",10);return isFinite(t)?t:0},N7=function(){y.useEffect(function(){return document.body.setAttribute(tl,(I2()+1).toString()),function(){var t=I2()-1;t<=0?document.body.removeAttribute(tl):document.body.setAttribute(tl,t.toString())}},[])},k7=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;N7();var i=y.useMemo(function(){return b7(s)},[s]);return y.createElement(E7,{styles:S7(i,!e,s,n?"":"!important")})},Mv=!1;if(typeof window<"u")try{var df=Object.defineProperty({},"passive",{get:function(){return Mv=!0,!0}});window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{Mv=!1}var za=Mv?{passive:!1}:!1,C7=function(t){return t.tagName==="TEXTAREA"},t_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!C7(t)&&n[e]==="visible")},j7=function(t){return t_(t,"overflowY")},_7=function(t){return t_(t,"overflowX")},M2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=n_(t,r);if(s){var i=r_(t,r),l=i[1],u=i[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},T7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},P7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},n_=function(t,e){return t==="v"?j7(e):_7(e)},r_=function(t,e){return t==="v"?T7(e):P7(e)},R7=function(t,e){return t==="h"&&e==="rtl"?-1:1},A7=function(t,e,n,r,s){var i=R7(t,window.getComputedStyle(e).direction),l=i*r,u=n.target,f=e.contains(u),h=!1,m=l>0,p=0,x=0;do{var w=r_(t,u),S=w[0],v=w[1],b=w[2],N=v-b-i*S;(S||N)&&n_(t,u)&&(p+=N,x+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!f&&u!==document.body||f&&(e.contains(u)||e===u));return(m&&Math.abs(p)<1||!m&&Math.abs(x)<1)&&(h=!0),h},ff=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},O2=function(t){return[t.deltaX,t.deltaY]},D2=function(t){return t&&"current"in t?t.current:t},I7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},M7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},O7=0,Wa=[];function D7(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(O7++)[0],i=y.useState(e_)[0],l=y.useRef(t);y.useEffect(function(){l.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=r7([t.lockRef.current],(t.shards||[]).map(D2),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=y.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!l.current.allowPinchZoom;var N=ff(v),_=n.current,T="deltaX"in v?v.deltaX:_[0]-N[0],M="deltaY"in v?v.deltaY:_[1]-N[1],D,B=v.target,O=Math.abs(T)>Math.abs(M)?"h":"v";if("touches"in v&&O==="h"&&B.type==="range")return!1;var F=M2(O,B);if(!F)return!0;if(F?D=O:(D=O==="v"?"h":"v",F=M2(O,B)),!F)return!1;if(!r.current&&"changedTouches"in v&&(T||M)&&(r.current=D),!D)return!0;var R=r.current||D;return A7(R,b,v,R==="h"?T:M)},[]),f=y.useCallback(function(v){var b=v;if(!(!Wa.length||Wa[Wa.length-1]!==i)){var N="deltaY"in b?O2(b):ff(b),_=e.current.filter(function(D){return D.name===b.type&&(D.target===b.target||b.target===D.shadowParent)&&I7(D.delta,N)})[0];if(_&&_.should){b.cancelable&&b.preventDefault();return}if(!_){var T=(l.current.shards||[]).map(D2).filter(Boolean).filter(function(D){return D.contains(b.target)}),M=T.length>0?u(b,T[0]):!l.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),h=y.useCallback(function(v,b,N,_){var T={name:v,delta:b,target:N,should:_,shadowParent:L7(N)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(M){return M!==T})},1)},[]),m=y.useCallback(function(v){n.current=ff(v),r.current=void 0},[]),p=y.useCallback(function(v){h(v.type,O2(v),v.target,u(v,t.lockRef.current))},[]),x=y.useCallback(function(v){h(v.type,ff(v),v.target,u(v,t.lockRef.current))},[]);y.useEffect(function(){return Wa.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:x}),document.addEventListener("wheel",f,za),document.addEventListener("touchmove",f,za),document.addEventListener("touchstart",m,za),function(){Wa=Wa.filter(function(v){return v!==i}),document.removeEventListener("wheel",f,za),document.removeEventListener("touchmove",f,za),document.removeEventListener("touchstart",m,za)}},[]);var w=t.removeScrollBar,S=t.inert;return y.createElement(y.Fragment,null,S?y.createElement(i,{styles:M7(s)}):null,w?y.createElement(k7,{gapMode:t.gapMode}):null)}function L7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const $7=f7(Jj,D7);var $u=y.forwardRef(function(t,e){return y.createElement(ip,hs({},t,{ref:e,sideCar:$7}))});$u.classNames=ip.classNames;var B7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ha=new WeakMap,hf=new WeakMap,pf={},Kg=0,s_=function(t){return t&&(t.host||s_(t.parentNode))},F7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=s_(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},U7=function(t,e,n,r){var s=F7(e,Array.isArray(t)?t:[t]);pf[n]||(pf[n]=new WeakMap);var i=pf[n],l=[],u=new Set,f=new Set(s),h=function(p){!p||u.has(p)||(u.add(p),h(p.parentNode))};s.forEach(h);var m=function(p){!p||f.has(p)||Array.prototype.forEach.call(p.children,function(x){if(u.has(x))m(x);else try{var w=x.getAttribute(r),S=w!==null&&w!=="false",v=(Ha.get(x)||0)+1,b=(i.get(x)||0)+1;Ha.set(x,v),i.set(x,b),l.push(x),v===1&&S&&hf.set(x,!0),b===1&&x.setAttribute(n,"true"),S||x.setAttribute(r,"true")}catch(N){console.error("aria-hidden: cannot operate on ",x,N)}})};return m(e),u.clear(),Kg++,function(){l.forEach(function(p){var x=Ha.get(p)-1,w=i.get(p)-1;Ha.set(p,x),i.set(p,w),x||(hf.has(p)||p.removeAttribute(r),hf.delete(p)),w||p.removeAttribute(n)}),Kg--,Kg||(Ha=new WeakMap,Ha=new WeakMap,hf=new WeakMap,pf={})}},ap=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=B7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),U7(r,s,n,"aria-hidden")):function(){return null}},lp="Dialog",[o_,bG]=Mn(lp),[z7,qr]=o_(lp),i_=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:l=!0}=t,u=y.useRef(null),f=y.useRef(null),[h,m]=nr({prop:r,defaultProp:s??!1,onChange:i,caller:lp});return c.jsx(z7,{scope:e,triggerRef:u,contentRef:f,contentId:dn(),titleId:dn(),descriptionId:dn(),open:h,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(p=>!p),[m]),modal:l,children:n})};i_.displayName=lp;var a_="DialogTrigger",l_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qr(a_,n),i=it(e,s.triggerRef);return c.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":cx(s.open),...r,ref:i,onClick:Se(t.onClick,s.onOpenToggle)})});l_.displayName=a_;var ax="DialogPortal",[W7,c_]=o_(ax,{forceMount:void 0}),u_=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=qr(ax,e);return c.jsx(W7,{scope:e,forceMount:n,children:y.Children.map(r,l=>c.jsx(vn,{present:n||i.open,children:c.jsx(Bl,{asChild:!0,container:s,children:l})}))})};u_.displayName=ax;var oh="DialogOverlay",d_=y.forwardRef((t,e)=>{const n=c_(oh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qr(oh,t.__scopeDialog);return i.modal?c.jsx(vn,{present:r||i.open,children:c.jsx(V7,{...s,ref:e})}):null});d_.displayName=oh;var H7=si("DialogOverlay.RemoveScroll"),V7=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qr(oh,n);return c.jsx($u,{as:H7,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(Ae.div,{"data-state":cx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),sa="DialogContent",f_=y.forwardRef((t,e)=>{const n=c_(sa,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qr(sa,t.__scopeDialog);return c.jsx(vn,{present:r||i.open,children:i.modal?c.jsx(q7,{...s,ref:e}):c.jsx(K7,{...s,ref:e})})});f_.displayName=sa;var q7=y.forwardRef((t,e)=>{const n=qr(sa,t.__scopeDialog),r=y.useRef(null),s=it(e,n.contentRef,r);return y.useEffect(()=>{const i=r.current;if(i)return ap(i)},[]),c.jsx(h_,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Se(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&i.preventDefault()}),onFocusOutside:Se(t.onFocusOutside,i=>i.preventDefault())})}),K7=y.forwardRef((t,e)=>{const n=qr(sa,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return c.jsx(h_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,u;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),h_=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...l}=t,u=qr(sa,n),f=y.useRef(null),h=it(e,f);return op(),c.jsxs(c.Fragment,{children:[c.jsx(Lu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(da,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":cx(u.open),...l,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(G7,{titleId:u.titleId}),c.jsx(Q7,{contentRef:f,descriptionId:u.descriptionId})]})]})}),lx="DialogTitle",p_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qr(lx,n);return c.jsx(Ae.h2,{id:s.titleId,...r,ref:e})});p_.displayName=lx;var m_="DialogDescription",g_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qr(m_,n);return c.jsx(Ae.p,{id:s.descriptionId,...r,ref:e})});g_.displayName=m_;var y_="DialogClose",v_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qr(y_,n);return c.jsx(Ae.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,()=>s.onOpenChange(!1))})});v_.displayName=y_;function cx(t){return t?"open":"closed"}var x_="DialogTitleWarning",[EG,w_]=R6(x_,{contentName:sa,titleName:lx,docsSlug:"dialog"}),G7=({titleId:t})=>{const e=w_(x_),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Y7="DialogDescriptionWarning",Q7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${w_(Y7).contentName}}.`;return y.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},ux=i_,b_=l_,dx=u_,cp=d_,up=f_,fx=p_,hx=g_,E_=v_;const Tl=ux,S_=b_,Z7=dx,N_=y.forwardRef(({className:t,...e},n)=>c.jsx(cp,{ref:n,className:xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));N_.displayName=cp.displayName;const oa=y.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(Z7,{children:[c.jsx(N_,{}),c.jsxs(up,{ref:r,className:xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,c.jsxs(E_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(qh,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));oa.displayName=up.displayName;const ia=({className:t,...e})=>c.jsx("div",{className:xe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ia.displayName="DialogHeader";const k_=({className:t,...e})=>c.jsx("div",{className:xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});k_.displayName="DialogFooter";const Pl=y.forwardRef(({className:t,...e},n)=>c.jsx(fx,{ref:n,className:xe("text-lg font-semibold leading-none tracking-tight",t),...e}));Pl.displayName=fx.displayName;const Rl=y.forwardRef(({className:t,...e},n)=>c.jsx(hx,{ref:n,className:xe("text-sm text-muted-foreground",t),...e}));Rl.displayName=hx.displayName;var X7=y.createContext(void 0);function ql(t){const e=y.useContext(X7);return t||e||"ltr"}var Gg="rovingFocusGroup.onEntryFocus",J7={bubbles:!1,cancelable:!0},Bu="RovingFocusGroup",[Ov,C_,e9]=Bh(Bu),[t9,Kl]=Mn(Bu,[e9]),[n9,r9]=t9(Bu),j_=y.forwardRef((t,e)=>c.jsx(Ov.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(Ov.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(s9,{...t,ref:e})})}));j_.displayName=Bu;var s9=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...p}=t,x=y.useRef(null),w=it(e,x),S=ql(i),[v,b]=nr({prop:l,defaultProp:u??null,onChange:f,caller:Bu}),[N,_]=y.useState(!1),T=Kt(h),M=C_(n),D=y.useRef(!1),[B,O]=y.useState(0);return y.useEffect(()=>{const F=x.current;if(F)return F.addEventListener(Gg,T),()=>F.removeEventListener(Gg,T)},[T]),c.jsx(n9,{scope:n,orientation:r,dir:S,loop:s,currentTabStopId:v,onItemFocus:y.useCallback(F=>b(F),[b]),onItemShiftTab:y.useCallback(()=>_(!0),[]),onFocusableItemAdd:y.useCallback(()=>O(F=>F+1),[]),onFocusableItemRemove:y.useCallback(()=>O(F=>F-1),[]),children:c.jsx(Ae.div,{tabIndex:N||B===0?-1:0,"data-orientation":r,...p,ref:w,style:{outline:"none",...t.style},onMouseDown:Se(t.onMouseDown,()=>{D.current=!0}),onFocus:Se(t.onFocus,F=>{const R=!D.current;if(F.target===F.currentTarget&&R&&!N){const L=new CustomEvent(Gg,J7);if(F.currentTarget.dispatchEvent(L),!L.defaultPrevented){const A=M().filter(Q=>Q.focusable),U=A.find(Q=>Q.active),K=A.find(Q=>Q.id===v),V=[U,K,...A].filter(Boolean).map(Q=>Q.ref.current);P_(V,m)}}D.current=!1}),onBlur:Se(t.onBlur,()=>_(!1))})})}),__="RovingFocusGroupItem",T_=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:l,...u}=t,f=dn(),h=i||f,m=r9(__,n),p=m.currentTabStopId===h,x=C_(n),{onFocusableItemAdd:w,onFocusableItemRemove:S,currentTabStopId:v}=m;return y.useEffect(()=>{if(r)return w(),()=>S()},[r,w,S]),c.jsx(Ov.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:c.jsx(Ae.span,{tabIndex:p?0:-1,"data-orientation":m.orientation,...u,ref:e,onMouseDown:Se(t.onMouseDown,b=>{r?m.onItemFocus(h):b.preventDefault()}),onFocus:Se(t.onFocus,()=>m.onItemFocus(h)),onKeyDown:Se(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){m.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const N=a9(b,m.orientation,m.dir);if(N!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let T=x().filter(M=>M.focusable).map(M=>M.ref.current);if(N==="last")T.reverse();else if(N==="prev"||N==="next"){N==="prev"&&T.reverse();const M=T.indexOf(b.currentTarget);T=m.loop?l9(T,M+1):T.slice(M+1)}setTimeout(()=>P_(T))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:v!=null}):l})})});T_.displayName=__;var o9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function i9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function a9(t,e,n){const r=i9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return o9[r]}function P_(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function l9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var px=j_,mx=T_,dp="Tabs",[c9,SG]=Mn(dp,[Kl]),R_=Kl(),[u9,gx]=c9(dp),A_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:u,activationMode:f="automatic",...h}=t,m=ql(u),[p,x]=nr({prop:r,onChange:s,defaultProp:i??"",caller:dp});return c.jsx(u9,{scope:n,baseId:dn(),value:p,onValueChange:x,orientation:l,dir:m,activationMode:f,children:c.jsx(Ae.div,{dir:m,"data-orientation":l,...h,ref:e})})});A_.displayName=dp;var I_="TabsList",M_=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=gx(I_,n),l=R_(n);return c.jsx(px,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(Ae.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});M_.displayName=I_;var O_="TabsTrigger",D_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,l=gx(O_,n),u=R_(n),f=B_(l.baseId,r),h=F_(l.baseId,r),m=r===l.value;return c.jsx(mx,{asChild:!0,...u,focusable:!s,active:m,children:c.jsx(Ae.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:f,...i,ref:e,onMouseDown:Se(t.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?l.onValueChange(r):p.preventDefault()}),onKeyDown:Se(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(r)}),onFocus:Se(t.onFocus,()=>{const p=l.activationMode!=="manual";!m&&!s&&p&&l.onValueChange(r)})})})});D_.displayName=O_;var L_="TabsContent",$_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...l}=t,u=gx(L_,n),f=B_(u.baseId,r),h=F_(u.baseId,r),m=r===u.value,p=y.useRef(m);return y.useEffect(()=>{const x=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(x)},[]),c.jsx(vn,{present:s||m,children:({present:x})=>c.jsx(Ae.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!x,id:h,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:x&&i})})});$_.displayName=L_;function B_(t,e){return`${t}-trigger-${e}`}function F_(t,e){return`${t}-content-${e}`}var d9=A_,U_=M_,z_=D_,W_=$_;const Fu=d9,Gl=y.forwardRef(({className:t,...e},n)=>c.jsx(U_,{ref:n,className:xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Gl.displayName=U_.displayName;const yn=y.forwardRef(({className:t,...e},n)=>c.jsx(z_,{ref:n,className:xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));yn.displayName=z_.displayName;const nl=y.forwardRef(({className:t,...e},n)=>c.jsx(W_,{ref:n,className:xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));nl.displayName=W_.displayName;const f9=Fl("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),H_=y.forwardRef(({className:t,variant:e,...n},r)=>c.jsx("div",{ref:r,role:"alert",className:xe(f9({variant:e}),t),...n}));H_.displayName="Alert";const h9=y.forwardRef(({className:t,...e},n)=>c.jsx("h5",{ref:n,className:xe("mb-1 font-medium leading-none tracking-tight",t),...e}));h9.displayName="AlertTitle";const V_=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("text-sm [&_p]:leading-relaxed",t),...e}));V_.displayName="AlertDescription";function q_(){const{nostr:t}=Hr(),{logins:e,addLogin:n,removeLogin:r}=L0();return{nsec(s){const i=qi.fromNsec(s);n(i)},async bunker(s){const i=await qi.fromBunker(s,t);n(i)},async extension(){const s=await qi.fromExtension();n(s)},async logout(){const s=e[0];s&&r(s.id)}}}const L2=t=>/^nsec1[a-zA-Z0-9]{58}$/.test(t),p9=t=>t.startsWith("bunker://"),m9=({isOpen:t,onClose:e,onLogin:n,onSignup:r})=>{const[s,i]=y.useState(!1),[l,u]=y.useState(!1),[f,h]=y.useState(""),[m,p]=y.useState(""),[x,w]=y.useState({}),S=y.useRef(null),v=q_();y.useEffect(()=>{t&&(i(!1),u(!1),h(""),p(""),w({}),S.current&&(S.current.value=""))},[t]);const b=async()=>{i(!0),w(O=>({...O,extension:void 0}));try{if(!("nostr"in window))throw new Error("Nostr extension not found. Please install a NIP-07 extension.");await v.extension(),n(),e()}catch(O){const F=O;console.error("Bunker login failed:",F),console.error("Nsec login failed:",F),console.error("Extension login failed:",F),w(R=>({...R,extension:F instanceof Error?F.message:"Extension login failed"}))}finally{i(!1)}},N=O=>{i(!0),w({}),setTimeout(()=>{try{v.nsec(O),n(),e()}catch{w({nsec:"Failed to login with this key. Please check that it's correct."}),i(!1)}},50)},_=()=>{if(!f.trim()){w(O=>({...O,nsec:"Please enter your secret key"}));return}if(!L2(f)){w(O=>({...O,nsec:"Invalid secret key format. Must be a valid nsec starting with nsec1."}));return}N(f)},T=async()=>{if(!m.trim()){w(O=>({...O,bunker:"Please enter a bunker URI"}));return}if(!p9(m)){w(O=>({...O,bunker:"Invalid bunker URI format. Must start with bunker://"}));return}i(!0),w(O=>({...O,bunker:void 0}));try{await v.bunker(m),n(),e(),p("")}catch{w(O=>({...O,bunker:"Failed to connect to bunker. Please check the URI."}))}finally{i(!1)}},M=O=>{var L;const F=(L=O.target.files)==null?void 0:L[0];if(!F)return;u(!0),w({});const R=new FileReader;R.onload=A=>{var K;u(!1);const U=(K=A.target)==null?void 0:K.result;if(U){const H=U.trim();L2(H)?N(H):w({file:"File does not contain a valid secret key."})}else w({file:"Could not read file content."})},R.onerror=()=>{u(!1),w({file:"Failed to read file."})},R.readAsText(F)},D=()=>{e(),r&&r()},B="nostr"in window?"extension":"key";return c.jsx(Tl,{open:t,onOpenChange:e,children:c.jsxs(oa,{className:xe("max-w-[95vw] sm:max-w-md max-h-[90vh] max-h-[90dvh] p-0 overflow-hidden rounded-2xl overflow-y-scroll"),children:[c.jsx(ia,{className:xe("px-6 pt-6 pb-1 relative"),children:c.jsx(Rl,{className:"text-center",children:"Sign up or log in to continue"})}),c.jsxs("div",{className:"px-6 pt-2 pb-4 space-y-4 overflow-y-auto flex-1",children:[c.jsx("div",{className:"relative p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/50 dark:to-indigo-950/50 border border-blue-200 dark:border-blue-800 overflow-hidden",children:c.jsxs("div",{className:"relative z-10 text-center space-y-3",children:[c.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[c.jsx(on,{className:"w-5 h-5 text-blue-600"}),c.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"New to Nostr?"})]}),c.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Create a new account to get started. It's free and open."}),c.jsxs(Le,{onClick:D,className:"w-full rounded-full py-3 text-base font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transform transition-all duration-200 hover:scale-105 shadow-lg border-0",children:[c.jsx(Vh,{className:"w-4 h-4 mr-2"}),c.jsx("span",{children:"Sign Up"})]})]})}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-3 bg-background text-muted-foreground",children:c.jsx("span",{children:"Or log in"})})})]}),c.jsxs(Fu,{defaultValue:B,className:"w-full",children:[c.jsxs(Gl,{className:"grid w-full grid-cols-3 bg-muted/80 rounded-lg mb-4",children:[c.jsxs(yn,{value:"extension",className:"flex items-center gap-2",children:[c.jsx(Yf,{className:"w-4 h-4"}),c.jsx("span",{children:"Extension"})]}),c.jsxs(yn,{value:"key",className:"flex items-center gap-2",children:[c.jsx($8,{className:"w-4 h-4"}),c.jsx("span",{children:"Key"})]}),c.jsxs(yn,{value:"bunker",className:"flex items-center gap-2",children:[c.jsx(R8,{className:"w-4 h-4"}),c.jsx("span",{children:"Bunker"})]})]}),c.jsxs(nl,{value:"extension",className:"space-y-3 bg-muted",children:[x.extension&&c.jsxs(H_,{variant:"destructive",children:[c.jsx(V0,{className:"h-4 w-4"}),c.jsx(V_,{children:x.extension})]}),c.jsxs("div",{className:"text-center p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:[c.jsx(Yf,{className:"w-12 h-12 mx-auto mb-3 text-primary"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Login with one click using the browser extension"}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Le,{className:"w-full rounded-full py-4",onClick:b,disabled:s,children:s?"Logging in...":"Login with Extension"})})]})]}),c.jsx(nl,{value:"key",className:"space-y-4",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"nsec",className:"text-sm font-medium",children:"Secret Key (nsec)"}),c.jsx(En,{id:"nsec",type:"password",value:f,onChange:O=>{h(O.target.value),x.nsec&&w(F=>({...F,nsec:void 0}))},className:`rounded-lg ${x.nsec?"border-red-500 focus-visible:ring-red-500":""}`,placeholder:"nsec1...",autoComplete:"off"}),x.nsec&&c.jsx("p",{className:"text-sm text-red-500",children:x.nsec})]}),c.jsx(Le,{className:"w-full rounded-full py-3",onClick:_,disabled:s||!f.trim(),children:s?"Verifying...":"Log In"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-muted"})}),c.jsx("div",{className:"relative flex justify-center text-xs",children:c.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"or"})})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("input",{type:"file",accept:".txt",className:"hidden",ref:S,onChange:M}),c.jsxs(Le,{variant:"outline",className:"w-full",onClick:()=>{var O;return(O=S.current)==null?void 0:O.click()},disabled:s||l,children:[c.jsx(zC,{className:"w-4 h-4 mr-2"}),l?"Reading File...":"Upload Your Key File"]}),x.file&&c.jsx("p",{className:"text-sm text-red-500 mt-2",children:x.file})]})]})}),c.jsxs(nl,{value:"bunker",className:"space-y-3 bg-muted",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"bunkerUri",className:"text-sm font-medium text-gray-700 dark:text-gray-400",children:"Bunker URI"}),c.jsx(En,{id:"bunkerUri",value:m,onChange:O=>{p(O.target.value),x.bunker&&w(F=>({...F,bunker:void 0}))},className:`rounded-lg border-gray-300 dark:border-gray-700 focus-visible:ring-primary ${x.bunker?"border-red-500":""}`,placeholder:"bunker://",autoComplete:"off"}),x.bunker&&c.jsx("p",{className:"text-sm text-red-500",children:x.bunker})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Le,{className:"w-full rounded-full py-4",onClick:T,disabled:s||!m.trim(),children:s?"Connecting...":"Login with Bunker"})})]})]})]})]})})},ha=y.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ha.displayName="Textarea";const Je=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Je.displayName="Card";const cn=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("flex flex-col space-y-1.5 p-6",t),...e}));cn.displayName="CardHeader";const Rn=y.forwardRef(({className:t,...e},n)=>c.jsx("h3",{ref:n,className:xe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Rn.displayName="CardTitle";const Dv=y.forwardRef(({className:t,...e},n)=>c.jsx("p",{ref:n,className:xe("text-sm text-muted-foreground",t),...e}));Dv.displayName="CardDescription";const ot=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("p-6 pt-0",t),...e}));ot.displayName="CardContent";const K_=y.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("flex items-center p-6 pt-0",t),...e}));K_.displayName="CardFooter";class yx{constructor(e){Re(this,"servers");Re(this,"signer");Re(this,"fetch");Re(this,"expiresIn");this.servers=e.servers,this.signer=e.signer,this.fetch=e.fetch??globalThis.fetch.bind(globalThis),this.expiresIn=e.expiresIn??6e4}async upload(e,n){const r=f6(await crypto.subtle.digest("SHA-256",await e.arrayBuffer())),s=Date.now(),i=s+this.expiresIn,l=await this.signer.signEvent({kind:24242,content:`Upload ${e.name}`,created_at:Math.floor(s/1e3),tags:[["t","upload"],["x",r],["size",e.size.toString()],["expiration",Math.floor(i/1e3).toString()]]}),u=`Nostr ${m6.encodeEvent(l)}`;return Promise.any(this.servers.map(async f=>{const h=new URL("/upload",f),p=await(await this.fetch(h,{method:"PUT",body:e,headers:{authorization:u,"content-type":e.type},signal:n==null?void 0:n.signal})).json(),x=yx.schema().parse(p),w=[["url",x.url],["x",x.sha256],["ox",x.sha256],["size",x.size.toString()]];return x.type&&w.push(["m",x.type]),w}))}static schema(){return Is({url:ht(),sha256:ht(),size:Mo(),type:ht().optional()})}}function g9(){const{user:t}=no();return su({mutationFn:async e=>{if(!t)throw new Error("Must be logged in to upload files");return await new yx({servers:["https://blossom.primal.net/"],signer:t.signer}).upload(e)}})}const y9=t=>t.replace(/[^a-z0-9_.-]/gi,"_"),v9=({isOpen:t,onClose:e,onComplete:n})=>{const[r,s]=y.useState("welcome"),[i,l]=y.useState(!1),[u,f]=y.useState(""),[h,m]=y.useState(!1),[p,x]=y.useState("none"),[w,S]=y.useState({name:"",about:"",picture:""}),v=q_(),{mutateAsync:b,isPending:N}=np(),{mutateAsync:_,isPending:T}=g9(),M=y.useRef(null),D=()=>{l(!0),m(!0),setTimeout(()=>{try{const A=bl();f(tr.nsecEncode(A)),s("download"),Qn({title:"Your Secret Key is Ready!",description:"A new secret key has been generated for you."})}catch{Qn({title:"Error",description:"Failed to generate key. Please try again.",variant:"destructive"})}finally{l(!1),m(!1)}},2e3)},B=()=>{try{const A=new Blob([u],{type:"text/plain; charset=utf-8"}),U=globalThis.URL.createObjectURL(A),K=y9("nostr-nsec-key.txt"),H=document.createElement("a");H.href=U,H.download=K,H.style.display="none",document.body.appendChild(H),H.click(),globalThis.URL.revokeObjectURL(U),document.body.removeChild(H),x("downloaded"),Qn({title:"Secret Key Saved!",description:"Your key has been safely stored."})}catch{Qn({title:"Download failed",description:"Could not download the key file. Please copy it manually.",variant:"destructive"})}},O=()=>{try{v.nsec(u),s("profile")}catch{Qn({title:"Login Failed",description:"Failed to login with the generated key. Please try again.",variant:"destructive"})}},F=async A=>{var K,H;const U=(K=A.target.files)==null?void 0:K[0];if(U){if(A.target.value="",!U.type.startsWith("image/")){Qn({title:"Invalid file type",description:"Please select an image file for your avatar.",variant:"destructive"});return}if(U.size>5*1024*1024){Qn({title:"File too large",description:"Avatar image must be smaller than 5MB.",variant:"destructive"});return}try{const Q=(H=(await _(U))[0])==null?void 0:H[1];Q&&(S(te=>({...te,picture:Q})),Qn({title:"Avatar uploaded!",description:"Your avatar has been uploaded successfully."}))}catch{Qn({title:"Upload failed",description:"Failed to upload avatar. Please try again.",variant:"destructive"})}}},R=async(A=!1)=>{localStorage.setItem("signup_completed",Date.now().toString());try{if(!A&&(w.name||w.about||w.picture)){const U={};w.name&&(U.name=w.name),w.about&&(U.about=w.about),w.picture&&(U.picture=w.picture),await b({kind:0,content:JSON.stringify(U)}),Qn({title:"Profile Created!",description:"Your profile has been set up."})}e(),n?setTimeout(()=>{n()},600):(s("done"),setTimeout(()=>{e(),Qn({title:"Welcome!",description:"Your account is ready."})},3e3))}catch{Qn({title:"Profile Setup Failed",description:"Your account was created but profile setup failed. You can update it later.",variant:"destructive"}),e(),n?setTimeout(()=>{n()},600):(s("done"),setTimeout(()=>{e(),Qn({title:"Welcome!",description:"Your account is ready."})},3e3))}},L=()=>r==="welcome"?c.jsx("span",{className:"flex items-center justify-center gap-2",children:"Create Your Account"}):r==="generate"?c.jsx("span",{className:"flex items-center justify-center gap-2",children:"Generating Your Key"}):r==="download"?c.jsx("span",{className:"flex items-center justify-center gap-2",children:"Secret Key"}):r==="profile"?c.jsx("span",{className:"flex items-center justify-center gap-2",children:"Create Your Profile"}):c.jsx("span",{className:"flex items-center justify-center gap-2",children:"Welcome!"});return y.useEffect(()=>{t&&(s("welcome"),l(!1),f(""),m(!1),x("none"),S({name:"",about:"",picture:""}))},[t]),y.useEffect(()=>{if(h){const A=setInterval(()=>{},100);return()=>clearInterval(A)}},[h]),c.jsx(Tl,{open:t,onOpenChange:e,children:c.jsxs(oa,{className:xe("max-w-[95vw] sm:max-w-md max-h-[90vh] max-h-[90dvh] p-0 overflow-hidden rounded-2xl flex flex-col"),children:[c.jsx(ia,{className:xe("px-6 pt-6 pb-1 relative flex-shrink-0"),children:c.jsx(Pl,{className:xe("font-semibold text-center text-lg"),children:L()})}),c.jsxs("div",{className:"px-6 pt-2 pb-4 space-y-4 overflow-y-scroll flex-1",children:[r==="welcome"&&c.jsxs("div",{className:"text-center space-y-4",children:[c.jsxs("div",{className:"relative p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/50 dark:to-indigo-950/50",children:[c.jsxs("div",{className:"flex justify-center items-center space-x-4 mb-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vh,{className:"w-12 h-12 text-blue-600"}),c.jsx(on,{className:"w-4 h-4 text-yellow-500 absolute -top-1 -right-1 animate-pulse"})]}),c.jsx(xv,{className:"w-16 h-16 text-blue-700 animate-spin-slow"}),c.jsxs("div",{className:"relative",children:[c.jsx(BE,{className:"w-12 h-12 text-blue-600"}),c.jsx(on,{className:"w-4 h-4 text-yellow-500 absolute -top-1 -left-1 animate-pulse",style:{animationDelay:"0.3s"}})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 dark:text-blue-300",children:[c.jsx(Yf,{className:"w-4 h-4"}),"Decentralized and censorship-resistant"]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 dark:text-blue-300",children:[c.jsx(tu,{className:"w-4 h-4"}),"You are in control of your data"]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 dark:text-blue-300",children:[c.jsx(xv,{className:"w-4 h-4"}),"Join a global network"]})]})]}),c.jsx("div",{className:"space-y-3",children:c.jsxs(Le,{className:"w-full rounded-full py-6 text-lg font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transform transition-all duration-200 hover:scale-105 shadow-lg",onClick:()=>s("generate"),children:[c.jsx(FE,{className:"w-5 h-5 mr-2"}),"Get Started"]})})]}),r==="generate"&&c.jsxs("div",{className:"text-center space-y-4",children:[c.jsxs("div",{className:"relative p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-purple-100 dark:from-blue-950/50 dark:to-purple-950/50 overflow-hidden",children:[h&&c.jsx("div",{className:"absolute inset-0",children:[...Array(12)].map((A,U)=>c.jsx(on,{className:"absolute w-4 h-4 text-yellow-400 animate-ping",style:{left:`${Math.random()*80+10}%`,top:`${Math.random()*80+10}%`,animationDelay:`${Math.random()*2}s`}},U))}),c.jsx("div",{className:"relative z-10",children:i?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Cf,{className:"w-20 h-20 text-primary mx-auto animate-pulse"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-24 h-24 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-lg font-semibold text-primary flex items-center justify-center gap-2",children:[c.jsx(on,{className:"w-5 h-5"}),"Generating your secret key..."]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Creating your secure key"})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx(Cf,{className:"w-20 h-20 text-primary mx-auto"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-lg font-semibold",children:"Ready to generate your secret key?"}),c.jsx("p",{className:"text-sm text-muted-foreground px-5",children:"This key will be your password to access applications within the Nostr network."})]})]})})]}),!i&&c.jsxs(Le,{className:"w-full rounded-full py-6 text-lg font-semibold bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 transform transition-all duration-200 hover:scale-105 shadow-lg",onClick:D,disabled:i,children:[c.jsx(on,{className:"w-5 h-5 mr-2"}),"Generate My Secret Key"]})]}),r==="download"&&c.jsxs("div",{className:"text-center space-y-4",children:[c.jsxs("div",{className:"relative p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/50 dark:to-indigo-950/50 overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[c.jsx(on,{className:"absolute top-3 left-4 w-3 h-3 text-yellow-400 animate-pulse",style:{animationDelay:"0s"}}),c.jsx(on,{className:"absolute top-6 right-6 w-3 h-3 text-yellow-500 animate-pulse",style:{animationDelay:"0.5s"}}),c.jsx(on,{className:"absolute bottom-4 left-6 w-3 h-3 text-yellow-400 animate-pulse",style:{animationDelay:"1s"}}),c.jsx(on,{className:"absolute bottom-3 right-4 w-3 h-3 text-yellow-500 animate-pulse",style:{animationDelay:"1.5s"}})]}),c.jsx("div",{className:"relative z-10 flex justify-center items-center mb-3",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-200 to-indigo-300 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:c.jsx(Cf,{className:"w-8 h-8 text-indigo-800"})}),c.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center animate-bounce",children:c.jsx(on,{className:"w-3 h-3 text-white"})})]})}),c.jsxs("div",{className:"relative z-10 space-y-2",children:[c.jsx("p",{className:"text-base font-semibold",children:"Your secret key has been generated!"}),c.jsx("div",{className:"relative mx-auto max-w-sm",children:c.jsxs("div",{className:"p-3 bg-gradient-to-r from-amber-100 via-yellow-50 to-amber-100 dark:from-amber-950/40 dark:via-yellow-950/20 dark:to-amber-950/40 rounded-lg border-2 border-amber-300 dark:border-amber-700 shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(BE,{className:"w-3 h-3 text-amber-700"}),c.jsx("span",{className:"text-xs font-bold text-amber-800 dark:text-amber-200",children:"Important Warning"})]}),c.jsx("p",{className:"text-xs text-red-700 dark:text-amber-300 italic",children:"This key is your primary and only means of accessing your account. Store it safely and securely."})]})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.jsx(Je,{className:`cursor-pointer transition-all duration-200 ${p==="downloaded"?"ring-2 ring-green-500 bg-green-50 dark:bg-green-950/20":"hover:bg-primary/5 hover:border-primary/20"}`,children:c.jsx(ot,{className:"p-3",children:c.jsx(Le,{variant:"ghost",className:"w-full h-auto p-0 justify-start hover:bg-transparent",onClick:B,children:c.jsxs("div",{className:"flex items-center gap-3 w-full",children:[c.jsx("div",{className:`p-1.5 rounded-lg ${p==="downloaded"?"bg-green-100 dark:bg-green-900":"bg-primary/10"}`,children:p==="downloaded"?c.jsx(kf,{className:"w-4 h-4 text-green-600"}):c.jsx(M8,{className:"w-4 h-4 text-primary"})}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("div",{className:"font-medium text-sm",children:"Download as File"}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Save as nostr-nsec-key.txt file"})]}),p==="downloaded"&&c.jsx("div",{className:"text-xs font-medium text-green-600",children:" Downloaded"})]})})})})}),c.jsxs(Le,{className:`w-full rounded-full py-4 text-base font-semibold transform transition-all duration-200 shadow-lg ${p==="downloaded"?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 dark:from-blue-950/50 dark:to-purple-950/50 hover:scale-105":"bg-gradient-to-r from-blue-600/60 to-indigo-600/60 text-muted cursor-not-allowed"}`,onClick:O,disabled:p!=="downloaded",children:[c.jsx(FE,{className:"w-4 h-4 mr-2 flex-shrink-0"}),c.jsx("span",{className:"text-center leading-tight",children:p==="none"?c.jsx(c.Fragment,{children:"Please download your key first"}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"hidden sm:inline",children:"My Key is Safe - Continue"}),c.jsx("span",{className:"sm:hidden",children:"Key Secured - Continue"})]})})]})]})]}),r==="profile"&&c.jsxs("div",{className:"text-center space-y-4",children:[c.jsxs("div",{className:"relative p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/50 dark:to-indigo-950/50 overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[c.jsx(on,{className:"absolute top-3 left-4 w-3 h-3 text-yellow-400 animate-pulse",style:{animationDelay:"0s"}}),c.jsx(on,{className:"absolute top-6 right-6 w-3 h-3 text-yellow-500 animate-pulse",style:{animationDelay:"0.5s"}}),c.jsx(on,{className:"absolute bottom-4 left-6 w-3 h-3 text-yellow-400 animate-pulse",style:{animationDelay:"1s"}})]}),c.jsx("div",{className:"relative z-10 flex justify-center items-center mb-3",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-200 to-indigo-300 rounded-full flex items-center justify-center shadow-lg",children:c.jsx(tu,{className:"w-8 h-8 text-blue-800"})}),c.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center animate-bounce",children:c.jsx(on,{className:"w-3 h-3 text-white"})})]})}),c.jsxs("div",{className:"relative z-10 space-y-2",children:[c.jsx("p",{className:"text-base font-semibold",children:"Almost there! Let's set up your profile"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Your profile is your identity on Nostr."})]})]}),N&&c.jsx("div",{className:"relative p-4 rounded-xl bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 border border-blue-200 dark:border-blue-800",children:c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Publishing your profile..."})]})}),c.jsxs("div",{className:`space-y-4 text-left ${N?"opacity-50 pointer-events-none":""}`,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"profile-name",className:"text-sm font-medium",children:"Display Name"}),c.jsx(En,{id:"profile-name",value:w.name,onChange:A=>S(U=>({...U,name:A.target.value})),placeholder:"Your name",className:"rounded-lg",disabled:N})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"profile-about",className:"text-sm font-medium",children:"Bio"}),c.jsx(ha,{id:"profile-about",value:w.about,onChange:A=>S(U=>({...U,about:A.target.value})),placeholder:"Tell others about yourself...",className:"rounded-lg resize-none",rows:3,disabled:N})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"profile-picture",className:"text-sm font-medium",children:"Avatar"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(En,{id:"profile-picture",value:w.picture,onChange:A=>S(U=>({...U,picture:A.target.value})),placeholder:"https://example.com/your-avatar.jpg",className:"rounded-lg flex-1",disabled:N}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:M,onChange:F}),c.jsx(Le,{type:"button",variant:"outline",size:"icon",onClick:()=>{var A;return(A=M.current)==null?void 0:A.click()},disabled:T||N,className:"rounded-lg shrink-0",title:"Upload avatar image",children:T?c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):c.jsx(zC,{className:"w-4 h-4"})})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Le,{className:"w-full rounded-full py-4 text-base font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transform transition-all duration-200 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",onClick:()=>R(!1),disabled:N||T,children:N?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Creating Profile..."]}):c.jsxs(c.Fragment,{children:[c.jsx(tu,{className:"w-4 h-4 mr-2"}),"Create Profile & Finish"]})}),c.jsx(Le,{variant:"outline",className:"w-full rounded-full py-3 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>R(!0),disabled:N||T,children:N?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Setting up account..."]}):"Skip for now"})]})]})]})]})})};function G_(){const{nostr:t}=Hr(),{logins:e,setLogin:n,removeLogin:r}=L0(),{data:s=[]}=ua({queryKey:["nostr","logins",e.map(u=>u.id).join(";")],queryFn:async({signal:u})=>{const f=await t.query([{kinds:[0],authors:e.map(h=>h.pubkey)}],{signal:AbortSignal.any([u,AbortSignal.timeout(1500)])});return e.map(({id:h,pubkey:m})=>{const p=f.find(x=>x.pubkey===m);try{const x=ut.json().pipe(ut.metadata()).parse(p==null?void 0:p.content);return{id:h,pubkey:m,metadata:x,event:p}}catch{return{id:h,pubkey:m,metadata:{},event:p}}})},retry:3}),i=(()=>{const u=e[0];if(!u)return;const f=s.find(h=>h.id===u.id);return{metadata:{},...f,id:u.id,pubkey:u.pubkey}})(),l=(s||[]).slice(1);return{authors:s,currentUser:i,otherUsers:l,setLogin:n,removeLogin:r}}var Lv=["Enter"," "],x9=["ArrowDown","PageUp","Home"],Y_=["ArrowUp","PageDown","End"],w9=[...x9,...Y_],b9={ltr:[...Lv,"ArrowRight"],rtl:[...Lv,"ArrowLeft"]},E9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[yu,S9,N9]=Bh(Uu),[pa,Q_]=Mn(Uu,[N9,di,Kl]),fp=di(),Z_=Kl(),[k9,ma]=pa(Uu),[C9,zu]=pa(Uu),X_=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:l=!0}=t,u=fp(e),[f,h]=y.useState(null),m=y.useRef(!1),p=Kt(i),x=ql(s);return y.useEffect(()=>{const w=()=>{m.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>m.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),c.jsx(Qh,{...u,children:c.jsx(k9,{scope:e,open:n,onOpenChange:p,content:f,onContentChange:h,children:c.jsx(C9,{scope:e,onClose:y.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:m,dir:x,modal:l,children:r})})})};X_.displayName=Uu;var j9="MenuAnchor",vx=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=fp(n);return c.jsx(Mu,{...s,...r,ref:e})});vx.displayName=j9;var xx="MenuPortal",[_9,J_]=pa(xx,{forceMount:void 0}),eT=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=ma(xx,e);return c.jsx(_9,{scope:e,forceMount:n,children:c.jsx(vn,{present:n||i.open,children:c.jsx(Bl,{asChild:!0,container:s,children:r})})})};eT.displayName=xx;var kr="MenuContent",[T9,wx]=pa(kr),tT=y.forwardRef((t,e)=>{const n=J_(kr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ma(kr,t.__scopeMenu),l=zu(kr,t.__scopeMenu);return c.jsx(yu.Provider,{scope:t.__scopeMenu,children:c.jsx(vn,{present:r||i.open,children:c.jsx(yu.Slot,{scope:t.__scopeMenu,children:l.modal?c.jsx(P9,{...s,ref:e}):c.jsx(R9,{...s,ref:e})})})})}),P9=y.forwardRef((t,e)=>{const n=ma(kr,t.__scopeMenu),r=y.useRef(null),s=it(e,r);return y.useEffect(()=>{const i=r.current;if(i)return ap(i)},[]),c.jsx(bx,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Se(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),R9=y.forwardRef((t,e)=>{const n=ma(kr,t.__scopeMenu);return c.jsx(bx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),A9=si("MenuContent.ScrollLock"),bx=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:x,onDismiss:w,disableOutsideScroll:S,...v}=t,b=ma(kr,n),N=zu(kr,n),_=fp(n),T=Z_(n),M=S9(n),[D,B]=y.useState(null),O=y.useRef(null),F=it(e,O,b.onContentChange),R=y.useRef(0),L=y.useRef(""),A=y.useRef(0),U=y.useRef(null),K=y.useRef("right"),H=y.useRef(0),V=S?$u:y.Fragment,Q=S?{as:A9,allowPinchZoom:!0}:void 0,te=G=>{var ce,ge;const ne=L.current+G,z=M().filter(be=>!be.disabled),W=document.activeElement,ae=(ce=z.find(be=>be.ref.current===W))==null?void 0:ce.textValue,de=z.map(be=>be.textValue),fe=H9(de,ne,ae),we=(ge=z.find(be=>be.textValue===fe))==null?void 0:ge.ref.current;(function be(De){L.current=De,window.clearTimeout(R.current),De!==""&&(R.current=window.setTimeout(()=>be(""),1e3))})(ne),we&&setTimeout(()=>we.focus())};y.useEffect(()=>()=>window.clearTimeout(R.current),[]),op();const Z=y.useCallback(G=>{var z,W;return K.current===((z=U.current)==null?void 0:z.side)&&q9(G,(W=U.current)==null?void 0:W.area)},[]);return c.jsx(T9,{scope:n,searchRef:L,onItemEnter:y.useCallback(G=>{Z(G)&&G.preventDefault()},[Z]),onItemLeave:y.useCallback(G=>{var ne;Z(G)||((ne=O.current)==null||ne.focus(),B(null))},[Z]),onTriggerLeave:y.useCallback(G=>{Z(G)&&G.preventDefault()},[Z]),pointerGraceTimerRef:A,onPointerGraceIntentChange:y.useCallback(G=>{U.current=G},[]),children:c.jsx(V,{...Q,children:c.jsx(Lu,{asChild:!0,trapped:s,onMountAutoFocus:Se(i,G=>{var ne;G.preventDefault(),(ne=O.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:c.jsx(da,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:x,onDismiss:w,children:c.jsx(px,{asChild:!0,...T,dir:N.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:B,onEntryFocus:Se(f,G=>{N.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(Zh,{role:"menu","aria-orientation":"vertical","data-state":yT(b.open),"data-radix-menu-content":"",dir:N.dir,..._,...v,ref:F,style:{outline:"none",...v.style},onKeyDown:Se(v.onKeyDown,G=>{const z=G.target.closest("[data-radix-menu-content]")===G.currentTarget,W=G.ctrlKey||G.altKey||G.metaKey,ae=G.key.length===1;z&&(G.key==="Tab"&&G.preventDefault(),!W&&ae&&te(G.key));const de=O.current;if(G.target!==de||!w9.includes(G.key))return;G.preventDefault();const we=M().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);Y_.includes(G.key)&&we.reverse(),z9(we)}),onBlur:Se(t.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(R.current),L.current="")}),onPointerMove:Se(t.onPointerMove,vu(G=>{const ne=G.target,z=H.current!==G.clientX;if(G.currentTarget.contains(ne)&&z){const W=G.clientX>H.current?"right":"left";K.current=W,H.current=G.clientX}}))})})})})})})});tT.displayName=kr;var I9="MenuGroup",Ex=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Ae.div,{role:"group",...r,ref:e})});Ex.displayName=I9;var M9="MenuLabel",nT=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Ae.div,{...r,ref:e})});nT.displayName=M9;var ih="MenuItem",$2="menu.itemSelect",hp=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=y.useRef(null),l=zu(ih,t.__scopeMenu),u=wx(ih,t.__scopeMenu),f=it(e,i),h=y.useRef(!1),m=()=>{const p=i.current;if(!n&&p){const x=new CustomEvent($2,{bubbles:!0,cancelable:!0});p.addEventListener($2,w=>r==null?void 0:r(w),{once:!0}),$0(p,x),x.defaultPrevented?h.current=!1:l.onClose()}};return c.jsx(rT,{...s,ref:f,disabled:n,onClick:Se(t.onClick,m),onPointerDown:p=>{var x;(x=t.onPointerDown)==null||x.call(t,p),h.current=!0},onPointerUp:Se(t.onPointerUp,p=>{var x;h.current||(x=p.currentTarget)==null||x.click()}),onKeyDown:Se(t.onKeyDown,p=>{const x=u.searchRef.current!=="";n||x&&p.key===" "||Lv.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});hp.displayName=ih;var rT=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,l=wx(ih,n),u=Z_(n),f=y.useRef(null),h=it(e,f),[m,p]=y.useState(!1),[x,w]=y.useState("");return y.useEffect(()=>{const S=f.current;S&&w((S.textContent??"").trim())},[i.children]),c.jsx(yu.ItemSlot,{scope:n,disabled:r,textValue:s??x,children:c.jsx(mx,{asChild:!0,...u,focusable:!r,children:c.jsx(Ae.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:Se(t.onPointerMove,vu(S=>{r?l.onItemLeave(S):(l.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Se(t.onPointerLeave,vu(S=>l.onItemLeave(S))),onFocus:Se(t.onFocus,()=>p(!0)),onBlur:Se(t.onBlur,()=>p(!1))})})})}),O9="MenuCheckboxItem",sT=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return c.jsx(cT,{scope:t.__scopeMenu,checked:n,children:c.jsx(hp,{role:"menuitemcheckbox","aria-checked":ah(n)?"mixed":n,...s,ref:e,"data-state":Nx(n),onSelect:Se(s.onSelect,()=>r==null?void 0:r(ah(n)?!0:!n),{checkForDefaultPrevented:!1})})})});sT.displayName=O9;var oT="MenuRadioGroup",[D9,L9]=pa(oT,{value:void 0,onValueChange:()=>{}}),iT=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Kt(r);return c.jsx(D9,{scope:t.__scopeMenu,value:n,onValueChange:i,children:c.jsx(Ex,{...s,ref:e})})});iT.displayName=oT;var aT="MenuRadioItem",lT=y.forwardRef((t,e)=>{const{value:n,...r}=t,s=L9(aT,t.__scopeMenu),i=n===s.value;return c.jsx(cT,{scope:t.__scopeMenu,checked:i,children:c.jsx(hp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Nx(i),onSelect:Se(r.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});lT.displayName=aT;var Sx="MenuItemIndicator",[cT,$9]=pa(Sx,{checked:!1}),uT=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=$9(Sx,n);return c.jsx(vn,{present:r||ah(i.checked)||i.checked===!0,children:c.jsx(Ae.span,{...s,ref:e,"data-state":Nx(i.checked)})})});uT.displayName=Sx;var B9="MenuSeparator",dT=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});dT.displayName=B9;var F9="MenuArrow",fT=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=fp(n);return c.jsx(Xh,{...s,...r,ref:e})});fT.displayName=F9;var U9="MenuSub",[NG,hT]=pa(U9),Gc="MenuSubTrigger",pT=y.forwardRef((t,e)=>{const n=ma(Gc,t.__scopeMenu),r=zu(Gc,t.__scopeMenu),s=hT(Gc,t.__scopeMenu),i=wx(Gc,t.__scopeMenu),l=y.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=i,h={__scopeMenu:t.__scopeMenu},m=y.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return y.useEffect(()=>m,[m]),y.useEffect(()=>{const p=u.current;return()=>{window.clearTimeout(p),f(null)}},[u,f]),c.jsx(vx,{asChild:!0,...h,children:c.jsx(rT,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":yT(n.open),...t,ref:Ks(e,s.onTriggerChange),onClick:p=>{var x;(x=t.onClick)==null||x.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Se(t.onPointerMove,vu(p=>{i.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Se(t.onPointerLeave,vu(p=>{var w,S;m();const x=(w=n.content)==null?void 0:w.getBoundingClientRect();if(x){const v=(S=n.content)==null?void 0:S.dataset.side,b=v==="right",N=b?-5:5,_=x[b?"left":"right"],T=x[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+N,y:p.clientY},{x:_,y:x.top},{x:T,y:x.top},{x:T,y:x.bottom},{x:_,y:x.bottom}],side:v}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Se(t.onKeyDown,p=>{var w;const x=i.searchRef.current!=="";t.disabled||x&&p.key===" "||b9[r.dir].includes(p.key)&&(n.onOpenChange(!0),(w=n.content)==null||w.focus(),p.preventDefault())})})})});pT.displayName=Gc;var mT="MenuSubContent",gT=y.forwardRef((t,e)=>{const n=J_(kr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ma(kr,t.__scopeMenu),l=zu(kr,t.__scopeMenu),u=hT(mT,t.__scopeMenu),f=y.useRef(null),h=it(e,f);return c.jsx(yu.Provider,{scope:t.__scopeMenu,children:c.jsx(vn,{present:r||i.open,children:c.jsx(yu.Slot,{scope:t.__scopeMenu,children:c.jsx(bx,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var p;l.isUsingKeyboardRef.current&&((p=f.current)==null||p.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Se(t.onFocusOutside,m=>{m.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Se(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:Se(t.onKeyDown,m=>{var w;const p=m.currentTarget.contains(m.target),x=E9[l.dir].includes(m.key);p&&x&&(i.onOpenChange(!1),(w=u.trigger)==null||w.focus(),m.preventDefault())})})})})})});gT.displayName=mT;function yT(t){return t?"open":"closed"}function ah(t){return t==="indeterminate"}function Nx(t){return ah(t)?"indeterminate":t?"checked":"unchecked"}function z9(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function W9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function H9(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let l=W9(t,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==n));const f=l.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return f!==n?f:void 0}function V9(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const u=e[i],f=e[l],h=u.x,m=u.y,p=f.x,x=f.y;m>r!=x>r&&n<(p-h)*(r-m)/(x-m)+h&&(s=!s)}return s}function q9(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return V9(n,e)}function vu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var K9=X_,G9=vx,Y9=eT,Q9=tT,Z9=Ex,X9=nT,J9=hp,ez=sT,tz=iT,nz=lT,rz=uT,sz=dT,oz=fT,iz=pT,az=gT,pp="DropdownMenu",[lz,kG]=Mn(pp,[Q_]),zn=Q_(),[cz,vT]=lz(pp),xT=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:l,modal:u=!0}=t,f=zn(e),h=y.useRef(null),[m,p]=nr({prop:s,defaultProp:i??!1,onChange:l,caller:pp});return c.jsx(cz,{scope:e,triggerId:dn(),triggerRef:h,contentId:dn(),open:m,onOpenChange:p,onOpenToggle:y.useCallback(()=>p(x=>!x),[p]),modal:u,children:c.jsx(K9,{...f,open:m,onOpenChange:p,dir:r,modal:u,children:n})})};xT.displayName=pp;var wT="DropdownMenuTrigger",bT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=vT(wT,n),l=zn(n);return c.jsx(G9,{asChild:!0,...l,children:c.jsx(Ae.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Ks(e,i.triggerRef),onPointerDown:Se(t.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:Se(t.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});bT.displayName=wT;var uz="DropdownMenuPortal",ET=t=>{const{__scopeDropdownMenu:e,...n}=t,r=zn(e);return c.jsx(Y9,{...r,...n})};ET.displayName=uz;var ST="DropdownMenuContent",NT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=vT(ST,n),i=zn(n),l=y.useRef(!1);return c.jsx(Q9,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Se(t.onCloseAutoFocus,u=>{var f;l.current||(f=s.triggerRef.current)==null||f.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Se(t.onInteractOutside,u=>{const f=u.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!s.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});NT.displayName=ST;var dz="DropdownMenuGroup",fz=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(Z9,{...s,...r,ref:e})});fz.displayName=dz;var hz="DropdownMenuLabel",kT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(X9,{...s,...r,ref:e})});kT.displayName=hz;var pz="DropdownMenuItem",CT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(J9,{...s,...r,ref:e})});CT.displayName=pz;var mz="DropdownMenuCheckboxItem",jT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(ez,{...s,...r,ref:e})});jT.displayName=mz;var gz="DropdownMenuRadioGroup",yz=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(tz,{...s,...r,ref:e})});yz.displayName=gz;var vz="DropdownMenuRadioItem",_T=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(nz,{...s,...r,ref:e})});_T.displayName=vz;var xz="DropdownMenuItemIndicator",TT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(rz,{...s,...r,ref:e})});TT.displayName=xz;var wz="DropdownMenuSeparator",PT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(sz,{...s,...r,ref:e})});PT.displayName=wz;var bz="DropdownMenuArrow",Ez=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(oz,{...s,...r,ref:e})});Ez.displayName=bz;var Sz="DropdownMenuSubTrigger",RT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(iz,{...s,...r,ref:e})});RT.displayName=Sz;var Nz="DropdownMenuSubContent",AT=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zn(n);return c.jsx(az,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AT.displayName=Nz;var kz=xT,Cz=bT,jz=ET,IT=NT,MT=kT,OT=CT,DT=jT,LT=_T,$T=TT,BT=PT,FT=RT,UT=AT;const zT=kz,WT=Cz,_z=y.forwardRef(({className:t,inset:e,children:n,...r},s)=>c.jsxs(FT,{ref:s,className:xe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,c.jsx(DC,{className:"ml-auto h-4 w-4"})]}));_z.displayName=FT.displayName;const Tz=y.forwardRef(({className:t,...e},n)=>c.jsx(UT,{ref:n,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Tz.displayName=UT.displayName;const HT=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(jz,{children:c.jsx(IT,{ref:r,sideOffset:e,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));HT.displayName=IT.displayName;const Yc=y.forwardRef(({className:t,inset:e,...n},r)=>c.jsx(OT,{ref:r,className:xe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Yc.displayName=OT.displayName;const Pz=y.forwardRef(({className:t,children:e,checked:n,...r},s)=>c.jsxs(DT,{ref:s,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx($T,{children:c.jsx(Wh,{className:"h-4 w-4"})})}),e]}));Pz.displayName=DT.displayName;const Rz=y.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(LT,{ref:r,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx($T,{children:c.jsx(P8,{className:"h-2 w-2 fill-current"})})}),e]}));Rz.displayName=LT.displayName;const Az=y.forwardRef(({className:t,inset:e,...n},r)=>c.jsx(MT,{ref:r,className:xe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Az.displayName=MT.displayName;const $v=y.forwardRef(({className:t,...e},n)=>c.jsx(BT,{ref:n,className:xe("-mx-1 my-1 h-px bg-muted",t),...e}));$v.displayName=BT.displayName;var Yg={exports:{}},Qg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2;function Iz(){if(B2)return Qg;B2=1;var t=Sh();function e(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,l=t.useDebugValue;function u(p,x){var w=x(),S=r({inst:{value:w,getSnapshot:x}}),v=S[0].inst,b=S[1];return i(function(){v.value=w,v.getSnapshot=x,f(v)&&b({inst:v})},[p,w,x]),s(function(){return f(v)&&b({inst:v}),p(function(){f(v)&&b({inst:v})})},[p]),l(w),w}function f(p){var x=p.getSnapshot;p=p.value;try{var w=x();return!n(p,w)}catch{return!0}}function h(p,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Qg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Qg}var F2;function Mz(){return F2||(F2=1,Yg.exports=Iz()),Yg.exports}var Oz=Mz();function Dz(){return Oz.useSyncExternalStore(Lz,()=>!0,()=>!1)}function Lz(){return()=>{}}var kx="Avatar",[$z,CG]=Mn(kx),[Bz,VT]=$z(kx),qT=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=y.useState("idle");return c.jsx(Bz,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(Ae.span,{...r,ref:e})})});qT.displayName=kx;var KT="AvatarImage",GT=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,l=VT(KT,n),u=Fz(r,i),f=Kt(h=>{s(h),l.onImageLoadingStatusChange(h)});return Gt(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?c.jsx(Ae.img,{...i,ref:e,src:r}):null});GT.displayName=KT;var YT="AvatarFallback",QT=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=VT(YT,n),[l,u]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(f)}},[r]),l&&i.imageLoadingStatus!=="loaded"?c.jsx(Ae.span,{...s,ref:e}):null});QT.displayName=YT;function U2(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Fz(t,{referrerPolicy:e,crossOrigin:n}){const r=Dz(),s=y.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[l,u]=y.useState(()=>U2(i,t));return Gt(()=>{u(U2(i,t))},[i,t]),Gt(()=>{const f=p=>()=>{u(p)};if(!i)return;const h=f("loaded"),m=f("error");return i.addEventListener("load",h),i.addEventListener("error",m),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",h),i.removeEventListener("error",m)}},[i,n,e]),l}var ZT=qT,XT=GT,JT=QT;const Qs=y.forwardRef(({className:t,...e},n)=>c.jsx(ZT,{ref:n,className:xe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Qs.displayName=ZT.displayName;const Zs=y.forwardRef(({className:t,...e},n)=>c.jsx(XT,{ref:n,className:xe("aspect-square h-full w-full object-cover",t),...e}));Zs.displayName=XT.displayName;const Xs=y.forwardRef(({className:t,...e},n)=>c.jsx(JT,{ref:n,className:xe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Xs.displayName=JT.displayName;var z2=1,Uz=.9,zz=.8,Wz=.17,Zg=.1,Xg=.999,Hz=.9999,Vz=.99,qz=/[\\\/_+.#"@\[\(\{&]/,Kz=/[\\\/_+.#"@\[\(\{&]/g,Gz=/[\s-]/,eP=/[\s-]/g;function Bv(t,e,n,r,s,i,l){if(i===e.length)return s===t.length?z2:Vz;var u=`${s},${i}`;if(l[u]!==void 0)return l[u];for(var f=r.charAt(i),h=n.indexOf(f,s),m=0,p,x,w,S;h>=0;)p=Bv(t,e,n,r,h+1,i+1,l),p>m&&(h===s?p*=z2:qz.test(t.charAt(h-1))?(p*=zz,w=t.slice(s,h-1).match(Kz),w&&s>0&&(p*=Math.pow(Xg,w.length))):Gz.test(t.charAt(h-1))?(p*=Uz,S=t.slice(s,h-1).match(eP),S&&s>0&&(p*=Math.pow(Xg,S.length))):(p*=Wz,s>0&&(p*=Math.pow(Xg,h-s))),t.charAt(h)!==e.charAt(i)&&(p*=Hz)),(p<Zg&&n.charAt(h-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(h-1)!==r.charAt(i))&&(x=Bv(t,e,n,r,h+1,i+2,l),x*Zg>p&&(p=x*Zg)),p>m&&(m=p),h=n.indexOf(f,h+1);return l[u]=m,m}function W2(t){return t.toLowerCase().replace(eP," ")}function Yz(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Bv(t,e,W2(t),W2(e),0,0,{})}var Bc='[cmdk-group=""]',Jg='[cmdk-group-items=""]',Qz='[cmdk-group-heading=""]',tP='[cmdk-item=""]',H2=`${tP}:not([aria-disabled="true"])`,Fv="cmdk-item-select",Ga="data-value",Zz=(t,e,n)=>Yz(t,e,n),nP=y.createContext(void 0),Wu=()=>y.useContext(nP),rP=y.createContext(void 0),Cx=()=>y.useContext(rP),sP=y.createContext(void 0),oP=y.forwardRef((t,e)=>{let n=Ya(()=>{var W,ae;return{search:"",value:(ae=(W=t.value)!=null?W:t.defaultValue)!=null?ae:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Ya(()=>new Set),s=Ya(()=>new Map),i=Ya(()=>new Map),l=Ya(()=>new Set),u=iP(t),{label:f,children:h,value:m,onValueChange:p,filter:x,shouldFilter:w,loop:S,disablePointerSelection:v=!1,vimBindings:b=!0,...N}=t,_=dn(),T=dn(),M=dn(),D=y.useRef(null),B=lW();aa(()=>{if(m!==void 0){let W=m.trim();n.current.value=W,O.emit()}},[m]),aa(()=>{B(6,K)},[]);let O=y.useMemo(()=>({subscribe:W=>(l.current.add(W),()=>l.current.delete(W)),snapshot:()=>n.current,setState:(W,ae,de)=>{var fe,we,ce,ge;if(!Object.is(n.current[W],ae)){if(n.current[W]=ae,W==="search")U(),L(),B(1,A);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let be=document.getElementById(M);be?be.focus():(fe=document.getElementById(_))==null||fe.focus()}if(B(7,()=>{var be;n.current.selectedItemId=(be=H())==null?void 0:be.id,O.emit()}),de||B(5,K),((we=u.current)==null?void 0:we.value)!==void 0){let be=ae??"";(ge=(ce=u.current).onValueChange)==null||ge.call(ce,be);return}}O.emit()}},emit:()=>{l.current.forEach(W=>W())}}),[]),F=y.useMemo(()=>({value:(W,ae,de)=>{var fe;ae!==((fe=i.current.get(W))==null?void 0:fe.value)&&(i.current.set(W,{value:ae,keywords:de}),n.current.filtered.items.set(W,R(ae,de)),B(2,()=>{L(),O.emit()}))},item:(W,ae)=>(r.current.add(W),ae&&(s.current.has(ae)?s.current.get(ae).add(W):s.current.set(ae,new Set([W]))),B(3,()=>{U(),L(),n.current.value||A(),O.emit()}),()=>{i.current.delete(W),r.current.delete(W),n.current.filtered.items.delete(W);let de=H();B(4,()=>{U(),(de==null?void 0:de.getAttribute("id"))===W&&A(),O.emit()})}),group:W=>(s.current.has(W)||s.current.set(W,new Set),()=>{i.current.delete(W),s.current.delete(W)}),filter:()=>u.current.shouldFilter,label:f||t["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:_,inputId:M,labelId:T,listInnerRef:D}),[]);function R(W,ae){var de,fe;let we=(fe=(de=u.current)==null?void 0:de.filter)!=null?fe:Zz;return W?we(W,n.current.search,ae):0}function L(){if(!n.current.search||u.current.shouldFilter===!1)return;let W=n.current.filtered.items,ae=[];n.current.filtered.groups.forEach(fe=>{let we=s.current.get(fe),ce=0;we.forEach(ge=>{let be=W.get(ge);ce=Math.max(be,ce)}),ae.push([fe,ce])});let de=D.current;V().sort((fe,we)=>{var ce,ge;let be=fe.getAttribute("id"),De=we.getAttribute("id");return((ce=W.get(De))!=null?ce:0)-((ge=W.get(be))!=null?ge:0)}).forEach(fe=>{let we=fe.closest(Jg);we?we.appendChild(fe.parentElement===we?fe:fe.closest(`${Jg} > *`)):de.appendChild(fe.parentElement===de?fe:fe.closest(`${Jg} > *`))}),ae.sort((fe,we)=>we[1]-fe[1]).forEach(fe=>{var we;let ce=(we=D.current)==null?void 0:we.querySelector(`${Bc}[${Ga}="${encodeURIComponent(fe[0])}"]`);ce==null||ce.parentElement.appendChild(ce)})}function A(){let W=V().find(de=>de.getAttribute("aria-disabled")!=="true"),ae=W==null?void 0:W.getAttribute(Ga);O.setState("value",ae||void 0)}function U(){var W,ae,de,fe;if(!n.current.search||u.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let we=0;for(let ce of r.current){let ge=(ae=(W=i.current.get(ce))==null?void 0:W.value)!=null?ae:"",be=(fe=(de=i.current.get(ce))==null?void 0:de.keywords)!=null?fe:[],De=R(ge,be);n.current.filtered.items.set(ce,De),De>0&&we++}for(let[ce,ge]of s.current)for(let be of ge)if(n.current.filtered.items.get(be)>0){n.current.filtered.groups.add(ce);break}n.current.filtered.count=we}function K(){var W,ae,de;let fe=H();fe&&(((W=fe.parentElement)==null?void 0:W.firstChild)===fe&&((de=(ae=fe.closest(Bc))==null?void 0:ae.querySelector(Qz))==null||de.scrollIntoView({block:"nearest"})),fe.scrollIntoView({block:"nearest"}))}function H(){var W;return(W=D.current)==null?void 0:W.querySelector(`${tP}[aria-selected="true"]`)}function V(){var W;return Array.from(((W=D.current)==null?void 0:W.querySelectorAll(H2))||[])}function Q(W){let ae=V()[W];ae&&O.setState("value",ae.getAttribute(Ga))}function te(W){var ae;let de=H(),fe=V(),we=fe.findIndex(ge=>ge===de),ce=fe[we+W];(ae=u.current)!=null&&ae.loop&&(ce=we+W<0?fe[fe.length-1]:we+W===fe.length?fe[0]:fe[we+W]),ce&&O.setState("value",ce.getAttribute(Ga))}function Z(W){let ae=H(),de=ae==null?void 0:ae.closest(Bc),fe;for(;de&&!fe;)de=W>0?iW(de,Bc):aW(de,Bc),fe=de==null?void 0:de.querySelector(H2);fe?O.setState("value",fe.getAttribute(Ga)):te(W)}let G=()=>Q(V().length-1),ne=W=>{W.preventDefault(),W.metaKey?G():W.altKey?Z(1):te(1)},z=W=>{W.preventDefault(),W.metaKey?Q(0):W.altKey?Z(-1):te(-1)};return y.createElement(Ae.div,{ref:e,tabIndex:-1,...N,"cmdk-root":"",onKeyDown:W=>{var ae;(ae=N.onKeyDown)==null||ae.call(N,W);let de=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||de))switch(W.key){case"n":case"j":{b&&W.ctrlKey&&ne(W);break}case"ArrowDown":{ne(W);break}case"p":case"k":{b&&W.ctrlKey&&z(W);break}case"ArrowUp":{z(W);break}case"Home":{W.preventDefault(),Q(0);break}case"End":{W.preventDefault(),G();break}case"Enter":{W.preventDefault();let fe=H();if(fe){let we=new Event(Fv);fe.dispatchEvent(we)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:F.inputId,id:F.labelId,style:uW},f),mp(t,W=>y.createElement(rP.Provider,{value:O},y.createElement(nP.Provider,{value:F},W))))}),Xz=y.forwardRef((t,e)=>{var n,r;let s=dn(),i=y.useRef(null),l=y.useContext(sP),u=Wu(),f=iP(t),h=(r=(n=f.current)==null?void 0:n.forceMount)!=null?r:l==null?void 0:l.forceMount;aa(()=>{if(!h)return u.item(s,l==null?void 0:l.id)},[h]);let m=aP(s,i,[t.value,t.children,i],t.keywords),p=Cx(),x=ai(B=>B.value&&B.value===m.current),w=ai(B=>h||u.filter()===!1?!0:B.search?B.filtered.items.get(s)>0:!0);y.useEffect(()=>{let B=i.current;if(!(!B||t.disabled))return B.addEventListener(Fv,S),()=>B.removeEventListener(Fv,S)},[w,t.onSelect,t.disabled]);function S(){var B,O;v(),(O=(B=f.current).onSelect)==null||O.call(B,m.current)}function v(){p.setState("value",m.current,!0)}if(!w)return null;let{disabled:b,value:N,onSelect:_,forceMount:T,keywords:M,...D}=t;return y.createElement(Ae.div,{ref:Ks(i,e),...D,id:s,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!x,"data-disabled":!!b,"data-selected":!!x,onPointerMove:b||u.getDisablePointerSelection()?void 0:v,onClick:b?void 0:S},t.children)}),Jz=y.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,l=dn(),u=y.useRef(null),f=y.useRef(null),h=dn(),m=Wu(),p=ai(w=>s||m.filter()===!1?!0:w.search?w.filtered.groups.has(l):!0);aa(()=>m.group(l),[]),aP(l,u,[t.value,t.heading,f]);let x=y.useMemo(()=>({id:l,forceMount:s}),[s]);return y.createElement(Ae.div,{ref:Ks(u,e),...i,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},n&&y.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:h},n),mp(t,w=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?h:void 0},y.createElement(sP.Provider,{value:x},w))))}),eW=y.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=y.useRef(null),i=ai(l=>!l.search);return!n&&!i?null:y.createElement(Ae.div,{ref:Ks(s,e),...r,"cmdk-separator":"",role:"separator"})}),tW=y.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=Cx(),l=ai(h=>h.search),u=ai(h=>h.selectedItemId),f=Wu();return y.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),y.createElement(Ae.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":u,id:f.inputId,type:"text",value:s?t.value:l,onChange:h=>{s||i.setState("search",h.target.value),n==null||n(h.target.value)}})}),nW=y.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...s}=t,i=y.useRef(null),l=y.useRef(null),u=ai(h=>h.selectedItemId),f=Wu();return y.useEffect(()=>{if(l.current&&i.current){let h=l.current,m=i.current,p,x=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let w=h.offsetHeight;m.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return x.observe(h),()=>{cancelAnimationFrame(p),x.unobserve(h)}}},[]),y.createElement(Ae.div,{ref:Ks(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":r,id:f.listId},mp(t,h=>y.createElement("div",{ref:Ks(l,f.listInnerRef),"cmdk-list-sizer":""},h)))}),rW=y.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:l,...u}=t;return y.createElement(ux,{open:n,onOpenChange:r},y.createElement(dx,{container:l},y.createElement(cp,{"cmdk-overlay":"",className:s}),y.createElement(up,{"aria-label":t.label,"cmdk-dialog":"",className:i},y.createElement(oP,{ref:e,...u}))))}),sW=y.forwardRef((t,e)=>ai(n=>n.filtered.count===0)?y.createElement(Ae.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),oW=y.forwardRef((t,e)=>{let{progress:n,children:r,label:s="Loading...",...i}=t;return y.createElement(Ae.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},mp(t,l=>y.createElement("div",{"aria-hidden":!0},l)))}),rr=Object.assign(oP,{List:nW,Item:Xz,Input:tW,Group:Jz,Separator:eW,Dialog:rW,Empty:sW,Loading:oW});function iW(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function aW(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function iP(t){let e=y.useRef(t);return aa(()=>{e.current=t}),e}var aa=typeof window>"u"?y.useEffect:y.useLayoutEffect;function Ya(t){let e=y.useRef();return e.current===void 0&&(e.current=t()),e}function ai(t){let e=Cx(),n=()=>t(e.snapshot());return y.useSyncExternalStore(e.subscribe,n,n)}function aP(t,e,n,r=[]){let s=y.useRef(),i=Wu();return aa(()=>{var l;let u=(()=>{var h;for(let m of n){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(h=m.current.textContent)==null?void 0:h.trim():s.current}})(),f=r.map(h=>h.trim());i.value(t,u,f),(l=e.current)==null||l.setAttribute(Ga,u),s.current=u}),s}var lW=()=>{let[t,e]=y.useState(),n=Ya(()=>new Map);return aa(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}};function cW(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function mp({asChild:t,children:e},n){return t&&y.isValidElement(e)?y.cloneElement(cW(e),{ref:e.ref},n(e.props.children)):n(e)}var uW={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const lP=y.forwardRef(({className:t,...e},n)=>c.jsx(rr,{ref:n,className:xe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));lP.displayName=rr.displayName;const cP=y.forwardRef(({className:t,...e},n)=>c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx(FC,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(rr.Input,{ref:n,className:xe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));cP.displayName=rr.Input.displayName;const uP=y.forwardRef(({className:t,...e},n)=>c.jsx(rr.List,{ref:n,className:xe("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));uP.displayName=rr.List.displayName;const dP=y.forwardRef((t,e)=>c.jsx(rr.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));dP.displayName=rr.Empty.displayName;const fP=y.forwardRef(({className:t,...e},n)=>c.jsx(rr.Group,{ref:n,className:xe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));fP.displayName=rr.Group.displayName;const dW=y.forwardRef(({className:t,...e},n)=>c.jsx(rr.Separator,{ref:n,className:xe("-mx-1 h-px bg-border",t),...e}));dW.displayName=rr.Separator.displayName;const Pf=y.forwardRef(({className:t,...e},n)=>c.jsx(rr.Item,{ref:n,className:xe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));Pf.displayName=rr.Item.displayName;var gp="Popover",[hP,jG]=Mn(gp,[di]),Hu=di(),[fW,pi]=hP(gp),pP=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:l=!1}=t,u=Hu(e),f=y.useRef(null),[h,m]=y.useState(!1),[p,x]=nr({prop:r,defaultProp:s??!1,onChange:i,caller:gp});return c.jsx(Qh,{...u,children:c.jsx(fW,{scope:e,contentId:dn(),triggerRef:f,open:p,onOpenChange:x,onOpenToggle:y.useCallback(()=>x(w=>!w),[x]),hasCustomAnchor:h,onCustomAnchorAdd:y.useCallback(()=>m(!0),[]),onCustomAnchorRemove:y.useCallback(()=>m(!1),[]),modal:l,children:n})})};pP.displayName=gp;var mP="PopoverAnchor",hW=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=pi(mP,n),i=Hu(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:u}=s;return y.useEffect(()=>(l(),()=>u()),[l,u]),c.jsx(Mu,{...i,...r,ref:e})});hW.displayName=mP;var gP="PopoverTrigger",yP=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=pi(gP,n),i=Hu(n),l=it(e,s.triggerRef),u=c.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":EP(s.open),...r,ref:l,onClick:Se(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?u:c.jsx(Mu,{asChild:!0,...i,children:u})});yP.displayName=gP;var jx="PopoverPortal",[pW,mW]=hP(jx,{forceMount:void 0}),vP=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=pi(jx,e);return c.jsx(pW,{scope:e,forceMount:n,children:c.jsx(vn,{present:n||i.open,children:c.jsx(Bl,{asChild:!0,container:s,children:r})})})};vP.displayName=jx;var Al="PopoverContent",xP=y.forwardRef((t,e)=>{const n=mW(Al,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=pi(Al,t.__scopePopover);return c.jsx(vn,{present:r||i.open,children:i.modal?c.jsx(yW,{...s,ref:e}):c.jsx(vW,{...s,ref:e})})});xP.displayName=Al;var gW=si("PopoverContent.RemoveScroll"),yW=y.forwardRef((t,e)=>{const n=pi(Al,t.__scopePopover),r=y.useRef(null),s=it(e,r),i=y.useRef(!1);return y.useEffect(()=>{const l=r.current;if(l)return ap(l)},[]),c.jsx($u,{as:gW,allowPinchZoom:!0,children:c.jsx(wP,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(t.onCloseAutoFocus,l=>{var u;l.preventDefault(),i.current||(u=n.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Se(t.onPointerDownOutside,l=>{const u=l.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Se(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),vW=y.forwardRef((t,e)=>{const n=pi(Al,t.__scopePopover),r=y.useRef(!1),s=y.useRef(!1);return c.jsx(wP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,u;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),wP=y.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,...p}=t,x=pi(Al,n),w=Hu(n);return op(),c.jsx(Lu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(da,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onDismiss:()=>x.onOpenChange(!1),children:c.jsx(Zh,{"data-state":EP(x.open),role:"dialog",id:x.contentId,...w,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bP="PopoverClose",xW=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=pi(bP,n);return c.jsx(Ae.button,{type:"button",...r,ref:e,onClick:Se(t.onClick,()=>s.onOpenChange(!1))})});xW.displayName=bP;var wW="PopoverArrow",bW=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Hu(n);return c.jsx(Xh,{...s,...r,ref:e})});bW.displayName=wW;function EP(t){return t?"open":"closed"}var EW=pP,SW=yP,NW=vP,SP=xP;const kW=EW,CW=SW,NP=y.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>c.jsx(NW,{children:c.jsx(SP,{ref:s,align:e,sideOffset:n,className:xe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));NP.displayName=SP.displayName;function _x(t){const{className:e}=t,{config:n,updateConfig:r,presetRelays:s=[]}=Ru(),i=n.relayUrl,l=v=>{r(b=>({...b,relayUrl:v}))},[u,f]=y.useState(!1),[h,m]=y.useState(""),p=s.find(v=>v.url===i),x=v=>{const b=v.trim();return!b||b.includes("://")?b:`wss://${b}`},w=v=>{l==null||l(x(v)),f(!1),m("")},S=v=>{const b=v.trim();if(!b)return!1;const N=x(b);try{return new URL(N),!0}catch{return!1}};return c.jsxs(kW,{open:u,onOpenChange:f,children:[c.jsx(CW,{asChild:!0,children:c.jsxs(Le,{variant:"outline",role:"combobox","aria-expanded":u,className:xe("justify-between",e),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(WC,{className:"h-4 w-4"}),c.jsx("span",{className:"truncate",children:p?p.name:i?i.replace(/^wss?:\/\//,""):"Select relay..."})]}),c.jsx(_8,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(NP,{className:"w-[300px] p-0",children:c.jsxs(lP,{children:[c.jsx(cP,{placeholder:"Search relays or type URL...",value:h,onValueChange:m}),c.jsxs(uP,{children:[c.jsx(dP,{children:h&&S(h)?c.jsxs(Pf,{onSelect:()=>w(h),className:"cursor-pointer",children:[c.jsx(wv,{className:"mr-2 h-4 w-4"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:"Add custom relay"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:x(h)})]})]}):c.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:h?"Invalid relay URL":"No relay found."})}),c.jsxs(fP,{children:[s.filter(v=>!h||v.name.toLowerCase().includes(h.toLowerCase())||v.url.toLowerCase().includes(h.toLowerCase())).map(v=>c.jsxs(Pf,{value:v.url,onSelect:b=>{l(x(b)),f(!1),m("")},children:[c.jsx(Wh,{className:xe("mr-2 h-4 w-4",i===v.url?"opacity-100":"opacity-0")}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:v.name}),c.jsx("span",{className:"text-xs text-muted-foreground",children:v.url})]})]},v.url)),h&&S(h)&&c.jsxs(Pf,{onSelect:()=>w(h),className:"cursor-pointer border-t",children:[c.jsx(wv,{className:"mr-2 h-4 w-4"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium",children:"Add custom relay"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:x(h)})]})]})]})]})]})})]})}function jW(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const kP=_e.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Vu=()=>{const t=_e.useContext(kP);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};jW(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const _W=24,TW=typeof window<"u"?y.useLayoutEffect:y.useEffect;function V2(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}function PW(){return Tx(/^Mac/)}function RW(){return Tx(/^iPhone/)}function q2(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function AW(){return Tx(/^iPad/)||PW()&&navigator.maxTouchPoints>1}function CP(){return RW()||AW()}function Tx(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const ey=typeof document<"u"&&window.visualViewport;function K2(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function jP(t){for(K2(t)&&(t=t.parentElement);t&&!K2(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const IW=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let mf=0,ty;function MW(t={}){let{isDisabled:e}=t;TW(()=>{if(!e)return mf++,mf===1&&CP()&&(ty=OW()),()=>{mf--,mf===0&&(ty==null||ty())}},[e])}function OW(){let t,e=0,n=p=>{t=jP(p.target),!(t===document.documentElement&&t===document.body)&&(e=p.changedTouches[0].pageY)},r=p=>{if(!t||t===document.documentElement||t===document.body){p.preventDefault();return}let x=p.changedTouches[0].pageY,w=t.scrollTop,S=t.scrollHeight-t.clientHeight;S!==0&&((w<=0&&x>e||w>=S&&x<e)&&p.preventDefault(),e=x)},s=p=>{let x=p.target;Uv(x)&&x!==document.activeElement&&(p.preventDefault(),x.style.transform="translateY(-2000px)",x.focus(),requestAnimationFrame(()=>{x.style.transform=""}))},i=p=>{let x=p.target;Uv(x)&&(x.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{x.style.transform="",ey&&(ey.height<window.innerHeight?requestAnimationFrame(()=>{G2(x)}):ey.addEventListener("resize",()=>G2(x),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},u=window.pageXOffset,f=window.pageYOffset,h=V2(DW(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let m=V2(Fc(document,"touchstart",n,{passive:!1,capture:!0}),Fc(document,"touchmove",r,{passive:!1,capture:!0}),Fc(document,"touchend",s,{passive:!1,capture:!0}),Fc(document,"focus",i,!0),Fc(window,"scroll",l));return()=>{h(),m(),window.scrollTo(u,f)}}function DW(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function Fc(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function G2(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=jP(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,s=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;const l=n.getBoundingClientRect().bottom+_W;i>l&&(n.scrollTop+=s-r)}t=n.parentElement}}function Uv(t){return t instanceof HTMLInputElement&&!IW.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function LW(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function $W(...t){return e=>t.forEach(n=>LW(n,e))}function _P(...t){return y.useCallback($W(...t),t)}const TP=new WeakMap;function an(t,e,n=!1){if(!t||!(t instanceof HTMLElement))return;let r={};Object.entries(e).forEach(([s,i])=>{if(s.startsWith("--")){t.style.setProperty(s,i);return}r[s]=t.style[s],t.style[s]=i}),!n&&TP.set(t,r)}function BW(t,e){if(!t||!(t instanceof HTMLElement))return;let n=TP.get(t);n&&(t.style[e]=n[e])}const ln=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function gf(t,e){if(!t)return null;const n=window.getComputedStyle(t),r=n.transform||n.webkitTransform||n.mozTransform;let s=r.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[ln(e)?13:12]):(s=r.match(/^matrix\((.+)\)$/),s?parseFloat(s[1].split(", ")[ln(e)?5:4]):null)}function FW(t){return 8*(Math.log(t+1)-2)}function ny(t,e){if(!t)return()=>{};const n=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=n}}function UW(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}const Ht={DURATION:.5,EASE:[.32,.72,0,1]},PP=.4,zW=.25,WW=100,RP=8,yf=16,zv=26,ry="vaul-dragging";function AP(t){const e=_e.useRef(t);return _e.useEffect(()=>{e.current=t}),_e.useMemo(()=>(...n)=>e.current==null?void 0:e.current.call(e,...n),[])}function HW({defaultProp:t,onChange:e}){const n=_e.useState(t),[r]=n,s=_e.useRef(r),i=AP(e);return _e.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}function IP({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=HW({defaultProp:e,onChange:n}),i=t!==void 0,l=i?t:r,u=AP(n),f=_e.useCallback(h=>{if(i){const p=typeof h=="function"?h(t):h;p!==t&&u(p)}else s(h)},[i,t,s,u]);return[l,f]}function VW({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:n,drawerRef:r,overlayRef:s,fadeFromIndex:i,onSnapPointChange:l,direction:u="bottom",container:f,snapToSequentialPoint:h}){const[m,p]=IP({prop:t,defaultProp:n==null?void 0:n[0],onChange:e}),[x,w]=_e.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);_e.useEffect(()=>{function O(){w({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const S=_e.useMemo(()=>m===(n==null?void 0:n[n.length-1])||null,[n,m]),v=_e.useMemo(()=>n==null?void 0:n.findIndex(O=>O===m),[n,m]),b=n&&n.length>0&&(i||i===0)&&!Number.isNaN(i)&&n[i]===m||!n,N=_e.useMemo(()=>{const O=f?{width:f.getBoundingClientRect().width,height:f.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var F;return(F=n==null?void 0:n.map(R=>{const L=typeof R=="string";let A=0;if(L&&(A=parseInt(R,10)),ln(u)){const K=L?A:x?R*O.height:0;return x?u==="bottom"?O.height-K:-O.height+K:K}const U=L?A:x?R*O.width:0;return x?u==="right"?O.width-U:-O.width+U:U}))!=null?F:[]},[n,x,f]),_=_e.useMemo(()=>v!==null?N==null?void 0:N[v]:null,[N,v]),T=_e.useCallback(O=>{var F;const R=(F=N==null?void 0:N.findIndex(L=>L===O))!=null?F:null;l(R),an(r.current,{transition:`transform ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`,transform:ln(u)?`translate3d(0, ${O}px, 0)`:`translate3d(${O}px, 0, 0)`}),N&&R!==N.length-1&&R!==i&&R<i?an(s.current,{transition:`opacity ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`,opacity:"0"}):an(s.current,{transition:`opacity ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`,opacity:"1"}),p(n==null?void 0:n[Math.max(R,0)])},[r.current,n,N,i,s,p]);_e.useEffect(()=>{if(m||t){var O;const F=(O=n==null?void 0:n.findIndex(R=>R===t||R===m))!=null?O:-1;N&&F!==-1&&typeof N[F]=="number"&&T(N[F])}},[m,t,n,N,T]);function M({draggedDistance:O,closeDrawer:F,velocity:R,dismissible:L}){if(i===void 0)return;const A=u==="bottom"||u==="right"?(_??0)-O:(_??0)+O,U=v===i-1,K=v===0,H=O>0;if(U&&an(s.current,{transition:`opacity ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`}),!h&&R>2&&!H){L?F():T(N[0]);return}if(!h&&R>2&&H&&N&&n){T(N[n.length-1]);return}const V=N==null?void 0:N.reduce((te,Z)=>typeof te!="number"||typeof Z!="number"?te:Math.abs(Z-A)<Math.abs(te-A)?Z:te),Q=ln(u)?window.innerHeight:window.innerWidth;if(R>PP&&Math.abs(O)<Q*.4){const te=H?1:-1;if(te>0&&S){T(N[n.length-1]);return}if(K&&te<0&&L&&F(),v===null)return;T(N[v+te]);return}T(V)}function D({draggedDistance:O}){if(_===null)return;const F=u==="bottom"||u==="right"?_-O:_+O;(u==="bottom"||u==="right")&&F<N[N.length-1]||(u==="top"||u==="left")&&F>N[N.length-1]||an(r.current,{transform:ln(u)?`translate3d(0, ${F}px, 0)`:`translate3d(${F}px, 0, 0)`})}function B(O,F){if(!n||typeof v!="number"||!N||i===void 0)return null;const R=v===i-1;if(v>=i&&F)return 0;if(R&&!F)return 1;if(!b&&!R)return null;const A=R?v+1:v-1,U=R?N[A]-N[A-1]:N[A+1]-N[A],K=O/Math.abs(U);return R?1-K:K}return{isLastSnapPoint:S,activeSnapPoint:m,shouldFade:b,getPercentageDragged:B,setActiveSnapPoint:p,activeSnapPointIndex:v,onRelease:M,onDrag:D,snapPointsOffset:N}}const qW=()=>()=>{};function KW(){const{direction:t,isOpen:e,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:s}=Vu(),i=_e.useRef(null),l=y.useMemo(()=>document.body.style.backgroundColor,[]);function u(){return(window.innerWidth-zv)/window.innerWidth}_e.useEffect(()=>{if(e&&n){i.current&&clearTimeout(i.current);const f=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!f)return;UW(r&&!s?ny(document.body,{background:"black"}):qW,ny(f,{transformOrigin:ln(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Ht.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Ht.EASE.join(",")})`}));const h=ny(f,{borderRadius:`${RP}px`,overflow:"hidden",...ln(t)?{transform:`scale(${u()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${u()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{h(),i.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},Ht.DURATION*1e3)}}},[e,n,l])}let Uc=null;function GW({isOpen:t,modal:e,nested:n,hasBeenOpened:r,preventScrollRestoration:s,noBodyStyles:i}){const[l,u]=_e.useState(()=>typeof window<"u"?window.location.href:""),f=_e.useRef(0),h=_e.useCallback(()=>{if(q2()&&Uc===null&&t&&!i){Uc={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:x}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-f.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const w=x-window.innerHeight;w&&f.current>=x&&(document.body.style.top=`${-(f.current+w)}px`)}),300)}},[t]),m=_e.useCallback(()=>{if(q2()&&Uc!==null&&!i){const p=-parseInt(document.body.style.top,10),x=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Uc),window.requestAnimationFrame(()=>{if(s&&l!==window.location.href){u(window.location.href);return}window.scrollTo(x,p)}),Uc=null}},[l]);return _e.useEffect(()=>{function p(){f.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),_e.useEffect(()=>{n||!r||(t?(!window.matchMedia("(display-mode: standalone)").matches&&h(),e||window.setTimeout(()=>{m()},500)):m())},[t,r,l,e,n,h,m]),{restorePositionSetting:m}}function YW({open:t,onOpenChange:e,children:n,onDrag:r,onRelease:s,snapPoints:i,shouldScaleBackground:l=!1,setBackgroundColorOnScale:u=!0,closeThreshold:f=zW,scrollLockTimeout:h=WW,dismissible:m=!0,handleOnly:p=!1,fadeFromIndex:x=i&&i.length-1,activeSnapPoint:w,setActiveSnapPoint:S,fixed:v,modal:b=!0,onClose:N,nested:_,noBodyStyles:T,direction:M="bottom",defaultOpen:D=!1,disablePreventScroll:B=!0,snapToSequentialPoint:O=!1,preventScrollRestoration:F=!1,repositionInputs:R=!0,onAnimationEnd:L,container:A,autoFocus:U=!1}){var K,H;const[V=!1,Q]=IP({defaultProp:D,prop:t,onChange:Ce=>{e==null||e(Ce),!Ce&&!_&&Ye(),setTimeout(()=>{L==null||L(Ce)},Ht.DURATION*1e3),Ce&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),Ce||(document.body.style.pointerEvents="auto")}}),[te,Z]=_e.useState(!1),[G,ne]=_e.useState(!1),[z,W]=_e.useState(!1),ae=_e.useRef(null),de=_e.useRef(null),fe=_e.useRef(null),we=_e.useRef(null),ce=_e.useRef(null),ge=_e.useRef(!1),be=_e.useRef(null),De=_e.useRef(0),Ze=_e.useRef(!1),Qe=_e.useRef(0),Te=_e.useRef(null),yt=_e.useRef(((K=Te.current)==null?void 0:K.getBoundingClientRect().height)||0),tn=_e.useRef(((H=Te.current)==null?void 0:H.getBoundingClientRect().width)||0),nn=_e.useRef(0),xn=_e.useCallback(Ce=>{i&&Ce===pe.length-1&&(de.current=new Date)},[]),{activeSnapPoint:Gr,activeSnapPointIndex:le,setActiveSnapPoint:he,onRelease:je,snapPointsOffset:pe,onDrag:Pe,shouldFade:ke,getPercentageDragged:Be}=VW({snapPoints:i,activeSnapPointProp:w,setActiveSnapPointProp:S,drawerRef:Te,fadeFromIndex:x,overlayRef:ae,onSnapPointChange:xn,direction:M,container:A,snapToSequentialPoint:O});MW({isDisabled:!V||G||!b||z||!te||!R||!B});const{restorePositionSetting:Ye}=GW({isOpen:V,modal:b,nested:_,hasBeenOpened:te,preventScrollRestoration:F,noBodyStyles:T});function P(){return(window.innerWidth-zv)/window.innerWidth}function k(Ce){var dt,mt;!m&&!i||Te.current&&!Te.current.contains(Ce.target)||(yt.current=((dt=Te.current)==null?void 0:dt.getBoundingClientRect().height)||0,tn.current=((mt=Te.current)==null?void 0:mt.getBoundingClientRect().width)||0,ne(!0),fe.current=new Date,CP()&&window.addEventListener("touchend",()=>ge.current=!1,{once:!0}),Ce.target.setPointerCapture(Ce.pointerId),De.current=ln(M)?Ce.pageY:Ce.pageX)}function j(Ce,dt){var mt,rt;let vt=Ce;const On=(mt=window.getSelection())==null?void 0:mt.toString(),fn=Te.current?gf(Te.current,M):null,Nn=new Date;if(vt.hasAttribute("data-vaul-no-drag")||vt.closest("[data-vaul-no-drag]"))return!1;if(M==="right"||M==="left")return!0;if(de.current&&Nn.getTime()-de.current.getTime()<500)return!1;if(fn!==null&&(M==="bottom"?fn>0:fn<0))return!0;if(On&&On.length>0)return!1;if(Nn.getTime()-((rt=ce.current)==null?void 0:rt.getTime())<h&&fn===0||dt)return ce.current=Nn,!1;for(;vt;){if(vt.scrollHeight>vt.clientHeight){if(vt.scrollTop!==0)return ce.current=new Date,!1;if(vt.getAttribute("role")==="dialog")return!0}vt=vt.parentNode}return!0}function $(Ce){if(Te.current&&G){const dt=M==="bottom"||M==="right"?1:-1,mt=(De.current-(ln(M)?Ce.pageY:Ce.pageX))*dt,rt=mt>0,vt=i&&!m&&!rt;if(vt&&le===0)return;const On=Math.abs(mt),fn=document.querySelector("[data-vaul-drawer-wrapper]"),Nn=M==="bottom"||M==="top"?yt.current:tn.current;let Wn=On/Nn;const Yr=Be(On,rt);if(Yr!==null&&(Wn=Yr),vt&&Wn>=1||!ge.current&&!j(Ce.target,rt))return;if(Te.current.classList.add(ry),ge.current=!0,an(Te.current,{transition:"none"}),an(ae.current,{transition:"none"}),i&&Pe({draggedDistance:mt}),rt&&!i){const sr=FW(mt),Qr=Math.min(sr*-1,0)*dt;an(Te.current,{transform:ln(M)?`translate3d(0, ${Qr}px, 0)`:`translate3d(${Qr}px, 0, 0)`});return}const dr=1-Wn;if((ke||x&&le===x-1)&&(r==null||r(Ce,Wn),an(ae.current,{opacity:`${dr}`,transition:"none"},!0)),fn&&ae.current&&l){const sr=Math.min(P()+Wn*(1-P()),1),Qr=8-Wn*8,va=Math.max(0,14-Wn*14);an(fn,{borderRadius:`${Qr}px`,transform:ln(M)?`scale(${sr}) translate3d(0, ${va}px, 0)`:`scale(${sr}) translate3d(${va}px, 0, 0)`,transition:"none"},!0)}if(!i){const sr=On*dt;an(Te.current,{transform:ln(M)?`translate3d(0, ${sr}px, 0)`:`translate3d(${sr}px, 0, 0)`})}}}_e.useEffect(()=>{var Ce;function dt(){if(!Te.current||!R)return;const mt=document.activeElement;if(Uv(mt)||Ze.current){var rt;const vt=((rt=window.visualViewport)==null?void 0:rt.height)||0,On=window.innerHeight;let fn=On-vt;const Nn=Te.current.getBoundingClientRect().height||0,Wn=Nn>On*.8;nn.current||(nn.current=Nn);const Yr=Te.current.getBoundingClientRect().top;if(Math.abs(Qe.current-fn)>60&&(Ze.current=!Ze.current),i&&i.length>0&&pe&&le){const dr=pe[le]||0;fn+=dr}if(Qe.current=fn,Nn>vt||Ze.current){const dr=Te.current.getBoundingClientRect().height;let sr=dr;dr>vt&&(sr=vt-(Wn?Yr:zv)),v?Te.current.style.height=`${dr-Math.max(fn,0)}px`:Te.current.style.height=`${Math.max(sr,vt-Yr)}px`}else Te.current.style.height=`${nn.current}px`;i&&i.length>0&&!Ze.current?Te.current.style.bottom="0px":Te.current.style.bottom=`${Math.max(fn,0)}px`}}return(Ce=window.visualViewport)==null||Ce.addEventListener("resize",dt),()=>{var mt;return(mt=window.visualViewport)==null?void 0:mt.removeEventListener("resize",dt)}},[le,i,pe]);function X(Ce){ue(),N==null||N(),Ce||Q(!1),setTimeout(()=>{i&&he(i[0])},Ht.DURATION*1e3)}function se(){if(!Te.current)return;const Ce=document.querySelector("[data-vaul-drawer-wrapper]"),dt=gf(Te.current,M);an(Te.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`}),an(ae.current,{transition:`opacity ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`,opacity:"1"}),l&&dt&&dt>0&&V&&an(Ce,{borderRadius:`${RP}px`,overflow:"hidden",...ln(M)?{transform:`scale(${P()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${P()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Ht.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Ht.EASE.join(",")})`},!0)}function ue(){!G||!Te.current||(Te.current.classList.remove(ry),ge.current=!1,ne(!1),we.current=new Date)}function Xe(Ce){if(!G||!Te.current)return;Te.current.classList.remove(ry),ge.current=!1,ne(!1),we.current=new Date;const dt=gf(Te.current,M);if(!j(Ce.target,!1)||!dt||Number.isNaN(dt)||fe.current===null)return;const mt=we.current.getTime()-fe.current.getTime(),rt=De.current-(ln(M)?Ce.pageY:Ce.pageX),vt=Math.abs(rt)/mt;if(vt>.05&&(W(!0),setTimeout(()=>{W(!1)},200)),i){je({draggedDistance:rt*(M==="bottom"||M==="right"?1:-1),closeDrawer:X,velocity:vt,dismissible:m}),s==null||s(Ce,!0);return}if(M==="bottom"||M==="right"?rt>0:rt<0){se(),s==null||s(Ce,!0);return}if(vt>PP){X(),s==null||s(Ce,!1);return}var On;const fn=Math.min((On=Te.current.getBoundingClientRect().height)!=null?On:0,window.innerHeight);var Nn;const Wn=Math.min((Nn=Te.current.getBoundingClientRect().width)!=null?Nn:0,window.innerWidth),Yr=M==="left"||M==="right";if(Math.abs(dt)>=(Yr?Wn:fn)*f){X(),s==null||s(Ce,!1);return}s==null||s(Ce,!0),se()}_e.useEffect(()=>(V&&(an(document.documentElement,{scrollBehavior:"auto"}),de.current=new Date),()=>{BW(document.documentElement,"scrollBehavior")}),[V]);function pt(Ce){const dt=Ce?(window.innerWidth-yf)/window.innerWidth:1,mt=Ce?-16:0;be.current&&window.clearTimeout(be.current),an(Te.current,{transition:`transform ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`,transform:`scale(${dt}) translate3d(0, ${mt}px, 0)`}),!Ce&&Te.current&&(be.current=setTimeout(()=>{const rt=gf(Te.current,M);an(Te.current,{transition:"none",transform:ln(M)?`translate3d(0, ${rt}px, 0)`:`translate3d(${rt}px, 0, 0)`})},500))}function at(Ce,dt){if(dt<0)return;const mt=(window.innerWidth-yf)/window.innerWidth,rt=mt+dt*(1-mt),vt=-16+dt*yf;an(Te.current,{transform:ln(M)?`scale(${rt}) translate3d(0, ${vt}px, 0)`:`scale(${rt}) translate3d(${vt}px, 0, 0)`,transition:"none"})}function kt(Ce,dt){const mt=ln(M)?window.innerHeight:window.innerWidth,rt=dt?(mt-yf)/mt:1,vt=dt?-16:0;dt&&an(Te.current,{transition:`transform ${Ht.DURATION}s cubic-bezier(${Ht.EASE.join(",")})`,transform:ln(M)?`scale(${rt}) translate3d(0, ${vt}px, 0)`:`scale(${rt}) translate3d(${vt}px, 0, 0)`})}return _e.createElement(ux,{defaultOpen:D,onOpenChange:Ce=>{!m&&!Ce||(Ce?Z(!0):X(!0),Q(Ce))},open:V},_e.createElement(kP.Provider,{value:{activeSnapPoint:Gr,snapPoints:i,setActiveSnapPoint:he,drawerRef:Te,overlayRef:ae,onOpenChange:e,onPress:k,onRelease:Xe,onDrag:$,dismissible:m,handleOnly:p,isOpen:V,isDragging:G,shouldFade:ke,closeDrawer:X,onNestedDrag:at,onNestedOpenChange:pt,onNestedRelease:kt,keyboardIsOpen:Ze,modal:b,snapPointsOffset:pe,direction:M,shouldScaleBackground:l,setBackgroundColorOnScale:u,noBodyStyles:T,container:A,autoFocus:U}},n))}const MP=_e.forwardRef(function({...t},e){const{overlayRef:n,snapPoints:r,onRelease:s,shouldFade:i,isOpen:l,modal:u}=Vu(),f=_P(e,n),h=r&&r.length>0;return u?_e.createElement(cp,{onMouseUp:s,ref:f,"data-vaul-overlay":"","data-vaul-snap-points":l&&h?"true":"false","data-vaul-snap-points-overlay":l&&i?"true":"false",...t}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});MP.displayName="Drawer.Overlay";const OP=_e.forwardRef(function({onPointerDownOutside:t,style:e,onOpenAutoFocus:n,...r},s){const{drawerRef:i,onPress:l,onRelease:u,onDrag:f,keyboardIsOpen:h,snapPointsOffset:m,modal:p,isOpen:x,direction:w,snapPoints:S,container:v,handleOnly:b,autoFocus:N}=Vu(),[_,T]=_e.useState(!1),M=_P(s,i),D=_e.useRef(null),B=_e.useRef(null),O=_e.useRef(!1),F=S&&S.length>0;KW();const R=(A,U,K=0)=>{if(O.current)return!0;const H=Math.abs(A.y),V=Math.abs(A.x),Q=V>H,te=["bottom","right"].includes(U)?1:-1;if(U==="left"||U==="right"){if(!(A.x*te<0)&&V>=0&&V<=K)return Q}else if(!(A.y*te<0)&&H>=0&&H<=K)return!Q;return O.current=!0,!0};_e.useEffect(()=>{F&&window.requestAnimationFrame(()=>{T(!0)})},[]);function L(A){D.current=null,O.current=!1,u(A)}return _e.createElement(up,{"data-vaul-drawer-direction":w,"data-vaul-drawer":"","data-vaul-delayed-snap-points":_?"true":"false","data-vaul-snap-points":x&&F?"true":"false","data-vaul-custom-container":v?"true":"false",...r,ref:M,style:m&&m.length>0?{"--snap-point-height":`${m[0]}px`,...e}:e,onPointerDown:A=>{b||(r.onPointerDown==null||r.onPointerDown.call(r,A),D.current={x:A.pageX,y:A.pageY},l(A))},onOpenAutoFocus:A=>{n==null||n(A),N||A.preventDefault()},onPointerDownOutside:A=>{if(t==null||t(A),!p||A.defaultPrevented){A.preventDefault();return}h.current&&(h.current=!1)},onFocusOutside:A=>{if(!p){A.preventDefault();return}},onPointerMove:A=>{if(B.current=A,b||(r.onPointerMove==null||r.onPointerMove.call(r,A),!D.current))return;const U=A.pageY-D.current.y,K=A.pageX-D.current.x,H=A.pointerType==="touch"?10:2;R({x:K,y:U},w,H)?f(A):(Math.abs(K)>H||Math.abs(U)>H)&&(D.current=null)},onPointerUp:A=>{r.onPointerUp==null||r.onPointerUp.call(r,A),D.current=null,O.current=!1,u(A)},onPointerOut:A=>{r.onPointerOut==null||r.onPointerOut.call(r,A),L(B.current)},onContextMenu:A=>{r.onContextMenu==null||r.onContextMenu.call(r,A),L(B.current)}})});OP.displayName="Drawer.Content";const QW=250,ZW=120,XW=_e.forwardRef(function({preventCycle:t=!1,children:e,...n},r){const{closeDrawer:s,isDragging:i,snapPoints:l,activeSnapPoint:u,setActiveSnapPoint:f,dismissible:h,handleOnly:m,isOpen:p,onPress:x,onDrag:w}=Vu(),S=_e.useRef(null),v=_e.useRef(!1);function b(){if(v.current){T();return}window.setTimeout(()=>{N()},ZW)}function N(){if(i||t||v.current){T();return}if(T(),(!l||l.length===0)&&h){s();return}if(u===l[l.length-1]&&h){s();return}const D=l.findIndex(O=>O===u);if(D===-1)return;const B=l[D+1];f(B)}function _(){S.current=window.setTimeout(()=>{v.current=!0},QW)}function T(){window.clearTimeout(S.current),v.current=!1}return _e.createElement("div",{onClick:b,onPointerCancel:T,onPointerDown:M=>{m&&x(M),_()},onPointerMove:M=>{m&&w(M)},ref:r,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},_e.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},e))});XW.displayName="Drawer.Handle";function JW(t){const e=Vu(),{container:n=e.container,...r}=t;return _e.createElement(dx,{container:n,...r})}const Kr={Root:YW,Content:OP,Overlay:MP,Trigger:b_,Portal:JW,Close:E_,Title:fx,Description:hx},lh=({shouldScaleBackground:t=!0,...e})=>c.jsx(Kr.Root,{shouldScaleBackground:t,...e});lh.displayName="Drawer";const DP=Kr.Trigger,eH=Kr.Portal,LP=Kr.Close,$P=y.forwardRef(({className:t,...e},n)=>c.jsx(Kr.Overlay,{ref:n,className:xe("fixed inset-0 z-50 bg-black/80",t),...e}));$P.displayName=Kr.Overlay.displayName;const ch=y.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(eH,{children:[c.jsx($P,{}),c.jsxs(Kr.Content,{ref:r,className:xe("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...n,children:[c.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),e]})]}));ch.displayName="DrawerContent";const uh=({className:t,...e})=>c.jsx("div",{className:xe("grid gap-1.5 p-4 text-center sm:text-left",t),...e});uh.displayName="DrawerHeader";const dh=y.forwardRef(({className:t,...e},n)=>c.jsx(Kr.Title,{ref:n,className:xe("text-lg font-semibold leading-none tracking-tight",t),...e}));dh.displayName=Kr.Title.displayName;const fh=y.forwardRef(({className:t,...e},n)=>c.jsx(Kr.Description,{ref:n,className:xe("text-sm text-muted-foreground",t),...e}));fh.displayName=Kr.Description.displayName;var tH="Label",BP=y.forwardRef((t,e)=>c.jsx(Ae.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));BP.displayName=tH;var FP=BP;const nH=Fl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Fn=y.forwardRef(({className:t,...e},n)=>c.jsx(FP,{ref:n,className:xe(nH(),t),...e}));Fn.displayName=FP.displayName;const rH=Fl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pt({className:t,variant:e,...n}){return c.jsx("div",{className:xe(rH({variant:e}),t),...n})}var sH="Separator",Y2="horizontal",oH=["horizontal","vertical"],UP=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=Y2,...s}=t,i=iH(r)?r:Y2,u=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(Ae.div,{"data-orientation":i,...u,...s,ref:e})});UP.displayName=sH;function iH(t){return oH.includes(t)}var zP=UP;const xu=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>c.jsx(zP,{ref:s,decorative:n,orientation:e,className:xe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));xu.displayName=zP.displayName;function yp(){const{connections:t,getActiveConnection:e}=sx(),n=e(),r=globalThis.webln||null;return{hasNWC:y.useMemo(()=>t.length>0&&t.some(u=>u.isConnected),[t]),webln:r,activeNWC:n,preferredMethod:n?"nwc":r?"webln":"manual"}}const vf=768;function Px(){const[t,e]=y.useState(window.innerWidth<vf);return y.useEffect(()=>{const n=window.matchMedia(`(max-width: ${vf-1}px)`),r=()=>{e(window.innerWidth<vf)};return n.addEventListener("change",r),e(window.innerWidth<vf),()=>n.removeEventListener("change",r)},[]),!!t}const Wv=y.forwardRef(({alias:t,setAlias:e,connectionUri:n,setConnectionUri:r},s)=>c.jsxs("div",{className:"space-y-4 px-4",ref:s,children:[c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"alias",children:"Wallet Name (optional)"}),c.jsx(En,{id:"alias",placeholder:"My Lightning Wallet",value:t,onChange:i=>e(i.target.value)})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"connection-uri",children:"Connection URI"}),c.jsx(ha,{id:"connection-uri",placeholder:"nostr+walletconnect://...",value:n,onChange:i=>r(i.target.value),rows:3})]})]}));Wv.displayName="AddWalletContent";const Hv=y.forwardRef(({webln:t,hasNWC:e,connections:n,connectionInfo:r,activeConnection:s,handleSetActive:i,handleRemoveConnection:l,setAddDialogOpen:u},f)=>c.jsxs("div",{className:"space-y-6 px-4 pb-4",ref:f,children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-medium",children:"Current Status"}),c.jsxs("div",{className:"grid gap-3",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(xv,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:"WebLN"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Browser extension"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[t&&c.jsx(kf,{className:"h-4 w-4 text-green-600"}),c.jsx(Pt,{variant:t?"default":"secondary",className:"text-xs",children:t?"Ready":"Not Found"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(zE,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:"Nostr Wallet Connect"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:n.length>0?`${n.length} wallet${n.length!==1?"s":""} connected`:"Remote wallet connection"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[e&&c.jsx(kf,{className:"h-4 w-4 text-green-600"}),c.jsx(Pt,{variant:e?"default":"secondary",className:"text-xs",children:e?"Ready":"None"})]})]})]})]}),c.jsx(xu,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-medium",children:"Nostr Wallet Connect"}),c.jsxs(Le,{size:"sm",variant:"outline",onClick:()=>u(!0),children:[c.jsx(wv,{className:"h-4 w-4 mr-1"}),"Add"]})]}),n.length===0?c.jsx("div",{className:"text-center py-6 text-muted-foreground",children:c.jsx("p",{className:"text-sm",children:"No wallets connected"})}):c.jsx("div",{className:"space-y-2",children:n.map(h=>{const m=r[h.connectionString],p=s===h.connectionString;return c.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${p?"ring-2 ring-primary":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(zE,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:h.alias||(m==null?void 0:m.alias)||"Lightning Wallet"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"NWC Connection"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[p&&c.jsx(kf,{className:"h-4 w-4 text-green-600"}),!p&&c.jsx(Le,{size:"sm",variant:"ghost",onClick:()=>i(h.connectionString),children:c.jsx(na,{className:"h-3 w-3"})}),c.jsx(Le,{size:"sm",variant:"ghost",onClick:()=>l(h.connectionString),children:c.jsx(K8,{className:"h-3 w-3"})})]})]},h.connectionString)})})]}),!t&&n.length===0&&c.jsxs(c.Fragment,{children:[c.jsx(xu,{}),c.jsx("div",{className:"text-center py-4 space-y-2",children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"Install a WebLN extension or connect a NWC wallet for zaps."})})]})]}));Hv.displayName="WalletContent";function aH({children:t,className:e}){const[n,r]=y.useState(!1),[s,i]=y.useState(!1),[l,u]=y.useState(""),[f,h]=y.useState(""),[m,p]=y.useState(!1),x=Px(),{connections:w,activeConnection:S,connectionInfo:v,addConnection:b,removeConnection:N,setActiveConnection:_}=sx(),{webln:T}=yp(),M=w.length>0&&w.some(A=>A.isConnected),{toast:D}=ui(),B=async()=>{if(!l.trim()){D({title:"Connection URI required",description:"Please enter a valid NWC connection URI.",variant:"destructive"});return}p(!0);try{await b(l.trim(),f.trim()||void 0)&&(u(""),h(""),i(!1))}finally{p(!1)}},R={webln:T,hasNWC:M,connections:w,connectionInfo:v,activeConnection:S,handleSetActive:A=>{_(A),D({title:"Active wallet changed",description:"The selected wallet is now active for zaps."})},handleRemoveConnection:A=>{N(A)},setAddDialogOpen:i},L=c.jsx(Tl,{open:s,onOpenChange:i,children:c.jsxs(oa,{className:"sm:max-w-[425px]",children:[c.jsxs(ia,{children:[c.jsx(Pl,{children:"Connect NWC Wallet"}),c.jsx(Rl,{children:"Enter your connection string from a compatible wallet."})]}),c.jsx(Wv,{alias:f,setAlias:h,connectionUri:l,setConnectionUri:u}),c.jsx(k_,{className:"px-4",children:c.jsx(Le,{onClick:B,disabled:m||!l.trim(),className:"w-full",children:m?"Connecting...":"Connect"})})]})});return x?c.jsxs(c.Fragment,{children:[c.jsxs(lh,{open:n,onOpenChange:r,children:[c.jsx(DP,{asChild:!0,children:t||c.jsxs(Le,{variant:"outline",size:"sm",className:e,children:[c.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Wallet Settings"]})}),c.jsxs(ch,{className:"h-full",children:[c.jsxs(uh,{className:"text-center relative",children:[c.jsx(LP,{asChild:!0,children:c.jsxs(Le,{variant:"ghost",size:"sm",className:"absolute right-4 top-4",children:[c.jsx(qh,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})}),c.jsxs(dh,{className:"flex items-center justify-center gap-2 pt-2",children:[c.jsx(Kc,{className:"h-5 w-5"}),"Lightning Wallet"]}),c.jsx(fh,{children:"Connect your lightning wallet to send zaps instantly."})]}),c.jsx("div",{className:"overflow-y-auto",children:c.jsx(Hv,{...R})})]})]}),c.jsx(lh,{open:s,onOpenChange:i,children:c.jsxs(ch,{children:[c.jsxs(uh,{children:[c.jsx(dh,{children:"Connect NWC Wallet"}),c.jsx(fh,{children:"Enter your connection string from a compatible wallet."})]}),c.jsx(Wv,{alias:f,setAlias:h,connectionUri:l,setConnectionUri:u}),c.jsx("div",{className:"p-4",children:c.jsx(Le,{onClick:B,disabled:m||!l.trim(),className:"w-full",children:m?"Connecting...":"Connect"})})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs(Tl,{open:n,onOpenChange:r,children:[c.jsx(S_,{asChild:!0,children:t||c.jsxs(Le,{variant:"outline",size:"sm",className:e,children:[c.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Wallet Settings"]})}),c.jsxs(oa,{className:"sm:max-w-[500px] max-h-[80vh] overflow-y-auto",children:[c.jsxs(ia,{children:[c.jsxs(Pl,{className:"flex items-center gap-2",children:[c.jsx(Kc,{className:"h-5 w-5"}),"Lightning Wallet"]}),c.jsx(Rl,{children:"Connect your lightning wallet to send zaps instantly."})]}),c.jsx(Hv,{...R})]})]}),L]})}function mi(t){const e=["Swift","Bright","Calm","Bold","Wise","Kind","Quick","Brave","Cool","Sharp","Clear","Strong","Smart","Fast","Keen","Pure","Noble","Gentle","Fierce","Steady","Clever","Proud","Silent","Wild"],n=["Fox","Eagle","Wolf","Bear","Lion","Tiger","Hawk","Owl","Deer","Raven","Falcon","Lynx","Otter","Whale","Shark","Dolphin","Phoenix","Dragon","Panther","Jaguar","Cheetah","Leopard","Puma","Cobra"];let r=0;for(let l=0;l<t.length;l++){const u=t.charCodeAt(l);r=(r<<5)-r+u,r=r&r}const s=Math.abs(r)%e.length,i=Math.abs(r>>8)%n.length;return[e[s],n[i]].join(" ")}function lH({onAddAccountClick:t}){const{currentUser:e,otherUsers:n,setLogin:r,removeLogin:s}=G_();if(!e)return null;const i=l=>l.metadata.name??mi(l.pubkey);return c.jsxs(zT,{modal:!1,children:[c.jsx(WT,{asChild:!0,children:c.jsxs("button",{className:"flex items-center gap-3 p-3 rounded-full hover:bg-accent transition-all w-full text-foreground",children:[c.jsxs(Qs,{className:"w-10 h-10",children:[c.jsx(Zs,{src:e.metadata.picture,alt:i(e)}),c.jsx(Xs,{children:i(e).charAt(0)})]}),c.jsx("div",{className:"flex-1 text-left hidden md:block truncate",children:c.jsx("p",{className:"font-medium text-sm truncate",children:i(e)})}),c.jsx(Hh,{className:"w-4 h-4 text-muted-foreground"})]})}),c.jsxs(HT,{className:"w-56 p-2 animate-scale-in",children:[c.jsx("div",{className:"font-medium text-sm px-2 py-1.5",children:"Switch Relay"}),c.jsx(_x,{className:"w-full"}),c.jsx($v,{}),c.jsx("div",{className:"font-medium text-sm px-2 py-1.5",children:"Switch Account"}),n.map(l=>{var u;return c.jsxs(Yc,{onClick:()=>r(l.id),className:"flex items-center gap-2 cursor-pointer p-2 rounded-md",children:[c.jsxs(Qs,{className:"w-8 h-8",children:[c.jsx(Zs,{src:l.metadata.picture,alt:i(l)}),c.jsx(Xs,{children:((u=i(l))==null?void 0:u.charAt(0))||c.jsx(tu,{})})]}),c.jsx("div",{className:"flex-1 truncate",children:c.jsx("p",{className:"text-sm font-medium",children:i(l)})}),l.id===e.id&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]},l.id)}),c.jsx($v,{}),c.jsx(aH,{children:c.jsxs(Yc,{className:"flex items-center gap-2 cursor-pointer p-2 rounded-md",onSelect:l=>l.preventDefault(),children:[c.jsx(Kc,{className:"w-4 h-4"}),c.jsx("span",{children:"Wallet Settings"})]})}),c.jsxs(Yc,{onClick:t,className:"flex items-center gap-2 cursor-pointer p-2 rounded-md",children:[c.jsx(Vh,{className:"w-4 h-4"}),c.jsx("span",{children:"Add another account"})]}),c.jsxs(Yc,{onClick:()=>s(e.id),className:"flex items-center gap-2 cursor-pointer p-2 rounded-md text-red-500",children:[c.jsx(B8,{className:"w-4 h-4"}),c.jsx("span",{children:"Log out"})]})]})]})}function Rx({className:t}){const{currentUser:e}=G_(),[n,r]=y.useState(!1),[s,i]=y.useState(!1),l=()=>{r(!1),i(!1)};return c.jsxs("div",{className:xe("inline-flex items-center justify-center",t),children:[e?c.jsx(lH,{onAddAccountClick:()=>r(!0)}):c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsxs(Le,{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-primary text-primary-foreground w-full font-medium transition-all hover:bg-primary/90 animate-scale-in",children:[c.jsx(tu,{className:"w-4 h-4"}),c.jsx("span",{className:"truncate",children:"Log in"})]}),c.jsxs(Le,{onClick:()=>i(!0),variant:"outline",className:"flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all",children:[c.jsx(Vh,{className:"w-4 h-4"}),c.jsx("span",{children:"Sign Up"})]})]}),c.jsx(m9,{isOpen:n,onClose:()=>r(!1),onLogin:l,onSignup:()=>i(!0)}),c.jsx(v9,{isOpen:s,onClose:()=>i(!1)})]})}function cH(){const{config:t,updateConfig:e}=Ru();return{theme:t.theme,setTheme:n=>{e(r=>({...r,theme:n}))}}}function uH(){const{theme:t,setTheme:e}=cH();return c.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:c.jsx("div",{className:"container mx-auto px-4",children:c.jsxs("div",{className:"flex h-16 items-center justify-between",children:[c.jsxs(Ft,{to:"/",className:"flex items-center gap-2 font-bold text-xl hover:opacity-80 transition-opacity",children:[c.jsx(ta,{className:"h-6 w-6"}),c.jsx("span",{children:"Gamestr"})]}),c.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[c.jsx(Le,{variant:"ghost",asChild:!0,children:c.jsx(Ft,{to:"/",children:"Games"})}),c.jsx(Le,{variant:"ghost",asChild:!0,children:c.jsxs(Ft,{to:"/developers",children:[c.jsx($C,{className:"mr-2 h-4 w-4"}),"Developers"]})}),c.jsx(Le,{variant:"ghost",asChild:!0,children:c.jsxs(Ft,{to:"/playground",children:[c.jsx(D8,{className:"mr-2 h-4 w-4"}),"Playground"]})})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs(Le,{variant:"ghost",size:"icon",onClick:()=>e(t==="light"?"dark":"light"),children:[c.jsx(V8,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),c.jsx(U8,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),c.jsx("span",{className:"sr-only",children:"Toggle theme"})]}),c.jsx(Rx,{className:"max-w-60"})]})]})})})}function dH({children:t}){return c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx(uH,{}),c.jsx("main",{className:"flex-1",children:t}),c.jsx("footer",{className:"border-t py-8 bg-muted/30",children:c.jsxs("div",{className:"container mx-auto px-4 text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Gamestr - Decentralized Gaming Leaderboards on Nostr"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vibed with"," ",c.jsx("a",{href:"https://soapbox.pub/mkstack",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-foreground transition-colors",children:"MKStack"})]})]})})]})}function fH({pubkey:t,gameIdentifier:e,metadata:n,scoreCount:r,topScore:s,className:i=""}){const l=`/game/${t}/${e}`;return c.jsx(Ft,{to:l,children:c.jsxs(Je,{className:`group overflow-hidden transition-all hover:shadow-xl hover:scale-[1.02] cursor-pointer ${i}`,children:[c.jsxs("div",{className:"relative aspect-video overflow-hidden bg-muted",children:[c.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover transition-transform group-hover:scale-110",loading:"lazy"}),c.jsxs("div",{className:"absolute top-2 left-2 flex flex-wrap gap-1",children:[n.trending&&c.jsxs(Pt,{variant:"destructive",className:"gap-1 shadow-lg",children:[c.jsx(vv,{className:"h-3 w-3"}),"Trending"]}),n.newRelease&&c.jsxs(Pt,{variant:"secondary",className:"gap-1 shadow-lg",children:[c.jsx(on,{className:"h-3 w-3"}),"New"]}),n.featured&&c.jsxs(Pt,{className:"gap-1 shadow-lg bg-yellow-500 hover:bg-yellow-600",children:[c.jsx(zs,{className:"h-3 w-3"}),"Featured"]})]})]}),c.jsxs(cn,{className:"pb-3",children:[c.jsx("h3",{className:"font-bold text-lg line-clamp-1 group-hover:text-primary transition-colors",children:n.name}),c.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:n.description})]}),c.jsx(ot,{className:"pb-3",children:c.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.genres.slice(0,3).map(u=>c.jsx(Pt,{variant:"outline",className:"text-xs",children:u},u)),n.genres.length>3&&c.jsxs(Pt,{variant:"outline",className:"text-xs",children:["+",n.genres.length-3]})]})}),(r!==void 0||s!==void 0)&&c.jsx(K_,{className:"pt-3 border-t",children:c.jsxs("div",{className:"flex justify-between w-full text-sm text-muted-foreground",children:[r!==void 0&&c.jsxs("span",{children:[r.toLocaleString()," scores"]}),s!==void 0&&c.jsxs("span",{className:"font-semibold",children:["Top: ",s.toLocaleString()]})]})})]})})}function Ct({className:t,...e}){return c.jsx("div",{className:xe("animate-pulse rounded-md bg-muted",t),...e})}function hH({games:t,isLoading:e,emptyMessage:n="No games found"}){return e?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((r,s)=>c.jsxs(Je,{className:"overflow-hidden",children:[c.jsx(Ct,{className:"aspect-video w-full"}),c.jsxs("div",{className:"p-4 space-y-3",children:[c.jsx(Ct,{className:"h-6 w-3/4"}),c.jsx(Ct,{className:"h-4 w-full"}),c.jsx(Ct,{className:"h-4 w-5/6"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ct,{className:"h-5 w-16"}),c.jsx(Ct,{className:"h-5 w-16"}),c.jsx(Ct,{className:"h-5 w-16"})]})]})]},s))}):t.length===0?c.jsx("div",{className:"col-span-full",children:c.jsx(Je,{className:"border-dashed",children:c.jsx(ot,{className:"py-12 px-8 text-center",children:c.jsxs("div",{className:"max-w-sm mx-auto space-y-6",children:[c.jsx("p",{className:"text-muted-foreground text-lg",children:n}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Try switching to a different relay to discover more games"}),c.jsx(_x,{className:"w-full"})]})})})}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(r=>c.jsx(fH,{pubkey:r.pubkey,gameIdentifier:r.gameIdentifier,metadata:r.metadata,scoreCount:r.scoreCount,topScore:r.topScore},`${r.pubkey}:${r.gameIdentifier}`))})}function WP(t){var S,v,b,N,_,T,M,D,B,O,F;if(t.kind!==30762)return null;const e=(S=t.tags.find(([R])=>R==="game"))==null?void 0:S[1],n=(v=t.tags.find(([R])=>R==="score"))==null?void 0:v[1],r=(b=t.tags.find(([R])=>R==="p"))==null?void 0:b[1];if(!e||!n||!r)return null;const s=parseInt(n);if(isNaN(s))return null;const i=(N=t.tags.find(([R])=>R==="state"))==null?void 0:N[1],l=(_=t.tags.find(([R])=>R==="level"))==null?void 0:_[1],u=(T=t.tags.find(([R])=>R==="difficulty"))==null?void 0:T[1],f=(M=t.tags.find(([R])=>R==="mode"))==null?void 0:M[1],h=(D=t.tags.find(([R])=>R==="duration"))==null?void 0:D[1],m=(B=t.tags.find(([R])=>R==="achievements"))==null?void 0:B[1],p=(O=t.tags.find(([R])=>R==="version"))==null?void 0:O[1],x=(F=t.tags.find(([R])=>R==="platform"))==null?void 0:F[1],w=t.tags.filter(([R])=>R==="t").map(([,R])=>R);return{event:t,gameIdentifier:e,score:s,playerPubkey:r,state:i,level:l,difficulty:u,mode:f,duration:h?parseInt(h):void 0,achievements:m?m.split(",").map(R=>R.trim()):void 0,version:p,platform:x,genres:w.length>0?w:void 0}}function pH(t){const e=Math.floor(Date.now()/1e3);switch(t){case"daily":return e-86400;case"weekly":return e-604800;case"monthly":return e-2592e3;case"all-time":return}}function HP(t={}){const{nostr:e}=Hr(),{gameIdentifier:n,playerPubkey:r,difficulty:s,mode:i,genre:l,period:u="all-time",limit:f=100,developerPubkey:h,enabled:m=!0}=t;return ua({queryKey:["scores",n,r,s,i,l,u,f,h],queryFn:async p=>{const x=AbortSignal.any([p.signal,AbortSignal.timeout(3e3)]),w={kinds:[30762],limit:1e3},S=pH(u);S&&(w.since=S),r&&(w["#p"]=[r]),l&&(w["#t"]=[l]),h&&(w.authors=[h]);let b=(await e.query([w],{signal:x})).map(WP).filter(N=>N!==null).filter(N=>N.state!=="invalidated");return n&&(b=b.filter(N=>N.gameIdentifier===n)),s&&(b=b.filter(N=>N.difficulty===s)),i&&(b=b.filter(N=>N.mode===i)),b.sort((N,_)=>_.score-N.score).slice(0,f)},enabled:m})}function mH(t,e={}){return HP({playerPubkey:t,...e})}function gH(t={}){const{nostr:e}=Hr(),{limit:n=500,includeTestData:r=!0}=t;return ua({queryKey:["games-with-scores",n,r],queryFn:async s=>{const i=AbortSignal.any([s.signal,AbortSignal.timeout(3e3)]);let l=[];try{l=await e.query([{kinds:[30762],limit:n}],{signal:i})}catch(h){console.warn("Failed to fetch scores from relays, using test data only",h)}if(r){const{ALL_TEST_SCORES:h}=await nu(async()=>{const{ALL_TEST_SCORES:m}=await Promise.resolve().then(()=>aR);return{ALL_TEST_SCORES:m}},void 0);l=[...l,...h]}const u=l.map(WP).filter(h=>h!==null),f=new Map;return u.forEach(h=>{const m=`${h.event.pubkey}:${h.gameIdentifier}`,p=f.get(m);p?(p.scoreCount++,p.topScore=Math.max(p.topScore,h.score),p.latestTimestamp=Math.max(p.latestTimestamp,h.event.created_at),h.genres&&h.genres.forEach(x=>p.genres.add(x))):f.set(m,{gameIdentifier:h.gameIdentifier,developerPubkey:h.event.pubkey,scoreCount:1,topScore:h.score,latestTimestamp:h.event.created_at,genres:new Set(h.genres||[])})}),Array.from(f.values()).map(h=>({...h,genres:Array.from(h.genres)})).sort((h,m)=>m.latestTimestamp-h.latestTimestamp)}})}const yH={name:"Unknown Game",description:"No description available. Add metadata to improve this listing.",image:"https://images.pexels.com/photos/442576/pexels-photo-442576.jpeg?auto=compress&cs=tinysrgb&w=800",genres:["uncategorized"],featured:!1,trending:!1,newRelease:!1},hh={"test-developer-pubkey-1234567890abcdef:snake-game":{name:"Classic Snake",description:"The timeless arcade classic! Eat apples, grow longer, and avoid hitting yourself. How high can you score?",image:"https://images.pexels.com/photos/163036/mario-luigi-yoschi-figures-163036.jpeg?auto=compress&cs=tinysrgb&w=800",genres:["arcade","casual","retro"],url:"https://example.com/snake",developer:"Example Dev",featured:!0,trending:!0,newRelease:!1},"test-developer-pubkey-1234567890abcdef:tetris-clone":{name:"Block Puzzle Master",description:"Stack falling blocks to clear lines and rack up massive combos. A puzzle game that never gets old!",image:"https://images.pexels.com/photos/371924/pexels-photo-371924.jpeg?auto=compress&cs=tinysrgb&w=800",genres:["puzzle","arcade","retro"],url:"https://example.com/tetris",developer:"Example Dev",featured:!0,trending:!1,newRelease:!1},"test-developer-pubkey-1234567890abcdef:speed-racer":{name:"Speed Racer 3D",description:"Hit the track in this high-octane racing game. Drift around corners, boost past opponents, and dominate the leaderboards!",image:"https://images.pexels.com/photos/1202723/pexels-photo-1202723.jpeg?auto=compress&cs=tinysrgb&w=800",genres:["racing","action","3d"],url:"https://example.com/racer",developer:"Example Dev",featured:!1,trending:!0,newRelease:!0},"test-developer-pubkey-1234567890abcdef:match-three":{name:"Gem Crusher",description:"Match colorful gems in this addictive puzzle game. Create cascading combos and special power-ups!",image:"https://images.pexels.com/photos/1670977/pexels-photo-1670977.jpeg?auto=compress&cs=tinysrgb&w=800",genres:["puzzle","casual","match-3"],url:"https://example.com/gems",developer:"Example Dev",featured:!1,trending:!1,newRelease:!0},"test-developer-pubkey-1234567890abcdef:space-shooter":{name:"Cosmic Defender",description:"Defend Earth from alien invaders in this fast-paced space shooter. Upgrade your ship and save humanity!",image:"https://images.pexels.com/photos/2085831/pexels-photo-2085831.jpeg?auto=compress&cs=tinysrgb&w=800",genres:["shooter","action","sci-fi"],url:"https://example.com/shooter",developer:"Example Dev",featured:!0,trending:!1,newRelease:!1}},VP=["action","adventure","arcade","casual","fps","match-3","multiplayer","puzzle","racing","retro","rpg","sci-fi","shooter","simulation","sports","strategy","3d","uncategorized"];function vH(t,e,n){const r=n||hh,s=`${t}:${e}`;return r[s]||yH}function sy(t,e){return`${t}:${e}`}function xH(t){const e=t.split(":");if(e.length<2)return null;const n=e[0],r=e.slice(1).join(":");return{pubkey:n,gameIdentifier:r}}function qu(t){return Object.entries(t||hh).map(([n,r])=>{const s=xH(n);return{key:n,pubkey:(s==null?void 0:s.pubkey)||"",gameIdentifier:(s==null?void 0:s.gameIdentifier)||"",metadata:r}})}function wH(t,e){return qu(e).filter(n=>n.metadata.genres.includes(t))}function bH(t){return qu(t).filter(e=>e.metadata.featured)}function EH(t){return qu(t).filter(e=>e.metadata.trending)}function SH(t){return qu(t).filter(e=>e.metadata.newRelease)}const NH="gamestr-game-config";function vp(){const[t,e]=eh(NH,hh);return{config:t,addGame:(u,f,h)=>{const m=sy(u,f);e(p=>({...p,[m]:h}))},updateGame:(u,f,h)=>{const m=sy(u,f),p=t[m];if(!p){console.warn(`Game ${m} not found in config`);return}e(x=>({...x,[m]:{...p,...h}}))},removeGame:(u,f)=>{const h=sy(u,f);e(m=>{const p={...m};return delete p[h],p})},getGame:(u,f)=>vH(u,f,t),getAllGames:()=>qu(t),filterByGenre:u=>wH(u,t),getFeatured:()=>bH(t),getTrending:()=>EH(t),getNewReleases:()=>SH(t),resetToDefaults:()=>{e(hh)}}}function qP(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var xp="Switch",[kH,_G]=Mn(xp),[CH,jH]=kH(xp),KP=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:l,disabled:u,value:f="on",onCheckedChange:h,form:m,...p}=t,[x,w]=y.useState(null),S=it(e,T=>w(T)),v=y.useRef(!1),b=x?m||!!x.closest("form"):!0,[N,_]=nr({prop:s,defaultProp:i??!1,onChange:h,caller:xp});return c.jsxs(CH,{scope:n,checked:N,disabled:u,children:[c.jsx(Ae.button,{type:"button",role:"switch","aria-checked":N,"aria-required":l,"data-state":ZP(N),"data-disabled":u?"":void 0,disabled:u,value:f,...p,ref:S,onClick:Se(t.onClick,T=>{_(M=>!M),b&&(v.current=T.isPropagationStopped(),v.current||T.stopPropagation())})}),b&&c.jsx(QP,{control:x,bubbles:!v.current,name:r,value:f,checked:N,required:l,disabled:u,form:m,style:{transform:"translateX(-100%)"}})]})});KP.displayName=xp;var GP="SwitchThumb",YP=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=jH(GP,n);return c.jsx(Ae.span,{"data-state":ZP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});YP.displayName=GP;var _H="SwitchBubbleInput",QP=y.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const l=y.useRef(null),u=it(l,i),f=qP(n),h=dj(e);return y.useEffect(()=>{const m=l.current;if(!m)return;const p=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(p,"checked").set;if(f!==n&&w){const S=new Event("click",{bubbles:r});w.call(m,n),m.dispatchEvent(S)}},[f,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:u,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});QP.displayName=_H;function ZP(t){return t?"checked":"unchecked"}var XP=KP,TH=YP;const JP=y.forwardRef(({className:t,...e},n)=>c.jsx(XP,{className:xe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:c.jsx(TH,{className:xe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));JP.displayName=XP.displayName;function PH(){const[t,e]=y.useState(""),[n,r]=y.useState(null),[s,i]=y.useState("all"),[l,u]=y.useState(!0),{data:f,isLoading:h}=gH({limit:1e3,includeTestData:l}),{getGame:m,getFeatured:p,getTrending:x,getNewReleases:w}=vp(),S=y.useMemo(()=>f?f.map(b=>({pubkey:b.developerPubkey,gameIdentifier:b.gameIdentifier,metadata:m(b.developerPubkey,b.gameIdentifier),scoreCount:b.scoreCount,topScore:b.topScore})):[],[f,m]),v=y.useMemo(()=>{let b=S;if(s==="featured"){const N=new Set(p().map(_=>`${_.pubkey}:${_.gameIdentifier}`));b=b.filter(_=>N.has(`${_.pubkey}:${_.gameIdentifier}`))}else if(s==="trending"){const N=new Set(x().map(_=>`${_.pubkey}:${_.gameIdentifier}`));b=b.filter(_=>N.has(`${_.pubkey}:${_.gameIdentifier}`))}else if(s==="new"){const N=new Set(w().map(_=>`${_.pubkey}:${_.gameIdentifier}`));b=b.filter(_=>N.has(`${_.pubkey}:${_.gameIdentifier}`))}if(n&&(b=b.filter(N=>N.metadata.genres.includes(n))),t.trim()){const N=t.toLowerCase();b=b.filter(_=>_.metadata.name.toLowerCase().includes(N)||_.metadata.description.toLowerCase().includes(N)||_.metadata.genres.some(T=>T.toLowerCase().includes(N)))}return b},[S,s,n,t,p,x,w]);return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[c.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 text-white",children:[c.jsx("div",{className:"absolute inset-0 bg-[url('https://images.pexels.com/photos/442576/pexels-photo-442576.jpeg?auto=compress&cs=tinysrgb&w=1920')] opacity-20 bg-cover bg-center"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background/80"}),c.jsx("div",{className:"relative container mx-auto px-4 py-16 md:py-24",children:c.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full",children:[c.jsx(ta,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:"Powered by Nostr"})]}),c.jsx("h1",{className:"text-5xl md:text-7xl font-bold tracking-tight",children:"Welcome to Gamestr"}),c.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-2xl mx-auto",children:"The decentralized gaming leaderboard platform. Compete, share, and celebrate your gaming achievements on Nostr."})]})})]}),c.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[c.jsx(FC,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),c.jsx(En,{type:"search",placeholder:"Search games by name, description, or genre...",value:t,onChange:b=>e(b.target.value),className:"pl-10 h-12 text-lg"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Fu,{value:s,onValueChange:b=>i(b),children:c.jsxs(Gl,{className:"grid grid-cols-4 w-full max-w-md",children:[c.jsxs(yn,{value:"all",className:"gap-2",children:[c.jsx(ta,{className:"h-4 w-4"}),"All Games"]}),c.jsxs(yn,{value:"featured",className:"gap-2",children:[c.jsx(bv,{className:"h-4 w-4"}),"Featured"]}),c.jsxs(yn,{value:"trending",className:"gap-2",children:[c.jsx(vv,{className:"h-4 w-4"}),"Trending"]}),c.jsxs(yn,{value:"new",className:"gap-2",children:[c.jsx(on,{className:"h-4 w-4"}),"New"]})]})})}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[c.jsx(Le,{variant:n===null?"default":"outline",size:"sm",onClick:()=>r(null),children:"All Genres"}),VP.filter(b=>b!=="uncategorized").map(b=>c.jsx(Le,{variant:n===b?"default":"outline",size:"sm",onClick:()=>r(b),children:b},b))]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-muted/50 rounded-lg max-w-md mx-auto",children:[c.jsx(H0,{className:"h-4 w-4 text-muted-foreground"}),c.jsx(Fn,{htmlFor:"test-data-toggle",className:"text-sm cursor-pointer",children:"Show test data"}),c.jsx(JP,{id:"test-data-toggle",checked:l,onCheckedChange:u})]}),(n||t||s!=="all")&&c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),s!=="all"&&c.jsxs(Pt,{variant:"secondary",className:"gap-1",children:[s==="featured"&&c.jsx(bv,{className:"h-3 w-3"}),s==="trending"&&c.jsx(vv,{className:"h-3 w-3"}),s==="new"&&c.jsx(on,{className:"h-3 w-3"}),s]}),n&&c.jsx(Pt,{variant:"secondary",children:n}),t&&c.jsxs(Pt,{variant:"secondary",children:['"',t,'"']}),c.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>{i("all"),r(null),e("")},children:"Clear all"})]})]}),!h&&c.jsxs("div",{className:"text-center text-muted-foreground",children:["Showing ",v.length," ",v.length===1?"game":"games"]}),c.jsx(hH,{games:v,isLoading:h,emptyMessage:"No games match your filters. Try adjusting your search or filters."})]}),c.jsx("div",{className:"mt-16 py-12 bg-muted/50",children:c.jsxs("div",{className:"container mx-auto px-4 text-center space-y-4",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Are you a game developer?"}),c.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Learn how to integrate Gamestr into your games and reach players on the decentralized web."}),c.jsx(Le,{size:"lg",asChild:!0,children:c.jsx("a",{href:"/developers",children:"View Developer Guide"})})]})})]})}const eR="test-developer-pubkey-1234567890abcdef",ph=[{pubkey:"player-alice-pubkey-1234567890abcdef",name:"Alice",picture:"https://images.pexels.com/photos/1181690/pexels-photo-1181690.jpeg?auto=compress&cs=tinysrgb&w=200",about:"Competitive gamer and speedrunner. Love arcade classics!"},{pubkey:"player-bob-pubkey-1234567890abcdef",name:"Bob",picture:"https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?auto=compress&cs=tinysrgb&w=200",about:"Casual gamer enjoying puzzle games in my spare time."},{pubkey:"player-charlie-pubkey-1234567890abcdef",name:"Charlie",picture:"https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=200",about:"Professional esports player. Always pushing for #1!"},{pubkey:"player-diana-pubkey-1234567890abcdef",name:"Diana",picture:"https://images.pexels.com/photos/1181424/pexels-photo-1181424.jpeg?auto=compress&cs=tinysrgb&w=200",about:"Game developer and player. Testing my own games!"},{pubkey:"player-eve-pubkey-1234567890abcdef",name:"Eve",picture:"https://images.pexels.com/photos/1181519/pexels-photo-1181519.jpeg?auto=compress&cs=tinysrgb&w=200",about:"Retro gaming enthusiast. High scores are my passion!"}];function gt(t,e,n,r={}){const s=ph[e%ph.length],l=Math.floor(Date.now()/1e3)-(r.daysAgo||0)*86400,u=[["d",`${t}:${l}:${Math.random().toString(36).substring(7)}`],["game",t],["score",n.toString()],["p",s.pubkey],["t","test"]];return r.level&&u.push(["level",r.level]),r.difficulty&&u.push(["difficulty",r.difficulty]),r.mode&&u.push(["mode",r.mode]),r.duration&&u.push(["duration",r.duration.toString()]),r.achievements&&u.push(["achievements",r.achievements.join(",")]),{id:`test-event-${t}-${e}-${n}`,pubkey:eR,created_at:l,kind:30762,tags:u,content:`${s.name} scored ${n.toLocaleString()} points!`,sig:"test-signature-not-real"}}const tR=[gt("snake-game",2,25e3,{level:"15",difficulty:"hard",mode:"single-player",duration:420,daysAgo:0}),gt("snake-game",4,22500,{level:"14",difficulty:"hard",mode:"single-player",duration:380,daysAgo:0}),gt("snake-game",0,2e4,{level:"13",difficulty:"hard",mode:"single-player",duration:360,daysAgo:1}),gt("snake-game",1,18500,{level:"12",difficulty:"normal",mode:"single-player",duration:300,daysAgo:1}),gt("snake-game",3,17e3,{level:"11",difficulty:"normal",mode:"single-player",duration:280,daysAgo:2}),gt("snake-game",2,15500,{level:"10",difficulty:"normal",mode:"single-player",duration:260,daysAgo:3}),gt("snake-game",0,14e3,{level:"9",difficulty:"easy",mode:"single-player",duration:240,daysAgo:3}),gt("snake-game",4,12500,{level:"8",difficulty:"easy",mode:"single-player",duration:220,daysAgo:5}),gt("snake-game",1,11e3,{level:"7",difficulty:"easy",mode:"single-player",duration:200,daysAgo:7}),gt("snake-game",3,9500,{level:"6",difficulty:"easy",mode:"single-player",duration:180,daysAgo:10})],nR=[gt("tetris-clone",3,45e3,{level:"20",difficulty:"expert",mode:"single-player",duration:600,achievements:["line-clear-master","tetris-king"],daysAgo:0}),gt("tetris-clone",0,42e3,{level:"19",difficulty:"expert",mode:"single-player",duration:580,daysAgo:0}),gt("tetris-clone",2,38e3,{level:"18",difficulty:"hard",mode:"single-player",duration:540,daysAgo:1}),gt("tetris-clone",4,35e3,{level:"17",difficulty:"hard",mode:"single-player",duration:520,daysAgo:2}),gt("tetris-clone",1,32e3,{level:"16",difficulty:"hard",mode:"single-player",duration:480,daysAgo:3}),gt("tetris-clone",3,28e3,{level:"15",difficulty:"normal",mode:"single-player",duration:450,daysAgo:4}),gt("tetris-clone",0,25e3,{level:"14",difficulty:"normal",mode:"single-player",duration:420,daysAgo:6}),gt("tetris-clone",2,22e3,{level:"13",difficulty:"normal",mode:"single-player",duration:400,daysAgo:8})],rR=[gt("speed-racer",2,98500,{level:"circuit-5",difficulty:"expert",mode:"time-trial",duration:185,achievements:["perfect-lap","speed-demon"],daysAgo:0}),gt("speed-racer",4,95e3,{level:"circuit-5",difficulty:"expert",mode:"time-trial",duration:190,daysAgo:0}),gt("speed-racer",0,92e3,{level:"circuit-4",difficulty:"hard",mode:"time-trial",duration:195,daysAgo:1}),gt("speed-racer",3,88500,{level:"circuit-4",difficulty:"hard",mode:"time-trial",duration:200,daysAgo:1}),gt("speed-racer",1,85e3,{level:"circuit-3",difficulty:"normal",mode:"time-trial",duration:210,daysAgo:2}),gt("speed-racer",2,82e3,{level:"circuit-3",difficulty:"normal",mode:"time-trial",duration:220,daysAgo:4})],sR=[gt("match-three",1,156e3,{level:"50",difficulty:"hard",mode:"endless",duration:900,achievements:["combo-master","gem-crusher"],daysAgo:0}),gt("match-three",3,145e3,{level:"48",difficulty:"hard",mode:"endless",duration:850,daysAgo:0}),gt("match-three",0,132e3,{level:"45",difficulty:"normal",mode:"endless",duration:800,daysAgo:1}),gt("match-three",4,125e3,{level:"42",difficulty:"normal",mode:"endless",duration:750,daysAgo:2}),gt("match-three",2,118e3,{level:"40",difficulty:"normal",mode:"endless",duration:700,daysAgo:3}),gt("match-three",1,11e4,{level:"38",difficulty:"easy",mode:"endless",duration:650,daysAgo:5})],oR=[gt("space-shooter",4,285e3,{level:"wave-25",difficulty:"expert",mode:"survival",duration:1200,achievements:["alien-destroyer","no-damage"],daysAgo:0}),gt("space-shooter",2,265e3,{level:"wave-23",difficulty:"expert",mode:"survival",duration:1100,daysAgo:0}),gt("space-shooter",0,245e3,{level:"wave-21",difficulty:"hard",mode:"survival",duration:1e3,daysAgo:1}),gt("space-shooter",3,225e3,{level:"wave-19",difficulty:"hard",mode:"survival",duration:900,daysAgo:2}),gt("space-shooter",1,205e3,{level:"wave-17",difficulty:"normal",mode:"survival",duration:800,daysAgo:3}),gt("space-shooter",4,185e3,{level:"wave-15",difficulty:"normal",mode:"survival",duration:700,daysAgo:5})],iR=[...tR,...nR,...rR,...sR,...oR],Ax={};ph.forEach(t=>{Ax[t.pubkey]={id:`test-metadata-${t.pubkey}`,pubkey:t.pubkey,created_at:Math.floor(Date.now()/1e3)-86400*30,kind:0,tags:[],content:JSON.stringify({name:t.name,picture:t.picture,about:t.about}),sig:"test-signature-not-real"}});function Ix(t){return t.tags.some(([e,n])=>e==="t"&&n==="test")}function RH(t){return Ax[t]}const aR=Object.freeze(Object.defineProperty({__proto__:null,ALL_TEST_SCORES:iR,PUZZLE_SCORES:sR,RACING_SCORES:rR,SHOOTER_SCORES:oR,SNAKE_GAME_SCORES:tR,TEST_DEV_PUBKEY:eR,TEST_PLAYERS:ph,TEST_PLAYER_METADATA:Ax,TETRIS_SCORES:nR,getTestPlayerMetadata:RH,isTestEvent:Ix},Symbol.toStringTag,{value:"Module"}));function AH(t={}){const{includeTestData:e=!0,...n}=t,r=HP(n),s=y.useMemo(()=>{if(!e)return r.data;const i=r.data||[];let l=iR;if(n.gameIdentifier&&(l=l.filter(h=>h.tags.some(([m,p])=>m==="game"&&p===n.gameIdentifier))),n.playerPubkey&&(l=l.filter(h=>h.tags.some(([m,p])=>m==="p"&&p===n.playerPubkey))),n.difficulty&&(l=l.filter(h=>h.tags.some(([m,p])=>m==="difficulty"&&p===n.difficulty))),n.mode&&(l=l.filter(h=>h.tags.some(([m,p])=>m==="mode"&&p===n.mode))),n.genre&&(l=l.filter(h=>h.tags.some(([m,p])=>m==="t"&&p===n.genre))),n.period&&n.period!=="all-time"){const h=Math.floor(Date.now()/1e3);let m;switch(n.period){case"daily":m=h-86400;break;case"weekly":m=h-604800;break;case"monthly":m=h-2592e3;break;default:m=0}l=l.filter(p=>p.created_at>=m)}const u=l.map(h=>{var T,M,D,B,O,F,R,L;const m=((T=h.tags.find(([A])=>A==="game"))==null?void 0:T[1])||"",p=((M=h.tags.find(([A])=>A==="score"))==null?void 0:M[1])||"0",x=((D=h.tags.find(([A])=>A==="p"))==null?void 0:D[1])||"",w=(B=h.tags.find(([A])=>A==="level"))==null?void 0:B[1],S=(O=h.tags.find(([A])=>A==="difficulty"))==null?void 0:O[1],v=(F=h.tags.find(([A])=>A==="mode"))==null?void 0:F[1],b=(R=h.tags.find(([A])=>A==="duration"))==null?void 0:R[1],N=(L=h.tags.find(([A])=>A==="achievements"))==null?void 0:L[1],_=h.tags.filter(([A,U])=>A==="t"&&U!=="test").map(([,A])=>A);return{event:h,gameIdentifier:m,score:parseInt(p),playerPubkey:x,level:w,difficulty:S,mode:v,duration:b?parseInt(b):void 0,achievements:N?N.split(",").map(A=>A.trim()):void 0,genres:_.length>0?_:void 0}});return[...i,...u].sort((h,m)=>m.score-h.score).slice(0,n.limit||100)},[r.data,e,n]);return{...r,data:s}}function IH(t,e="all-time",n={}){return AH({gameIdentifier:t,period:e,...n})}var lR="Toggle",cR=y.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...i}=t,[l,u]=nr({prop:n,onChange:s,defaultProp:r??!1,caller:lR});return c.jsx(Ae.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":t.disabled?"":void 0,...i,ref:e,onClick:Se(t.onClick,()=>{t.disabled||u(!l)})})});cR.displayName=lR;var gi="ToggleGroup",[uR,TG]=Mn(gi,[Kl]),dR=Kl(),Mx=_e.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const s=r;return c.jsx(MH,{...s,ref:e})}if(n==="multiple"){const s=r;return c.jsx(OH,{...s,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${gi}\``)});Mx.displayName=gi;var[fR,hR]=uR(gi),MH=_e.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[l,u]=nr({prop:n,defaultProp:r??"",onChange:s,caller:gi});return c.jsx(fR,{scope:t.__scopeToggleGroup,type:"single",value:_e.useMemo(()=>l?[l]:[],[l]),onItemActivate:u,onItemDeactivate:_e.useCallback(()=>u(""),[u]),children:c.jsx(pR,{...i,ref:e})})}),OH=_e.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[l,u]=nr({prop:n,defaultProp:r??[],onChange:s,caller:gi}),f=_e.useCallback(m=>u((p=[])=>[...p,m]),[u]),h=_e.useCallback(m=>u((p=[])=>p.filter(x=>x!==m)),[u]);return c.jsx(fR,{scope:t.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:f,onItemDeactivate:h,children:c.jsx(pR,{...i,ref:e})})});Mx.displayName=gi;var[DH,LH]=uR(gi),pR=_e.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:i,dir:l,loop:u=!0,...f}=t,h=dR(n),m=ql(l),p={role:"group",dir:m,...f};return c.jsx(DH,{scope:n,rovingFocus:s,disabled:r,children:s?c.jsx(px,{asChild:!0,...h,orientation:i,dir:m,loop:u,children:c.jsx(Ae.div,{...p,ref:e})}):c.jsx(Ae.div,{...p,ref:e})})}),mh="ToggleGroupItem",mR=_e.forwardRef((t,e)=>{const n=hR(mh,t.__scopeToggleGroup),r=LH(mh,t.__scopeToggleGroup),s=dR(t.__scopeToggleGroup),i=n.value.includes(t.value),l=r.disabled||t.disabled,u={...t,pressed:i,disabled:l},f=_e.useRef(null);return r.rovingFocus?c.jsx(mx,{asChild:!0,...s,focusable:!l,active:i,ref:f,children:c.jsx(Q2,{...u,ref:e})}):c.jsx(Q2,{...u,ref:e})});mR.displayName=mh;var Q2=_e.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...s}=t,i=hR(mh,n),l={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},u=i.type==="single"?l:void 0;return c.jsx(cR,{...u,...s,ref:e,onPressedChange:f=>{f?i.onItemActivate(r):i.onItemDeactivate(r)}})}),gR=Mx,yR=mR;const $H=Fl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),vR=y.createContext({size:"default",variant:"default"}),xR=y.forwardRef(({className:t,variant:e,size:n,children:r,...s},i)=>c.jsx(gR,{ref:i,className:xe("flex items-center justify-center gap-1",t),...s,children:c.jsx(vR.Provider,{value:{variant:e,size:n},children:r})}));xR.displayName=gR.displayName;const wR=y.forwardRef(({className:t,children:e,variant:n,size:r,...s},i)=>{const l=y.useContext(vR);return c.jsx(yR,{ref:i,className:xe($H({variant:l.variant||n,size:l.size||r}),t),...s,children:e})});wR.displayName=yR.displayName;function Ox(t,e,n,r){const{nostr:s}=Hr(),{toast:i}=ui(),{user:l}=no(),{config:u}=Ru(),f=_u(),h=Array.isArray(t)?t.length>0?t[0]:null:t,m=Vr(h==null?void 0:h.pubkey),{sendPayment:p,getActiveConnection:x}=sx(),[w,S]=y.useState(!1),[v,b]=y.useState(null);y.useEffect(()=>()=>{S(!1),b(null)},[]);const{data:N,..._}=ua({queryKey:["zaps",h==null?void 0:h.id],staleTime:3e4,refetchInterval:F=>F.getObserversCount()>0?6e4:!1,queryFn:async F=>{var L;if(!h)return[];const R=AbortSignal.any([F.signal,AbortSignal.timeout(5e3)]);if(h.kind>=3e4&&h.kind<4e4){const A=((L=h.tags.find(K=>K[0]==="d"))==null?void 0:L[1])||"";return await s.query([{kinds:[9735],"#a":[`${h.kind}:${h.pubkey}:${A}`]}],{signal:R})}else return await s.query([{kinds:[9735],"#e":[h.id]}],{signal:R})},enabled:!!(h!=null&&h.id)}),{zapCount:T,totalSats:M,zaps:D}=y.useMemo(()=>{if(!N||!Array.isArray(N)||!h)return{zapCount:0,totalSats:0,zaps:[]};let F=0,R=0;return N.forEach(L=>{var H,V,Q,te,Z;F++;const A=(H=L.tags.find(([G])=>G==="amount"))==null?void 0:H[1];if(A){const G=parseInt(A);R+=Math.floor(G/1e3);return}const U=(V=L.tags.find(([G])=>G==="bolt11"))==null?void 0:V[1];if(U)try{const G=Ef.getSatoshisAmountFromBolt11(U);R+=G;return}catch(G){console.warn("Failed to parse bolt11 amount:",G)}const K=(Q=L.tags.find(([G])=>G==="description"))==null?void 0:Q[1];if(K)try{const ne=(Z=(te=JSON.parse(K).tags)==null?void 0:te.find(([z])=>z==="amount"))==null?void 0:Z[1];if(ne){const z=parseInt(ne);R+=Math.floor(z/1e3);return}}catch(G){console.warn("Failed to parse description JSON:",G)}console.warn("Could not extract amount from zap receipt:",L.id)}),{zapCount:F,totalSats:R,zaps:N}},[N,h]),B=async(F,R)=>{var L,A;if(!(F<=0)){if(S(!0),b(null),!l){i({title:"Login required",description:"You must be logged in to send a zap.",variant:"destructive"}),S(!1);return}if(!h){i({title:"Event not found",description:"Could not find the event to zap.",variant:"destructive"}),S(!1);return}try{if(!m.data||!((L=m.data)!=null&&L.metadata)||!((A=m.data)!=null&&A.event)){i({title:"Author not found",description:"Could not find the author of this item.",variant:"destructive"}),S(!1);return}const{lud06:U,lud16:K}=m.data.metadata;if(!U&&!K){i({title:"Lightning address not found",description:"The author does not have a lightning address configured.",variant:"destructive"}),S(!1);return}const H=await Ef.getZapEndpoint(m.data.event);if(!H){i({title:"Zap endpoint not found",description:"Could not find a zap endpoint for the author.",variant:"destructive"}),S(!1);return}const V=h.kind>=3e4&&h.kind<4e4?h:h.id,Q=F*1e3,te=Ef.makeZapRequest({profile:h.pubkey,event:V,amount:Q,relays:[u.relayUrl],comment:R});if(!l.signer)throw new Error("No signer available");const Z=await l.signer.signEvent(te);try{const G=await fetch(`${H}?amount=${Q}&nostr=${encodeURI(JSON.stringify(Z))}`),ne=await G.json();if(!G.ok)throw new Error(`HTTP ${G.status}: ${ne.reason||"Unknown error"}`);const z=ne.pr;if(!z||typeof z!="string")throw new Error("Lightning service did not return a valid invoice");const W=x();if(W&&W.connectionString&&W.isConnected)try{await p(W,z),S(!1),b(null),i({title:"Zap successful!",description:`You sent ${F} sats via NWC to the author.`}),f.invalidateQueries({queryKey:["zaps"]}),r==null||r();return}catch(ae){console.error("NWC payment failed, falling back:",ae);const de=ae instanceof Error?ae.message:"Unknown NWC error";i({title:"NWC payment failed",description:`${de}. Falling back to other payment methods...`,variant:"destructive"})}if(e)try{let ae=e;if(e.enable&&typeof e.enable=="function"){const fe=await e.enable();fe&&(ae=fe)}await ae.sendPayment(z),S(!1),b(null),i({title:"Zap successful!",description:`You sent ${F} sats to the author.`}),f.invalidateQueries({queryKey:["zaps"]}),r==null||r()}catch(ae){console.error("WebLN payment failed, falling back:",ae);const de=ae instanceof Error?ae.message:"Unknown WebLN error";i({title:"WebLN payment failed",description:`${de}. Falling back to other payment methods...`,variant:"destructive"}),b(z),S(!1)}else b(z),S(!1)}catch(G){console.error("Zap error:",G),i({title:"Zap failed",description:G.message,variant:"destructive"}),S(!1)}}catch(U){console.error("Zap error:",U),i({title:"Zap failed",description:U.message,variant:"destructive"}),S(!1)}}},O=y.useCallback(()=>{b(null)},[]);return{zaps:D,zapCount:T,totalSats:M,..._,zap:B,isZapping:w,invoice:v,setInvoice:b,resetInvoice:O}}var Va={},oy,Z2;function BH(){return Z2||(Z2=1,oy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),oy}var iy={},Ro={},X2;function ga(){if(X2)return Ro;X2=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Ro.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Ro.getSymbolTotalCodewords=function(r){return e[r]},Ro.getBCHDigit=function(n){let r=0;for(;n!==0;)r++,n>>>=1;return r},Ro.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},Ro.isKanjiModeEnabled=function(){return typeof t<"u"},Ro.toSJIS=function(r){return t(r)},Ro}var ay={},J2;function Dx(){return J2||(J2=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}}(ay)),ay}var ly,eS;function FH(){if(eS)return ly;eS=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let r=0;r<n;r++)this.putBit((e>>>n-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},ly=t,ly}var cy,tS;function UH(){if(tS)return cy;tS=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,n,r,s){const i=e*this.size+n;this.data[i]=r,s&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,n){return this.data[e*this.size+n]},t.prototype.xor=function(e,n,r){this.data[e*this.size+n]^=r},t.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},cy=t,cy}var uy={},nS;function zH(){return nS||(nS=1,function(t){const e=ga().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),l=i===145?26:Math.ceil((i-13)/(2*s-2))*2,u=[i-7];for(let f=1;f<s-1;f++)u[f]=u[f-1]-l;return u.push(6),u.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),l=i.length;for(let u=0;u<l;u++)for(let f=0;f<l;f++)u===0&&f===0||u===0&&f===l-1||u===l-1&&f===0||s.push([i[u],i[f]]);return s}}(uy)),uy}var dy={},rS;function WH(){if(rS)return dy;rS=1;const t=ga().getSymbolSize,e=7;return dy.getPositions=function(r){const s=t(r);return[[0,0],[s-e,0],[0,s-e]]},dy}var fy={},sS;function HH(){return sS||(sS=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let l=0,u=0,f=0,h=null,m=null;for(let p=0;p<i;p++){u=f=0,h=m=null;for(let x=0;x<i;x++){let w=s.get(p,x);w===h?u++:(u>=5&&(l+=e.N1+(u-5)),h=w,u=1),w=s.get(x,p),w===m?f++:(f>=5&&(l+=e.N1+(f-5)),m=w,f=1)}u>=5&&(l+=e.N1+(u-5)),f>=5&&(l+=e.N1+(f-5))}return l},t.getPenaltyN2=function(s){const i=s.size;let l=0;for(let u=0;u<i-1;u++)for(let f=0;f<i-1;f++){const h=s.get(u,f)+s.get(u,f+1)+s.get(u+1,f)+s.get(u+1,f+1);(h===4||h===0)&&l++}return l*e.N2},t.getPenaltyN3=function(s){const i=s.size;let l=0,u=0,f=0;for(let h=0;h<i;h++){u=f=0;for(let m=0;m<i;m++)u=u<<1&2047|s.get(h,m),m>=10&&(u===1488||u===93)&&l++,f=f<<1&2047|s.get(m,h),m>=10&&(f===1488||f===93)&&l++}return l*e.N3},t.getPenaltyN4=function(s){let i=0;const l=s.data.length;for(let f=0;f<l;f++)i+=s.data[f];return Math.abs(Math.ceil(i*100/l/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const l=i.size;for(let u=0;u<l;u++)for(let f=0;f<l;f++)i.isReserved(f,u)||i.xor(f,u,n(s,f,u))},t.getBestMask=function(s,i){const l=Object.keys(t.Patterns).length;let u=0,f=1/0;for(let h=0;h<l;h++){i(h),t.applyMask(h,s);const m=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(h,s),m<f&&(f=m,u=h)}return u}}(fy)),fy}var xf={},oS;function bR(){if(oS)return xf;oS=1;const t=Dx(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return xf.getBlocksCount=function(s,i){switch(i){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},xf.getTotalCodewordsCount=function(s,i){switch(i){case t.L:return n[(s-1)*4+0];case t.M:return n[(s-1)*4+1];case t.Q:return n[(s-1)*4+2];case t.H:return n[(s-1)*4+3];default:return}},xf}var hy={},zc={},iS;function VH(){if(iS)return zc;iS=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let s=0;s<255;s++)t[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)t[s]=t[s-255]}(),zc.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},zc.exp=function(r){return t[r]},zc.mul=function(r,s){return r===0||s===0?0:t[e[r]+e[s]]},zc}var aS;function qH(){return aS||(aS=1,function(t){const e=VH();t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let l=0;l<r.length;l++)for(let u=0;u<s.length;u++)i[l+u]^=e.mul(r[l],s[u]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const l=i[0];for(let f=0;f<s.length;f++)i[f]^=e.mul(s[f],l);let u=0;for(;u<i.length&&i[u]===0;)u++;i=i.slice(u)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}}(hy)),hy}var py,lS;function KH(){if(lS)return py;lS=1;const t=qH();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const i=t.mod(s,this.genPoly),l=this.degree-i.length;if(l>0){const u=new Uint8Array(this.degree);return u.set(i,l),u}return i},py=e,py}var my={},gy={},yy={},cS;function ER(){return cS||(cS=1,yy.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),yy}var os={},uS;function SR(){if(uS)return os;uS=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;os.KANJI=new RegExp(n,"g"),os.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),os.BYTE=new RegExp(r,"g"),os.NUMERIC=new RegExp(t,"g"),os.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+n+"$"),i=new RegExp("^"+t+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return os.testKanji=function(f){return s.test(f)},os.testNumeric=function(f){return i.test(f)},os.testAlphanumeric=function(f){return l.test(f)},os}var dS;function ya(){return dS||(dS=1,function(t){const e=ER(),n=SR();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,l){if(t.isValid(i))return i;try{return r(i)}catch{return l}}}(gy)),gy}var fS;function GH(){return fS||(fS=1,function(t){const e=ga(),n=bR(),r=Dx(),s=ya(),i=ER(),l=7973,u=e.getBCHDigit(l);function f(x,w,S){for(let v=1;v<=40;v++)if(w<=t.getCapacity(v,S,x))return v}function h(x,w){return s.getCharCountIndicator(x,w)+4}function m(x,w){let S=0;return x.forEach(function(v){const b=h(v.mode,w);S+=b+v.getBitsLength()}),S}function p(x,w){for(let S=1;S<=40;S++)if(m(x,S)<=t.getCapacity(S,w,s.MIXED))return S}t.from=function(w,S){return i.isValid(w)?parseInt(w,10):S},t.getCapacity=function(w,S,v){if(!i.isValid(w))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=s.BYTE);const b=e.getSymbolTotalCodewords(w),N=n.getTotalCodewordsCount(w,S),_=(b-N)*8;if(v===s.MIXED)return _;const T=_-h(v,w);switch(v){case s.NUMERIC:return Math.floor(T/10*3);case s.ALPHANUMERIC:return Math.floor(T/11*2);case s.KANJI:return Math.floor(T/13);case s.BYTE:default:return Math.floor(T/8)}},t.getBestVersionForData=function(w,S){let v;const b=r.from(S,r.M);if(Array.isArray(w)){if(w.length>1)return p(w,b);if(w.length===0)return 1;v=w[0]}else v=w;return f(v.mode,v.getLength(),b)},t.getEncodedBits=function(w){if(!i.isValid(w)||w<7)throw new Error("Invalid QR Code version");let S=w<<12;for(;e.getBCHDigit(S)-u>=0;)S^=l<<e.getBCHDigit(S)-u;return w<<12|S}}(my)),my}var vy={},hS;function YH(){if(hS)return vy;hS=1;const t=ga(),e=1335,n=21522,r=t.getBCHDigit(e);return vy.getEncodedBits=function(i,l){const u=i.bit<<3|l;let f=u<<10;for(;t.getBCHDigit(f)-r>=0;)f^=e<<t.getBCHDigit(f)-r;return(u<<10|f)^n},vy}var xy={},wy,pS;function QH(){if(pS)return wy;pS=1;const t=ya();function e(n){this.mode=t.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,i,l;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),l=parseInt(i,10),r.put(l,10);const u=this.data.length-s;u>0&&(i=this.data.substr(s),l=parseInt(i,10),r.put(l,u*3+1))},wy=e,wy}var by,mS;function ZH(){if(mS)return by;mS=1;const t=ya(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(r){this.mode=t.ALPHANUMERIC,this.data=r}return n.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let l=e.indexOf(this.data[i])*45;l+=e.indexOf(this.data[i+1]),s.put(l,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},by=n,by}var Ey,gS;function XH(){if(gS)return Ey;gS=1;const t=ya();function e(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let r=0,s=this.data.length;r<s;r++)n.put(this.data[r],8)},Ey=e,Ey}var Sy,yS;function JH(){if(yS)return Sy;yS=1;const t=ya(),e=ga();function n(r){this.mode=t.KANJI,this.data=r}return n.getBitsLength=function(s){return s*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),r.put(i,13)}},Sy=n,Sy}var Ny={exports:{}},vS;function eV(){return vS||(vS=1,function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},l={};l[r]=0;var u=e.PriorityQueue.make();u.push(r,0);for(var f,h,m,p,x,w,S,v,b;!u.empty();){f=u.pop(),h=f.value,p=f.cost,x=n[h]||{};for(m in x)x.hasOwnProperty(m)&&(w=x[m],S=p+w,v=l[m],b=typeof l[m]>"u",(b||v>S)&&(l[m]=S,u.push(m,S),i[m]=h))}if(typeof s<"u"&&typeof l[s]>"u"){var N=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(N)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(Ny)),Ny.exports}var xS;function tV(){return xS||(xS=1,function(t){const e=ya(),n=QH(),r=ZH(),s=XH(),i=JH(),l=SR(),u=ga(),f=eV();function h(N){return unescape(encodeURIComponent(N)).length}function m(N,_,T){const M=[];let D;for(;(D=N.exec(T))!==null;)M.push({data:D[0],index:D.index,mode:_,length:D[0].length});return M}function p(N){const _=m(l.NUMERIC,e.NUMERIC,N),T=m(l.ALPHANUMERIC,e.ALPHANUMERIC,N);let M,D;return u.isKanjiModeEnabled()?(M=m(l.BYTE,e.BYTE,N),D=m(l.KANJI,e.KANJI,N)):(M=m(l.BYTE_KANJI,e.BYTE,N),D=[]),_.concat(T,M,D).sort(function(O,F){return O.index-F.index}).map(function(O){return{data:O.data,mode:O.mode,length:O.length}})}function x(N,_){switch(_){case e.NUMERIC:return n.getBitsLength(N);case e.ALPHANUMERIC:return r.getBitsLength(N);case e.KANJI:return i.getBitsLength(N);case e.BYTE:return s.getBitsLength(N)}}function w(N){return N.reduce(function(_,T){const M=_.length-1>=0?_[_.length-1]:null;return M&&M.mode===T.mode?(_[_.length-1].data+=T.data,_):(_.push(T),_)},[])}function S(N){const _=[];for(let T=0;T<N.length;T++){const M=N[T];switch(M.mode){case e.NUMERIC:_.push([M,{data:M.data,mode:e.ALPHANUMERIC,length:M.length},{data:M.data,mode:e.BYTE,length:M.length}]);break;case e.ALPHANUMERIC:_.push([M,{data:M.data,mode:e.BYTE,length:M.length}]);break;case e.KANJI:_.push([M,{data:M.data,mode:e.BYTE,length:h(M.data)}]);break;case e.BYTE:_.push([{data:M.data,mode:e.BYTE,length:h(M.data)}])}}return _}function v(N,_){const T={},M={start:{}};let D=["start"];for(let B=0;B<N.length;B++){const O=N[B],F=[];for(let R=0;R<O.length;R++){const L=O[R],A=""+B+R;F.push(A),T[A]={node:L,lastCount:0},M[A]={};for(let U=0;U<D.length;U++){const K=D[U];T[K]&&T[K].node.mode===L.mode?(M[K][A]=x(T[K].lastCount+L.length,L.mode)-x(T[K].lastCount,L.mode),T[K].lastCount+=L.length):(T[K]&&(T[K].lastCount=L.length),M[K][A]=x(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,_))}}D=F}for(let B=0;B<D.length;B++)M[D[B]].end=0;return{map:M,table:T}}function b(N,_){let T;const M=e.getBestModeForData(N);if(T=e.from(_,M),T!==e.BYTE&&T.bit<M.bit)throw new Error('"'+N+'" cannot be encoded with mode '+e.toString(T)+`.
 Suggested mode is: `+e.toString(M));switch(T===e.KANJI&&!u.isKanjiModeEnabled()&&(T=e.BYTE),T){case e.NUMERIC:return new n(N);case e.ALPHANUMERIC:return new r(N);case e.KANJI:return new i(N);case e.BYTE:return new s(N)}}t.fromArray=function(_){return _.reduce(function(T,M){return typeof M=="string"?T.push(b(M,null)):M.data&&T.push(b(M.data,M.mode)),T},[])},t.fromString=function(_,T){const M=p(_,u.isKanjiModeEnabled()),D=S(M),B=v(D,T),O=f.find_path(B.map,"start","end"),F=[];for(let R=1;R<O.length-1;R++)F.push(B.table[O[R]].node);return t.fromArray(w(F))},t.rawSplit=function(_){return t.fromArray(p(_,u.isKanjiModeEnabled()))}}(xy)),xy}var wS;function nV(){if(wS)return iy;wS=1;const t=ga(),e=Dx(),n=FH(),r=UH(),s=zH(),i=WH(),l=HH(),u=bR(),f=KH(),h=GH(),m=YH(),p=ya(),x=tV();function w(B,O){const F=B.size,R=i.getPositions(O);for(let L=0;L<R.length;L++){const A=R[L][0],U=R[L][1];for(let K=-1;K<=7;K++)if(!(A+K<=-1||F<=A+K))for(let H=-1;H<=7;H++)U+H<=-1||F<=U+H||(K>=0&&K<=6&&(H===0||H===6)||H>=0&&H<=6&&(K===0||K===6)||K>=2&&K<=4&&H>=2&&H<=4?B.set(A+K,U+H,!0,!0):B.set(A+K,U+H,!1,!0))}}function S(B){const O=B.size;for(let F=8;F<O-8;F++){const R=F%2===0;B.set(F,6,R,!0),B.set(6,F,R,!0)}}function v(B,O){const F=s.getPositions(O);for(let R=0;R<F.length;R++){const L=F[R][0],A=F[R][1];for(let U=-2;U<=2;U++)for(let K=-2;K<=2;K++)U===-2||U===2||K===-2||K===2||U===0&&K===0?B.set(L+U,A+K,!0,!0):B.set(L+U,A+K,!1,!0)}}function b(B,O){const F=B.size,R=h.getEncodedBits(O);let L,A,U;for(let K=0;K<18;K++)L=Math.floor(K/3),A=K%3+F-8-3,U=(R>>K&1)===1,B.set(L,A,U,!0),B.set(A,L,U,!0)}function N(B,O,F){const R=B.size,L=m.getEncodedBits(O,F);let A,U;for(A=0;A<15;A++)U=(L>>A&1)===1,A<6?B.set(A,8,U,!0):A<8?B.set(A+1,8,U,!0):B.set(R-15+A,8,U,!0),A<8?B.set(8,R-A-1,U,!0):A<9?B.set(8,15-A-1+1,U,!0):B.set(8,15-A-1,U,!0);B.set(R-8,8,1,!0)}function _(B,O){const F=B.size;let R=-1,L=F-1,A=7,U=0;for(let K=F-1;K>0;K-=2)for(K===6&&K--;;){for(let H=0;H<2;H++)if(!B.isReserved(L,K-H)){let V=!1;U<O.length&&(V=(O[U]>>>A&1)===1),B.set(L,K-H,V),A--,A===-1&&(U++,A=7)}if(L+=R,L<0||F<=L){L-=R,R=-R;break}}}function T(B,O,F){const R=new n;F.forEach(function(H){R.put(H.mode.bit,4),R.put(H.getLength(),p.getCharCountIndicator(H.mode,B)),H.write(R)});const L=t.getSymbolTotalCodewords(B),A=u.getTotalCodewordsCount(B,O),U=(L-A)*8;for(R.getLengthInBits()+4<=U&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const K=(U-R.getLengthInBits())/8;for(let H=0;H<K;H++)R.put(H%2?17:236,8);return M(R,B,O)}function M(B,O,F){const R=t.getSymbolTotalCodewords(O),L=u.getTotalCodewordsCount(O,F),A=R-L,U=u.getBlocksCount(O,F),K=R%U,H=U-K,V=Math.floor(R/U),Q=Math.floor(A/U),te=Q+1,Z=V-Q,G=new f(Z);let ne=0;const z=new Array(U),W=new Array(U);let ae=0;const de=new Uint8Array(B.buffer);for(let be=0;be<U;be++){const De=be<H?Q:te;z[be]=de.slice(ne,ne+De),W[be]=G.encode(z[be]),ne+=De,ae=Math.max(ae,De)}const fe=new Uint8Array(R);let we=0,ce,ge;for(ce=0;ce<ae;ce++)for(ge=0;ge<U;ge++)ce<z[ge].length&&(fe[we++]=z[ge][ce]);for(ce=0;ce<Z;ce++)for(ge=0;ge<U;ge++)fe[we++]=W[ge][ce];return fe}function D(B,O,F,R){let L;if(Array.isArray(B))L=x.fromArray(B);else if(typeof B=="string"){let V=O;if(!V){const Q=x.rawSplit(B);V=h.getBestVersionForData(Q,F)}L=x.fromString(B,V||40)}else throw new Error("Invalid data");const A=h.getBestVersionForData(L,F);if(!A)throw new Error("The amount of data is too big to be stored in a QR Code");if(!O)O=A;else if(O<A)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+A+`.
`);const U=T(O,F,L),K=t.getSymbolSize(O),H=new r(K);return w(H,O),S(H),v(H,O),N(H,F,0),O>=7&&b(H,O),_(H,U),isNaN(R)&&(R=l.getBestMask(H,N.bind(null,H,F))),l.applyMask(R,H),N(H,F,R),{modules:H,version:O,errorCorrectionLevel:F,maskPattern:R,segments:L}}return iy.create=function(O,F){if(typeof O>"u"||O==="")throw new Error("No input text");let R=e.M,L,A;return typeof F<"u"&&(R=e.from(F.errorCorrectionLevel,e.M),L=h.from(F.version),A=l.from(F.maskPattern),F.toSJISFunc&&t.setToSJISFunction(F.toSJISFunc)),D(O,L,R,A)},iy}var ky={},Cy={},bS;function NR(){return bS||(bS=1,function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return{width:i,scale:i?4:l,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const l=s.modules.size,u=s.modules.data,f=t.getScale(l,i),h=Math.floor((l+i.margin*2)*f),m=i.margin*f,p=[i.color.light,i.color.dark];for(let x=0;x<h;x++)for(let w=0;w<h;w++){let S=(x*h+w)*4,v=i.color.light;if(x>=m&&w>=m&&x<h-m&&w<h-m){const b=Math.floor((x-m)/f),N=Math.floor((w-m)/f);v=p[u[b*l+N]?1:0]}r[S++]=v.r,r[S++]=v.g,r[S++]=v.b,r[S]=v.a}}}(Cy)),Cy}var ES;function rV(){return ES||(ES=1,function(t){const e=NR();function n(s,i,l){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,l,u){let f=u,h=l;typeof f>"u"&&(!l||!l.getContext)&&(f=l,l=void 0),l||(h=r()),f=e.getOptions(f);const m=e.getImageWidth(i.modules.size,f),p=h.getContext("2d"),x=p.createImageData(m,m);return e.qrToImageData(x.data,i,f),n(p,h,m),p.putImageData(x,0,0),h},t.renderToDataURL=function(i,l,u){let f=u;typeof f>"u"&&(!l||!l.getContext)&&(f=l,l=void 0),f||(f={});const h=t.render(i,l,f),m=f.type||"image/png",p=f.rendererOpts||{};return h.toDataURL(m,p.quality)}}(ky)),ky}var jy={},SS;function sV(){if(SS)return jy;SS=1;const t=NR();function e(s,i){const l=s.a/255,u=i+'="'+s.hex+'"';return l<1?u+" "+i+'-opacity="'+l.toFixed(2).slice(1)+'"':u}function n(s,i,l){let u=s+i;return typeof l<"u"&&(u+=" "+l),u}function r(s,i,l){let u="",f=0,h=!1,m=0;for(let p=0;p<s.length;p++){const x=Math.floor(p%i),w=Math.floor(p/i);!x&&!h&&(h=!0),s[p]?(m++,p>0&&x>0&&s[p-1]||(u+=h?n("M",x+l,.5+w+l):n("m",f,0),f=0,h=!1),x+1<i&&s[p+1]||(u+=n("h",m),m=0)):f++}return u}return jy.render=function(i,l,u){const f=t.getOptions(l),h=i.modules.size,m=i.modules.data,p=h+f.margin*2,x=f.color.light.a?"<path "+e(f.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",w="<path "+e(f.color.dark,"stroke")+' d="'+r(m,h,f.margin)+'"/>',S='viewBox="0 0 '+p+" "+p+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(f.width?'width="'+f.width+'" height="'+f.width+'" ':"")+S+' shape-rendering="crispEdges">'+x+w+`</svg>
`;return typeof u=="function"&&u(null,b),b},jy}var NS;function oV(){if(NS)return Va;NS=1;const t=BH(),e=nV(),n=rV(),r=sV();function s(i,l,u,f,h){const m=[].slice.call(arguments,1),p=m.length,x=typeof m[p-1]=="function";if(!x&&!t())throw new Error("Callback required as last argument");if(x){if(p<2)throw new Error("Too few arguments provided");p===2?(h=u,u=l,l=f=void 0):p===3&&(l.getContext&&typeof h>"u"?(h=f,f=void 0):(h=f,f=u,u=l,l=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(u=l,l=f=void 0):p===2&&!l.getContext&&(f=u,u=l,l=void 0),new Promise(function(w,S){try{const v=e.create(u,f);w(i(v,l,f))}catch(v){S(v)}})}try{const w=e.create(u,f);h(null,i(w,l,f))}catch(w){h(w)}}return Va.create=e.create,Va.toCanvas=s.bind(null,n.render),Va.toDataURL=s.bind(null,n.renderToDataURL),Va.toString=s.bind(null,function(i,l,u){return r.render(i,u)}),Va}var iV=oV();const aV=Eh(iV),lV=[{amount:1,icon:H8},{amount:50,icon:on},{amount:100,icon:na},{amount:250,icon:bv},{amount:1e3,icon:BC}],Vv=y.forwardRef(({invoice:t,amount:e,comment:n,isZapping:r,qrCodeUrl:s,copied:i,webln:l,handleZap:u,handleCopy:f,openInWallet:h,setAmount:m,setComment:p,inputRef:x,zap:w},S)=>c.jsx("div",{ref:S,children:t?c.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[c.jsx("div",{className:"text-center pt-4",children:c.jsxs("div",{className:"text-2xl font-bold",children:[e," sats"]})}),c.jsx(xu,{className:"my-4"}),c.jsxs("div",{className:"flex flex-col justify-center min-h-0 flex-1 px-2",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(Je,{className:"p-3 [@media(max-height:680px)]:max-w-[65vw] max-w-[95vw] mx-auto",children:c.jsx(ot,{className:"p-0 flex justify-center",children:s?c.jsx("img",{src:s,alt:"Lightning Invoice QR Code",className:"w-full h-auto aspect-square max-w-full object-contain"}):c.jsx("div",{className:"w-full aspect-square bg-muted animate-pulse rounded"})})})}),c.jsxs("div",{className:"space-y-2 mt-4",children:[c.jsx(Fn,{htmlFor:"invoice",children:"Lightning Invoice"}),c.jsxs("div",{className:"flex gap-2 min-w-0",children:[c.jsx(En,{id:"invoice",value:t,readOnly:!0,className:"font-mono text-xs min-w-0 flex-1 overflow-hidden text-ellipsis",onClick:v=>v.currentTarget.select()}),c.jsx(Le,{variant:"outline",size:"icon",onClick:f,className:"shrink-0",children:i?c.jsx(Wh,{className:"h-4 w-4 text-green-600"}):c.jsx(A8,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-3 mt-4",children:[l&&c.jsxs(Le,{onClick:()=>{const v=typeof e=="string"?parseInt(e,10):e;w(v,n)},disabled:r,className:"w-full",size:"lg",children:[c.jsx(na,{className:"h-4 w-4 mr-2"}),r?"Processing...":"Pay with WebLN"]}),c.jsxs(Le,{variant:"outline",onClick:h,className:"w-full",size:"lg",children:[c.jsx(z0,{className:"h-4 w-4 mr-2"}),"Open in Lightning Wallet"]}),c.jsx("div",{className:"text-xs sm:text-[.65rem] text-muted-foreground text-center",children:"Scan the QR code or copy the invoice to pay with any Lightning wallet."})]})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid gap-3 px-4 py-4 w-full overflow-hidden",children:[c.jsx(xR,{type:"single",value:String(e),onValueChange:v=>{v&&m(parseInt(v,10))},className:"grid grid-cols-5 gap-1 w-full",children:lV.map(({amount:v,icon:b})=>c.jsxs(wR,{value:String(v),className:"flex flex-col h-auto min-w-0 text-xs px-1 py-2",children:[c.jsx(b,{className:"h-4 w-4 mb-1"}),c.jsx("span",{className:"truncate",children:v})]},v))}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-px flex-1 bg-muted"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"OR"}),c.jsx("div",{className:"h-px flex-1 bg-muted"})]}),c.jsx(En,{ref:x,id:"custom-amount",type:"number",placeholder:"Custom amount",value:e,onChange:v=>m(v.target.value),className:"w-full text-sm"}),c.jsx(ha,{id:"custom-comment",placeholder:"Add a comment (optional)",value:n,onChange:v=>p(v.target.value),className:"w-full resize-none text-sm",rows:2})]}),c.jsx("div",{className:"px-4 pb-4",children:c.jsx(Le,{onClick:u,className:"w-full",disabled:r,size:"default",children:r?"Creating invoice...":c.jsxs(c.Fragment,{children:[c.jsx(na,{className:"h-4 w-4 mr-2"}),"Zap ",e," sats"]})})})]})}));Vv.displayName="ZapContent";function cV({target:t,children:e,className:n}){var U,K;const[r,s]=y.useState(!1),{user:i}=no(),{data:l}=Vr(t.pubkey),{toast:u}=ui(),{webln:f,activeNWC:h}=yp(),{zap:m,isZapping:p,invoice:x,setInvoice:w}=Ox(t,f,h,()=>s(!1)),[S,v]=y.useState(100),[b,N]=y.useState(""),[_,T]=y.useState(!1),[M,D]=y.useState(""),B=y.useRef(null),O=Px();y.useEffect(()=>{t&&N("Zapped with MKStack!")},[t]),y.useEffect(()=>{let H=!1;return(async()=>{if(!x){D("");return}try{const Q=await aV.toDataURL(x.toUpperCase(),{width:512,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});H||D(Q)}catch(Q){H||console.error("Failed to generate QR code:",Q)}})(),()=>{H=!0}},[x]);const F=async()=>{x&&(await navigator.clipboard.writeText(x),T(!0),u({title:"Invoice copied",description:"Lightning invoice copied to clipboard"}),setTimeout(()=>T(!1),2e3))},R=()=>{if(x){const H=`lightning:${x}`;window.open(H,"_blank")}};y.useEffect(()=>{v(100),w(null),T(!1),D("")},[r,w]);const A={invoice:x,amount:S,comment:b,isZapping:p,qrCodeUrl:M,copied:_,webln:f,handleZap:()=>{const H=typeof S=="string"?parseInt(S,10):S;m(H,b)},handleCopy:F,openInWallet:R,setAmount:v,setComment:N,inputRef:B,zap:m};return!i||i.pubkey===t.pubkey||!((U=l==null?void 0:l.metadata)!=null&&U.lud06)&&!((K=l==null?void 0:l.metadata)!=null&&K.lud16)?null:O?c.jsxs(lh,{open:r,onOpenChange:H=>{H||(w(null),D("")),s(H)},dismissible:!0,snapPoints:x?[.5,.75,.98]:[.98],activeSnapPoint:.98,modal:!0,shouldScaleBackground:!1,fadeFromIndex:0,children:[c.jsx(DP,{asChild:!0,children:c.jsx("div",{className:`cursor-pointer ${n||""}`,children:e})}),c.jsxs(ch,{className:xe("transition-all duration-300",x?"h-full max-h-screen":"max-h-[98vh]"),"data-testid":"zap-modal",children:[c.jsxs(uh,{className:"text-center relative",children:[x&&c.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>{w(null),D("")},className:"absolute left-4 top-4 flex items-center gap-2",children:c.jsx(zh,{className:"h-4 w-4"})}),c.jsx(LP,{asChild:!0,children:c.jsxs(Le,{variant:"ghost",size:"sm",className:"absolute right-4 top-4",children:[c.jsx(qh,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})}),c.jsx(dh,{className:"text-lg break-words pt-2",children:x?"Lightning Payment":"Send a Zap"}),c.jsx(fh,{className:"text-sm break-words text-center",children:x?"Pay with Bitcoin Lightning Network":"Zaps are small Bitcoin payments that support the creator of this item. If you enjoyed this, consider sending a zap!"})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:c.jsx(Vv,{...A})})]},x?"payment":"form")]}):c.jsxs(Tl,{open:r,onOpenChange:s,children:[c.jsx(S_,{asChild:!0,children:c.jsx("div",{className:`cursor-pointer ${n||""}`,children:e})}),c.jsxs(oa,{className:"sm:max-w-[425px] max-h-[95vh] overflow-hidden","data-testid":"zap-modal",children:[c.jsxs(ia,{children:[c.jsx(Pl,{className:"text-lg break-words",children:x?"Lightning Payment":"Send a Zap"}),c.jsx(Rl,{className:"text-sm text-center break-words",children:x?"Pay with Bitcoin Lightning Network":c.jsx(c.Fragment,{children:"Zaps are small Bitcoin payments that support the creator of this item. If you enjoyed this, consider sending a zap!"})})]}),c.jsx("div",{className:"overflow-y-auto",children:c.jsx(Vv,{...A})})]})]})}function kR({scoreEvent:t,playerPubkey:e,className:n="text-xs ml-1",showCount:r=!0,zapData:s}){var S,v;const{user:i}=no(),{data:l}=Vr(e),{webln:u,activeNWC:f}=yp(),{totalSats:h,isLoading:m}=Ox(s?[]:t??[],u);if(!i||!t||i.pubkey===e||!((S=l==null?void 0:l.metadata)!=null&&S.lud16)&&!((v=l==null?void 0:l.metadata)!=null&&v.lud06))return null;const p=(s==null?void 0:s.totalSats)??h,x=(s==null?void 0:s.isLoading)||m,w={...t,pubkey:e};return c.jsx(cV,{target:w,children:c.jsxs("div",{className:`flex items-center gap-1 cursor-pointer hover:text-primary transition-colors ${n}`,children:[c.jsx(na,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs",children:x?"...":r&&p>0?`${p.toLocaleString()}`:"Zap"})]})})}function At(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function li(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const CR=6048e5,uV=864e5,wf=43200,kS=1440;let dV={};function Ku(){return dV}function wu(t,e){var u,f,h,m;const n=Ku(),r=(e==null?void 0:e.weekStartsOn)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=At(t),i=s.getDay(),l=(i<r?7:0)+i-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function gh(t){return wu(t,{weekStartsOn:1})}function jR(t){const e=At(t),n=e.getFullYear(),r=li(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=gh(r),i=li(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=gh(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=l.getTime()?n:n-1}function CS(t){const e=At(t);return e.setHours(0,0,0,0),e}function yh(t){const e=At(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function fV(t,e){const n=CS(t),r=CS(e),s=+n-yh(n),i=+r-yh(r);return Math.round((s-i)/uV)}function hV(t){const e=jR(t),n=li(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),gh(n)}function Rf(t,e){const n=At(t),r=At(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function pV(t){return li(t,Date.now())}function mV(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gV(t){if(!mV(t)&&typeof t!="number")return!1;const e=At(t);return!isNaN(Number(e))}function yV(t,e){const n=At(t),r=At(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function vV(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function xV(t,e){return+At(t)-+At(e)}function wV(t){const e=At(t);return e.setHours(23,59,59,999),e}function bV(t){const e=At(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function EV(t){const e=At(t);return+wV(e)==+bV(e)}function SV(t,e){const n=At(t),r=At(e),s=Rf(n,r),i=Math.abs(yV(n,r));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let u=Rf(n,r)===-s;EV(At(t))&&i===1&&Rf(t,r)===1&&(u=!1),l=s*(i-Number(u))}return l===0?0:l}function NV(t,e,n){const r=xV(t,e)/1e3;return vV(n==null?void 0:n.roundingMethod)(r)}function kV(t){const e=At(t),n=li(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const CV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jV=(t,e,n)=>{let r;const s=CV[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _y(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const _V={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},TV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RV={date:_y({formats:_V,defaultWidth:"full"}),time:_y({formats:TV,defaultWidth:"full"}),dateTime:_y({formats:PV,defaultWidth:"full"})},AV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IV=(t,e,n,r)=>AV[t];function Wc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):l;s=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const MV={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OV={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},DV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},LV={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$V={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FV=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},UV={ordinalNumber:FV,era:Wc({values:MV,defaultWidth:"wide"}),quarter:Wc({values:OV,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wc({values:DV,defaultWidth:"wide"}),day:Wc({values:LV,defaultWidth:"wide"}),dayPeriod:Wc({values:$V,defaultWidth:"wide",formattingValues:BV,defaultFormattingWidth:"wide"})};function Hc(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const l=i[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(u)?WV(u,p=>p.test(l)):zV(u,p=>p.test(l));let h;h=t.valueCallback?t.valueCallback(f):f,h=n.valueCallback?n.valueCallback(h):h;const m=e.slice(l.length);return{value:h,rest:m}}}function zV(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function WV(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function HV(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(s.length);return{value:l,rest:u}}}const VV=/^(\d+)(th|st|nd|rd)?/i,qV=/\d+/i,KV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GV={any:[/^b/i,/^(a|c)/i]},YV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},QV={any:[/1/i,/2/i,/3/i,/4/i]},ZV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rq={ordinalNumber:HV({matchPattern:VV,parsePattern:qV,valueCallback:t=>parseInt(t,10)}),era:Hc({matchPatterns:KV,defaultMatchWidth:"wide",parsePatterns:GV,defaultParseWidth:"any"}),quarter:Hc({matchPatterns:YV,defaultMatchWidth:"wide",parsePatterns:QV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hc({matchPatterns:ZV,defaultMatchWidth:"wide",parsePatterns:XV,defaultParseWidth:"any"}),day:Hc({matchPatterns:JV,defaultMatchWidth:"wide",parsePatterns:eq,defaultParseWidth:"any"}),dayPeriod:Hc({matchPatterns:tq,defaultMatchWidth:"any",parsePatterns:nq,defaultParseWidth:"any"})},_R={code:"en-US",formatDistance:jV,formatLong:RV,formatRelative:IV,localize:UV,match:rq,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sq(t){const e=At(t);return fV(e,kV(e))+1}function oq(t){const e=At(t),n=+gh(e)-+hV(e);return Math.round(n/CR)+1}function TR(t,e){var m,p,x,w;const n=At(t),r=n.getFullYear(),s=Ku(),i=(e==null?void 0:e.firstWeekContainsDate)??((p=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??s.firstWeekContainsDate??((w=(x=s.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??1,l=li(t,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const u=wu(l,e),f=li(t,0);f.setFullYear(r,0,i),f.setHours(0,0,0,0);const h=wu(f,e);return n.getTime()>=u.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function iq(t,e){var u,f,h,m;const n=Ku(),r=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=TR(t,e),i=li(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),wu(i,e)}function aq(t,e){const n=At(t),r=+wu(n,e)-+iq(n,e);return Math.round(r/CR)+1}function Tt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ao={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Tt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Tt(n+1,2)},d(t,e){return Tt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Tt(t.getHours()%12||12,e.length)},H(t,e){return Tt(t.getHours(),e.length)},m(t,e){return Tt(t.getMinutes(),e.length)},s(t,e){return Tt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Tt(s,e.length)}},qa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jS={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ao.y(t,e)},Y:function(t,e,n,r){const s=TR(t,r),i=s>0?s:1-s;if(e==="YY"){const l=i%100;return Tt(l,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Tt(i,e.length)},R:function(t,e){const n=jR(t);return Tt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Tt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Tt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Tt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ao.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Tt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=aq(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Tt(s,e.length)},I:function(t,e,n){const r=oq(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Tt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ao.d(t,e)},D:function(t,e,n){const r=sq(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Tt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Tt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Tt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Tt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=qa.noon:r===0?s=qa.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=qa.evening:r>=12?s=qa.afternoon:r>=4?s=qa.morning:s=qa.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ao.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ao.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ao.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ao.s(t,e)},S:function(t,e){return Ao.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return TS(r);case"XXXX":case"XX":return Ai(r);case"XXXXX":case"XXX":default:return Ai(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return TS(r);case"xxxx":case"xx":return Ai(r);case"xxxxx":case"xxx":default:return Ai(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_S(r,":");case"OOOO":default:return"GMT"+Ai(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_S(r,":");case"zzzz":default:return"GMT"+Ai(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Tt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Tt(r,e.length)}};function _S(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Tt(i,2)}function TS(t,e){return t%60===0?(t>0?"-":"+")+Tt(Math.abs(t)/60,2):Ai(t,e)}function Ai(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Tt(Math.trunc(r/60),2),i=Tt(r%60,2);return n+s+e+i}const PS=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PR=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},lq=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return PS(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",PS(r,e)).replace("{{time}}",PR(s,e))},cq={p:PR,P:lq},uq=/^D+$/,dq=/^Y+$/,fq=["D","DD","YY","YYYY"];function hq(t){return uq.test(t)}function pq(t){return dq.test(t)}function mq(t,e,n){const r=gq(t,e,n);if(console.warn(r),fq.includes(t))throw new RangeError(r)}function gq(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xq=/^'([^]*?)'?$/,wq=/''/g,bq=/[a-zA-Z]/;function Eq(t,e,n){var m,p,x,w;const r=Ku(),s=r.locale??_R,i=r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,l=r.weekStartsOn??((w=(x=r.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,u=At(t);if(!gV(u))throw new RangeError("Invalid time value");let f=e.match(vq).map(S=>{const v=S[0];if(v==="p"||v==="P"){const b=cq[v];return b(S,s.formatLong)}return S}).join("").match(yq).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const v=S[0];if(v==="'")return{isToken:!1,value:Sq(S)};if(jS[v])return{isToken:!0,value:S};if(v.match(bq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(f=s.localize.preprocessor(u,f));const h={firstWeekContainsDate:i,weekStartsOn:l,locale:s};return f.map(S=>{if(!S.isToken)return S.value;const v=S.value;(pq(v)||hq(v))&&mq(v,e,String(t));const b=jS[v[0]];return b(u,v,s.localize,h)}).join("")}function Sq(t){const e=t.match(xq);return e?e[1].replace(wq,"'"):t}function Nq(t,e,n){const r=Ku(),s=(n==null?void 0:n.locale)??r.locale??_R,i=2520,l=Rf(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let f,h;l>0?(f=At(e),h=At(t)):(f=At(t),h=At(e));const m=NV(h,f),p=(yh(h)-yh(f))/1e3,x=Math.round((m-p)/60);let w;if(x<2)return n!=null&&n.includeSeconds?m<5?s.formatDistance("lessThanXSeconds",5,u):m<10?s.formatDistance("lessThanXSeconds",10,u):m<20?s.formatDistance("lessThanXSeconds",20,u):m<40?s.formatDistance("halfAMinute",0,u):m<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):x===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",x,u);if(x<45)return s.formatDistance("xMinutes",x,u);if(x<90)return s.formatDistance("aboutXHours",1,u);if(x<kS){const S=Math.round(x/60);return s.formatDistance("aboutXHours",S,u)}else{if(x<i)return s.formatDistance("xDays",1,u);if(x<wf){const S=Math.round(x/kS);return s.formatDistance("xDays",S,u)}else if(x<wf*2)return w=Math.round(x/wf),s.formatDistance("aboutXMonths",w,u)}if(w=SV(h,f),w<12){const S=Math.round(x/wf);return s.formatDistance("xMonths",S,u)}else{const S=w%12,v=Math.trunc(w/12);return S<3?s.formatDistance("aboutXYears",v,u):S<9?s.formatDistance("overXYears",v,u):s.formatDistance("almostXYears",v+1,u)}}function bu(t,e){return Nq(t,pV(t),e)}function kq(){const{pubkey:t,gameIdentifier:e}=sp(),[n,r]=y.useState("all-time"),[s,i]=y.useState(),[l,u]=y.useState(),{getGame:f}=vp(),h=t&&e?f(t,e):null,{data:m,isLoading:p}=IH(e||"",n,{difficulty:s,mode:l,developerPubkey:t,limit:100,includeTestData:!0}),x=Array.from(new Set(m==null?void 0:m.map(S=>S.difficulty).filter(Boolean))),w=Array.from(new Set(m==null?void 0:m.map(S=>S.mode).filter(Boolean)));return!t||!e||!h?c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsx(Je,{children:c.jsxs(ot,{className:"py-12 text-center",children:[c.jsx("p",{className:"text-muted-foreground",children:"Game not found"}),c.jsx(Le,{asChild:!0,className:"mt-4",children:c.jsx(Ft,{to:"/",children:"Back to Home"})})]})})}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[c.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600/20 via-pink-600/20 to-blue-600/20",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-30",style:{backgroundImage:`url(${h.image})`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"}),c.jsxs("div",{className:"relative container mx-auto px-4 py-8",children:[c.jsx(Le,{variant:"ghost",asChild:!0,className:"mb-4",children:c.jsxs(Ft,{to:"/",children:[c.jsx(zh,{className:"mr-2 h-4 w-4"}),"Back to Games"]})}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[c.jsx("div",{className:"w-full md:w-80 aspect-video rounded-lg overflow-hidden shadow-2xl",children:c.jsx("img",{src:h.image,alt:h.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:h.name}),c.jsx("p",{className:"text-lg text-muted-foreground",children:h.description})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:h.genres.map(S=>c.jsx(Pt,{variant:"secondary",children:S},S))}),c.jsx("div",{className:"flex flex-wrap gap-4 text-sm",children:m&&m.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(zs,{className:"h-4 w-4 text-yellow-500"}),c.jsxs("span",{children:[m.length," scores submitted"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(W0,{className:"h-4 w-4 text-blue-500"}),c.jsxs("span",{children:["Top Score: ",m[0].score.toLocaleString()]})]})]})}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[h.url&&c.jsx(Le,{asChild:!0,size:"lg",children:c.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:["Play Game",c.jsx(z0,{className:"ml-2 h-4 w-4"})]})}),h.developer&&c.jsxs(Le,{variant:"outline",size:"lg",children:["By ",h.developer]})]})]})]})]})]}),c.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsxs(Rn,{className:"flex items-center gap-2",children:[c.jsx(zs,{className:"h-5 w-5"}),"Leaderboard"]})}),c.jsxs(ot,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time Period"}),c.jsx(Fu,{value:n,onValueChange:S=>r(S),children:c.jsxs(Gl,{className:"grid grid-cols-4 w-full max-w-md",children:[c.jsx(yn,{value:"daily",children:"Daily"}),c.jsx(yn,{value:"weekly",children:"Weekly"}),c.jsx(yn,{value:"monthly",children:"Monthly"}),c.jsx(yn,{value:"all-time",children:"All Time"})]})})]}),x.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Difficulty"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Le,{variant:s===void 0?"default":"outline",size:"sm",onClick:()=>i(void 0),children:"All"}),x.map(S=>c.jsx(Le,{variant:s===S?"default":"outline",size:"sm",onClick:()=>i(S),children:S},S))]})]}),w.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Mode"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Le,{variant:l===void 0?"default":"outline",size:"sm",onClick:()=>u(void 0),children:"All"}),w.map(S=>c.jsx(Le,{variant:l===S?"default":"outline",size:"sm",onClick:()=>u(S),children:S},S))]})]})]})]}),c.jsx(Je,{children:c.jsx(ot,{className:"p-0",children:p?c.jsx("div",{className:"space-y-4 p-6",children:Array.from({length:10}).map((S,v)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Ct,{className:"h-10 w-10 rounded-full"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(Ct,{className:"h-4 w-32"}),c.jsx(Ct,{className:"h-3 w-24"})]}),c.jsx(Ct,{className:"h-6 w-20"})]},v))}):m&&m.length>0?c.jsx("div",{className:"divide-y",children:m.map((S,v)=>c.jsx(Cq,{rank:v+1,score:S},S.event.id))}):c.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[c.jsx(zs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No scores yet. Be the first to play!"})]})})})]})]})}function Cq({rank:t,score:e}){var l,u;const r=(l=Vr(e.playerPubkey).data)==null?void 0:l.metadata,s=(r==null?void 0:r.name)||mi(e.playerPubkey),i=()=>t===1?c.jsx(zs,{className:"h-5 w-5 text-yellow-500"}):t===2?c.jsx(F8,{className:"h-5 w-5 text-gray-400"}):t===3?c.jsx(yv,{className:"h-5 w-5 text-amber-600"}):c.jsxs("span",{className:"text-sm font-bold text-muted-foreground",children:["#",t]});return c.jsxs(Ft,{to:`/score/${e.event.id}`,className:"flex items-center gap-4 p-4 hover:bg-muted/50 transition-colors group",children:[c.jsx("div",{className:"flex items-center justify-center w-10",children:i()}),c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c.jsxs(Qs,{children:[c.jsx(Zs,{src:r==null?void 0:r.picture,alt:s}),c.jsx(Xs,{children:(u=s[0])==null?void 0:u.toUpperCase()})]}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"font-medium truncate group-hover:text-primary transition-colors",children:s}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(LC,{className:"h-3 w-3"}),bu(e.event.created_at*1e3,{addSuffix:!0})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[Ix(e.event)&&c.jsxs(Pt,{variant:"secondary",className:"hidden sm:inline-flex gap-1",children:[c.jsx(H0,{className:"h-3 w-3"}),"Test"]}),e.difficulty&&c.jsx(Pt,{variant:"outline",className:"hidden sm:inline-flex",children:e.difficulty}),e.level&&c.jsxs(Pt,{variant:"outline",className:"hidden md:inline-flex",children:["Level ",e.level]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-2xl font-bold",children:e.score.toLocaleString()}),e.duration&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.floor(e.duration/60),"m ",e.duration%60,"s"]})]}),c.jsx("div",{onClick:f=>f.preventDefault(),children:c.jsx(kR,{scoreEvent:e.event,playerPubkey:e.playerPubkey})})]})]})}function RR(t,e){const{nostr:n}=Hr();return ua({queryKey:["nostr","comments",t instanceof URL?t.toString():t.id,e],queryFn:async r=>{var x;const s={kinds:[1111]};if(t instanceof URL)s["#I"]=[t.toString()];else if(Nr.addressable(t.kind)){const w=((x=t.tags.find(([S])=>S==="d"))==null?void 0:x[1])??"";s["#A"]=[`${t.kind}:${t.pubkey}:${w}`]}else Nr.replaceable(t.kind)?s["#A"]=[`${t.kind}:${t.pubkey}:`]:s["#E"]=[t.id];typeof e=="number"&&(s.limit=e);const i=AbortSignal.any([r.signal,AbortSignal.timeout(5e3)]),l=await n.query([s],{signal:i}),u=(w,S)=>{const v=w.tags.find(([b])=>b===S);return v==null?void 0:v[1]},f=l.filter(w=>{if(t instanceof URL)return u(w,"i")===t.toString();if(Nr.addressable(t.kind)){const S=u(t,"d")??"";return u(w,"a")===`${t.kind}:${t.pubkey}:${S}`}else return Nr.replaceable(t.kind)?u(w,"a")===`${t.kind}:${t.pubkey}:`:u(w,"e")===t.id}),h=w=>{const S=l.filter(b=>u(b,"e")===w),v=[...S];for(const b of S)v.push(...h(b.id));return v},m=new Map;for(const w of l)m.set(w.id,h(w.id));const p=f.sort((w,S)=>S.created_at-w.created_at);return{allComments:l,topLevelComments:p,getDescendants:w=>(m.get(w)||[]).sort((v,b)=>v.created_at-b.created_at),getDirectReplies:w=>l.filter(v=>u(v,"e")===w).sort((v,b)=>v.created_at-b.created_at)}},enabled:!!t})}function jq(){const{mutateAsync:t}=np(),e=_u();return su({mutationFn:async({root:n,reply:r,content:s})=>{var h,m;const i=[],l=n instanceof URL?"":((h=n.tags.find(([p])=>p==="d"))==null?void 0:h[1])??"",u=r instanceof URL?"":((m=r==null?void 0:r.tags.find(([p])=>p==="d"))==null?void 0:m[1])??"";return n instanceof URL?i.push(["I",n.toString()]):Nr.addressable(n.kind)?i.push(["A",`${n.kind}:${n.pubkey}:${l}`]):Nr.replaceable(n.kind)?i.push(["A",`${n.kind}:${n.pubkey}:`]):i.push(["E",n.id]),n instanceof URL?i.push(["K",n.hostname]):(i.push(["K",n.kind.toString()]),i.push(["P",n.pubkey])),r?(r instanceof URL?i.push(["i",r.toString()]):Nr.addressable(r.kind)?i.push(["a",`${r.kind}:${r.pubkey}:${u}`]):Nr.replaceable(r.kind)?i.push(["a",`${r.kind}:${r.pubkey}:`]):i.push(["e",r.id]),r instanceof URL?i.push(["k",r.hostname]):(i.push(["k",r.kind.toString()]),i.push(["p",r.pubkey]))):(n instanceof URL?i.push(["i",n.toString()]):Nr.addressable(n.kind)?i.push(["a",`${n.kind}:${n.pubkey}:${l}`]):Nr.replaceable(n.kind)?i.push(["a",`${n.kind}:${n.pubkey}:`]):i.push(["e",n.id]),n instanceof URL?i.push(["k",n.hostname]):(i.push(["k",n.kind.toString()]),i.push(["p",n.pubkey]))),await t({kind:1111,content:s,tags:i})},onSuccess:(n,{root:r})=>{e.invalidateQueries({queryKey:["comments",r instanceof URL?r.toString():r.id]})}})}function AR({root:t,reply:e,onSuccess:n,placeholder:r="Write a comment...",compact:s=!1}){const[i,l]=y.useState(""),{user:u}=no(),{mutate:f,isPending:h}=jq(),m=p=>{p.preventDefault(),!(!i.trim()||!u)&&f({content:i.trim(),root:t,reply:e},{onSuccess:()=>{l(""),n==null||n()}})};return u?c.jsx(Je,{className:s?"border-dashed":"",children:c.jsx(ot,{className:s?"p-4":"p-6",children:c.jsxs("form",{onSubmit:m,className:"space-y-4",children:[c.jsx(ha,{value:i,onChange:p=>l(p.target.value),placeholder:r,className:s?"min-h-[80px]":"min-h-[100px]",disabled:h}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:e?"Replying to comment":"Adding to the discussion"}),c.jsxs(Le,{type:"submit",disabled:!i.trim()||h,size:s?"sm":"default",children:[c.jsx(UC,{className:"h-4 w-4 mr-2"}),h?"Posting...":e?"Reply":"Comment"]})]})]})})}):c.jsx(Je,{className:s?"border-dashed":"",children:c.jsx(ot,{className:s?"p-4":"p-6",children:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[c.jsx(Xa,{className:"h-5 w-5"}),c.jsxs("span",{children:["Sign in to ",e?"reply":"comment"]})]}),c.jsx(Rx,{})]})})})}function IR({event:t,className:e}){const n=y.useMemo(()=>{const r=t.content,s=/(https?:\/\/[^\s]+)|nostr:(npub1|note1|nprofile1|nevent1)([023456789acdefghjklmnpqrstuvwxyz]+)|(#\w+)/g,i=[];let l=0,u,f=0;for(;(u=s.exec(r))!==null;){const[h,m,p,x,w]=u,S=u.index;if(S>l&&i.push(r.substring(l,S)),m)i.push(c.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:m},`url-${f++}`));else if(p&&x)try{const v=`${p}${x}`,b=tr.decode(v);if(b.type==="npub"){const N=b.data;i.push(c.jsx(_q,{pubkey:N},`mention-${f++}`))}else i.push(c.jsx(Ft,{to:`/${v}`,className:"text-blue-500 hover:underline",children:h},`nostr-${f++}`))}catch{i.push(h)}else if(w){const v=w.slice(1);i.push(c.jsx(Ft,{to:`/t/${v}`,className:"text-blue-500 hover:underline",children:w},`hashtag-${f++}`))}l=S+h.length}return l<r.length&&i.push(r.substring(l)),i.length===0&&i.push(r),i},[t]);return c.jsx("div",{className:xe("whitespace-pre-wrap break-words",e),children:n.length>0?n:t.content})}function _q({pubkey:t}){var i,l,u,f;const e=Vr(t),n=tr.npubEncode(t),r=!!((l=(i=e.data)==null?void 0:i.metadata)!=null&&l.name),s=((f=(u=e.data)==null?void 0:u.metadata)==null?void 0:f.name)??mi(t);return c.jsxs(Ft,{to:`/${n}`,className:xe("font-medium hover:underline",r?"text-blue-500":"text-gray-500 hover:text-gray-700"),children:["@",s]})}var wp="Collapsible",[Tq,PG]=Mn(wp),[Pq,Lx]=Tq(wp),MR=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:l,...u}=t,[f,h]=nr({prop:r,defaultProp:s??!1,onChange:l,caller:wp});return c.jsx(Pq,{scope:n,disabled:i,contentId:dn(),open:f,onOpenToggle:y.useCallback(()=>h(m=>!m),[h]),children:c.jsx(Ae.div,{"data-state":Bx(f),"data-disabled":i?"":void 0,...u,ref:e})})});MR.displayName=wp;var OR="CollapsibleTrigger",DR=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=Lx(OR,n);return c.jsx(Ae.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Bx(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Se(t.onClick,s.onOpenToggle)})});DR.displayName=OR;var $x="CollapsibleContent",LR=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Lx($x,t.__scopeCollapsible);return c.jsx(vn,{present:n||s.open,children:({present:i})=>c.jsx(Rq,{...r,ref:e,present:i})})});LR.displayName=$x;var Rq=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,l=Lx($x,n),[u,f]=y.useState(r),h=y.useRef(null),m=it(e,h),p=y.useRef(0),x=p.current,w=y.useRef(0),S=w.current,v=l.open||u,b=y.useRef(v),N=y.useRef(void 0);return y.useEffect(()=>{const _=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(_)},[]),Gt(()=>{const _=h.current;if(_){N.current=N.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const T=_.getBoundingClientRect();p.current=T.height,w.current=T.width,b.current||(_.style.transitionDuration=N.current.transitionDuration,_.style.animationName=N.current.animationName),f(r)}},[l.open,r]),c.jsx(Ae.div,{"data-state":Bx(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!v,...i,ref:m,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":S?`${S}px`:void 0,...t.style},children:v&&s})});function Bx(t){return t?"open":"closed"}var Aq=MR;const RS=Aq,Iq=DR,Mq=LR;function $R({root:t,comment:e,depth:n=0,maxDepth:r=3,limit:s}){var b;const[i,l]=y.useState(!1),[u,f]=y.useState(n<2),h=Vr(e.pubkey),{data:m}=RR(t,s),p=(b=h.data)==null?void 0:b.metadata,x=(p==null?void 0:p.name)??mi(e.pubkey),w=bu(new Date(e.created_at*1e3),{addSuffix:!0}),S=(m==null?void 0:m.getDirectReplies(e.id))||[],v=S.length>0;return c.jsxs("div",{className:n>0?"ml-6 border-l-2 border-muted pl-4":"",children:[c.jsx(Je,{className:"bg-card/50",children:c.jsx(ot,{className:"p-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Ft,{to:`/${tr.npubEncode(e.pubkey)}`,children:c.jsxs(Qs,{className:"h-8 w-8 hover:ring-2 hover:ring-primary/30 transition-all cursor-pointer",children:[c.jsx(Zs,{src:p==null?void 0:p.picture}),c.jsx(Xs,{className:"text-xs",children:x.charAt(0)})]})}),c.jsxs("div",{children:[c.jsx(Ft,{to:`/${tr.npubEncode(e.pubkey)}`,className:"font-medium text-sm hover:text-primary transition-colors",children:x}),c.jsx("p",{className:"text-xs text-muted-foreground",children:w})]})]})}),c.jsx("div",{className:"text-sm",children:c.jsx(IR,{event:e,className:"text-sm"})}),c.jsxs("div",{className:"flex items-center justify-between pt-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>l(!i),className:"h-8 px-2 text-xs",children:[c.jsx(Xa,{className:"h-3 w-3 mr-1"}),"Reply"]}),v&&c.jsx(RS,{open:u,onOpenChange:f,children:c.jsx(Iq,{asChild:!0,children:c.jsxs(Le,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",children:[u?c.jsx(Hh,{className:"h-3 w-3 mr-1"}):c.jsx(DC,{className:"h-3 w-3 mr-1"}),S.length," ",S.length===1?"reply":"replies"]})})})]}),c.jsx(zT,{children:c.jsx(WT,{asChild:!0,children:c.jsx(Le,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs","aria-label":"Comment options",children:c.jsx(O8,{className:"h-3 w-3"})})})})]})]})})}),i&&c.jsx("div",{className:"ml-6 mt-3",children:c.jsx(AR,{root:t,reply:e,onSuccess:()=>l(!1),placeholder:"Write a reply...",compact:!0})}),v&&c.jsx(RS,{open:u,onOpenChange:f,children:c.jsx(Mq,{className:"mt-3 space-y-3",children:S.map(N=>c.jsx($R,{root:t,comment:N,depth:n+1,maxDepth:r,limit:s},N.id))})})]})}function Oq({root:t,title:e="Comments",emptyStateMessage:n="No comments yet",emptyStateSubtitle:r="Be the first to share your thoughts!",className:s,limit:i=500}){const{data:l,isLoading:u,error:f}=RR(t,i),h=(l==null?void 0:l.topLevelComments)||[];return f?c.jsx(Je,{className:"rounded-none sm:rounded-lg mx-0 sm:mx-0",children:c.jsx(ot,{className:"px-2 py-6 sm:p-6",children:c.jsxs("div",{className:"text-center text-muted-foreground",children:[c.jsx(Xa,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"Failed to load comments"})]})})}):c.jsxs(Je,{className:xe("rounded-none sm:rounded-lg mx-0 sm:mx-0",s),children:[c.jsx(cn,{className:"px-2 pt-6 pb-4 sm:p-6",children:c.jsxs(Rn,{className:"flex items-center space-x-2",children:[c.jsx(Xa,{className:"h-5 w-5"}),c.jsx("span",{children:e}),!u&&c.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",h.length,")"]})]})}),c.jsxs(ot,{className:"px-2 pb-6 pt-4 sm:p-6 sm:pt-0 space-y-6",children:[c.jsx(AR,{root:t}),u?c.jsx("div",{className:"space-y-4",children:[...Array(3)].map((m,p)=>c.jsx(Je,{className:"bg-card/50",children:c.jsx(ot,{className:"p-4",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Ct,{className:"h-8 w-8 rounded-full"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ct,{className:"h-4 w-24"}),c.jsx(Ct,{className:"h-3 w-16"})]})]}),c.jsx(Ct,{className:"h-16 w-full"})]})})},p))}):h.length===0?c.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[c.jsx(Xa,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),c.jsx("p",{className:"text-lg font-medium mb-2",children:n}),c.jsx("p",{className:"text-sm",children:r})]}):c.jsx("div",{className:"space-y-4",children:h.map(m=>c.jsx($R,{root:t,comment:m},m.id))})]})]})}function Dq(t){var S,v,b,N,_,T,M,D,B,O,F;if(t.kind!==30762)return null;const e=(S=t.tags.find(([R])=>R==="game"))==null?void 0:S[1],n=(v=t.tags.find(([R])=>R==="score"))==null?void 0:v[1],r=(b=t.tags.find(([R])=>R==="p"))==null?void 0:b[1];if(!e||!n||!r)return null;const s=parseInt(n);if(isNaN(s))return null;const i=(N=t.tags.find(([R])=>R==="state"))==null?void 0:N[1],l=(_=t.tags.find(([R])=>R==="level"))==null?void 0:_[1],u=(T=t.tags.find(([R])=>R==="difficulty"))==null?void 0:T[1],f=(M=t.tags.find(([R])=>R==="mode"))==null?void 0:M[1],h=(D=t.tags.find(([R])=>R==="duration"))==null?void 0:D[1],m=(B=t.tags.find(([R])=>R==="achievements"))==null?void 0:B[1],p=(O=t.tags.find(([R])=>R==="version"))==null?void 0:O[1],x=(F=t.tags.find(([R])=>R==="platform"))==null?void 0:F[1],w=t.tags.filter(([R])=>R==="t").map(([,R])=>R);return{event:t,gameIdentifier:e,score:s,playerPubkey:r,state:i,level:l,difficulty:u,mode:f,duration:h?parseInt(h):void 0,achievements:m?m.split(",").map(R=>R.trim()):void 0,version:p,platform:x,genres:w.length>0?w:void 0}}function Lq(){var v,b;const{eventId:t}=sp(),{nostr:e}=Hr(),{getGame:n}=vp(),{webln:r,activeNWC:s}=yp(),{data:i,isLoading:l}=ua({queryKey:["score",t],queryFn:async N=>{if(!t)return null;const _=AbortSignal.any([N.signal,AbortSignal.timeout(3e3)]),T=await e.query([{ids:[t]}],{signal:_});return T.length>0?Dq(T[0]):null},enabled:!!t}),f=(v=Vr((i==null?void 0:i.playerPubkey)||"").data)==null?void 0:v.metadata,h=(f==null?void 0:f.name)||mi((i==null?void 0:i.playerPubkey)||""),{totalSats:m,zapCount:p,isLoading:x}=Ox(i!=null&&i.event?[i.event]:[],r),w=i?n(i.event.pubkey,i.gameIdentifier):null;if(l)return c.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[c.jsx(Ct,{className:"h-10 w-32 mb-6"}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Ct,{className:"h-16 w-16 rounded-full"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(Ct,{className:"h-6 w-48"}),c.jsx(Ct,{className:"h-4 w-32"})]})]})}),c.jsxs(ot,{className:"space-y-4",children:[c.jsx(Ct,{className:"h-24 w-full"}),c.jsx(Ct,{className:"h-32 w-full"})]})]})]});if(!i)return c.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:c.jsx(Je,{children:c.jsxs(ot,{className:"py-12 text-center",children:[c.jsx(zs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Score not found"}),c.jsx(Le,{asChild:!0,children:c.jsx(Ft,{to:"/",children:"Back to Home"})})]})})});const S=N=>{const _=Math.floor(N/60),T=N%60;return`${_}m ${T}s`};return c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:c.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl space-y-6",children:[c.jsx(Le,{variant:"ghost",asChild:!0,children:c.jsxs(Ft,{to:w?`/game/${i.event.pubkey}/${i.gameIdentifier}`:"/",children:[c.jsx(zh,{className:"mr-2 h-4 w-4"}),w?`Back to ${w.name}`:"Back to Home"]})}),c.jsxs(Je,{className:"overflow-hidden",children:[(w==null?void 0:w.image)&&c.jsxs("div",{className:"relative h-48 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.image})`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-background/50 to-background"}),c.jsx("div",{className:"absolute bottom-4 right-4 bg-background/95 backdrop-blur-sm rounded-lg p-4 shadow-lg border",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Score"}),c.jsx("p",{className:"text-3xl font-bold",children:i.score.toLocaleString()})]})})]}),c.jsx(cn,{className:w!=null&&w.image?"pt-6":"",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx(Ft,{to:`/player/${i.playerPubkey}`,children:c.jsxs(Qs,{className:"h-16 w-16 ring-2 ring-background",children:[c.jsx(Zs,{src:f==null?void 0:f.picture,alt:h}),c.jsx(Xs,{className:"text-lg",children:(b=h[0])==null?void 0:b.toUpperCase()})]})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx(Ft,{to:`/player/${i.playerPubkey}`,className:"hover:opacity-80 transition-opacity",children:c.jsx("h1",{className:"text-2xl font-bold mb-1",children:h})}),w&&c.jsxs(Ft,{to:`/game/${i.event.pubkey}/${i.gameIdentifier}`,className:"text-muted-foreground hover:text-foreground transition-colors inline-flex items-center gap-2",children:[c.jsx(ta,{className:"h-4 w-4"}),w.name]})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx(kR,{scoreEvent:i.event,playerPubkey:i.playerPubkey,className:"text-sm",showCount:!0,zapData:{count:p,totalSats:m,isLoading:x}})})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(LC,{className:"h-4 w-4"}),bu(i.event.created_at*1e3,{addSuffix:!0})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(k8,{className:"h-4 w-4"}),Eq(i.event.created_at*1e3,"PPP")]})]})]})]})}),c.jsxs(ot,{className:"space-y-6",children:[i.event.content&&c.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:c.jsx("p",{className:"text-lg",children:i.event.content})}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[!(w!=null&&w.image)&&c.jsx(Je,{className:"bg-muted/50",children:c.jsxs(ot,{className:"p-4 text-center",children:[c.jsx(W0,{className:"h-5 w-5 mx-auto mb-2 text-primary"}),c.jsx("p",{className:"text-2xl font-bold",children:i.score.toLocaleString()}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Score"})]})}),i.level&&c.jsx(Je,{className:"bg-muted/50",children:c.jsxs(ot,{className:"p-4 text-center",children:[c.jsx(zs,{className:"h-5 w-5 mx-auto mb-2 text-yellow-500"}),c.jsx("p",{className:"text-2xl font-bold",children:i.level}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Level"})]})}),i.duration&&c.jsx(Je,{className:"bg-muted/50",children:c.jsxs(ot,{className:"p-4 text-center",children:[c.jsx(q8,{className:"h-5 w-5 mx-auto mb-2 text-blue-500"}),c.jsx("p",{className:"text-2xl font-bold",children:S(i.duration)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Duration"})]})}),m>0&&c.jsx(Je,{className:"bg-muted/50",children:c.jsxs(ot,{className:"p-4 text-center",children:[c.jsx(na,{className:"h-5 w-5 mx-auto mb-2 text-orange-500"}),c.jsx("p",{className:"text-2xl font-bold",children:m.toLocaleString()}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sats Zapped"})]})})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ix(i.event)&&c.jsxs(Pt,{variant:"secondary",className:"gap-1",children:[c.jsx(H0,{className:"h-3 w-3"}),"Test Data"]}),i.difficulty&&c.jsxs(Pt,{variant:"outline",children:[c.jsx(yv,{className:"h-3 w-3 mr-1"}),i.difficulty]}),i.mode&&c.jsxs(Pt,{variant:"outline",children:[c.jsx(ta,{className:"h-3 w-3 mr-1"}),i.mode]}),i.platform&&c.jsx(Pt,{variant:"outline",children:i.platform}),i.version&&c.jsxs(Pt,{variant:"outline",children:["v",i.version]}),i.state&&i.state!=="active"&&c.jsx(Pt,{variant:i.state==="verified"?"default":"destructive",children:i.state})]}),i.achievements&&i.achievements.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(yv,{className:"h-4 w-4"}),"Achievements Unlocked"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:i.achievements.map(N=>c.jsx(Pt,{variant:"secondary",children:N},N))})]}),i.genres&&i.genres.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:i.genres.map(N=>c.jsx(Pt,{variant:"outline",children:N},N))})]})]}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsxs(Rn,{className:"flex items-center gap-2",children:[c.jsx(Xa,{className:"h-5 w-5"}),"Comments"]})}),c.jsx(ot,{children:c.jsx(Oq,{root:i.event})})]})]})})}function $q(){var S,v;const{pubkey:t}=sp(),[e,n]=y.useState("all-time"),s=(S=Vr(t||"").data)==null?void 0:S.metadata,i=(s==null?void 0:s.name)||mi(t||""),{data:l,isLoading:u}=mH(t||"",{period:e,limit:500}),{getGame:f}=vp(),h=y.useMemo(()=>{if(!l)return[];const b=new Map;return l.forEach(N=>{const _=`${N.event.pubkey}:${N.gameIdentifier}`,T=b.get(_);T?(T.scores.push(N),T.topScore=Math.max(T.topScore,N.score),T.totalScores++,T.latestTimestamp=Math.max(T.latestTimestamp,N.event.created_at)):b.set(_,{gameKey:_,pubkey:N.event.pubkey,gameIdentifier:N.gameIdentifier,scores:[N],topScore:N.score,totalScores:1,averageScore:N.score,latestTimestamp:N.event.created_at})}),b.forEach(N=>{const _=N.scores.reduce((T,M)=>T+M.score,0);N.averageScore=Math.round(_/N.scores.length)}),Array.from(b.values()).sort((N,_)=>_.latestTimestamp-N.latestTimestamp)},[l]),m=h.length,p=(l==null?void 0:l.length)||0,x=l&&l.length>0?Math.max(...l.map(b=>b.score)):0,w=new Set(l==null?void 0:l.flatMap(b=>b.achievements||[])).size;return t?c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[c.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 via-pink-600/20 to-blue-600/20 border-b",children:c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center",children:[c.jsxs(Qs,{className:"h-24 w-24 border-4 border-background shadow-xl",children:[c.jsx(Zs,{src:s==null?void 0:s.picture,alt:i}),c.jsx(Xs,{className:"text-3xl",children:(v=i[0])==null?void 0:v.toUpperCase()})]}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:i}),(s==null?void 0:s.about)&&c.jsx("p",{className:"text-muted-foreground max-w-2xl",children:s.about}),(s==null?void 0:s.nip05)&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(z0,{className:"h-4 w-4"}),s.nip05]})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx(Le,{variant:"outline",asChild:!0,children:c.jsx(Ft,{to:"/",children:"Back to Games"})})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx(ta,{className:"h-8 w-8 mx-auto text-primary"}),c.jsx("p",{className:"text-2xl font-bold",children:m}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Games Played"})]})})}),c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx(W0,{className:"h-8 w-8 mx-auto text-blue-500"}),c.jsx("p",{className:"text-2xl font-bold",children:p}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Scores"})]})})}),c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx(zs,{className:"h-8 w-8 mx-auto text-yellow-500"}),c.jsx("p",{className:"text-2xl font-bold",children:x.toLocaleString()}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Best Score"})]})})}),c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx(G8,{className:"h-8 w-8 mx-auto text-green-500"}),c.jsx("p",{className:"text-2xl font-bold",children:w}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Achievements"})]})})})]})]})}),c.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(Fu,{value:e,onValueChange:b=>n(b),children:c.jsxs(Gl,{children:[c.jsx(yn,{value:"daily",children:"Daily"}),c.jsx(yn,{value:"weekly",children:"Weekly"}),c.jsx(yn,{value:"monthly",children:"Monthly"}),c.jsx(yn,{value:"all-time",children:"All Time"})]})})}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsx(Rn,{children:"Games & Scores"})}),c.jsx(ot,{children:u?c.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((b,N)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Ct,{className:"h-16 w-16 rounded"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(Ct,{className:"h-4 w-32"}),c.jsx(Ct,{className:"h-3 w-24"})]}),c.jsx(Ct,{className:"h-6 w-20"})]},N))}):h.length>0?c.jsx("div",{className:"space-y-4",children:h.map(b=>{const N=f(b.pubkey,b.gameIdentifier);return c.jsxs(Ft,{to:`/game/${b.pubkey}/${b.gameIdentifier}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsx("div",{className:"h-16 w-16 rounded overflow-hidden bg-muted flex-shrink-0",children:c.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold truncate",children:N.name}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsxs("span",{children:[b.totalScores," scores"]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Avg: ",b.averageScore.toLocaleString()]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(zs,{className:"h-4 w-4 text-yellow-500"}),c.jsx("span",{className:"text-xl font-bold",children:b.topScore.toLocaleString()})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:bu(b.latestTimestamp*1e3,{addSuffix:!0})})]})]},b.gameKey)})}):c.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[c.jsx(ta,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No scores found for this time period"})]})})]}),l&&l.length>0&&c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsx(Rn,{children:"Recent Scores"})}),c.jsx(ot,{children:c.jsx("div",{className:"space-y-3",children:l.slice(0,10).map(b=>{const N=f(b.event.pubkey,b.gameIdentifier);return c.jsxs(Ft,{to:`/score/${b.event.id}`,className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors group",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[c.jsx("div",{className:"h-10 w-10 rounded overflow-hidden bg-background flex-shrink-0",children:c.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"font-medium truncate group-hover:text-primary transition-colors",children:N.name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:bu(b.event.created_at*1e3,{addSuffix:!0})})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[b.difficulty&&c.jsx(Pt,{variant:"outline",className:"hidden sm:inline-flex",children:b.difficulty}),c.jsx("span",{className:"text-lg font-bold",children:b.score.toLocaleString()})]})]},b.event.id)})})})]})]})]}):c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsx(Je,{children:c.jsx(ot,{className:"py-12 text-center",children:c.jsx("p",{className:"text-muted-foreground",children:"Player not found"})})})})}function Bq(){const[t,e]=y.useState(null),n=(l,u)=>{navigator.clipboard.writeText(l),e(u),setTimeout(()=>e(null),2e3)},r=`{
  "kind": 30762,
  "pubkey": "your-game-developer-pubkey",
  "created_at": ${Math.floor(Date.now()/1e3)},
  "content": "New high score achieved!",
  "tags": [
    ["d", "my-awesome-game:player-pubkey:level-12"],
    ["game", "my-awesome-game"],
    ["score", "15000"],
    ["p", "player-pubkey"],
    ["state", "active"],
    ["level", "12"],
    ["difficulty", "hard"],
    ["mode", "single-player"],
    ["duration", "180"],
    ["t", "arcade"],
    ["t", "casual"]
  ]
}`,s=`import { SimplePool, getPublicKey, finalizeEvent } from 'nostr-tools';

// Initialize Nostr connection
const pool = new SimplePool();
const relays = ['wss://relay.nostr.band', 'wss://relay.damus.io'];

// Your game's private key (keep this secret!)
const gamePrivateKey = 'your-game-private-key-hex';
const gamePubkey = getPublicKey(gamePrivateKey);

// Function to publish a score
async function publishScore(playerPubkey, score, metadata = {}) {
  const event = {
    kind: 30762,
    created_at: Math.floor(Date.now() / 1000),
    content: metadata.message || 'New score achieved!',
    tags: [
      ['d', \`my-awesome-game:\${playerPubkey}:\${metadata.level || 'default'}\`],
      ['game', 'my-awesome-game'],
      ['score', score.toString()],
      ['p', playerPubkey],
      ['state', 'active'], // Score state
      ['t', 'arcade'], // Genre tag
    ],
  };

  // Add optional metadata
  if (metadata.level) event.tags.push(['level', metadata.level.toString()]);
  if (metadata.difficulty) event.tags.push(['difficulty', metadata.difficulty]);
  if (metadata.mode) event.tags.push(['mode', metadata.mode]);
  if (metadata.duration) event.tags.push(['duration', metadata.duration.toString()]);
  if (metadata.achievements) event.tags.push(['achievements', metadata.achievements.join(',')]);

  // Sign and publish
  const signedEvent = finalizeEvent(event, gamePrivateKey);
  await Promise.any(pool.publish(relays, signedEvent));
  
  console.log('Score published!', signedEvent.id);
  return signedEvent;
}

// Example usage
publishScore('player-pubkey-here', 15000, {
  level: 12,
  difficulty: 'hard',
  duration: 180,
  achievements: ['speed-demon', 'perfectionist']
});`,i=`import time
import json
from nostr.key import PrivateKey
from nostr.event import Event, EventKind
from nostr.relay_manager import RelayManager

# Your game's private key
private_key = PrivateKey.from_nsec("your-nsec-here")

# Initialize relay manager
relay_manager = RelayManager()
relay_manager.add_relay("wss://relay.nostr.band")
relay_manager.add_relay("wss://relay.damus.io")

def publish_score(player_pubkey, score, **metadata):
    """Publish a game score to Nostr"""
    
    # Create base tags
    tags = [
        ["d", f"my-game:{int(time.time())}:{hash(time.time())}"],
        ["game", "my-awesome-game"],
        ["score", str(score)],
        ["p", player_pubkey],
        ["t", "arcade"],  # Genre tag
    ]
    
    # Add optional metadata
    if "level" in metadata:
        tags.append(["level", str(metadata["level"])])
    if "difficulty" in metadata:
        tags.append(["difficulty", metadata["difficulty"]])
    if "mode" in metadata:
        tags.append(["mode", metadata["mode"]])
    if "duration" in metadata:
        tags.append(["duration", str(metadata["duration"])])
    
    # Create and sign event
    event = Event(
        kind=30762,
        content=metadata.get("message", "New score achieved!"),
        tags=tags,
        public_key=private_key.public_key.hex()
    )
    private_key.sign_event(event)
    
    # Publish to relays
    relay_manager.publish_event(event)
    print(f"Score published! Event ID: {event.id}")
    return event

# Example usage
publish_score(
    "player-pubkey-here",
    15000,
    level=12,
    difficulty="hard",
    duration=180
)`;return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[c.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 text-white",children:c.jsx("div",{className:"container mx-auto px-4 py-16 md:py-24",children:c.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[c.jsx(Pt,{className:"bg-white/20 backdrop-blur-sm text-white border-white/30",children:"For Developers"}),c.jsx("h1",{className:"text-4xl md:text-6xl font-bold",children:"Integrate Gamestr Into Your Games"}),c.jsx("p",{className:"text-xl text-white/90",children:"Add decentralized leaderboards to your games with just a few lines of code. Reach players across the Nostr network."}),c.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[c.jsx(Le,{size:"lg",variant:"secondary",asChild:!0,children:c.jsx("a",{href:"#quick-start",children:"Get Started"})}),c.jsx(Le,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 hover:bg-white/20",asChild:!0,children:c.jsx(Ft,{to:"/playground",children:"Try Playground"})})]})]})})}),c.jsxs("div",{className:"container mx-auto px-4 py-12 space-y-12",children:[c.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[c.jsxs(Je,{children:[c.jsxs(cn,{children:[c.jsx(na,{className:"h-8 w-8 text-yellow-500 mb-2"}),c.jsx(Rn,{children:"Easy Integration"})]}),c.jsx(ot,{children:c.jsx("p",{className:"text-muted-foreground",children:"Simple API with just a few lines of code. Works with any programming language."})})]}),c.jsxs(Je,{children:[c.jsxs(cn,{children:[c.jsx(Yf,{className:"h-8 w-8 text-green-500 mb-2"}),c.jsx(Rn,{children:"Decentralized"})]}),c.jsx(ot,{children:c.jsx("p",{className:"text-muted-foreground",children:"No central server required. Scores are published directly to the Nostr network."})})]}),c.jsxs(Je,{children:[c.jsxs(cn,{children:[c.jsx(C8,{className:"h-8 w-8 text-blue-500 mb-2"}),c.jsx(Rn,{children:"Built-in Analytics"})]}),c.jsx(ot,{children:c.jsx("p",{className:"text-muted-foreground",children:"Track player engagement, top scores, and game activity automatically."})})]})]}),c.jsxs(Je,{id:"quick-start",children:[c.jsx(cn,{children:c.jsxs(Rn,{className:"flex items-center gap-2",children:[c.jsx(BC,{className:"h-5 w-5"}),"Quick Start Guide"]})}),c.jsx(ot,{className:"space-y-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-primary text-primary-foreground text-sm font-bold flex-shrink-0",children:"1"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold mb-1",children:"Create a Nostr Identity"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a Nostr keypair for your game. This will be used to sign score events. Keep your private key (nsec) secret!"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-primary text-primary-foreground text-sm font-bold flex-shrink-0",children:"2"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold mb-1",children:"Choose Your Game Identifier"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:'Pick a unique, lowercase, hyphenated identifier for your game (e.g., "super-puzzle-quest"). This will be used in the "game" tag of all score events.'})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-primary text-primary-foreground text-sm font-bold flex-shrink-0",children:"3"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold mb-1",children:"Publish Score Events"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"When a player achieves a score, create and publish a kind 30762 addressable event to Nostr relays. See code examples below."})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex items-center justify-center h-6 w-6 rounded-full bg-primary text-primary-foreground text-sm font-bold flex-shrink-0",children:"4"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold mb-1",children:"Add Game Metadata"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Submit your game's metadata (name, description, image, genres) to appear on Gamestr. You can do this through the playground or contact us."})]})]})]})})]}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsxs(Rn,{className:"flex items-center gap-2",children:[c.jsx($C,{className:"h-5 w-5"}),"Score Event Structure (Kind 30762)"]})}),c.jsxs(ot,{className:"space-y-4",children:[c.jsx("p",{className:"text-muted-foreground",children:"Score events use kind 30762 (addressable replaceable) and follow this structure:"}),c.jsxs("div",{className:"relative",children:[c.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:c.jsx("code",{children:r})}),c.jsx(Le,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>n(r,"example-event"),children:t==="example-event"?c.jsxs(c.Fragment,{children:[c.jsx(as,{className:"h-4 w-4 mr-1"}),"Copied!"]}):"Copy"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold",children:"Required Tags:"}),c.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"d"})," - Unique identifier (format: game:timestamp:random)"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"game"})," - Your game identifier"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"score"})," - The numeric score value"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"p"})," - Player's Nostr pubkey"]})]}),c.jsx("h4",{className:"font-semibold mt-4",children:"Optional Tags:"}),c.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"level"})," - Game level/stage"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"difficulty"})," - Difficulty level"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"mode"})," - Game mode"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"duration"})," - Time in seconds"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"achievements"})," - Comma-separated achievement IDs"]}),c.jsxs("li",{children:[c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"t"})," - Genre tags (can have multiple)"]})]})]})]})]}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsx(Rn,{children:"Code Examples"})}),c.jsx(ot,{children:c.jsxs(Fu,{defaultValue:"javascript",children:[c.jsxs(Gl,{className:"grid w-full grid-cols-2 max-w-md",children:[c.jsx(yn,{value:"javascript",children:"JavaScript"}),c.jsx(yn,{value:"python",children:"Python"})]}),c.jsxs(nl,{value:"javascript",className:"space-y-4",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Using ",c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"nostr-tools"})," library:"]}),c.jsxs("div",{className:"relative",children:[c.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:c.jsx("code",{children:s})}),c.jsx(Le,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>n(s,"js-example"),children:t==="js-example"?c.jsxs(c.Fragment,{children:[c.jsx(as,{className:"h-4 w-4 mr-1"}),"Copied!"]}):"Copy"})]})]}),c.jsxs(nl,{value:"python",className:"space-y-4",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Using ",c.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"python-nostr"})," library:"]}),c.jsxs("div",{className:"relative",children:[c.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-sm",children:c.jsx("code",{children:i})}),c.jsx(Le,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>n(i,"python-example"),children:t==="python-example"?c.jsxs(c.Fragment,{children:[c.jsx(as,{className:"h-4 w-4 mr-1"}),"Copied!"]}):"Copy"})]})]})]})})]}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsx(Rn,{children:"Best Practices"})}),c.jsx(ot,{children:c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(as,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Verify player identity:"})," Ensure players authenticate with their Nostr key before publishing scores"]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(as,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Use multiple relays:"})," Publish to 3-5 popular relays for better discoverability"]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(as,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Add genre tags:"}),' Use "t" tags to categorize your game for better filtering']})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(as,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Include metadata:"})," Add difficulty, mode, and level tags for richer leaderboards"]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx(as,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Keep keys secure:"})," Never expose your game's private key in client-side code"]})]})]})})]}),c.jsxs(Je,{children:[c.jsx(cn,{children:c.jsx(Rn,{children:"Resources"})}),c.jsx(ot,{children:c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsx(Le,{variant:"outline",className:"h-auto py-4 justify-start",asChild:!0,children:c.jsx(Ft,{to:"/playground",children:c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-semibold",children:"Event Playground"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Test score events in your browser"})]})})}),c.jsx(Le,{variant:"outline",className:"h-auto py-4 justify-start",asChild:!0,children:c.jsx("a",{href:"https://github.com/nostr-protocol/nips",target:"_blank",rel:"noopener noreferrer",children:c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-semibold",children:"Nostr NIPs"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Official Nostr protocol specs"})]})})}),c.jsx(Le,{variant:"outline",className:"h-auto py-4 justify-start",asChild:!0,children:c.jsx("a",{href:"https://nostr-resources.com",target:"_blank",rel:"noopener noreferrer",children:c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-semibold",children:"Nostr Resources"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Libraries and tools"})]})})}),c.jsx(Le,{variant:"outline",className:"h-auto py-4 justify-start",asChild:!0,children:c.jsx(Ft,{to:"/",children:c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-semibold",children:"Browse Games"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"See games using Gamestr"})]})})})]})})]})]})]})}function Fq(){const{user:t}=no(),{toast:e}=ui(),{mutate:n,isPending:r}=np(),[s,i]=y.useState({gameIdentifier:"test-game",playerPubkey:"",score:"1000",level:"",difficulty:"",mode:"",duration:"",achievements:"",content:"Test score from Gamestr playground!",genres:[]}),[l,u]=y.useState(null),f=p=>{if(p.preventDefault(),!t){e({title:"Login Required",description:"Please log in to publish test events",variant:"destructive"});return}const x=[["d",`${s.gameIdentifier}:${Date.now()}:${Math.random().toString(36).substring(7)}`],["game",s.gameIdentifier],["score",s.score],["p",s.playerPubkey||t.pubkey]];s.level&&x.push(["level",s.level]),s.difficulty&&x.push(["difficulty",s.difficulty]),s.mode&&x.push(["mode",s.mode]),s.duration&&x.push(["duration",s.duration]),s.achievements&&x.push(["achievements",s.achievements]),s.genres.forEach(w=>{x.push(["t",w])}),x.push(["t","test"]),n({kind:30762,content:s.content,tags:x},{onSuccess:w=>{u(w.id),e({title:"Score Published!",description:"Your test score event has been published to Nostr"})},onError:w=>{e({title:"Publish Failed",description:w.message,variant:"destructive"})}})},h=p=>{i(x=>({...x,genres:x.genres.includes(p)?x.genres.filter(w=>w!==p):[...x.genres,p]}))},m=`{
  "kind": 762,
  "pubkey": "${(t==null?void 0:t.pubkey)||"your-pubkey"}",
  "created_at": ${Math.floor(Date.now()/1e3)},
  "content": "${s.content}",
  "tags": [
    ["d", "${s.gameIdentifier}:${Date.now()}:xxx"],
    ["game", "${s.gameIdentifier}"],
    ["score", "${s.score}"],
    ["p", "${s.playerPubkey||(t==null?void 0:t.pubkey)||"player-pubkey"}"]${s.level?`,
    ["level", "${s.level}"]`:""}${s.difficulty?`,
    ["difficulty", "${s.difficulty}"]`:""}${s.mode?`,
    ["mode", "${s.mode}"]`:""}${s.duration?`,
    ["duration", "${s.duration}"]`:""}${s.achievements?`,
    ["achievements", "${s.achievements}"]`:""}${s.genres.map(p=>`,
    ["t", "${p}"]`).join("")},
    ["t", "test"]
  ]
}`;return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[c.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 via-pink-600/20 to-blue-600/20 border-b",children:c.jsx("div",{className:"container mx-auto px-4 py-12",children:c.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[c.jsx(Pt,{variant:"secondary",children:"Developer Tool"}),c.jsx("h1",{className:"text-4xl md:text-5xl font-bold",children:"Event Playground"}),c.jsx("p",{className:"text-lg text-muted-foreground",children:"Test kind 30762 score events in your browser. Perfect for developers integrating Gamestr."})]})})}),c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-8",children:[c.jsxs(Je,{children:[c.jsxs(cn,{children:[c.jsx(Rn,{children:"Create Test Score Event"}),c.jsx(Dv,{children:"Fill in the fields below to generate and publish a test score event"})]}),c.jsx(ot,{children:t?c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"gameIdentifier",children:"Game Identifier *"}),c.jsx(En,{id:"gameIdentifier",value:s.gameIdentifier,onChange:p=>i({...s,gameIdentifier:p.target.value}),placeholder:"my-awesome-game",required:!0}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lowercase, hyphenated identifier for your game"})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"score",children:"Score *"}),c.jsx(En,{id:"score",type:"number",value:s.score,onChange:p=>i({...s,score:p.target.value}),placeholder:"1000",required:!0})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"playerPubkey",children:"Player Pubkey"}),c.jsx(En,{id:"playerPubkey",value:s.playerPubkey,onChange:p=>i({...s,playerPubkey:p.target.value}),placeholder:t.pubkey}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to use your own pubkey"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"level",children:"Level"}),c.jsx(En,{id:"level",value:s.level,onChange:p=>i({...s,level:p.target.value}),placeholder:"12"})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"difficulty",children:"Difficulty"}),c.jsx(En,{id:"difficulty",value:s.difficulty,onChange:p=>i({...s,difficulty:p.target.value}),placeholder:"hard"})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"mode",children:"Mode"}),c.jsx(En,{id:"mode",value:s.mode,onChange:p=>i({...s,mode:p.target.value}),placeholder:"single-player"})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"duration",children:"Duration (seconds)"}),c.jsx(En,{id:"duration",type:"number",value:s.duration,onChange:p=>i({...s,duration:p.target.value}),placeholder:"180"})]})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"achievements",children:"Achievements"}),c.jsx(En,{id:"achievements",value:s.achievements,onChange:p=>i({...s,achievements:p.target.value}),placeholder:"speed-demon,perfectionist"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Comma-separated achievement IDs"})]}),c.jsxs("div",{children:[c.jsx(Fn,{children:"Genres (select multiple)"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:VP.filter(p=>p!=="uncategorized").slice(0,12).map(p=>c.jsx(Pt,{variant:s.genres.includes(p)?"default":"outline",className:"cursor-pointer",onClick:()=>h(p),children:p},p))})]}),c.jsxs("div",{children:[c.jsx(Fn,{htmlFor:"content",children:"Content"}),c.jsx(ha,{id:"content",value:s.content,onChange:p=>i({...s,content:p.target.value}),placeholder:"Description of this score achievement",rows:3})]}),c.jsxs(Le,{type:"submit",className:"w-full",disabled:r,children:[c.jsx(z8,{className:"mr-2 h-4 w-4"}),r?"Publishing...":"Publish Test Event"]}),l&&c.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[c.jsx(as,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-green-500 mb-1",children:"Event Published!"}),c.jsxs("p",{className:"text-sm text-muted-foreground break-all",children:["Event ID: ",l]})]})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted rounded-lg",children:[c.jsx(T8,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium mb-1",children:"Login Required"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"You need to log in with Nostr to publish test events"})]})]}),c.jsx(Rx,{className:"w-full"})]})})]}),c.jsxs(Je,{children:[c.jsxs(cn,{children:[c.jsx(Rn,{children:"Event Preview"}),c.jsx(Dv,{children:"This is what your score event will look like"})]}),c.jsxs(ot,{children:[c.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-xs",children:c.jsx("code",{children:m})}),c.jsxs("div",{className:"mt-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold mb-2",children:"About Test Events"}),c.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsx("li",{children:' Test events are tagged with "t": "test"'}),c.jsx("li",{children:" They appear in the playground but can be filtered out"}),c.jsx("li",{children:" Use this to validate your integration before going live"}),c.jsx("li",{children:" Events are published to your configured relays"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Next Steps"}),c.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsx("li",{children:" View your published scores in the main feed"}),c.jsx("li",{children:" Check the developer guide for integration code"}),c.jsx("li",{children:" Submit your game metadata to appear on Gamestr"})]})]})]})]})]})]})})]})}function Uq(t,e={},n){t.use(nM);function r(l){if(l._flatMeta)return l;const{title:u,titleTemplate:f,...h}=l||{};return{title:u,titleTemplate:f,_flatMeta:h}}const s=t.push(r(e),n),i=s.patch;return s.__patched||(s.patch=l=>i(r(l)),s.__patched=!0),s}function zq(){const t=y.useContext(cN);if(!t)throw new Error("useHead() was called without provide context.");return t}function Wq(t,e,n){const r=e.head||zq(),[s]=y.useState(()=>n(r,t,e));return y.useEffect(()=>{s.patch(t)},[t]),y.useEffect(()=>()=>{s.dispose()},[]),s}function BR(t={},e={}){return Wq(t,e,Uq)}function qv(t,[e,n]){return Math.min(n,Math.max(e,t))}function Hq(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Fx="ScrollArea",[FR,RG]=Mn(Fx),[Vq,_r]=FR(Fx),UR=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...l}=t,[u,f]=y.useState(null),[h,m]=y.useState(null),[p,x]=y.useState(null),[w,S]=y.useState(null),[v,b]=y.useState(null),[N,_]=y.useState(0),[T,M]=y.useState(0),[D,B]=y.useState(!1),[O,F]=y.useState(!1),R=it(e,A=>f(A)),L=ql(s);return c.jsx(Vq,{scope:n,type:r,dir:L,scrollHideDelay:i,scrollArea:u,viewport:h,onViewportChange:m,content:p,onContentChange:x,scrollbarX:w,onScrollbarXChange:S,scrollbarXEnabled:D,onScrollbarXEnabledChange:B,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:O,onScrollbarYEnabledChange:F,onCornerWidthChange:_,onCornerHeightChange:M,children:c.jsx(Ae.div,{dir:L,...l,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":T+"px",...t.style}})})});UR.displayName=Fx;var zR="ScrollAreaViewport",WR=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,l=_r(zR,n),u=y.useRef(null),f=it(e,u,l.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...i,ref:f,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});WR.displayName=zR;var bs="ScrollAreaScrollbar",Ux=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=_r(bs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=s,u=t.orientation==="horizontal";return y.useEffect(()=>(u?i(!0):l(!0),()=>{u?i(!1):l(!1)}),[u,i,l]),s.type==="hover"?c.jsx(qq,{...r,ref:e,forceMount:n}):s.type==="scroll"?c.jsx(Kq,{...r,ref:e,forceMount:n}):s.type==="auto"?c.jsx(HR,{...r,ref:e,forceMount:n}):s.type==="always"?c.jsx(zx,{...r,ref:e}):null});Ux.displayName=bs;var qq=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=_r(bs,t.__scopeScrollArea),[i,l]=y.useState(!1);return y.useEffect(()=>{const u=s.scrollArea;let f=0;if(u){const h=()=>{window.clearTimeout(f),l(!0)},m=()=>{f=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(vn,{present:n||i,children:c.jsx(HR,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Kq=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=_r(bs,t.__scopeScrollArea),i=t.orientation==="horizontal",l=Ep(()=>f("SCROLL_END"),100),[u,f]=Hq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>f("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,s.scrollHideDelay,f]),y.useEffect(()=>{const h=s.viewport,m=i?"scrollLeft":"scrollTop";if(h){let p=h[m];const x=()=>{const w=h[m];p!==w&&(f("SCROLL"),l()),p=w};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[s.viewport,i,f,l]),c.jsx(vn,{present:n||u!=="hidden",children:c.jsx(zx,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Se(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Se(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),HR=y.forwardRef((t,e)=>{const n=_r(bs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,l]=y.useState(!1),u=t.orientation==="horizontal",f=Ep(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;l(u?h:m)}},10);return Il(n.viewport,f),Il(n.content,f),c.jsx(vn,{present:r||i,children:c.jsx(zx,{"data-state":i?"visible":"hidden",...s,ref:e})})}),zx=y.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=_r(bs,t.__scopeScrollArea),i=y.useRef(null),l=y.useRef(0),[u,f]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=YR(u.viewport,u.content),m={...r,sizes:u,onSizesChange:f,hasThumb:h>0&&h<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:x=>l.current=x};function p(x,w){return Jq(x,l.current,u,w)}return n==="horizontal"?c.jsx(Gq,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const x=s.viewport.scrollLeft,w=AS(x,u,s.dir);i.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollLeft=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollLeft=p(x,s.dir))}}):n==="vertical"?c.jsx(Yq,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const x=s.viewport.scrollTop,w=AS(x,u);i.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollTop=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollTop=p(x))}}):null}),Gq=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=_r(bs,t.__scopeScrollArea),[l,u]=y.useState(),f=y.useRef(null),h=it(e,f,i.onScrollbarXChange);return y.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),c.jsx(qR,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":bp(n)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,p)=>{if(i.viewport){const x=i.viewport.scrollLeft+m.deltaX;t.onWheelScroll(x),ZR(x,p)&&m.preventDefault()}},onResize:()=>{f.current&&i.viewport&&l&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:xh(l.paddingLeft),paddingEnd:xh(l.paddingRight)}})}})}),Yq=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=_r(bs,t.__scopeScrollArea),[l,u]=y.useState(),f=y.useRef(null),h=it(e,f,i.onScrollbarYChange);return y.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),c.jsx(qR,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":bp(n)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,p)=>{if(i.viewport){const x=i.viewport.scrollTop+m.deltaY;t.onWheelScroll(x),ZR(x,p)&&m.preventDefault()}},onResize:()=>{f.current&&i.viewport&&l&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:xh(l.paddingTop),paddingEnd:xh(l.paddingBottom)}})}})}),[Qq,VR]=FR(bs),qR=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:h,onWheelScroll:m,onResize:p,...x}=t,w=_r(bs,n),[S,v]=y.useState(null),b=it(e,R=>v(R)),N=y.useRef(null),_=y.useRef(""),T=w.viewport,M=r.content-r.viewport,D=Kt(m),B=Kt(f),O=Ep(p,10);function F(R){if(N.current){const L=R.clientX-N.current.left,A=R.clientY-N.current.top;h({x:L,y:A})}}return y.useEffect(()=>{const R=L=>{const A=L.target;(S==null?void 0:S.contains(A))&&D(L,M)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[T,S,M,D]),y.useEffect(B,[r,B]),Il(S,O),Il(w.content,O),c.jsx(Qq,{scope:n,scrollbar:S,hasThumb:s,onThumbChange:Kt(i),onThumbPointerUp:Kt(l),onThumbPositionChange:B,onThumbPointerDown:Kt(u),children:c.jsx(Ae.div,{...x,ref:b,style:{position:"absolute",...x.style},onPointerDown:Se(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),N.current=S.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),F(R))}),onPointerMove:Se(t.onPointerMove,F),onPointerUp:Se(t.onPointerUp,R=>{const L=R.target;L.hasPointerCapture(R.pointerId)&&L.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=_.current,w.viewport&&(w.viewport.style.scrollBehavior=""),N.current=null})})})}),vh="ScrollAreaThumb",KR=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=VR(vh,t.__scopeScrollArea);return c.jsx(vn,{present:n||s.hasThumb,children:c.jsx(Zq,{ref:e,...r})})}),Zq=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=_r(vh,n),l=VR(vh,n),{onThumbPositionChange:u}=l,f=it(e,p=>l.onThumbChange(p)),h=y.useRef(void 0),m=Ep(()=>{h.current&&(h.current(),h.current=void 0)},100);return y.useEffect(()=>{const p=i.viewport;if(p){const x=()=>{if(m(),!h.current){const w=eK(p,u);h.current=w,u()}};return u(),p.addEventListener("scroll",x),()=>p.removeEventListener("scroll",x)}},[i.viewport,m,u]),c.jsx(Ae.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Se(t.onPointerDownCapture,p=>{const w=p.target.getBoundingClientRect(),S=p.clientX-w.left,v=p.clientY-w.top;l.onThumbPointerDown({x:S,y:v})}),onPointerUp:Se(t.onPointerUp,l.onThumbPointerUp)})});KR.displayName=vh;var Wx="ScrollAreaCorner",GR=y.forwardRef((t,e)=>{const n=_r(Wx,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?c.jsx(Xq,{...t,ref:e}):null});GR.displayName=Wx;var Xq=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=_r(Wx,n),[i,l]=y.useState(0),[u,f]=y.useState(0),h=!!(i&&u);return Il(s.scrollbarX,()=>{var p;const m=((p=s.scrollbarX)==null?void 0:p.offsetHeight)||0;s.onCornerHeightChange(m),f(m)}),Il(s.scrollbarY,()=>{var p;const m=((p=s.scrollbarY)==null?void 0:p.offsetWidth)||0;s.onCornerWidthChange(m),l(m)}),h?c.jsx(Ae.div,{...r,ref:e,style:{width:i,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function xh(t){return t?parseInt(t,10):0}function YR(t,e){const n=t/e;return isNaN(n)?0:n}function bp(t){const e=YR(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Jq(t,e,n,r="ltr"){const s=bp(n),i=s/2,l=e||i,u=s-l,f=n.scrollbar.paddingStart+l,h=n.scrollbar.size-n.scrollbar.paddingEnd-u,m=n.content-n.viewport,p=r==="ltr"?[0,m]:[m*-1,0];return QR([f,h],p)(t)}function AS(t,e,n="ltr"){const r=bp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,l=e.content-e.viewport,u=i-r,f=n==="ltr"?[0,l]:[l*-1,0],h=qv(t,f);return QR([0,l],[0,u])(h)}function QR(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function ZR(t,e){return t>0&&t<e}var eK=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},l=n.left!==i.left,u=n.top!==i.top;(l||u)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Ep(t,e){const n=Kt(t),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Il(t,e){const n=Kt(e);Gt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var XR=UR,tK=WR,nK=GR;const Hx=y.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(XR,{ref:r,className:xe("relative overflow-hidden",t),...n,children:[c.jsx(tK,{className:"h-full w-full rounded-[inherit] [&>div]:!block [&>div]:!w-full",children:e}),c.jsx(JR,{}),c.jsx(nK,{})]}));Hx.displayName=XR.displayName;const JR=y.forwardRef(({className:t,orientation:e="vertical",...n},r)=>c.jsx(Ux,{ref:r,orientation:e,className:xe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:c.jsx(KR,{className:"relative flex-1 rounded-full bg-border"})}));JR.displayName=Ux.displayName;const rK=({pubkey:t,isSelected:e,onClick:n,lastMessage:r,lastActivity:s,hasNIP4Messages:i})=>{var w;const l=Vr(t),u=(w=l.data)==null?void 0:w.metadata,f=(u==null?void 0:u.name)||mi(t),h=u==null?void 0:u.picture,m=f.slice(0,2).toUpperCase(),p=r!=null&&r.error?" Encrypted message":(r==null?void 0:r.decryptedContent)||"No messages yet",x=l.isLoading&&!u;return c.jsx("button",{onClick:n,className:xe("w-full text-left p-3 rounded-lg transition-colors hover:bg-accent block overflow-hidden",e&&"bg-accent"),children:c.jsxs("div",{className:"flex items-start gap-3 max-w-full",children:[x?c.jsx(Ct,{className:"h-10 w-10 rounded-full flex-shrink-0"}):c.jsxs(Qs,{className:"h-10 w-10 flex-shrink-0",children:[c.jsx(Zs,{src:h,alt:f}),c.jsx(Xs,{children:m})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[x?c.jsx(Ct,{className:"h-[1.25rem] w-24"}):c.jsx("span",{className:"font-medium text-sm truncate",children:f}),i&&c.jsx(Gi,{children:c.jsxs(Oi,{children:[c.jsx(Di,{asChild:!0,children:c.jsx("div",{className:"flex-shrink-0",children:c.jsx(V0,{className:"h-3.5 w-3.5 text-yellow-600 dark:text-yellow-500"})})}),c.jsx(Yo,{side:"left",children:c.jsx("p",{className:"text-xs max-w-[200px]",children:"Some messages use outdated NIP-04 encryption"})})]})})]}),c.jsx(Gi,{children:c.jsxs(Oi,{children:[c.jsx(Di,{asChild:!0,children:c.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap flex-shrink-0 cursor-default",children:Oj(s)})}),c.jsx(Yo,{side:"left",children:c.jsx("p",{className:"text-xs",children:Dj(s)})})]})})]}),c.jsx("p",{className:"text-sm text-muted-foreground truncate",children:p})]})]})})},e4=y.memo(rK);e4.displayName="ConversationItem";const sK=()=>c.jsx("div",{className:"space-y-2 p-4",children:[1,2,3,4,5].map(t=>c.jsxs("div",{className:"flex items-start gap-3 p-3",children:[c.jsx(Ct,{className:"h-10 w-10 rounded-full flex-shrink-0"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Ct,{className:"h-4 w-24"}),c.jsx(Ct,{className:"h-3 w-12"})]}),c.jsx(Ct,{className:"h-3 w-full"})]})]},t))}),oK=({selectedPubkey:t,onSelectConversation:e,className:n,onStatusClick:r})=>{const{conversations:s,isLoading:i,loadingPhase:l}=Ou(),[u,f]=y.useState("known"),{knownConversations:h,requestConversations:m}=y.useMemo(()=>({knownConversations:s.filter(w=>w.isKnown),requestConversations:s.filter(w=>w.isRequest)}),[s]),p=u==="known"?h:m,x=(l===Bt.CACHE||l===Bt.RELAYS)&&s.length===0;return c.jsxs(Je,{className:xe("h-full flex flex-col overflow-hidden",n),children:[c.jsxs("div",{className:"p-4 border-b flex-shrink-0 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"font-semibold text-lg",children:"Messages"}),(l===Bt.CACHE||l===Bt.RELAYS||l===Bt.SUBSCRIPTIONS)&&c.jsx(Gi,{children:c.jsxs(Oi,{children:[c.jsx(Di,{asChild:!0,children:c.jsx("div",{className:"flex items-center",children:c.jsx(Jo,{className:"h-4 w-4 animate-spin text-muted-foreground"})})}),c.jsx(Yo,{children:c.jsxs("p",{className:"text-xs",children:[l===Bt.CACHE&&"Loading from cache...",l===Bt.RELAYS&&"Querying relays for new messages...",l===Bt.SUBSCRIPTIONS&&"Setting up subscriptions..."]})})]})})]}),r&&c.jsx(Le,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:r,"aria-label":"View messaging status",children:c.jsx(L8,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"px-2 pt-2 flex-shrink-0",children:c.jsxs("div",{className:"grid grid-cols-2 gap-1 bg-muted p-1 rounded-lg",children:[c.jsxs("button",{onClick:()=>f("known"),className:xe("text-xs py-2 px-3 rounded-md transition-colors",u==="known"?"bg-background shadow-sm font-medium":"text-muted-foreground hover:text-foreground"),children:["Active ",h.length>0&&`(${h.length})`]}),c.jsxs("button",{onClick:()=>f("requests"),className:xe("text-xs py-2 px-3 rounded-md transition-colors",u==="requests"?"bg-background shadow-sm font-medium":"text-muted-foreground hover:text-foreground"),children:["Requests ",m.length>0&&`(${m.length})`]})]})}),c.jsx("div",{className:"flex-1 min-h-0 mt-2 overflow-hidden",children:i||x?c.jsx(sK,{}):s.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-center text-muted-foreground px-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-sm",children:"No conversations yet"}),c.jsx("p",{className:"text-xs mt-1",children:"Start a new conversation to get started"})]})}):p.length===0?c.jsx("div",{className:"flex items-center justify-center h-32 text-center text-muted-foreground px-4",children:c.jsxs("p",{className:"text-sm",children:["No ",u," conversations"]})}):c.jsx(Hx,{className:"h-full block",children:c.jsx("div",{className:"block w-full px-2 py-2 space-y-1",children:p.map(w=>c.jsx(e4,{pubkey:w.pubkey,isSelected:t===w.pubkey,onClick:()=>e(w.pubkey),lastMessage:w.lastMessage,lastActivity:w.lastActivity,hasNIP4Messages:w.hasNIP4Messages},w.pubkey))})})})]})};var iK=[" ","Enter","ArrowUp","ArrowDown"],aK=[" ","Enter"],la="Select",[Sp,Np,lK]=Bh(la),[Yl,AG]=Mn(la,[lK,di]),kp=di(),[cK,yi]=Yl(la),[uK,dK]=Yl(la),t4=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:l,defaultValue:u,onValueChange:f,dir:h,name:m,autoComplete:p,disabled:x,required:w,form:S}=t,v=kp(e),[b,N]=y.useState(null),[_,T]=y.useState(null),[M,D]=y.useState(!1),B=ql(h),[O,F]=nr({prop:r,defaultProp:s??!1,onChange:i,caller:la}),[R,L]=nr({prop:l,defaultProp:u,onChange:f,caller:la}),A=y.useRef(null),U=b?S||!!b.closest("form"):!0,[K,H]=y.useState(new Set),V=Array.from(K).map(Q=>Q.props.value).join(";");return c.jsx(Qh,{...v,children:c.jsxs(cK,{required:w,scope:e,trigger:b,onTriggerChange:N,valueNode:_,onValueNodeChange:T,valueNodeHasChildren:M,onValueNodeHasChildrenChange:D,contentId:dn(),value:R,onValueChange:L,open:O,onOpenChange:F,dir:B,triggerPointerDownPosRef:A,disabled:x,children:[c.jsx(Sp.Provider,{scope:e,children:c.jsx(uK,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(Q=>{H(te=>new Set(te).add(Q))},[]),onNativeOptionRemove:y.useCallback(Q=>{H(te=>{const Z=new Set(te);return Z.delete(Q),Z})},[]),children:n})}),U?c.jsxs(k4,{"aria-hidden":!0,required:w,tabIndex:-1,name:m,autoComplete:p,value:R,onChange:Q=>L(Q.target.value),disabled:x,form:S,children:[R===void 0?c.jsx("option",{value:""}):null,Array.from(K)]},V):null]})})};t4.displayName=la;var n4="SelectTrigger",r4=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=kp(n),l=yi(n4,n),u=l.disabled||r,f=it(e,l.onTriggerChange),h=Np(n),m=y.useRef("touch"),[p,x,w]=j4(v=>{const b=h().filter(T=>!T.disabled),N=b.find(T=>T.value===l.value),_=_4(b,v,N);_!==void 0&&l.onValueChange(_.value)}),S=v=>{u||(l.onOpenChange(!0),w()),v&&(l.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return c.jsx(Mu,{asChild:!0,...i,children:c.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":C4(l.value)?"":void 0,...s,ref:f,onClick:Se(s.onClick,v=>{v.currentTarget.focus(),m.current!=="mouse"&&S(v)}),onPointerDown:Se(s.onPointerDown,v=>{m.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(S(v),v.preventDefault())}),onKeyDown:Se(s.onKeyDown,v=>{const b=p.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&x(v.key),!(b&&v.key===" ")&&iK.includes(v.key)&&(S(),v.preventDefault())})})})});r4.displayName=n4;var s4="SelectValue",o4=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:l="",...u}=t,f=yi(s4,n),{onValueNodeHasChildrenChange:h}=f,m=i!==void 0,p=it(e,f.onValueNodeChange);return Gt(()=>{h(m)},[h,m]),c.jsx(Ae.span,{...u,ref:p,style:{pointerEvents:"none"},children:C4(f.value)?c.jsx(c.Fragment,{children:l}):i})});o4.displayName=s4;var fK="SelectIcon",i4=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(Ae.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});i4.displayName=fK;var hK="SelectPortal",a4=t=>c.jsx(Bl,{asChild:!0,...t});a4.displayName=hK;var ca="SelectContent",l4=y.forwardRef((t,e)=>{const n=yi(ca,t.__scopeSelect),[r,s]=y.useState();if(Gt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?$l.createPortal(c.jsx(c4,{scope:t.__scopeSelect,children:c.jsx(Sp.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),i):null}return c.jsx(u4,{...t,ref:e})});l4.displayName=ca;var Lr=10,[c4,vi]=Yl(ca),pK="SelectContentImpl",mK=si("SelectContent.RemoveScroll"),u4=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:u,sideOffset:f,align:h,alignOffset:m,arrowPadding:p,collisionBoundary:x,collisionPadding:w,sticky:S,hideWhenDetached:v,avoidCollisions:b,...N}=t,_=yi(ca,n),[T,M]=y.useState(null),[D,B]=y.useState(null),O=it(e,ce=>M(ce)),[F,R]=y.useState(null),[L,A]=y.useState(null),U=Np(n),[K,H]=y.useState(!1),V=y.useRef(!1);y.useEffect(()=>{if(T)return ap(T)},[T]),op();const Q=y.useCallback(ce=>{const[ge,...be]=U().map(Qe=>Qe.ref.current),[De]=be.slice(-1),Ze=document.activeElement;for(const Qe of ce)if(Qe===Ze||(Qe==null||Qe.scrollIntoView({block:"nearest"}),Qe===ge&&D&&(D.scrollTop=0),Qe===De&&D&&(D.scrollTop=D.scrollHeight),Qe==null||Qe.focus(),document.activeElement!==Ze))return},[U,D]),te=y.useCallback(()=>Q([F,T]),[Q,F,T]);y.useEffect(()=>{K&&te()},[K,te]);const{onOpenChange:Z,triggerPointerDownPosRef:G}=_;y.useEffect(()=>{if(T){let ce={x:0,y:0};const ge=De=>{var Ze,Qe;ce={x:Math.abs(Math.round(De.pageX)-(((Ze=G.current)==null?void 0:Ze.x)??0)),y:Math.abs(Math.round(De.pageY)-(((Qe=G.current)==null?void 0:Qe.y)??0))}},be=De=>{ce.x<=10&&ce.y<=10?De.preventDefault():T.contains(De.target)||Z(!1),document.removeEventListener("pointermove",ge),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",be,{capture:!0})}}},[T,Z,G]),y.useEffect(()=>{const ce=()=>Z(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[Z]);const[ne,z]=j4(ce=>{const ge=U().filter(Ze=>!Ze.disabled),be=ge.find(Ze=>Ze.ref.current===document.activeElement),De=_4(ge,ce,be);De&&setTimeout(()=>De.ref.current.focus())}),W=y.useCallback((ce,ge,be)=>{const De=!V.current&&!be;(_.value!==void 0&&_.value===ge||De)&&(R(ce),De&&(V.current=!0))},[_.value]),ae=y.useCallback(()=>T==null?void 0:T.focus(),[T]),de=y.useCallback((ce,ge,be)=>{const De=!V.current&&!be;(_.value!==void 0&&_.value===ge||De)&&A(ce)},[_.value]),fe=r==="popper"?Kv:d4,we=fe===Kv?{side:u,sideOffset:f,align:h,alignOffset:m,arrowPadding:p,collisionBoundary:x,collisionPadding:w,sticky:S,hideWhenDetached:v,avoidCollisions:b}:{};return c.jsx(c4,{scope:n,content:T,viewport:D,onViewportChange:B,itemRefCallback:W,selectedItem:F,onItemLeave:ae,itemTextRefCallback:de,focusSelectedItem:te,selectedItemText:L,position:r,isPositioned:K,searchRef:ne,children:c.jsx($u,{as:mK,allowPinchZoom:!0,children:c.jsx(Lu,{asChild:!0,trapped:_.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Se(s,ce=>{var ge;(ge=_.trigger)==null||ge.focus({preventScroll:!0}),ce.preventDefault()}),children:c.jsx(da,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:c.jsx(fe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ce=>ce.preventDefault(),...N,...we,onPlaced:()=>H(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Se(N.onKeyDown,ce=>{const ge=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ge&&ce.key.length===1&&z(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let De=U().filter(Ze=>!Ze.disabled).map(Ze=>Ze.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Ze=ce.target,Qe=De.indexOf(Ze);De=De.slice(Qe+1)}setTimeout(()=>Q(De)),ce.preventDefault()}})})})})})})});u4.displayName=pK;var gK="SelectItemAlignedPosition",d4=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=yi(ca,n),l=vi(ca,n),[u,f]=y.useState(null),[h,m]=y.useState(null),p=it(e,O=>m(O)),x=Np(n),w=y.useRef(!1),S=y.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:N,focusSelectedItem:_}=l,T=y.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&v&&b&&N){const O=i.trigger.getBoundingClientRect(),F=h.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),L=N.getBoundingClientRect();if(i.dir!=="rtl"){const Ze=L.left-F.left,Qe=R.left-Ze,Te=O.left-Qe,yt=O.width+Te,tn=Math.max(yt,F.width),nn=window.innerWidth-Lr,xn=qv(Qe,[Lr,Math.max(Lr,nn-tn)]);u.style.minWidth=yt+"px",u.style.left=xn+"px"}else{const Ze=F.right-L.right,Qe=window.innerWidth-R.right-Ze,Te=window.innerWidth-O.right-Qe,yt=O.width+Te,tn=Math.max(yt,F.width),nn=window.innerWidth-Lr,xn=qv(Qe,[Lr,Math.max(Lr,nn-tn)]);u.style.minWidth=yt+"px",u.style.right=xn+"px"}const A=x(),U=window.innerHeight-Lr*2,K=v.scrollHeight,H=window.getComputedStyle(h),V=parseInt(H.borderTopWidth,10),Q=parseInt(H.paddingTop,10),te=parseInt(H.borderBottomWidth,10),Z=parseInt(H.paddingBottom,10),G=V+Q+K+Z+te,ne=Math.min(b.offsetHeight*5,G),z=window.getComputedStyle(v),W=parseInt(z.paddingTop,10),ae=parseInt(z.paddingBottom,10),de=O.top+O.height/2-Lr,fe=U-de,we=b.offsetHeight/2,ce=b.offsetTop+we,ge=V+Q+ce,be=G-ge;if(ge<=de){const Ze=A.length>0&&b===A[A.length-1].ref.current;u.style.bottom="0px";const Qe=h.clientHeight-v.offsetTop-v.offsetHeight,Te=Math.max(fe,we+(Ze?ae:0)+Qe+te),yt=ge+Te;u.style.height=yt+"px"}else{const Ze=A.length>0&&b===A[0].ref.current;u.style.top="0px";const Te=Math.max(de,V+v.offsetTop+(Ze?W:0)+we)+be;u.style.height=Te+"px",v.scrollTop=ge-de+v.offsetTop}u.style.margin=`${Lr}px 0`,u.style.minHeight=ne+"px",u.style.maxHeight=U+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[x,i.trigger,i.valueNode,u,h,v,b,N,i.dir,r]);Gt(()=>T(),[T]);const[M,D]=y.useState();Gt(()=>{h&&D(window.getComputedStyle(h).zIndex)},[h]);const B=y.useCallback(O=>{O&&S.current===!0&&(T(),_==null||_(),S.current=!1)},[T,_]);return c.jsx(vK,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:w,onScrollButtonChange:B,children:c.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:c.jsx(Ae.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});d4.displayName=gK;var yK="SelectPopperPosition",Kv=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Lr,...i}=t,l=kp(n);return c.jsx(Zh,{...l,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kv.displayName=yK;var[vK,Vx]=Yl(ca,{}),Gv="SelectViewport",f4=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=vi(Gv,n),l=Vx(Gv,n),u=it(e,i.onViewportChange),f=y.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(Sp.Slot,{scope:n,children:c.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Se(s.onScroll,h=>{const m=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&p){const w=Math.abs(f.current-m.scrollTop);if(w>0){const S=window.innerHeight-Lr*2,v=parseFloat(p.style.minHeight),b=parseFloat(p.style.height),N=Math.max(v,b);if(N<S){const _=N+w,T=Math.min(S,_),M=_-T;p.style.height=T+"px",p.style.bottom==="0px"&&(m.scrollTop=M>0?M:0,p.style.justifyContent="flex-end")}}}f.current=m.scrollTop})})})]})});f4.displayName=Gv;var h4="SelectGroup",[xK,wK]=Yl(h4),bK=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=dn();return c.jsx(xK,{scope:n,id:s,children:c.jsx(Ae.div,{role:"group","aria-labelledby":s,...r,ref:e})})});bK.displayName=h4;var p4="SelectLabel",m4=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=wK(p4,n);return c.jsx(Ae.div,{id:s.id,...r,ref:e})});m4.displayName=p4;var wh="SelectItem",[EK,g4]=Yl(wh),y4=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...l}=t,u=yi(wh,n),f=vi(wh,n),h=u.value===r,[m,p]=y.useState(i??""),[x,w]=y.useState(!1),S=it(e,_=>{var T;return(T=f.itemRefCallback)==null?void 0:T.call(f,_,r,s)}),v=dn(),b=y.useRef("touch"),N=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(EK,{scope:n,value:r,disabled:s,textId:v,isSelected:h,onItemTextChange:y.useCallback(_=>{p(T=>T||((_==null?void 0:_.textContent)??"").trim())},[]),children:c.jsx(Sp.ItemSlot,{scope:n,value:r,disabled:s,textValue:m,children:c.jsx(Ae.div,{role:"option","aria-labelledby":v,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:S,onFocus:Se(l.onFocus,()=>w(!0)),onBlur:Se(l.onBlur,()=>w(!1)),onClick:Se(l.onClick,()=>{b.current!=="mouse"&&N()}),onPointerUp:Se(l.onPointerUp,()=>{b.current==="mouse"&&N()}),onPointerDown:Se(l.onPointerDown,_=>{b.current=_.pointerType}),onPointerMove:Se(l.onPointerMove,_=>{var T;b.current=_.pointerType,s?(T=f.onItemLeave)==null||T.call(f):b.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(l.onPointerLeave,_=>{var T;_.currentTarget===document.activeElement&&((T=f.onItemLeave)==null||T.call(f))}),onKeyDown:Se(l.onKeyDown,_=>{var M;((M=f.searchRef)==null?void 0:M.current)!==""&&_.key===" "||(aK.includes(_.key)&&N(),_.key===" "&&_.preventDefault())})})})})});y4.displayName=wh;var Qc="SelectItemText",v4=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,l=yi(Qc,n),u=vi(Qc,n),f=g4(Qc,n),h=dK(Qc,n),[m,p]=y.useState(null),x=it(e,N=>p(N),f.onItemTextChange,N=>{var _;return(_=u.itemTextRefCallback)==null?void 0:_.call(u,N,f.value,f.disabled)}),w=m==null?void 0:m.textContent,S=y.useMemo(()=>c.jsx("option",{value:f.value,disabled:f.disabled,children:w},f.value),[f.disabled,f.value,w]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=h;return Gt(()=>(v(S),()=>b(S)),[v,b,S]),c.jsxs(c.Fragment,{children:[c.jsx(Ae.span,{id:f.textId,...i,ref:x}),f.isSelected&&l.valueNode&&!l.valueNodeHasChildren?$l.createPortal(i.children,l.valueNode):null]})});v4.displayName=Qc;var x4="SelectItemIndicator",w4=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return g4(x4,n).isSelected?c.jsx(Ae.span,{"aria-hidden":!0,...r,ref:e}):null});w4.displayName=x4;var Yv="SelectScrollUpButton",b4=y.forwardRef((t,e)=>{const n=vi(Yv,t.__scopeSelect),r=Vx(Yv,t.__scopeSelect),[s,i]=y.useState(!1),l=it(e,r.onScrollButtonChange);return Gt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=f.scrollTop>0;i(h)};const f=n.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?c.jsx(S4,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=n;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});b4.displayName=Yv;var Qv="SelectScrollDownButton",E4=y.forwardRef((t,e)=>{const n=vi(Qv,t.__scopeSelect),r=Vx(Qv,t.__scopeSelect),[s,i]=y.useState(!1),l=it(e,r.onScrollButtonChange);return Gt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=f.scrollHeight-f.clientHeight,m=Math.ceil(f.scrollTop)<h;i(m)};const f=n.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?c.jsx(S4,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=n;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});E4.displayName=Qv;var S4=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=vi("SelectScrollButton",n),l=y.useRef(null),u=Np(n),f=y.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return y.useEffect(()=>()=>f(),[f]),Gt(()=>{var m;const h=u().find(p=>p.ref.current===document.activeElement);(m=h==null?void 0:h.ref.current)==null||m.scrollIntoView({block:"nearest"})},[u]),c.jsx(Ae.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Se(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Se(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Se(s.onPointerLeave,()=>{f()})})}),SK="SelectSeparator",N4=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(Ae.div,{"aria-hidden":!0,...r,ref:e})});N4.displayName=SK;var Zv="SelectArrow",NK=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=kp(n),i=yi(Zv,n),l=vi(Zv,n);return i.open&&l.position==="popper"?c.jsx(Xh,{...s,...r,ref:e}):null});NK.displayName=Zv;var kK="SelectBubbleInput",k4=y.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=y.useRef(null),i=it(r,s),l=qP(e);return y.useEffect(()=>{const u=s.current;if(!u)return;const f=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(f,"value").set;if(l!==e&&m){const p=new Event("change",{bubbles:!0});m.call(u,e),u.dispatchEvent(p)}},[l,e]),c.jsx(Ae.select,{...n,style:{...hC,...n.style},ref:i,defaultValue:e})});k4.displayName=kK;function C4(t){return t===""||t===void 0}function j4(t){const e=Kt(t),n=y.useRef(""),r=y.useRef(0),s=y.useCallback(l=>{const u=n.current+l;e(u),function f(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>f(""),1e3))}(u)},[e]),i=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function _4(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let l=CK(t,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==n));const f=l.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return f!==n?f:void 0}function CK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var jK=t4,T4=r4,_K=o4,TK=i4,PK=a4,P4=l4,RK=f4,R4=m4,A4=y4,AK=v4,IK=w4,I4=b4,M4=E4,O4=N4;const MK=jK,OK=_K,D4=y.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(T4,{ref:r,className:xe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,c.jsx(TK,{asChild:!0,children:c.jsx(Hh,{className:"h-4 w-4 opacity-50"})})]}));D4.displayName=T4.displayName;const L4=y.forwardRef(({className:t,...e},n)=>c.jsx(I4,{ref:n,className:xe("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(j8,{className:"h-4 w-4"})}));L4.displayName=I4.displayName;const $4=y.forwardRef(({className:t,...e},n)=>c.jsx(M4,{ref:n,className:xe("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(Hh,{className:"h-4 w-4"})}));$4.displayName=M4.displayName;const B4=y.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>c.jsx(PK,{children:c.jsxs(P4,{ref:s,className:xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(L4,{}),c.jsx(RK,{className:xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx($4,{})]})}));B4.displayName=P4.displayName;const DK=y.forwardRef(({className:t,...e},n)=>c.jsx(R4,{ref:n,className:xe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));DK.displayName=R4.displayName;const Xv=y.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(A4,{ref:r,className:xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(IK,{children:c.jsx(Wh,{className:"h-4 w-4"})})}),c.jsx(AK,{children:e})]}));Xv.displayName=A4.displayName;const LK=y.forwardRef(({className:t,...e},n)=>c.jsx(O4,{ref:n,className:xe("-mx-1 my-1 h-px bg-muted",t),...e}));LK.displayName=O4.displayName;const F4=y.memo(({message:t,isFromCurrentUser:e})=>{var l;const n=((l=t.decryptedEvent)==null?void 0:l.kind)||t.kind,r=t.kind===4,s=n===15,i=t.decryptedEvent||{id:t.id,pubkey:t.pubkey,created_at:t.created_at,kind:t.kind,tags:t.tags,content:t.decryptedContent||"",sig:""};return c.jsx("div",{className:xe("flex mb-4",e?"justify-end":"justify-start"),children:c.jsxs("div",{className:xe("max-w-[70%] rounded-lg px-4 py-2",e?"bg-primary text-primary-foreground":"bg-muted"),children:[t.error?c.jsxs(Oi,{delayDuration:200,children:[c.jsx(Di,{asChild:!0,children:c.jsx("p",{className:"text-sm italic opacity-70 cursor-help",children:" Failed to decrypt"})}),c.jsx(Yo,{children:c.jsx("p",{className:"text-xs",children:t.error})})]}):s?c.jsx("div",{className:"text-sm",children:c.jsx(IR,{event:i,className:"whitespace-pre-wrap break-words"})}):c.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:t.decryptedContent}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx(Gi,{children:c.jsxs(Oi,{delayDuration:200,children:[c.jsx(Di,{asChild:!0,children:c.jsx("span",{className:xe("text-xs opacity-70 cursor-default",e?"text-primary-foreground":"text-muted-foreground"),children:Oj(t.created_at)})}),c.jsx(Yo,{children:c.jsx("p",{className:"text-xs",children:Dj(t.created_at)})})]})}),c.jsx(Gi,{children:c.jsxs(Oi,{delayDuration:200,children:[c.jsx(Di,{asChild:!0,children:c.jsx("span",{className:xe("flex-shrink-0 opacity-50",e?"text-primary-foreground":"text-muted-foreground"),children:t.kind===4?c.jsx(Cf,{className:"h-3 w-3"}):c.jsx(W8,{className:"h-3 w-3"})})}),c.jsx(Yo,{children:c.jsxs("p",{className:"text-xs",children:[t.kind===4&&"NIP-04 Kind 4 (Legacy DM)",t.kind===14&&"NIP-17 Kind 14 (Private Message)",t.kind===15&&"NIP-17 Kind 15 (Media)",t.kind!==4&&t.kind!==14&&t.kind!==15&&`Kind ${t.kind}`]})})]})}),r&&c.jsx(Gi,{children:c.jsxs(Oi,{children:[c.jsx(Di,{asChild:!0,children:c.jsx("div",{className:"flex-shrink-0",children:c.jsx(V0,{className:"h-3 w-3 text-yellow-600 dark:text-yellow-500"})})}),c.jsx(Yo,{children:c.jsx("p",{className:"text-xs",children:"Uses outdated NIP-04 encryption"})})]})}),t.isSending&&c.jsx(Jo,{className:"h-3 w-3 animate-spin opacity-70"})]})]})})});F4.displayName="MessageBubble";const $K=({pubkey:t,onBack:e})=>{var u;const r=(u=Vr(t).data)==null?void 0:u.metadata,s=(r==null?void 0:r.name)||mi(t),i=r==null?void 0:r.picture,l=s.slice(0,2).toUpperCase();return c.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[e&&c.jsx(Le,{variant:"ghost",size:"icon",onClick:e,className:"md:hidden",children:c.jsx(zh,{className:"h-5 w-5"})}),c.jsxs(Qs,{className:"h-10 w-10",children:[c.jsx(Zs,{src:i,alt:s}),c.jsx(Xs,{children:l})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h2",{className:"font-semibold truncate",children:s}),(r==null?void 0:r.nip05)&&c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.nip05})]})]})},BK=({isLoading:t})=>c.jsx("div",{className:"h-full flex items-center justify-center p-8",children:c.jsx("div",{className:"text-center text-muted-foreground max-w-sm",children:t?c.jsxs(c.Fragment,{children:[c.jsx(Jo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-sm",children:"Loading conversations..."}),c.jsx("p",{className:"text-xs mt-2",children:"Fetching encrypted messages from relays"})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm",children:"Select a conversation to start messaging"}),c.jsx("p",{className:"text-xs mt-2",children:"Your messages are encrypted and stored locally"})]})})}),FK=({pubkey:t,onBack:e,className:n})=>{const{user:r}=no(),{sendMessage:s,protocolMode:i,isLoading:l}=Ou(),{messages:u,hasMoreMessages:f,loadEarlierMessages:h}=HF(t||""),[m,p]=y.useState(""),[x,w]=y.useState(!1),[S,v]=y.useState(!1),b=()=>i===Li.NIP04_ONLY?$t.NIP04:(i===Li.NIP17_ONLY||i===Li.NIP04_OR_NIP17,$t.NIP17),[N,_]=y.useState(b()),T=y.useRef(null),M=i===Li.NIP04_OR_NIP17;y.useEffect(()=>{if(T.current){const F=T.current.querySelector("[data-radix-scroll-area-viewport]");F&&(F.scrollTop=F.scrollHeight)}},[u.length]);const D=y.useCallback(async()=>{if(!(!m.trim()||!t||!r)){w(!0);try{await s({recipientPubkey:t,content:m.trim(),protocol:N}),p("")}catch(F){console.error("Failed to send message:",F)}finally{w(!1)}}},[m,t,r,s,N]),B=y.useCallback(F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),D())},[D]),O=y.useCallback(async()=>{if(!T.current||S)return;const F=T.current.querySelector("[data-radix-scroll-area-viewport]");if(!F)return;const R=F.scrollHeight,L=F.scrollTop;v(!0),h(),setTimeout(()=>{if(F){const U=F.scrollHeight-R;F.scrollTop=L+U}v(!1)},0)},[h,S]);return t?r?c.jsxs(Je,{className:xe("h-full flex flex-col",n),children:[c.jsx($K,{pubkey:t,onBack:e}),c.jsx(Hx,{ref:T,className:"flex-1 p-4",children:u.length===0?c.jsx("div",{className:"h-full flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-muted-foreground",children:[c.jsx("p",{className:"text-sm",children:"No messages yet"}),c.jsx("p",{className:"text-xs mt-1",children:"Send a message to start the conversation"})]})}):c.jsxs("div",{children:[f&&c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx(Le,{variant:"outline",size:"sm",onClick:O,disabled:S,className:"text-xs",children:S?c.jsxs(c.Fragment,{children:[c.jsx(Jo,{className:"h-3 w-3 animate-spin mr-2"}),"Loading..."]}):"Load Earlier Messages"})}),u.map(F=>c.jsx(F4,{message:F,isFromCurrentUser:F.pubkey===r.pubkey},F.id))]})}),c.jsx("div",{className:"p-4 border-t",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ha,{value:m,onChange:F=>p(F.target.value),onKeyDown:B,placeholder:"Type a message... (Enter to send, Shift+Enter for new line)",className:"min-h-[80px] resize-none",disabled:x}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx(Le,{onClick:D,disabled:!m.trim()||x,size:"icon",className:"h-[44px] w-[90px]",children:x?c.jsx(Jo,{className:"h-5 w-5 animate-spin"}):c.jsx(UC,{className:"h-5 w-5"})}),c.jsxs(MK,{value:N,onValueChange:F=>_(F),disabled:!M,children:[c.jsx(D4,{className:"h-[32px] w-[90px] text-xs px-2",children:c.jsx(OK,{})}),c.jsxs(B4,{children:[c.jsx(Xv,{value:$t.NIP17,className:"text-xs",children:"NIP-17"}),c.jsx(Xv,{value:$t.NIP04,className:"text-xs",children:"NIP-04"})]})]})]})]})})]}):c.jsx(Je,{className:xe("h-full flex items-center justify-center",n),children:c.jsx("div",{className:"text-center text-muted-foreground",children:c.jsx("p",{className:"text-sm",children:"Please log in to view messages"})})}):c.jsx(Je,{className:xe("h-full",n),children:c.jsx(BK,{isLoading:l})})},UK=({clearCacheAndRefetch:t})=>{const[e,n]=y.useState(!1),{toast:r}=ui(),{loadingPhase:s,subscriptions:i,scanProgress:l,isDoingInitialLoad:u,lastSync:f,conversations:h}=Ou(),m=async()=>{if(t){n(!0);try{await t(),r({title:"Cache cleared",description:"Refetching messages from relays..."}),n(!1)}catch(v){console.error("Error clearing cache:",v),r({title:"Error",description:"Failed to clear cache. Please try again.",variant:"destructive"}),n(!1)}}},x=(()=>{switch(s){case Bt.IDLE:return{label:"Idle",description:"Not yet initialized",icon:Jo,color:"text-muted-foreground"};case Bt.CACHE:return{label:"Loading from cache",description:"Reading cached messages...",icon:I8,color:"text-blue-500"};case Bt.RELAYS:return{label:"Loading from relays",description:"Fetching messages from Nostr relays...",icon:WC,color:"text-yellow-500"};case Bt.SUBSCRIPTIONS:return{label:"Connecting subscriptions",description:"Setting up real-time message sync...",icon:UE,color:"text-orange-500"};case Bt.READY:return{label:"Ready",description:"All systems operational",icon:as,color:"text-green-500"};default:return{label:"Unknown",description:"Status unknown",icon:Jo,color:"text-muted-foreground"}}})(),w=x.icon,S=v=>{if(!v)return"Never";const b=new Date(v*1e3),_=new Date().getTime()-b.getTime(),T=Math.floor(_/6e4);return T<1?"Just now":T<60?`${T}m ago`:T<1440?`${Math.floor(T/60)}h ago`:b.toLocaleDateString()};return c.jsxs("div",{className:"space-y-4",children:[c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(w,{className:`h-5 w-5 ${x.color} ${s!==Bt.READY?"animate-pulse":""}`}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("p",{className:"font-medium",children:x.label}),u&&c.jsx(Pt,{variant:"secondary",className:"text-xs",children:"Initial Load"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]})]})})}),(l.nip4!==null||l.nip17!==null)&&c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm font-medium",children:"Scanning Messages"}),l.nip4!==null&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"NIP-4 (Legacy)"}),c.jsxs("span",{className:"text-muted-foreground",children:[l.nip4.current," events"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:l.nip4.status})]}),l.nip17!==null&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"NIP-17 (Private)"}),c.jsxs("span",{className:"text-muted-foreground",children:[l.nip17.current," events"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:l.nip17.status})]})]})})}),c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm font-medium",children:"Real-time Subscriptions"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"NIP-4 (Legacy DMs)"}),c.jsx(Pt,{variant:i.isNIP4Connected?"default":"secondary",children:i.isNIP4Connected?"Connected":"Disconnected"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"NIP-17 (Private DMs)"}),c.jsx(Pt,{variant:i.isNIP17Connected?"default":"secondary",children:i.isNIP17Connected?"Connected":"Disconnected"})]})]})]})})}),c.jsx(Je,{children:c.jsx(ot,{className:"pt-6",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm font-medium",children:"Cache Information"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Conversations"}),c.jsx("span",{className:"font-medium",children:h.length})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Last NIP-4 sync"}),c.jsx("span",{className:"font-medium",children:S(f.nip4)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Last NIP-17 sync"}),c.jsx("span",{className:"font-medium",children:S(f.nip17)})]})]})]})})}),t&&c.jsxs(c.Fragment,{children:[c.jsx(xu,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Cache Management"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all cached messages and refetch from relays. This will force a fresh sync."})]}),c.jsx(Le,{onClick:m,disabled:e,variant:"outline",className:"w-full",children:e?c.jsxs(c.Fragment,{children:[c.jsx(Jo,{className:"mr-2 h-4 w-4 animate-spin"}),"Clearing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(UE,{className:"mr-2 h-4 w-4"}),"Clear Cache & Refetch"]})})]})]})]})},zK=({className:t})=>{const[e,n]=y.useState(null),[r,s]=y.useState(!1),i=Px(),{clearCacheAndRefetch:l}=Ou(),u=!i||!e,f=!i||e,h=y.useCallback(p=>{n(p)},[]),m=y.useCallback(()=>{n(null)},[]);return c.jsxs(c.Fragment,{children:[c.jsx(Tl,{open:r,onOpenChange:s,children:c.jsxs(oa,{className:"max-w-md",children:[c.jsxs(ia,{children:[c.jsx(Pl,{children:"Messaging Status"}),c.jsx(Rl,{children:"View loading status, cache info, and connection details"})]}),c.jsx(UK,{clearCacheAndRefetch:l})]})}),c.jsxs("div",{className:xe("flex gap-4 overflow-hidden",t),children:[c.jsx("div",{className:xe("md:w-80 md:flex-shrink-0",i&&!u&&"hidden",i&&u&&"w-full"),children:c.jsx(oK,{selectedPubkey:e,onSelectConversation:h,className:"h-full",onStatusClick:()=>s(!0)})}),c.jsx("div",{className:xe("flex-1 md:min-w-0",i&&!f&&"hidden",i&&f&&"w-full"),children:c.jsx(FK,{pubkey:e,onBack:i?m:void 0,className:"h-full"})})]})]})},WK=()=>(BR({title:"Messages",description:"Private encrypted messaging on Nostr"}),c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"container mx-auto p-4 h-screen flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:"Messages"}),c.jsx(_x,{})]}),c.jsx(zK,{className:"flex-1"})]})})),Af=()=>{const t=Vl();return BR({title:"404 - Page Not Found",description:"The page you are looking for could not be found. Return to the home page to continue browsing."}),y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"404"}),c.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 underline",children:"Return to Home"})]})})};function HK(){const{nip19:t}=sp();if(!t)return c.jsx(Af,{});let e;try{e=tr.decode(t)}catch{return c.jsx(Af,{})}const{type:n}=e;switch(n){case"npub":case"nprofile":return c.jsx("div",{children:"Profile placeholder"});case"note":return c.jsx("div",{children:"Note placeholder"});case"nevent":return c.jsx("div",{children:"Event placeholder"});case"naddr":return c.jsx("div",{children:"Addressable event placeholder"});default:return c.jsx(Af,{})}}function VK(){return c.jsxs(HU,{children:[c.jsx(GU,{}),c.jsx(dH,{children:c.jsxs(LU,{children:[c.jsx(is,{path:"/",element:c.jsx(PH,{})}),c.jsx(is,{path:"/game/:pubkey/:gameIdentifier",element:c.jsx(kq,{})}),c.jsx(is,{path:"/score/:eventId",element:c.jsx(Lq,{})}),c.jsx(is,{path:"/player/:pubkey",element:c.jsx($q,{})}),c.jsx(is,{path:"/developers",element:c.jsx(Bq,{})}),c.jsx(is,{path:"/playground",element:c.jsx(Fq,{})}),c.jsx(is,{path:"/messages",element:c.jsx(WK,{})}),c.jsx(is,{path:"/:nip19",element:c.jsx(HK,{})}),c.jsx(is,{path:"*",element:c.jsx(Af,{})})]})})]})}const qK=uN({plugins:[rM()]}),KK=new h3({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:6e4,gcTime:1/0}}}),GK={theme:"light",relayUrl:"wss://relay.ditto.pub"},YK=[{url:"wss://relay.ditto.pub",name:"Ditto"},{url:"wss://relay.nostr.band",name:"Nostr.Band"},{url:"wss://relay.damus.io",name:"Damus"},{url:"wss://relay.primal.net",name:"Primal"}],QK={enabled:!0,protocolMode:Li.NIP04_OR_NIP17};function ZK(){return c.jsx(X3,{head:qK,children:c.jsx(sF,{storageKey:"nostr:app-config",defaultConfig:GK,presetRelays:YK,children:c.jsx(v3,{client:KK,children:c.jsx(N6,{storageKey:"nostr:login",children:c.jsx(k6,{children:c.jsx(FF,{children:c.jsx(VF,{config:QK,children:c.jsxs(Gi,{children:[c.jsx(P$,{}),c.jsx(y.Suspense,{children:c.jsx(VK,{})})]})})})})})})})})}VI.createRoot(document.getElementById("root")).render(c.jsx(ZI,{children:c.jsx(ZK,{})}));
